(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[9524],{8340(e,s,n){e.exports={src:Object.assign(Object.create({toString(){return this.src}}),{srcSet:n.p+"assets/ideal-img/slack.9243e01.640.png 640w,"+n.p+"assets/ideal-img/slack.3f53338.1920.png 1920w",images:[{path:n.p+"assets/ideal-img/slack.9243e01.640.png",width:640,height:380},{path:n.p+"assets/ideal-img/slack.3f53338.1920.png",width:1920,height:1140}],src:n.p+"assets/ideal-img/slack.9243e01.640.png",placeholder:void 0,width:640,height:380}),preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAABYlAAAWJQFJUiTwAAAApElEQVR4nB3MSw6DMAwAUe5/xcYkdgQ0hHwrJHZTtbvZzFvO90nJhV4brTR668w2abUxx4fPmIzaWWptWIzEGFEzzOzf0Yxt28g5c983Sy2N40jkfJHTSU6JUgrjJ41JaYXneVj2bUecQ31AZcWLR4NiIRK8IuK4roslHQn3ElbxOBFesiIirM4RVs8PmmOwHPvxv8x7zAdMlaBGsIiqktKb3jtfbjPeDxqOC+YAAAAASUVORK5CYII="}},35288(e,s,n){"use strict";n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"observability/slack_integration","title":"Slack - \u8bb0\u5f55LLM\u8f93\u5165/\u8f93\u51fa\u548c\u5f02\u5e38","description":"\u6211\u4eec\u5e0c\u671b\u4e86\u89e3\u5982\u4f55\u6539\u8fdb\u56de\u8c03\uff01\u8bf7\u4e0eLiteLLM \u521b\u59cb\u4eba\u4f1a\u9762\uff0c\u6216\u52a0\u5165\u6211\u4eec\u7684Discord","source":"@site/docs/observability/slack_integration.md","sourceDirName":"observability","slug":"/observability/slack_integration","permalink":"/docs/observability/slack_integration","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"integrationsSidebar","previous":{"title":"Sentry - \u8bb0\u5f55LLM\u5f02\u5e38","permalink":"/docs/observability/sentry"},"next":{"title":"Sumologic","permalink":"/docs/observability/sumologic_integration"}}');var l=n(74848),a=n(28453),t=n(90547);const r={},o="Slack - \u8bb0\u5f55LLM\u8f93\u5165/\u8f93\u51fa\u548c\u5f02\u5e38",c={},d=[{value:"\u5148\u51b3\u6761\u4ef6",id:"\u5148\u51b3\u6761\u4ef6",level:2},{value:"\u6b65\u9aa4 1",id:"\u6b65\u9aa4-1",level:3},{value:"\u6b65\u9aa4 2",id:"\u6b65\u9aa4-2",level:3},{value:"\u5feb\u901f\u5f00\u59cb",id:"\u5feb\u901f\u5f00\u59cb",level:2},{value:"\u521b\u5efa\u81ea\u5b9a\u4e49\u56de\u8c03\u4ee5\u8bb0\u5f55\u5230Slack",id:"\u521b\u5efa\u81ea\u5b9a\u4e49\u56de\u8c03\u4ee5\u8bb0\u5f55\u5230slack",level:3},{value:"\u5c06\u56de\u8c03\u4f20\u9012\u7ed9 LiteLLM",id:"\u5c06\u56de\u8c03\u4f20\u9012\u7ed9-litellm",level:3},{value:"\u8054\u7cfb\u548c\u652f\u6301",id:"\u8054\u7cfb\u548c\u652f\u6301",level:2}];function h(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"slack---\u8bb0\u5f55llm\u8f93\u5165\u8f93\u51fa\u548c\u5f02\u5e38",children:"Slack - \u8bb0\u5f55LLM\u8f93\u5165/\u8f93\u51fa\u548c\u5f02\u5e38"})}),"\n",(0,l.jsx)(t.A,{img:n(8340)}),"\n",(0,l.jsx)(s.admonition,{type:"info",children:(0,l.jsxs)(s.p,{children:["\u6211\u4eec\u5e0c\u671b\u4e86\u89e3\u5982\u4f55\u6539\u8fdb\u56de\u8c03\uff01\u8bf7\u4e0eLiteLLM ",(0,l.jsx)(s.a,{href:"https://calendly.com/d/4mp-gd3-k5k/berriai-1-1-onboarding-litellm-hosted-version",children:"\u521b\u59cb\u4eba"}),"\u4f1a\u9762\uff0c\u6216\u52a0\u5165\u6211\u4eec\u7684",(0,l.jsx)(s.a,{href:"https://discord.gg/wuPM9dRgDw",children:"Discord"})]})}),"\n",(0,l.jsx)(s.h2,{id:"\u5148\u51b3\u6761\u4ef6",children:"\u5148\u51b3\u6761\u4ef6"}),"\n",(0,l.jsx)(s.h3,{id:"\u6b65\u9aa4-1",children:"\u6b65\u9aa4 1"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-shell",children:"pip install litellm\n"})}),"\n",(0,l.jsx)(s.h3,{id:"\u6b65\u9aa4-2",children:"\u6b65\u9aa4 2"}),"\n",(0,l.jsxs)(s.p,{children:["\u4ece ",(0,l.jsx)(s.a,{href:"https://api.slack.com/messaging/webhooks",children:"https://api.slack.com/messaging/webhooks"})," \u83b7\u53d6\u4e00\u4e2a Slack Webhook URL"]}),"\n",(0,l.jsx)(s.h2,{id:"\u5feb\u901f\u5f00\u59cb",children:"\u5feb\u901f\u5f00\u59cb"}),"\n",(0,l.jsx)(s.h3,{id:"\u521b\u5efa\u81ea\u5b9a\u4e49\u56de\u8c03\u4ee5\u8bb0\u5f55\u5230slack",children:"\u521b\u5efa\u81ea\u5b9a\u4e49\u56de\u8c03\u4ee5\u8bb0\u5f55\u5230Slack"}),"\n",(0,l.jsxs)(s.p,{children:["\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u81ea\u5b9a\u4e49\u56de\u8c03\uff0c\u7528\u4e8e\u5c06\u65e5\u5fd7\u53d1\u9001\u81f3 Slack webhook\uff0c\u8bf7\u53c2\u9605 ",(0,l.jsx)(s.a,{href:"https://docs.litellm.ai/docs/observability/custom_callback",children:"litellm \u81ea\u5b9a\u4e49\u56de\u8c03"})]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-python",children:"def send_slack_alert(\n        kwargs,\n        completion_response,\n        start_time,\n        end_time,\n):\n    print(\n        \"\u5728\u81ea\u5b9a\u4e49Slack\u56de\u8c03\u51fd\u6570\u4e2d\"\n    )\n    import requests\n    import json\n\n    # \u5b9a\u4e49 Slack Webhook URL\n    # \u4ece https://api.slack.com/messaging/webhooks \u83b7\u53d6\u5b83\n    slack_webhook_url = os.environ['SLACK_WEBHOOK_URL']   # \"https://hooks.slack.com/services/<>/<>/<>\"\n\n    # \u4ece kwargs \u4e2d\u79fb\u9664 litellm_params \u4e0b\u7684 api_key\n    if kwargs.get('litellm_params'):\n        kwargs['litellm_params'].pop('api_key', None)\n        if kwargs['litellm_params'].get('metadata'):\n            kwargs['litellm_params']['metadata'].pop('deployment', None)\n    # \u4ece metadata \u4e2d\u79fb\u9664 deployment\n    if kwargs.get('metadata'):\n        kwargs['metadata'].pop('deployment', None)\n    # \u9632\u6b62 api_key \u88ab\u8bb0\u5f55\n    if kwargs.get('api_key'):\n        kwargs.pop('api_key', None)\n\n    # \u5b9a\u4e49\u6587\u672c\u8d1f\u8f7d\uff0c\u53d1\u9001\u7684\u6570\u636e\u6765\u81ea litellm \u81ea\u5b9a\u4e49\u56de\u8c03\n    text_payload = f\"\"\"LiteLLM \u65e5\u5fd7\uff1akwargs: {str(kwargs)}\\n\\n, response: {str(completion_response)}\\n\\n, start time{str(start_time)} end time: {str(end_time)}\n    \"\"\"\n    payload = {\n        \"text\": text_payload\n    }\n\n    # \u8bbe\u7f6e\u5934\u90e8\u4fe1\u606f\n    headers = {\n        \"Content-type\": \"application/json\"\n    }\n\n    # \u53d1\u9001 POST \u8bf7\u6c42\n    response = requests.post(slack_webhook_url, json=payload, headers=headers)\n\n    # \u68c0\u67e5\u54cd\u5e94\u72b6\u6001\u7801\n    if response.status_code == 200:\n        print(\"\u6210\u529f\u53d1\u9001\u6d88\u606f\u81f3 Slack\uff01\")\n    else:\n        print(f\"\u53d1\u9001\u6d88\u606f\u81f3 Slack \u5931\u8d25\u3002\u72b6\u6001\u7801\uff1a{response.status_code}\")\n        print(response.json())\n"})}),"\n",(0,l.jsx)(s.h3,{id:"\u5c06\u56de\u8c03\u4f20\u9012\u7ed9-litellm",children:"\u5c06\u56de\u8c03\u4f20\u9012\u7ed9 LiteLLM"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-python",children:"litellm.success_callback = [send_slack_alert]\n"})}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-python",children:'import litellm\nlitellm.success_callback = [send_slack_alert] # \u8bb0\u5f55\u6210\u529f\u4fe1\u606f\nlitellm.failure_callback = [send_slack_alert] # \u8bb0\u5f55\u5f02\u5e38\n\n# \u8fd9\u5c06\u5f15\u53d1\u4e00\u4e2a\u5f02\u5e38\nresponse = litellm.completion(\n    model="gpt-2",\n    messages=[\n        {\n            "role": "user",\n            "content": "Hi \ud83d\udc4b - i\'m openai"\n        }\n    ]\n)\n'})}),"\n",(0,l.jsx)(s.h2,{id:"\u8054\u7cfb\u548c\u652f\u6301",children:"\u8054\u7cfb\u548c\u652f\u6301"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.a,{href:"https://calendly.com/d/4mp-gd3-k5k/berriai-1-1-onboarding-litellm-hosted-version",children:"\u9884\u7ea6\u6f14\u793a \ud83d\udc4b"})}),"\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.a,{href:"https://discord.gg/wuPM9dRgDw",children:"\u793e\u533a Discord \ud83d\udcad"})}),"\n",(0,l.jsx)(s.li,{children:"\u7535\u8bdd \ud83d\udcde +1 (770) 8783-106 / \u202d+1 (412) 618-6238\u202c"}),"\n",(0,l.jsxs)(s.li,{children:["\u90ae\u4ef6 \u2709\ufe0f ",(0,l.jsx)(s.a,{href:"mailto:ishaan@berri.ai",children:"ishaan@berri.ai"})," / ",(0,l.jsx)(s.a,{href:"mailto:krrish@berri.ai",children:"krrish@berri.ai"})]}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}}}]);