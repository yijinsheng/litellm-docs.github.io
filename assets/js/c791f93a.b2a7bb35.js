"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[91244],{28453(e,n,t){t.d(n,{R:()=>d,x:()=>c});var r=t(96540);const s={},i=r.createContext(s);function d(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(i.Provider,{value:n},e.children)}},43179(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>x,frontMatter:()=>d,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"rag_ingest","title":"/rag/ingest","description":"\u5168\u529f\u80fd\u6587\u6863\u5bfc\u5165\u7ba1\u9053\uff1a\u4e0a\u4f20 \u2192 \u5206\u5757 \u2192 \u5d4c\u5165 \u2192 \u5411\u91cf\u5b58\u50a8","source":"@site/docs/rag_ingest.md","sourceDirName":".","slug":"/rag_ingest","permalink":"/docs/rag_ingest","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u8fc7\u6ee4\u4ee3\u7406\u7aef\u70b9\u4e0a\u7684\u62a4\u680f","permalink":"/docs/proxy/pass_through_guardrails"},"next":{"title":"/rag/query","permalink":"/docs/rag_query"}}');var s=t(74848),i=t(28453);const d={},c="/rag/ingest",l={},h=[{value:"\u5feb\u901f\u5165\u95e8",id:"\u5feb\u901f\u5165\u95e8",level:2},{value:"OpenAI",id:"openai",level:3},{value:"Bedrock",id:"bedrock",level:3},{value:"Vertex AI RAG\u5f15\u64ce",id:"vertex-ai-rag\u5f15\u64ce",level:3},{value:"\u54cd\u5e94",id:"\u54cd\u5e94",level:2},{value:"\u4f7f\u7528RAG\u8fdb\u884c\u67e5\u8be2",id:"\u4f7f\u7528rag\u8fdb\u884c\u67e5\u8be2",level:2},{value:"\u76f4\u63a5\u5411\u91cf\u5b58\u50a8\u641c\u7d22",id:"\u76f4\u63a5\u5411\u91cf\u5b58\u50a8\u641c\u7d22",level:3},{value:"\u7aef\u5230\u7aef\u793a\u4f8b",id:"\u7aef\u5230\u7aef\u793a\u4f8b",level:2},{value:"OpenAI",id:"openai-1",level:3},{value:"1. \u5bfc\u5165\u6587\u6863",id:"1-\u5bfc\u5165\u6587\u6863",level:4},{value:"2. \u67e5\u8be2",id:"2-\u67e5\u8be2",level:4},{value:"\u8bf7\u6c42\u53c2\u6570",id:"\u8bf7\u6c42\u53c2\u6570",level:2},{value:"\u6839\u7ea7",id:"\u6839\u7ea7",level:3},{value:"ingest_options",id:"ingest_options",level:3},{value:"vector_store (OpenAI)",id:"vector_store-openai",level:3},{value:"vector_store (Bedrock)",id:"vector_store-bedrock",level:3},{value:"vector_store (Vertex AI)",id:"vector_store-vertex-ai",level:3},{value:"\u8f93\u5165\u793a\u4f8b",id:"\u8f93\u5165\u793a\u4f8b",level:2},{value:"\u6587\u4ef6\uff08Base64\uff09",id:"\u6587\u4ef6base64",level:3},{value:"\u6587\u4ef6URL",id:"\u6587\u4ef6url",level:3},{value:"\u5206\u5757\u7b56\u7565",id:"\u5206\u5757\u7b56\u7565",level:2},{value:"Vertex AI RAG\u5f15\u64ce",id:"vertex-ai-rag\u5f15\u64ce-1",level:3}];function o(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"ragingest",children:"/rag/ingest"})}),"\n",(0,s.jsxs)(n.p,{children:["\u5168\u529f\u80fd\u6587\u6863\u5bfc\u5165\u7ba1\u9053\uff1a",(0,s.jsx)(n.strong,{children:"\u4e0a\u4f20 \u2192 \u5206\u5757 \u2192 \u5d4c\u5165 \u2192 \u5411\u91cf\u5b58\u50a8"})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u529f\u80fd"}),(0,s.jsx)(n.th,{children:"\u652f\u6301"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u65e5\u5fd7\u8bb0\u5f55"}),(0,s.jsx)(n.td,{children:"\u662f"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u652f\u6301\u7684\u670d\u52a1\u63d0\u4f9b\u5546"}),(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.code,{children:"openai"}),", ",(0,s.jsx)(n.code,{children:"bedrock"}),", ",(0,s.jsx)(n.code,{children:"vertex_ai"}),", ",(0,s.jsx)(n.code,{children:"gemini"})]})]})]})]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["\u5bfc\u5165\u6587\u6863\u540e\uff0c\u8bf7\u4f7f\u7528 ",(0,s.jsx)(n.a,{href:"/docs/rag_query",children:"/rag/query"})," \u6765\u641c\u7d22\u5e76\u751f\u6210\u57fa\u4e8e\u60a8\u5bfc\u5165\u5185\u5bb9\u7684\u54cd\u5e94\u3002"]})}),"\n",(0,s.jsx)(n.h2,{id:"\u5feb\u901f\u5165\u95e8",children:"\u5feb\u901f\u5165\u95e8"}),"\n",(0,s.jsx)(n.h3,{id:"openai",children:"OpenAI"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'showLineNumbers title="\u5c06\u6570\u636e\u4e0a\u4f20\u5230OpenAI\u5411\u91cf\u5b58\u50a8"',children:'curl -X POST "http://localhost:4000/v1/rag/ingest" \\\n    -H "Authorization: Bearer sk-1234" \\\n    -H "Content-Type: application/json" \\\n    -d "{\n        \\"file\\": {\n            \\"filename\\": \\"document.txt\\",\n            \\"content\\": \\"$(base64 -i document.txt)\\",\n            \\"content_type\\": \\"text/plain\\"\n        },\n        \\"ingest_options\\": {\n            \\"vector_store\\": {\n                \\"custom_llm_provider\\": \\"openai\\"\n            }\n        }\n    }"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"bedrock",children:"Bedrock"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'showLineNumbers title="\u5c06\u6570\u636e\u4e0a\u4f20\u5230Bedrock\u77e5\u8bc6\u5e93"',children:'curl -X POST "http://localhost:4000/v1/rag/ingest" \\\n    -H "Authorization: Bearer sk-1234" \\\n    -H "Content-Type: application/json" \\\n    -d "{\n        \\"file\\": {\n            \\"filename\\": \\"document.txt\\",\n            \\"content\\": \\"$(base64 -i document.txt)\\",\n            \\"content_type\\": \\"text/plain\\"\n        },\n        \\"ingest_options\\": {\n            \\"vector_store\\": {\n                \\"custom_llm_provider\\": \\"bedrock\\"\n            }\n        }\n    }"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"vertex-ai-rag\u5f15\u64ce",children:"Vertex AI RAG\u5f15\u64ce"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'showLineNumbers title="\u5c06\u6570\u636e\u4e0a\u4f20\u5230Vertex AI RAG\u8bed\u6599\u5e93"',children:'curl -X POST "http://localhost:4000/v1/rag/ingest" \\\n    -H "Authorization: Bearer sk-1234" \\\n    -H "Content-Type: application/json" \\\n    -d "{\n        \\"file\\": {\n            \\"filename\\": \\"document.txt\\",\n            \\"content\\": \\"$(base64 -i document.txt)\\",\n            \\"content_type\\": \\"text/plain\\"\n        },\n        \\"ingest_options\\": {\n            \\"vector_store\\": {\n                \\"custom_llm_provider\\": \\"vertex_ai\\",\n                \\"vector_store_id\\": \\"your-corpus-id\\",\n                \\"gcs_bucket\\": \\"your-gcs-bucket\\"\n            }\n        }\n    }"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u54cd\u5e94",children:"\u54cd\u5e94"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "ingest_abc123",\n  "status": "completed",\n  "vector_store_id": "vs_xyz789",\n  "file_id": "file_123"\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u4f7f\u7528rag\u8fdb\u884c\u67e5\u8be2",children:"\u4f7f\u7528RAG\u8fdb\u884c\u67e5\u8be2"}),"\n",(0,s.jsxs)(n.p,{children:["\u5bfc\u5165\u6587\u6863\u540e\uff0c\u8bf7\u4f7f\u7528 ",(0,s.jsx)(n.a,{href:"/docs/rag_query",children:"/rag/query"})," \u7aef\u70b9\u6765\u641c\u7d22\u5e76\u751f\u6210LLM\u54cd\u5e94\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'showLineNumbers title="RAG\u67e5\u8be2"',children:'curl -X POST "http://localhost:4000/v1/rag/query" \\\n    -H "Authorization: Bearer sk-1234" \\\n    -H "Content-Type: application/json" \\\n    -d \'{\n        "model": "gpt-4o-mini",\n        "messages": [{"role": "user", "content": "What is the main topic?"}],\n        "retrieval_config": {\n            "vector_store_id": "vs_xyz789",\n            "custom_llm_provider": "openai",\n            "top_k": 5\n        }\n    }\'\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u8fd9\u5c06\uff1a"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u5728\u5411\u91cf\u5b58\u50a8\u4e2d\u641c\u7d22\u76f8\u5173\u4e0a\u4e0b\u6587"}),"\n",(0,s.jsx)(n.li,{children:"\u5c06\u4e0a\u4e0b\u6587\u6dfb\u52a0\u5230\u60a8\u7684\u6d88\u606f\u524d"}),"\n",(0,s.jsx)(n.li,{children:"\u751f\u6210LLM\u54cd\u5e94"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u76f4\u63a5\u5411\u91cf\u5b58\u50a8\u641c\u7d22",children:"\u76f4\u63a5\u5411\u91cf\u5b58\u50a8\u641c\u7d22"}),"\n",(0,s.jsxs)(n.p,{children:["\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"/vector_stores/{vector_store_id}/search"})," \u6765\u641c\u7d22\u5411\u91cf\u5b58\u50a8\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'showLineNumbers title="\u641c\u7d22\u5411\u91cf\u5b58\u50a8"',children:'curl -X POST "http://localhost:4000/v1/vector_stores/vs_xyz789/search" \\\n    -H "Authorization: Bearer sk-1234" \\\n    -H "Content-Type: application/json" \\\n    -d \'{\n        "query": "What is the main topic?",\n        "max_num_results": 5\n    }\'\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u7aef\u5230\u7aef\u793a\u4f8b",children:"\u7aef\u5230\u7aef\u793a\u4f8b"}),"\n",(0,s.jsx)(n.h3,{id:"openai-1",children:"OpenAI"}),"\n",(0,s.jsx)(n.h4,{id:"1-\u5bfc\u5165\u6587\u6863",children:"1. \u5bfc\u5165\u6587\u6863"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'showLineNumbers title="\u6b65\u9aa41\uff1a\u5bfc\u5165"',children:'curl -X POST "http://localhost:4000/v1/rag/ingest" \\\n    -H "Authorization: Bearer sk-1234" \\\n    -H "Content-Type: application/json" \\\n    -d "{\n        \\"file\\": {\n            \\"filename\\": \\"test_document.txt\\",\n            \\"content\\": \\"$(base64 -i test_document.txt)\\",\n            \\"content_type\\": \\"text/plain\\"\n        },\n        \\"ingest_options\\": {\n            \\"name\\": \\"test-basic-ingest\\",\n            \\"vector_store\\": {\n                \\"custom_llm_provider\\": \\"openai\\"\n            }\n        }\n    }"\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u54cd\u5e94\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "id": "ingest_d834f544-fc5e-4751-902d-fb0bcc183b85",\n  "status": "completed",\n  "vector_store_id": "vs_692658d337c4819183f2ad8488d12fc9",\n  "file_id": "file-M2pJJiWH56cfUP4Fe7rJay"\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"2-\u67e5\u8be2",children:"2. \u67e5\u8be2"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'showLineNumbers title="\u6b65\u9aa42\uff1a\u67e5\u8be2"',children:'curl -X POST "http://localhost:4000/v1/vector_stores/vs_692658d337c4819183f2ad8488d12fc9/search" \\\n    -H "Authorization: Bearer sk-1234" \\\n    -H "Content-Type: application/json" \\\n    -d \'{\n        "query": "What is LiteLLM?",\n        "custom_llm_provider": "openai"\n    }\'\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u54cd\u5e94\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "object": "vector_store.search_results.page",\n  "search_query": ["What is LiteLLM?"],\n  "data": [\n    {\n      "file_id": "file-M2pJJiWH56cfUP4Fe7rJay",\n      "filename": "test_document.txt",\n      "score": 0.4004629778869299,\n      "attributes": {},\n      "content": [\n        {\n          "type": "text",\n          "text": "Test document abc123 for RAG ingestion.\\nThis is a sample document to test the RAG ingest API.\\nLiteLLM provides a unified interface for vector stores."\n        }\n      ]\n    }\n  ],\n  "has_more": false,\n  "next_page": null\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u8bf7\u6c42\u53c2\u6570",children:"\u8bf7\u6c42\u53c2\u6570"}),"\n",(0,s.jsx)(n.h3,{id:"\u6839\u7ea7",children:"\u6839\u7ea7"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u53c2\u6570"}),(0,s.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(n.th,{children:"\u5fc5\u586b"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"file"})}),(0,s.jsx)(n.td,{children:"object"}),(0,s.jsx)(n.td,{children:"\u81f3\u5c11\u9700\u8981\u4e00\u4e2a\uff1afile/file_url/file_id"}),(0,s.jsx)(n.td,{children:"\u57fa64\u7f16\u7801\u7684\u6587\u4ef6"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"file.filename"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u662f"}),(0,s.jsx)(n.td,{children:"\u5305\u542b\u6269\u5c55\u540d\u7684\u6587\u4ef6\u540d"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"file.content"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u662f"}),(0,s.jsx)(n.td,{children:"\u57fa64\u7f16\u7801\u7684\u5185\u5bb9"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"file.content_type"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u662f"}),(0,s.jsxs)(n.td,{children:["MIME\u7c7b\u578b\uff08\u4f8b\u5982\uff1a",(0,s.jsx)(n.code,{children:"text/plain"}),"\uff09"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"file_url"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u81f3\u5c11\u9700\u8981\u4e00\u4e2a\uff1afile/file_url/file_id"}),(0,s.jsx)(n.td,{children:"\u4eceURL\u83b7\u53d6\u6587\u4ef6\u7684\u94fe\u63a5"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"file_id"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u81f3\u5c11\u9700\u8981\u4e00\u4e2a\uff1afile/file_url/file_id"}),(0,s.jsx)(n.td,{children:"\u5b58\u5728\u7684\u6587\u4ef6ID"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ingest_options"})}),(0,s.jsx)(n.td,{children:"object"}),(0,s.jsx)(n.td,{children:"\u662f"}),(0,s.jsx)(n.td,{children:"\u7ba1\u9053\u914d\u7f6e"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"ingest_options",children:"ingest_options"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u53c2\u6570"}),(0,s.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(n.th,{children:"\u5fc5\u586b"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"vector_store"})}),(0,s.jsx)(n.td,{children:"object"}),(0,s.jsx)(n.td,{children:"\u662f"}),(0,s.jsx)(n.td,{children:"\u5411\u91cf\u5b58\u50a8\u914d\u7f6e"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"name"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u5426"}),(0,s.jsx)(n.td,{children:"\u7528\u4e8e\u65e5\u5fd7\u8bb0\u5f55\u7684\u7ba1\u9053\u540d\u79f0"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"vector_store-openai",children:"vector_store (OpenAI)"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u53c2\u6570"}),(0,s.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(n.th,{children:"\u9ed8\u8ba4\u503c"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"custom_llm_provider"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'"openai"'})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"vector_store_id"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"auto-create"}),(0,s.jsx)(n.td,{children:"\u5b58\u5728\u7684\u5411\u91cf\u5b58\u50a8ID"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"vector_store-bedrock",children:"vector_store (Bedrock)"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u53c2\u6570"}),(0,s.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(n.th,{children:"\u9ed8\u8ba4\u503c"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"custom_llm_provider"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'"bedrock"'})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"vector_store_id"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"auto-create"}),(0,s.jsx)(n.td,{children:"\u5b58\u5728\u7684\u77e5\u8bc6\u5e93ID"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"wait_for_ingestion"})}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"false"})}),(0,s.jsx)(n.td,{children:"\u7b49\u5f85\u7d22\u5f15\u5b8c\u6210"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ingestion_timeout"})}),(0,s.jsx)(n.td,{children:"integer"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"300"})}),(0,s.jsx)(n.td,{children:"\u8d85\u65f6\u79d2\u6570\uff08\u5982\u679c\u7b49\u5f85\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"s3_bucket"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"auto-create"}),(0,s.jsx)(n.td,{children:"\u7528\u4e8e\u5b58\u50a8\u6587\u6863\u7684S3\u6876"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"s3_prefix"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'"data/"'})}),(0,s.jsx)(n.td,{children:"S3\u952e\u524d\u7f00"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"embedding_model"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"amazon.titan-embed-text-v2:0"})}),(0,s.jsx)(n.td,{children:"Bedrock\u5d4c\u5165\u6a21\u578b"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"aws_region_name"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"us-west-2"})}),(0,s.jsx)(n.td,{children:"AWS\u533a\u57df"})]})]})]}),"\n",(0,s.jsxs)(n.admonition,{title:"Bedrock\u81ea\u52a8\u521b\u5efa",type:"info",children:[(0,s.jsxs)(n.p,{children:["\u5f53\u7701\u7565",(0,s.jsx)(n.code,{children:"vector_store_id"}),"\u65f6\uff0cLiteLLM\u4f1a\u81ea\u52a8\u521b\u5efa\uff1a"]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u7528\u4e8e\u5b58\u50a8\u6587\u6863\u7684S3\u6876"}),"\n",(0,s.jsx)(n.li,{children:"OpenSearch Serverless\u96c6\u5408"}),"\n",(0,s.jsx)(n.li,{children:"\u5177\u6709\u6240\u9700\u6743\u9650\u7684\u89d2\u8272"}),"\n",(0,s.jsx)(n.li,{children:"Bedrock\u77e5\u8bc6\u5e93"}),"\n",(0,s.jsx)(n.li,{children:"\u6570\u636e\u6e90"}),"\n"]})]}),"\n",(0,s.jsx)(n.h3,{id:"vector_store-vertex-ai",children:"vector_store (Vertex AI)"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u53c2\u6570"}),(0,s.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(n.th,{children:"\u9ed8\u8ba4\u503c"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"custom_llm_provider"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"-"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:'"vertex_ai"'})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"vector_store_id"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"\u5fc5\u586b"})}),(0,s.jsx)(n.td,{children:"RAG\u8bed\u6599\u5e93ID"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"gcs_bucket"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"\u5fc5\u586b"})}),(0,s.jsx)(n.td,{children:"\u7528\u4e8e\u6587\u4ef6\u4e0a\u4f20\u7684GCS\u6876"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"vertex_project"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsxs)(n.td,{children:["env ",(0,s.jsx)(n.code,{children:"VERTEXAI_PROJECT"})]}),(0,s.jsx)(n.td,{children:"GCP\u9879\u76eeID"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"vertex_location"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"us-central1"})}),(0,s.jsx)(n.td,{children:"GCP\u533a\u57df"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"vertex_credentials"})}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"ADC"}),(0,s.jsx)(n.td,{children:"\u8d44\u6e90\u8def\u5f84"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"wait_for_import"})}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"true"})}),(0,s.jsx)(n.td,{children:"\u7b49\u5f85\u5bfc\u5165\u5b8c\u6210"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"import_timeout"})}),(0,s.jsx)(n.td,{children:"integer"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"600"})}),(0,s.jsx)(n.td,{children:"\u8d85\u65f6\u79d2\u6570\uff08\u5982\u679c\u7b49\u5f85\uff09"})]})]})]}),"\n",(0,s.jsx)(n.admonition,{title:"Vertex AI\u524d\u63d0\u6761\u4ef6",type:"info",children:(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u5728Vertex AI\u63a7\u5236\u53f0\u6216\u901a\u8fc7API\u521b\u5efaRAG\u8bed\u6599\u5e93"}),"\n",(0,s.jsx)(n.li,{children:"\u521b\u5efa\u7528\u4e8e\u6587\u4ef6\u4e0a\u4f20\u7684GCS\u6876"}),"\n",(0,s.jsxs)(n.li,{children:["\u901a\u8fc7",(0,s.jsx)(n.code,{children:"gcloud auth application-default login"}),"\u8fdb\u884c\u8ba4\u8bc1"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5b89\u88c5\uff1a",(0,s.jsx)(n.code,{children:"pip install 'google-cloud-aiplatform>=1.60.0'"})]}),"\n"]})}),"\n",(0,s.jsx)(n.h2,{id:"\u8f93\u5165\u793a\u4f8b",children:"\u8f93\u5165\u793a\u4f8b"}),"\n",(0,s.jsx)(n.h3,{id:"\u6587\u4ef6base64",children:"\u6587\u4ef6\uff08Base64\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:'title="\u8bf7\u6c42\u4f53"',children:'{\n  "file": {\n    "filename": "document.txt",\n    "content": "<base64-encoded-content>",\n    "content_type": "text/plain"\n  },\n  "ingest_options": {\n    "vector_store": {"custom_llm_provider": "openai"}\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u6587\u4ef6url",children:"\u6587\u4ef6URL"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'showLineNumbers title="\u4eceURL\u4e0a\u4f20\u6587\u4ef6"',children:'curl -X POST "http://localhost:4000/v1/rag/ingest" \\\n    -H "Authorization: Bearer sk-1234" \\\n    -H "Content-Type: application/json" \\\n    -d \'{\n        "file_url": "https://example.com/document.pdf",\n        "ingest_options": {"vector_store": {"custom_llm_provider": "openai"}}\n    }\'\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u5206\u5757\u7b56\u7565",children:"\u5206\u5757\u7b56\u7565"}),"\n",(0,s.jsxs)(n.p,{children:["\u63a7\u5236\u6587\u6863\u5728\u5d4c\u5165\u524d\u5982\u4f55\u88ab\u5206\u5272\u6210\u7247\u6bb5\u3002\u6307\u5b9a",(0,s.jsx)(n.code,{children:"chunking_strategy"}),"\u5728",(0,s.jsx)(n.code,{children:"ingest_options"}),"\u4e2d\u3002"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u53c2\u6570"}),(0,s.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(n.th,{children:"\u9ed8\u8ba4\u503c"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"chunk_size"})}),(0,s.jsx)(n.td,{children:"integer"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"1000"})}),(0,s.jsx)(n.td,{children:"\u6bcf\u4e2a\u5206\u5757\u7684\u6700\u5927\u5927\u5c0f"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"chunk_overlap"})}),(0,s.jsx)(n.td,{children:"integer"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"200"})}),(0,s.jsx)(n.td,{children:"\u8fde\u7eed\u5206\u5757\u4e4b\u95f4\u7684\u91cd\u53e0"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"vertex-ai-rag\u5f15\u64ce-1",children:"Vertex AI RAG\u5f15\u64ce"}),"\n",(0,s.jsxs)(n.p,{children:["Vertex AI RAG\u5f15\u64ce\u652f\u6301\u901a\u8fc7",(0,s.jsx)(n.code,{children:"chunking_strategy"}),"\u53c2\u6570\u81ea\u5b9a\u4e49\u5206\u5757\u3002\u5206\u5757\u5728\u5bfc\u5165\u65f6\u7531\u670d\u52a1\u5668\u7aef\u5904\u7406\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:'showLineNumbers title="\u4f7f\u7528\u81ea\u5b9a\u4e49\u5206\u5757\u7684Vertex AI"',children:'curl -X POST "http://localhost:4000/v1/rag/ingest" \\\n    -H "Authorization: Bearer sk-1234" \\\n    -H "Content-Type: application/json" \\\n    -d "{\n        \\"file\\": {\n            \\"filename\\": \\"document.txt\\",\n            \\"content\\": \\"$(base64 -i document.txt)\\",\n            \\"content_type\\": \\"text/plain\\"\n        },\n        \\"ingest_options\\": {\n            \\"chunking_strategy\\": {\n                \\"chunk_size\\": 500,\n                \\"chunk_overlap\\": 100\n            },\n            \\"vector_store\\": {\n                \\"custom_llm_provider\\": \\"vertex_ai\\",\n                \\"vector_store_id\\": \\"your-corpus-id\\",\n                \\"gcs_bucket\\": \\"your-gcs-bucket\\"\n            }\n        }\n    }"\n'})})]})}function x(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}}}]);