"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[68734],{4239(e,n,t){t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"tutorials/litellm_Test_Multiple_Providers","title":"\u4f7f\u7528 LiteLLM \u6d4b\u8bd5\u591a\u4e2a\u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u5546\u7684\u53ef\u9760\u6027","description":"* \u8d28\u91cf\u6d4b\u8bd5","source":"@site/docs/tutorials/litellm_Test_Multiple_Providers.md","sourceDirName":"tutorials","slug":"/tutorials/litellm_Test_Multiple_Providers","permalink":"/docs/tutorials/litellm_Test_Multiple_Providers","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{}}');var a=t(74848),o=t(28453);const r={},l="\u4f7f\u7528 LiteLLM \u6d4b\u8bd5\u591a\u4e2a\u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u5546\u7684\u53ef\u9760\u6027",i={},d=[{value:"\u5728\u591a\u4e2a\u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u5546\u4e0a\u6d4b\u8bd5\u76f8\u540c\u7684\u63d0\u793a",id:"\u5728\u591a\u4e2a\u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u5546\u4e0a\u6d4b\u8bd5\u76f8\u540c\u7684\u63d0\u793a",level:2},{value:"\u53ef\u89c6\u5316\u6570\u636e",id:"\u53ef\u89c6\u5316\u6570\u636e",level:2}];function m(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"\u4f7f\u7528-litellm-\u6d4b\u8bd5\u591a\u4e2a\u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u5546\u7684\u53ef\u9760\u6027",children:"\u4f7f\u7528 LiteLLM \u6d4b\u8bd5\u591a\u4e2a\u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u5546\u7684\u53ef\u9760\u6027"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u8d28\u91cf\u6d4b\u8bd5"}),"\n",(0,a.jsx)(n.li,{children:"\u8d1f\u8f7d\u6d4b\u8bd5"}),"\n",(0,a.jsx)(n.li,{children:"\u6301\u7eed\u65f6\u95f4\u6d4b\u8bd5"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"!pip install litellm python-dotenv\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"import litellm\nfrom litellm import load_test_model, testing_batch_completion\nimport time\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from dotenv import load_dotenv\nload_dotenv()\n"})}),"\n",(0,a.jsx)(n.h1,{id:"\u8d28\u91cf\u6d4b\u8bd5\u7aef\u70b9",children:"\u8d28\u91cf\u6d4b\u8bd5\u7aef\u70b9"}),"\n",(0,a.jsx)(n.h2,{id:"\u5728\u591a\u4e2a\u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u5546\u4e0a\u6d4b\u8bd5\u76f8\u540c\u7684\u63d0\u793a",children:"\u5728\u591a\u4e2a\u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u5546\u4e0a\u6d4b\u8bd5\u76f8\u540c\u7684\u63d0\u793a"}),"\n",(0,a.jsx)(n.p,{children:"\u5728\u8fd9\u4e2a\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u5bf9 Paul Graham \u63d0\u51fa\u4e00\u4e9b\u95ee\u9898\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'models = ["gpt-3.5-turbo", "gpt-3.5-turbo-16k", "gpt-4", "claude-instant-1", "replicate/llama-2-70b-chat:58d078176e02c219e11eb4da5a02a7830a283b14cf8f94537af893ccff5ee781"]\ncontext = """Paul Graham (/\u0261r\xe6m/; born 1964)[3] is an English computer scientist, essayist, entrepreneur, venture capitalist, and author. He is best known for his work on the programming language Lisp, his former startup Viaweb (later renamed Yahoo! Store), cofounding the influential startup accelerator and seed capital firm Y Combinator, his essays, and Hacker News. He is the author of several computer programming books, including: On Lisp,[4] ANSI Common Lisp,[5] and Hackers & Painters.[6] Technology journalist Steven Levy has described Graham as a "hacker philosopher".[7] Graham was born in England, where he and his family maintain permanent residence. However he is also a citizen of the United States, where he was educated, lived, and worked until 2016."""\nprompts = ["Who is Paul Graham?", "What is Paul Graham known for?" , "Is Paul Graham a writer?" , "Where does Paul Graham live?", "What has Paul Graham done?"]\nmessages =  [[{"role": "user", "content": context + "\\n" + prompt}] for prompt in prompts] # pass in a list of messages we want to test\nresult = testing_batch_completion(models=models, messages=messages)\n'})}),"\n",(0,a.jsx)(n.h1,{id:"\u8d1f\u8f7d\u6d4b\u8bd5\u7aef\u70b9",children:"\u8d1f\u8f7d\u6d4b\u8bd5\u7aef\u70b9"}),"\n",(0,a.jsx)(n.p,{children:"\u8fd0\u884c100+\u5e76\u53d1\u67e5\u8be2\uff0c\u4ee5\u67e5\u770b\u5b83\u4eec\u4f55\u65f6\u5931\u8d25\u4ee5\u53ca\u5bf9\u5ef6\u8fdf\u7684\u5f71\u54cd\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'models=["gpt-3.5-turbo", "replicate/llama-2-70b-chat:58d078176e02c219e11eb4da5a02a7830a283b14cf8f94537af893ccff5ee781", "claude-instant-1"]\ncontext = """Paul Graham (/\u0261r\xe6m/; born 1964)[3] is an English computer scientist, essayist, entrepreneur, venture capitalist, and author. He is best known for his work on the programming language Lisp, his former startup Viaweb (later renamed Yahoo! Store), cofounding the influential startup accelerator and seed capital firm Y Combinator, his essays, and Hacker News. He is the author of several computer programming books, including: On Lisp,[4] ANSI Common Lisp,[5] and Hackers & Painters.[6] Technology journalist Steven Levy has described Graham as a "hacker philosopher".[7] Graham was born in England, where he and his family maintain permanent residence. However he is also a citizen of the United States, where he was educated, lived, and worked until 2016."""\nprompt = "Where does Paul Graham live?"\nfinal_prompt = context + prompt\nresult = load_test_model(models=models, prompt=final_prompt, num_calls=5)\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u53ef\u89c6\u5316\u6570\u636e",children:"\u53ef\u89c6\u5316\u6570\u636e"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'import matplotlib.pyplot as plt\n\n## \u8ba1\u7b97\u5e73\u5747\u54cd\u5e94\u65f6\u95f4\nunique_models = set(result["response"][\'model\'] for result in result["results"])\nmodel_dict = {model: {"response_time": []} for model in unique_models}\nfor completion_result in result["results"]:\n    model_dict[completion_result["response"]["model"]]["response_time"].append(completion_result["response_time"])\n\navg_response_time = {}\nfor model, data in model_dict.items():\n    avg_response_time[model] = sum(data["response_time"]) / len(data["response_time"])\n\nmodels = list(avg_response_time.keys())\nresponse_times = list(avg_response_time.values())\n\nplt.bar(models, response_times)\nplt.xlabel(\'Model\', fontsize=10)\nplt.ylabel(\'Average Response Time\')\nplt.title(\'Average Response Times for each Model\')\n\nplt.xticks(models, [model[:15]+\'...\' if len(model) > 15 else model for model in models], rotation=45)\nplt.show()\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"png",src:t(61323).A+"",width:"554",height:"535"})}),"\n",(0,a.jsx)(n.h1,{id:"\u6301\u7eed\u65f6\u95f4\u6d4b\u8bd5\u7aef\u70b9",children:"\u6301\u7eed\u65f6\u95f4\u6d4b\u8bd5\u7aef\u70b9"}),"\n",(0,a.jsx)(n.p,{children:"\u8fd0\u884c2\u5206\u949f\u7684\u8d1f\u8f7d\u6d4b\u8bd5\uff0c\u6bcf15\u79d2\u5411\u7aef\u70b9\u53d1\u9001100+\u6b21\u67e5\u8be2\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'models=["gpt-3.5-turbo", "replicate/llama-2-70b-chat:58d078176e02c219e11eb4da5a02a7830a283b14cf8f94537af893ccff5ee781", "claude-instant-1"]\ncontext = """Paul Graham (/\u0261r\xe6m/; born 1964)[3] is an English computer scientist, essayist, entrepreneur, venture capitalist, and author. He is best known for his work on the programming language Lisp, his former startup Viaweb (later renamed Yahoo! Store), cofounding the influential startup accelerator and seed capital firm Y Combinator, his essays, and Hacker News. He is the author of several computer programming books, including: On Lisp,[4] ANSI Common Lisp,[5] and Hackers & Painters.[6] Technology journalist Steven Levy has described Graham as a "hacker philosopher".[7] Graham was born in England, where he and his family maintain permanent residence. However he is also a citizen of the United States, where he was educated, lived, and worked until 2016."""\nprompt = "Where does Paul Graham live?"\nfinal_prompt = context + prompt\nresult = load_test_model(models=models, prompt=final_prompt, num_calls=100, interval=15, duration=120)\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'import matplotlib.pyplot as plt\n\n## \u8ba1\u7b97\u5e73\u5747\u54cd\u5e94\u65f6\u95f4\nunique_models = set(unique_result["response"][\'model\'] for unique_result in result[0]["results"])\nmodel_dict = {model: {"response_time": []} for model in unique_models}\nfor iteration in result:\n  for completion_result in iteration["results"]:\n    model_dict[completion_result["response"]["model"]]["response_time"].append(completion_result["response_time"])\n\navg_response_time = {}\nfor model, data in model_dict.items():\n    avg_response_time[model] = sum(data["response_time"]) / len(data["response_time"])\n\nmodels = list(avg_response_time.keys())\nresponse_times = list(avg_response_time.values())\n\nplt.bar(models, response_times)\nplt.xlabel(\'Model\', fontsize=10)\nplt.ylabel(\'Average Response Time\')\nplt.title(\'Average Response Times for each Model\')\n\nplt.xticks(models, [model[:15]+\'...\' if len(model) > 15 else model for model in models], rotation=45)\nplt.show()\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{alt:"png",src:t(81134).A+"",width:"567",height:"535"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(m,{...e})}):m(e)}},28453(e,n,t){t.d(n,{R:()=>r,x:()=>l});var s=t(96540);const a={},o=s.createContext(a);function r(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(o.Provider,{value:n},e.children)}},61323(e,n,t){t.d(n,{A:()=>s});const s=t.p+"assets/images/litellm_Test_Multiple_Providers_11_0-64489e914e8788c4ce48e488ab94d2a2.png"},81134(e,n,t){t.d(n,{A:()=>s});const s=t.p+"assets/images/litellm_Test_Multiple_Providers_14_0-a9ac1f287568d2bea4f9e7a9f359a89c.png"}}]);