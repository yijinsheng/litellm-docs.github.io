"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[12307],{14495(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>o,frontMatter:()=>d,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"rerank","title":"/rerank","description":"LiteLLM \u9075\u5faa cohere api \u8bf7\u6c42 / \u54cd\u5e94 rerank api \u63a5\u53e3","source":"@site/docs/rerank.md","sourceDirName":".","slug":"/rerank","permalink":"/docs/rerank","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"/realtime","permalink":"/docs/realtime"},"next":{"title":"/responses","permalink":"/docs/response_api"}}');var s=r(74848),i=r(28453);const d={},a="/rerank",l={},h=[{value:"\u6982\u89c8",id:"\u6982\u89c8",level:2},{value:"<strong>LiteLLM Python SDK \u4f7f\u7528</strong>",id:"litellm-python-sdk-\u4f7f\u7528",level:2},{value:"\u5feb\u901f\u5165\u95e8",id:"\u5feb\u901f\u5165\u95e8",level:3},{value:"\u5f02\u6b65\u4f7f\u7528",id:"\u5f02\u6b65\u4f7f\u7528",level:3},{value:"<strong>LiteLLM \u4ee3\u7406\u4f7f\u7528</strong>",id:"litellm-\u4ee3\u7406\u4f7f\u7528",level:2},{value:"<strong>\u652f\u6301\u7684\u670d\u52a1\u63d0\u4f9b\u5546</strong>",id:"\u652f\u6301\u7684\u670d\u52a1\u63d0\u4f9b\u5546",level:2},{value:"\u26a1\ufe0f\u67e5\u770b\u6240\u6709\u652f\u6301\u7684\u6a21\u578b\u548c\u63d0\u4f9b\u5546 models.litellm.ai",id:"\ufe0f\u67e5\u770b\u6240\u6709\u652f\u6301\u7684\u6a21\u578b\u548c\u63d0\u4f9b\u5546-modelslitellmai",level:4}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"rerank",children:"/rerank"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["LiteLLM \u9075\u5faa ",(0,s.jsx)(n.a,{href:"https://cohere.com/rerank",children:"cohere api \u8bf7\u6c42 / \u54cd\u5e94 rerank api \u63a5\u53e3"})]})}),"\n",(0,s.jsx)(n.h2,{id:"\u6982\u89c8",children:"\u6982\u89c8"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u529f\u80fd"}),(0,s.jsx)(n.th,{children:"\u652f\u6301"}),(0,s.jsx)(n.th,{children:"\u5907\u6ce8"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u6210\u672c\u8ddf\u8e2a"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"\u9002\u7528\u4e8e\u6240\u6709\u652f\u6301\u7684\u6a21\u578b"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u65e5\u5fd7\u8bb0\u5f55"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"\u8de8\u6240\u6709\u96c6\u6210\u5747\u9002\u7528"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u7ec8\u7aef\u7528\u6237\u8ddf\u8e2a"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u56de\u9000\u673a\u5236"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"\u5728\u652f\u6301\u7684\u6a21\u578b\u4e4b\u95f4\u751f\u6548"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u8d1f\u8f7d\u5747\u8861"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"\u5728\u652f\u6301\u7684\u6a21\u578b\u4e4b\u95f4\u751f\u6548"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u5b89\u5168\u9632\u62a4"}),(0,s.jsx)(n.td,{children:"\u2705"}),(0,s.jsx)(n.td,{children:"\u4ec5\u5e94\u7528\u4e8e\u8f93\u5165\u67e5\u8be2\uff08\u4e0d\u5305\u62ec\u6587\u6863\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u652f\u6301\u7684\u670d\u52a1\u63d0\u4f9b\u5546"}),(0,s.jsx)(n.td,{children:"Cohere, Together AI, Azure AI, DeepInfra, Nvidia NIM, Infinity, Fireworks AI, Voyage AI"}),(0,s.jsx)(n.td,{})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"litellm-python-sdk-\u4f7f\u7528",children:(0,s.jsx)(n.strong,{children:"LiteLLM Python SDK \u4f7f\u7528"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5feb\u901f\u5165\u95e8",children:"\u5feb\u901f\u5165\u95e8"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from litellm import rerank\nimport os\n\nos.environ["COHERE_API_KEY"] = "sk-.."\n\nquery = "What is the capital of the United States?"\ndocuments = [\n    "Carson City is the capital city of the American state of Nevada.",\n    "The Commonwealth of the Northern Mariana Islands is a group of islands in the Pacific Ocean. Its capital is Saipan.",\n    "Washington, D.C. is the capital of the United States.",\n    "Capital punishment has existed in the United States since before it was a country.",\n]\n\nresponse = rerank(\n    model="cohere/rerank-english-v3.0",\n    query=query,\n    documents=documents,\n    top_n=3,\n)\nprint(response)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u5f02\u6b65\u4f7f\u7528",children:"\u5f02\u6b65\u4f7f\u7528"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from litellm import arerank\nimport os, asyncio\n\nos.environ["COHERE_API_KEY"] = "sk-.."\n\nasync def test_async_rerank(): \n    query = "What is the capital of the United States?"\n    documents = [\n        "Carson City is the capital city of the American state of Nevada.",\n        "The Commonwealth of the Northern Mariana Islands is a group of islands in the Pacific Ocean. Its capital is Saipan.",\n        "Washington, D.C. is the capital of the United States.",\n        "Capital punishment has existed in the United States since before it was a country.",\n    ]\n\n    response = await arerank(\n        model="cohere/rerank-english-v3.0",\n        query=query,\n        documents=documents,\n        top_n=3,\n    )\n    print(response)\n\nasyncio.run(test_async_rerank())\n'})}),"\n",(0,s.jsx)(n.h2,{id:"litellm-\u4ee3\u7406\u4f7f\u7528",children:(0,s.jsx)(n.strong,{children:"LiteLLM \u4ee3\u7406\u4f7f\u7528"})}),"\n",(0,s.jsxs)(n.p,{children:["LiteLLM \u63d0\u4f9b\u4e86\u4e00\u4e2a\u4e0e Cohere API \u517c\u5bb9\u7684 ",(0,s.jsx)(n.code,{children:"/rerank"})," \u7aef\u70b9\uff0c\u7528\u4e8e rerank \u8c03\u7528\u3002"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u914d\u7f6e"})}),"\n",(0,s.jsx)(n.p,{children:"\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230\u4f60\u7684 litellm \u4ee3\u7406 config.yaml \u4e2d"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: Salesforce/Llama-Rank-V1\n    litellm_params:\n      model: together_ai/Salesforce/Llama-Rank-V1\n      api_key: os.environ/TOGETHERAI_API_KEY\n  - model_name: rerank-english-v3.0\n    litellm_params:\n      model: cohere/rerank-english-v3.0\n      api_key: os.environ/COHERE_API_KEY\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u542f\u52a8 LiteLLM"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"litellm --config /path/to/config.yaml\n\n# \u5728 http://0.0.0.0:4000 \u8fd0\u884c\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6d4b\u8bd5\u8bf7\u6c42"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'curl http://0.0.0.0:4000/rerank \\\n  -H "Authorization: Bearer sk-1234" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "model": "rerank-english-v3.0",\n    "query": "What is the capital of the United States?",\n    "documents": [\n        "Carson City is the capital city of the American state of Nevada.",\n        "The Commonwealth of the Northern Mariana Islands is a group of islands in the Pacific Ocean. Its capital is Saipan.",\n        "Washington, D.C. is the capital of the United States.",\n        "Capital punishment has existed in the United States since before it was a country."\n    ],\n    "top_n": 3\n  }\'\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u652f\u6301\u7684\u670d\u52a1\u63d0\u4f9b\u5546",children:(0,s.jsx)(n.strong,{children:"\u652f\u6301\u7684\u670d\u52a1\u63d0\u4f9b\u5546"})}),"\n",(0,s.jsxs)(n.h4,{id:"\ufe0f\u67e5\u770b\u6240\u6709\u652f\u6301\u7684\u6a21\u578b\u548c\u63d0\u4f9b\u5546-modelslitellmai",children:["\u26a1\ufe0f\u67e5\u770b\u6240\u6709\u652f\u6301\u7684\u6a21\u578b\u548c\u63d0\u4f9b\u5546 ",(0,s.jsx)(n.a,{href:"https://models.litellm.ai/",children:"models.litellm.ai"})]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u63d0\u4f9b\u5546"}),(0,s.jsx)(n.th,{children:"\u4f7f\u7528\u8bf4\u660e\u94fe\u63a5"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Cohere (v1 + v2 \u5ba2\u6237\u7aef)"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8",children:"\u4f7f\u7528\u8bf4\u660e"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Together AI"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"../docs/providers/togetherai",children:"\u4f7f\u7528\u8bf4\u660e"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Azure AI"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"../docs/providers/azure_ai#rerank-endpoint",children:"\u4f7f\u7528\u8bf4\u660e"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Jina AI"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"../docs/providers/jina_ai",children:"\u4f7f\u7528\u8bf4\u660e"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"AWS Bedrock"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"../docs/providers/bedrock#rerank-api",children:"\u4f7f\u7528\u8bf4\u660e"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"HuggingFace"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"../docs/providers/huggingface_rerank",children:"\u4f7f\u7528\u8bf4\u660e"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Infinity"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"../docs/providers/infinity",children:"\u4f7f\u7528\u8bf4\u660e"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"vLLM"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"../docs/providers/vllm#rerank-endpoint",children:"\u4f7f\u7528\u8bf4\u660e"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"DeepInfra"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"../docs/providers/deepinfra#rerank-endpoint",children:"\u4f7f\u7528\u8bf4\u660e"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Vertex AI"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"../docs/providers/vertex#rerank-api",children:"\u4f7f\u7528\u8bf4\u660e"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Fireworks AI"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"../docs/providers/fireworks_ai#rerank-endpoint",children:"\u4f7f\u7528\u8bf4\u660e"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Voyage AI"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.a,{href:"../docs/providers/voyage#rerank",children:"\u4f7f\u7528\u8bf4\u660e"})})]})]})]})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453(e,n,r){r.d(n,{R:()=>d,x:()=>a});var t=r(96540);const s={},i=t.createContext(s);function d(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);