"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[40515],{7227(e,n,s){s.d(n,{A:()=>a});s(96540);var l=s(18215);const t="tabItem_Ymn6";var r=s(74848);function a({children:e,hidden:n,className:s}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,l.A)(t,s),hidden:n,children:e})}},18937(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>m,frontMatter:()=>c,metadata:()=>l,toc:()=>p});const l=JSON.parse('{"id":"caching/all_caches","title":"\u7f13\u5b58 - \u5185\u5b58\u3001Redis\u3001s3\u3001gcs\u3001Redis\u8bed\u4e49\u7f13\u5b58\u3001\u78c1\u76d8","description":"\u67e5\u770b\u4ee3\u7801","source":"@site/docs/caching/all_caches.md","sourceDirName":"caching","slug":"/caching/all_caches","permalink":"/docs/caching/all_caches","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u8bbe\u7f6e API \u5bc6\u94a5\u3001\u57fa\u7840 URL \u548c\u7248\u672c","permalink":"/docs/set_keys"},"next":{"title":"\u8865\u5168 Token \u4f7f\u7528\u4e0e\u6210\u672c","permalink":"/docs/completion/token_usage"}}');var t=s(74848),r=s(28453),a=s(49489),o=s(7227);const c={},i="\u7f13\u5b58 - \u5185\u5b58\u3001Redis\u3001s3\u3001gcs\u3001Redis\u8bed\u4e49\u7f13\u5b58\u3001\u78c1\u76d8",d={},p=[{value:"\u521d\u59cb\u5316\u7f13\u5b58 - \u5185\u5b58\u3001Redis\u3001s3\u6876\u3001gcs\u6876\u3001Redis\u8bed\u4e49\u3001\u78c1\u76d8\u7f13\u5b58\u3001Qdrant\u8bed\u4e49",id:"\u521d\u59cb\u5316\u7f13\u5b58---\u5185\u5b58rediss3\u6876gcs\u6876redis\u8bed\u4e49\u78c1\u76d8\u7f13\u5b58qdrant\u8bed\u4e49",level:2},{value:"\u5feb\u901f\u5f00\u59cb",id:"\u5feb\u901f\u5f00\u59cb",level:3},{value:"\u5feb\u901f\u5f00\u59cb",id:"\u5feb\u901f\u5f00\u59cb-1",level:3},{value:"\u5728\u6bcf\u6b21 LiteLLM \u8c03\u7528\u4e2d\u5207\u6362\u7f13\u5b58\u5f00\u5173",id:"\u5728\u6bcf\u6b21-litellm-\u8c03\u7528\u4e2d\u5207\u6362\u7f13\u5b58\u5f00\u5173",level:2},{value:"\u7f13\u5b58\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668 - \u542f\u7528\u3001\u7981\u7528\u548c\u66f4\u65b0\u7f13\u5b58",id:"\u7f13\u5b58\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668---\u542f\u7528\u7981\u7528\u548c\u66f4\u65b0\u7f13\u5b58",level:2},{value:"\u542f\u7528\u7f13\u5b58",id:"\u542f\u7528\u7f13\u5b58",level:3},{value:"\u7981\u7528\u7f13\u5b58",id:"\u7981\u7528\u7f13\u5b58",level:3},{value:"\u66f4\u65b0\u7f13\u5b58\u53c2\u6570\uff08Redis \u4e3b\u673a\u3001\u7aef\u53e3\u7b49\uff09",id:"\u66f4\u65b0\u7f13\u5b58\u53c2\u6570redis-\u4e3b\u673a\u7aef\u53e3\u7b49",level:3},{value:"\u81ea\u5b9a\u4e49\u7f13\u5b58\u952e\uff1a",id:"\u81ea\u5b9a\u4e49\u7f13\u5b58\u952e",level:2},{value:"\u5982\u4f55\u7f16\u5199\u81ea\u5b9a\u4e49\u6dfb\u52a0/\u83b7\u53d6\u7f13\u5b58\u51fd\u6570",id:"\u5982\u4f55\u7f16\u5199\u81ea\u5b9a\u4e49\u6dfb\u52a0\u83b7\u53d6\u7f13\u5b58\u51fd\u6570",level:2},{value:"1. \u521d\u59cb\u5316\u7f13\u5b58",id:"1-\u521d\u59cb\u5316\u7f13\u5b58",level:3},{value:"2. \u5b9a\u4e49\u81ea\u5b9a\u4e49\u6dfb\u52a0/\u83b7\u53d6\u7f13\u5b58\u51fd\u6570",id:"2-\u5b9a\u4e49\u81ea\u5b9a\u4e49\u6dfb\u52a0\u83b7\u53d6\u7f13\u5b58\u51fd\u6570",level:3},{value:"3. \u5c06\u7f13\u5b58\u7684 add_cache/get_cache \u51fd\u6570\u6307\u5411\u60a8\u7684 add/get \u51fd\u6570",id:"3-\u5c06\u7f13\u5b58\u7684-add_cacheget_cache-\u51fd\u6570\u6307\u5411\u60a8\u7684-addget-\u51fd\u6570",level:3},{value:"\u7f13\u5b58\u521d\u59cb\u5316\u53c2\u6570",id:"\u7f13\u5b58\u521d\u59cb\u5316\u53c2\u6570",level:2},{value:"\u65e5\u5fd7\u8bb0\u5f55",id:"\u65e5\u5fd7\u8bb0\u5f55",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\u7f13\u5b58---\u5185\u5b58rediss3gcsredis\u8bed\u4e49\u7f13\u5b58\u78c1\u76d8",children:"\u7f13\u5b58 - \u5185\u5b58\u3001Redis\u3001s3\u3001gcs\u3001Redis\u8bed\u4e49\u7f13\u5b58\u3001\u78c1\u76d8"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://github.com/BerriAI/litellm/blob/main/litellm/caching/caching.py",children:(0,t.jsx)(n.strong,{children:"\u67e5\u770b\u4ee3\u7801"})})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u5bf9\u4ee3\u7406\u670d\u52a1\u5668\u6709\u7591\u95ee\uff1f\u8bf7\u53c2\u9605\uff1a",(0,t.jsx)(n.a,{href:"https://docs.litellm.ai/docs/proxy/caching",children:"\u7f13\u5b58\u4ee3\u7406\u670d\u52a1\u5668"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u5bf9OpenAI/Anthropic\u63d0\u793a\u7f13\u5b58\uff0c\u8bf7\u67e5\u9605\uff1a",(0,t.jsx)(n.a,{href:"/docs/completion/prompt_caching",children:"\u6b64\u5904"})]}),"\n"]})}),"\n",(0,t.jsx)(n.h2,{id:"\u521d\u59cb\u5316\u7f13\u5b58---\u5185\u5b58rediss3\u6876gcs\u6876redis\u8bed\u4e49\u78c1\u76d8\u7f13\u5b58qdrant\u8bed\u4e49",children:"\u521d\u59cb\u5316\u7f13\u5b58 - \u5185\u5b58\u3001Redis\u3001s3\u6876\u3001gcs\u6876\u3001Redis\u8bed\u4e49\u3001\u78c1\u76d8\u7f13\u5b58\u3001Qdrant\u8bed\u4e49"}),"\n",(0,t.jsxs)(a.A,{children:[(0,t.jsxs)(o.A,{value:"redis",label:"redis-cache",children:[(0,t.jsx)(n.p,{children:"\u5b89\u88c5 Redis"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'pip install redis\n\n\n\u5bf9\u4e8e\u6258\u7ba1\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u5728\u8fd9\u91cc\u8bbe\u7f6e\u81ea\u5df1\u7684 Redis \u6570\u636e\u5e93\uff1ahttps://redis.io/try-free/\n\n**\u57fa\u672c Redis \u7f13\u5b58**\n\n```python\nimport litellm\nfrom litellm import completion\nfrom litellm.caching.caching import Cache\n\nlitellm.cache = Cache(type="redis", host=<host>, port=<port>, password=<password>)\n\n# \u53d1\u9001\u5b8c\u6210\u8bf7\u6c42\nresponse1 = completion(\n    model="gpt-3.5-turbo",\n    messages=[{"role": "user", "content": "Tell me a joke."}]\n)\nresponse2 = completion(\n    model="gpt-3.5-turbo",\n    messages=[{"role": "user", "content": "Tell me a joke."}]\n)\n\n# response1 == response2\uff0c\u54cd\u5e94 1 \u5df2\u7f13\u5b58\n'})}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"GCP IAM Redis \u8ba4\u8bc1"})}),(0,t.jsx)(n.p,{children:"\u5bf9\u4e8e\u4f7f\u7528 GCP Memorystore Redis \u7684 IAM \u8ba4\u8bc1\uff1a"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"pip install google-cloud-iam\n"})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import litellm\nfrom litellm import completion\n# \u5bf9\u4e8e\u5e26\u6709 GCP IAM \u7684 Redis \u96c6\u7fa4\nfrom litellm.caching.redis_cluster_cache import RedisClusterCache\n\nlitellm.cache = RedisClusterCache(\n    startup_nodes=[\n        {"host": "10.128.0.2", "port": 6379},\n        {"host": "10.128.0.2", "port": 11008},\n    ],\n    gcp_service_account="projects/-/serviceAccounts/your-sa@project.iam.gserviceaccount.com",\n    ssl=True,\n    ssl_cert_reqs=None,\n    ssl_check_hostname=False,\n)\n\n# \u53d1\u9001\u5b8c\u6210\u8bf7\u6c42\nresponse1 = completion(\n    model="gpt-3.5-turbo",\n    messages=[{"role": "user", "content": "Tell me a joke."}]\n)\nresponse2 = completion(\n    model="gpt-3.5-turbo",\n    messages=[{"role": "user", "content": "Tell me a joke."}]\n)\n\n# response1 == response2\uff0c\u54cd\u5e94 1 \u5df2\u7f13\u5b58\n'})}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"GCP IAM Redis \u73af\u5883\u53d8\u91cf"})}),(0,t.jsx)(n.p,{children:"\u60a8\u4e5f\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u8bbe\u7f6e\u4e3a\u73af\u5883\u53d8\u91cf\uff1a"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'export REDIS_HOST="10.128.0.2"\nexport REDIS_PORT="6379"\nexport REDIS_GCP_SERVICE_ACCOUNT="projects/-/serviceAccounts/your-sa@project.iam.gserviceaccount.com"\nexport REDIS_SSL="False"\n'})}),(0,t.jsx)(n.p,{children:"\u7136\u540e\u7b80\u5355\u5730\u521d\u59cb\u5316\uff1a"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'litellm.cache = Cache(type="redis")\n'})})]}),(0,t.jsxs)(o.A,{value:"gcs",label:"gcs-cache",children:[(0,t.jsx)(n.p,{children:"\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'GCS_BUCKET_NAME="my-cache-bucket"\nGCS_PATH_SERVICE_ACCOUNT="/path/to/service_account.json"\n'})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import litellm\nfrom litellm import completion\nfrom litellm.caching.caching import Cache\n\nlitellm.cache = Cache(type="gcs", gcs_bucket_name="my-cache-bucket", gcs_path_service_account="/path/to/service_account.json")\n\nresponse1 = completion(\n    model="gpt-3.5-turbo",\n    messages=[{"role": "user", "content": "Tell me a joke."}]\n)\nresponse2 = completion(\n    model="gpt-3.5-turbo",\n    messages=[{"role": "user", "content": "Tell me a joke."}]\n)\n\n# response1 == response2\uff0c\u54cd\u5e94 1 \u5df2\u7f13\u5b58\n'})})]}),(0,t.jsxs)(o.A,{value:"s3",label:"s3-cache",children:[(0,t.jsx)(n.p,{children:"\u5b89\u88c5 boto3"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"pip install boto3\n"})}),(0,t.jsx)(n.p,{children:"\u8bbe\u7f6e AWS \u73af\u5883\u53d8\u91cf"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'AWS_ACCESS_KEY_ID = "AKI*******"\nAWS_SECRET_ACCESS_KEY = "WOl*****"\n'})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import litellm\nfrom litellm import completion\nfrom litellm.caching.caching import Cache\n\n# \u4f20\u9012 s3 \u6876\u540d\u79f0\nlitellm.cache = Cache(type="s3", s3_bucket_name="cache-bucket-litellm", s3_region_name="us-west-2")\n\n# \u53d1\u9001\u5b8c\u6210\u8bf7\u6c42\nresponse1 = completion(\n    model="gpt-3.5-turbo",\n    messages=[{"role": "user", "content": "Tell me a joke."}]\n)\nresponse2 = completion(\n    model="gpt-3.5-turbo",\n    messages=[{"role": "user", "content": "Tell me a joke."}]\n)\n\n# response1 == response2\uff0c\u54cd\u5e94 1 \u5df2\u7f13\u5b58\n'})})]}),(0,t.jsxs)(o.A,{value:"azureblob",label:"azure-blob-cache",children:[(0,t.jsx)(n.p,{children:"\u5b89\u88c5 azure-storage-blob \u548c azure-identity"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"pip install azure-storage-blob azure-identity\n"})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import litellm\nfrom litellm import completion\nfrom litellm.caching.caching import Cache\nfrom azure.identity import DefaultAzureCredential\n\n# \u4f20\u9012 Azure Blob \u5b58\u50a8\u8d26\u6237 URL \u548c\u5bb9\u5668\u540d\u79f0\nlitellm.cache = Cache(type="azure-blob", azure_account_url="https://example.blob.core.windows.net", azure_blob_container="litellm")\n\n# \u53d1\u9001\u5b8c\u6210\u8bf7\u6c42\nresponse1 = completion(\n    model="gpt-3.5-turbo",\n    messages=[{"role": "user", "content": "Tell me a joke."}]\n)\nresponse2 = completion(\n    model="gpt-3.5-turbo",\n    messages=[{"role": "user", "content": "Tell me a joke."}]\n)\n\n# response1 == response2\uff0c\u54cd\u5e94 1 \u5df2\u7f13\u5b58\n'})})]}),(0,t.jsxs)(o.A,{value:"redis-sem",label:"redis-semantic cache",children:[(0,t.jsx)(n.p,{children:"\u5b89\u88c5 redisvl \u5ba2\u6237\u7aef"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"pip install redisvl==0.4.1\n"})}),(0,t.jsxs)(n.p,{children:["\u5bf9\u4e8e\u6258\u7ba1\u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u5728\u8fd9\u91cc\u8bbe\u7f6e\u81ea\u5df1\u7684 Redis \u6570\u636e\u5e93\uff1a",(0,t.jsx)(n.a,{href:"https://redis.io/try-free/",children:"https://redis.io/try-free/"})]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import litellm\nfrom litellm import completion\nfrom litellm.caching.caching import Cache\n\nrandom_number = random.randint(\n    1, 100000\n)  # \u6dfb\u52a0\u4e00\u4e2a\u968f\u673a\u6570\u4ee5\u786e\u4fdd\u59cb\u7ec8\u4ece\u7f13\u5b58\u4e2d\u6dfb\u52a0\u6216\u8bfb\u53d6\u6570\u636e\n\nprint("\u6b63\u5728\u6d4b\u8bd5\u8bed\u4e49\u7f13\u5b58")\nlitellm.cache = Cache(\n    type="redis-semantic",\n    host=os.environ["REDIS_HOST"],\n    port=os.environ["REDIS_PORT"],\n    password=os.environ["REDIS_PASSWORD"],\n    similarity_threshold=0.8, # \u7528\u4e8e\u7f13\u5b58\u547d\u4e2d\u76f8\u4f3c\u5ea6\u9608\u503c\uff0c0 == \u6ca1\u6709\u76f8\u4f3c\u6027\uff0c1 = \u5b8c\u5168\u5339\u914d\uff0c0.5 == 50% \u76f8\u4f3c\n    ttl=120,\n    redis_semantic_cache_embedding_model="text-embedding-ada-002", # \u6b64\u6a21\u578b\u4f20\u9012\u7ed9 litellm.embedding()\uff0c\u4efb\u4f55 litellm.embedding() \u6a21\u578b\u90fd\u652f\u6301\u8fd9\u91cc\n)\nresponse1 = completion(\n    model="gpt-3.5-turbo",\n    messages=[\n        {\n            "role": "user",\n            "content": f"write a one sentence poem about: {random_number}",\n        }\n    ],\n    max_tokens=20,\n)\nprint(f"response1: {response1}")\n\nrandom_number = random.randint(1, 100000)\n\nresponse2 = completion(\n    model="gpt-3.5-turbo",\n    messages=[\n        {\n            "role": "user",\n            "content": f"write a one sentence poem about: {random_number}",\n        }\n    ],\n    max_tokens=20,\n)\nprint(f"response2: {response1}")\nassert response1.id == response2.id\n# response1 == response2\uff0c\u54cd\u5e94 1 \u5df2\u7f13\u5b58\n'})})]}),(0,t.jsxs)(o.A,{value:"qdrant-sem",label:"qdrant-semantic cache",children:[(0,t.jsxs)(n.p,{children:["\u60a8\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u8bbe\u7f6e\u81ea\u5df1\u7684\u4e91 Qdrant \u96c6\u7fa4\uff1a",(0,t.jsx)(n.a,{href:"https://qdrant.tech/documentation/quickstart-cloud/",children:"https://qdrant.tech/documentation/quickstart-cloud/"})]}),(0,t.jsxs)(n.p,{children:["\u8981\u8bbe\u7f6e\u672c\u5730 Qdrant \u96c6\u7fa4\uff0c\u8bf7\u53c2\u9605\uff1a",(0,t.jsx)(n.a,{href:"https://qdrant.tech/documentation/quickstart/",children:"https://qdrant.tech/documentation/quickstart/"})]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import litellm\nfrom litellm import completion\nfrom litellm.caching.caching import Cache\n\nrandom_number = random.randint(\n    1, 100000\n)  # \u6dfb\u52a0\u4e00\u4e2a\u968f\u673a\u6570\u4ee5\u786e\u4fdd\u59cb\u7ec8\u4ece\u7f13\u5b58\u4e2d\u6dfb\u52a0\u6216\u8bfb\u53d6\u6570\u636e\n\nprint("\u6b63\u5728\u6d4b\u8bd5\u8bed\u4e49\u7f13\u5b58")\nlitellm.cache = Cache(\n    type="qdrant-semantic",\n    qdrant_api_base=os.environ["QDRANT_API_BASE"], \n    qdrant_api_key=os.environ["QDRANT_API_KEY"],\n    qdrant_collection_name="your_collection_name", # \u4efb\u4f55\u60a8\u96c6\u5408\u7684\u540d\u79f0\n    similarity_threshold=0.7, # \u7528\u4e8e\u7f13\u5b58\u547d\u4e2d\u76f8\u4f3c\u5ea6\u9608\u503c\uff0c0 == \u6ca1\u6709\u76f8\u4f3c\u6027\uff0c1 = \u5b8c\u5168\u5339\u914d\uff0c0.5 == 50% \u76f8\u4f3c\n    qdrant_quantization_config ="binary", # \u652f\u6301 Qdrant \u7684\u4e8c\u8fdb\u5236\u3001\u4ea7\u54c1\u6216\u6807\u91cf\u91cf\u5316\u4e4b\u4e00\n    qdrant_semantic_cache_embedding_model="text-embedding-ada-002", # \u6b64\u6a21\u578b\u4f20\u9012\u7ed9 litellm.embedding()\uff0c\u4efb\u4f55 litellm.embedding() \u6a21\u578b\u90fd\u652f\u6301\u8fd9\u91cc\n)\n\nresponse1 = completion(\n    model="gpt-3.5-turbo",\n    messages=[\n        {\n            "role": "user",\n            "content": f"write a one sentence poem about: {random_number}",\n        }\n    ],\n    max_tokens=20,\n)\nprint(f"response1: {response1}")\n\nrandom_number = random.randint(1, 100000)\n\nresponse2 = completion(\n    model="gpt-3.5-turbo",\n    messages=[\n        {\n            "role": "user",\n            "content": f"write a one sentence poem about: {random_number}",\n        }\n    ],\n    max_tokens=20,\n)\nprint(f"response2: {response2}")\nassert response1.id == response2.id\n# response1 == response2\uff0c\u54cd\u5e94 1 \u5df2\u7f13\u5b58\n'})})]}),(0,t.jsxs)(o.A,{value:"in-mem",label:"in memory cache",children:[(0,t.jsx)(n.h3,{id:"\u5feb\u901f\u5f00\u59cb",children:"\u5feb\u901f\u5f00\u59cb"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import litellm\nfrom litellm import completion\nfrom litellm.caching.caching import Cache\nlitellm.cache = Cache()\n\n# \u53d1\u9001\u5b8c\u6210\u8bf7\u6c42\nresponse1 = completion(\n    model="gpt-3.5-turbo", \n    messages=[{"role": "user", "content": "Tell me a joke."}],\n    caching=True\n)\nresponse2 = completion(\n    model="gpt-3.5-turbo", \n    messages=[{"role": "user", "content": "Tell me a joke."}],\n    caching=True\n)\n\n# response1 == response2\uff0c\u54cd\u5e94 1 \u5df2\u7f13\u5b58\n\n'})})]}),(0,t.jsxs)(o.A,{value:"disk",label:"disk cache",children:[(0,t.jsx)(n.h3,{id:"\u5feb\u901f\u5f00\u59cb-1",children:"\u5feb\u901f\u5f00\u59cb"}),(0,t.jsx)(n.p,{children:"\u5b89\u88c5\u78c1\u76d8\u7f13\u5b58\u989d\u5916\u4f9d\u8d56\uff1a"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'pip install "litellm[caching]"\n'})}),(0,t.jsx)(n.p,{children:"\u7136\u540e\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u65b9\u5f0f\u4f7f\u7528\u78c1\u76d8\u7f13\u5b58\u3002"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import litellm\nfrom litellm import completion\nfrom litellm.caching.caching import Cache\nlitellm.cache = Cache(type="disk")\n\n# \u53d1\u9001\u5b8c\u6210\u8bf7\u6c42\nresponse1 = completion(\n    model="gpt-3.5-turbo", \n    messages=[{"role": "user", "content": "Tell me a joke."}],\n    caching=True\n)\nresponse2 = completion(\n    model="gpt-3.5-turbo", \n    messages=[{"role": "user", "content": "Tell me a joke."}],\n    caching=True\n)\n\n# response1 == response2\uff0c\u54cd\u5e94 1 \u5df2\u7f13\u5b58\n\n'})}),(0,t.jsx)(n.p,{children:"\u5982\u679c\u4e24\u6b21\u8fd0\u884c\u4ee3\u7801\uff0cresponse1 \u5c06\u4f7f\u7528\u7b2c\u4e00\u6b21\u8fd0\u884c\u65f6\u5b58\u50a8\u5728\u7f13\u5b58\u6587\u4ef6\u4e2d\u7684\u7f13\u5b58\u3002"})]})]}),"\n",(0,t.jsx)(n.h2,{id:"\u5728\u6bcf\u6b21-litellm-\u8c03\u7528\u4e2d\u5207\u6362\u7f13\u5b58\u5f00\u5173",children:"\u5728\u6bcf\u6b21 LiteLLM \u8c03\u7528\u4e2d\u5207\u6362\u7f13\u5b58\u5f00\u5173"}),"\n",(0,t.jsx)(n.p,{children:"LiteLLM \u652f\u6301\u4ee5\u4e0b\u56db\u79cd\u7f13\u5b58\u63a7\u5236\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"no-cache"}),": ",(0,t.jsx)(n.em,{children:"\u53ef\u9009(bool)"})," \u5f53\u4e3a True \u65f6\uff0c\u5c06\u4e0d\u4f1a\u8fd4\u56de\u7f13\u5b58\u54cd\u5e94\uff0c\u800c\u662f\u8c03\u7528\u5b9e\u9645\u7aef\u70b9\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"no-store"}),": ",(0,t.jsx)(n.em,{children:"\u53ef\u9009(bool)"})," \u5f53\u4e3a True \u65f6\uff0c\u5c06\u4e0d\u7f13\u5b58\u54cd\u5e94\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ttl"}),": ",(0,t.jsx)(n.em,{children:"\u53ef\u9009(int)"})," - \u5c06\u7f13\u5b58\u54cd\u5e94\u4e00\u6bb5\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"s-maxage"}),": ",(0,t.jsx)(n.em,{children:"\u53ef\u9009(int)"})," \u53ea\u63a5\u53d7\u5728\u7528\u6237\u5b9a\u4e49\u8303\u56f4\u5185\u7684\u65f6\u95f4\u5185\u7684\u7f13\u5b58\u54cd\u5e94\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://github.com/BerriAI/litellm/issues/1218",children:"\u8ba9\u6211\u4eec\u77e5\u9053\u60a8\u9700\u8981\u66f4\u591a\u529f\u80fd"})}),"\n",(0,t.jsxs)(a.A,{children:[(0,t.jsxs)(o.A,{value:"no-cache",label:"No-Cache",children:[(0,t.jsxs)(n.p,{children:["\u793a\u4f8b\u7528\u6cd5 ",(0,t.jsx)(n.code,{children:"no-cache"})," - \u5f53\u4e3a True \u65f6\uff0c\u5c06\u4e0d\u4f1a\u8fd4\u56de\u7f13\u5b58\u54cd\u5e94"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'response = litellm.completion(\n        model="gpt-3.5-turbo",\n        messages=[\n            {\n                "role": "user",\n                "content": "hello who are you"\n            }\n        ],\n        cache={"no-cache": True},\n    )\n'})})]}),(0,t.jsxs)(o.A,{value:"no-store",label:"No-Store",children:[(0,t.jsxs)(n.p,{children:["\u793a\u4f8b\u7528\u6cd5 ",(0,t.jsx)(n.code,{children:"no-store"})," - \u5f53\u4e3a True \u65f6\uff0c\u5c06\u4e0d\u4f1a\u7f13\u5b58\u54cd\u5e94\u3002"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'response = litellm.completion(\n        model="gpt-3.5-turbo",\n        messages=[\n            {\n                "role": "user",\n                "content": "hello who are you"\n            }\n        ],\n        cache={"no-store": True},\n    )\n'})})]}),(0,t.jsxs)(o.A,{value:"ttl",label:"ttl",children:[(0,t.jsxs)(n.p,{children:["\u793a\u4f8b\u7528\u6cd5 ",(0,t.jsx)(n.code,{children:"ttl"})," - \u7f13\u5b58\u54cd\u5e94 10 \u79d2"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'response = litellm.completion(\n        model="gpt-3.5-turbo",\n        messages=[\n            {\n                "role": "user",\n                "content": "hello who are you"\n            }\n        ],\n        cache={"ttl": 10},\n    )\n'})})]}),(0,t.jsxs)(o.A,{value:"s-maxage",label:"s-maxage",children:[(0,t.jsxs)(n.p,{children:["\u793a\u4f8b\u7528\u6cd5 ",(0,t.jsx)(n.code,{children:"s-maxage"})," - \u53ea\u63a5\u53d7\u5728 60 \u79d2\u5185\u7684\u7f13\u5b58\u54cd\u5e94"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'response = litellm.completion(\n        model="gpt-3.5-turbo",\n        messages=[\n            {\n                "role": "user",\n                "content": "hello who are you"\n            }\n        ],\n        cache={"s-maxage": 60},\n    )\n'})})]})]}),"\n",(0,t.jsx)(n.h2,{id:"\u7f13\u5b58\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668---\u542f\u7528\u7981\u7528\u548c\u66f4\u65b0\u7f13\u5b58",children:"\u7f13\u5b58\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668 - \u542f\u7528\u3001\u7981\u7528\u548c\u66f4\u65b0\u7f13\u5b58"}),"\n",(0,t.jsx)(n.p,{children:"\u4f7f\u7528\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u8f7b\u677e\u542f\u7528\u3001\u7981\u7528\u53ca\u66f4\u65b0 LiteLLM \u7f13\u5b58"}),"\n",(0,t.jsx)(n.h3,{id:"\u542f\u7528\u7f13\u5b58",children:"\u542f\u7528\u7f13\u5b58"}),"\n",(0,t.jsx)(n.p,{children:"\u5feb\u901f\u5f00\u59cb\u542f\u7528"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"litellm.enable_cache()\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u9ad8\u7ea7\u53c2\u6570"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'litellm.enable_cache(\n    type: Optional[Literal["local", "redis", "s3", "gcs", "disk"]] = "local",\n    host: Optional[str] = None,\n    port: Optional[str] = None,\n    password: Optional[str] = None,\n    supported_call_types: Optional[\n        List[Literal["completion", "acompletion", "embedding", "aembedding", "atranscription", "transcription"]]\n    ] = ["completion", "acompletion", "embedding", "aembedding", "atranscription", "transcription"],\n    **kwargs,\n)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u7981\u7528\u7f13\u5b58",children:"\u7981\u7528\u7f13\u5b58"}),"\n",(0,t.jsx)(n.p,{children:"\u5173\u95ed\u7f13\u5b58"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"litellm.disable_cache()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u66f4\u65b0\u7f13\u5b58\u53c2\u6570redis-\u4e3b\u673a\u7aef\u53e3\u7b49",children:"\u66f4\u65b0\u7f13\u5b58\u53c2\u6570\uff08Redis \u4e3b\u673a\u3001\u7aef\u53e3\u7b49\uff09"}),"\n",(0,t.jsx)(n.p,{children:"\u66f4\u65b0\u7f13\u5b58\u53c2\u6570"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'litellm.update_cache(\n    type: Optional[Literal["local", "redis", "s3", "gcs", "disk"]] = "local",\n    host: Optional[str] = None,\n    port: Optional[str] = None,\n    password: Optional[str] = None,\n    supported_call_types: Optional[\n        List[Literal["completion", "acompletion", "embedding", "aembedding", "atranscription", "transcription"]]\n    ] = ["completion", "acompletion", "embedding", "aembedding", "atranscription", "transcription"],\n    **kwargs,\n)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u81ea\u5b9a\u4e49\u7f13\u5b58\u952e",children:"\u81ea\u5b9a\u4e49\u7f13\u5b58\u952e\uff1a"}),"\n",(0,t.jsx)(n.p,{children:"\u5b9a\u4e49\u51fd\u6570\u4ee5\u8fd4\u56de\u7f13\u5b58\u952e"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# \u6b64\u51fd\u6570\u63a5\u53d7 *args, **kwargs \u5e76\u8fd4\u56de\u7528\u4e8e\u7f13\u5b58\u7684\u952e\ndef custom_get_cache_key(*args, **kwargs):\n    # \u8fd4\u56de\u8981\u4f7f\u7528\u7684\u7f13\u5b58\u952e:\n    key = kwargs.get("model", "") + str(kwargs.get("messages", "")) + str(kwargs.get("temperature", "")) + str(kwargs.get("logit_bias", ""))\n    print("key for cache", key)\n    return key\n\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u8bbe\u7f6e\u60a8\u7684\u51fd\u6570\u4e3a litellm.cache.get_cache_key"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from litellm.caching.caching import Cache\n\ncache = Cache(type=\"redis\", host=os.environ['REDIS_HOST'], port=os.environ['REDIS_PORT'], password=os.environ['REDIS_PASSWORD'])\n\ncache.get_cache_key = custom_get_cache_key # \u8bbe\u7f6e\u7f13\u5b58\u7684 get_cache_key \u51fd\u6570\n\nlitellm.cache = cache # \u5c06 litellm.cache \u8bbe\u7f6e\u4e3a\u60a8\u7684\u7f13\u5b58\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u5982\u4f55\u7f16\u5199\u81ea\u5b9a\u4e49\u6dfb\u52a0\u83b7\u53d6\u7f13\u5b58\u51fd\u6570",children:"\u5982\u4f55\u7f16\u5199\u81ea\u5b9a\u4e49\u6dfb\u52a0/\u83b7\u53d6\u7f13\u5b58\u51fd\u6570"}),"\n",(0,t.jsx)(n.h3,{id:"1-\u521d\u59cb\u5316\u7f13\u5b58",children:"1. \u521d\u59cb\u5316\u7f13\u5b58"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from litellm.caching.caching import Cache\ncache = Cache()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-\u5b9a\u4e49\u81ea\u5b9a\u4e49\u6dfb\u52a0\u83b7\u53d6\u7f13\u5b58\u51fd\u6570",children:"2. \u5b9a\u4e49\u81ea\u5b9a\u4e49\u6dfb\u52a0/\u83b7\u53d6\u7f13\u5b58\u51fd\u6570"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"def add_cache(self, result, *args, **kwargs):\n  your logic\n  \ndef get_cache(self, *args, **kwargs):\n  your logic\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-\u5c06\u7f13\u5b58\u7684-add_cacheget_cache-\u51fd\u6570\u6307\u5411\u60a8\u7684-addget-\u51fd\u6570",children:"3. \u5c06\u7f13\u5b58\u7684 add_cache/get_cache \u51fd\u6570\u6307\u5411\u60a8\u7684 add/get \u51fd\u6570"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"cache.add_cache = add_cache\ncache.get_cache = get_cache\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u7f13\u5b58\u521d\u59cb\u5316\u53c2\u6570",children:"\u7f13\u5b58\u521d\u59cb\u5316\u53c2\u6570"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'def __init__(\n    self,\n    type: Optional[Literal["local", "redis", "redis-semantic", "s3", "gcs", "disk"]] = "local",\n    supported_call_types: Optional[\n        List[Literal["completion", "acompletion", "embedding", "aembedding", "atranscription", "transcription"]]\n    ] = ["completion", "acompletion", "embedding", "aembedding", "atranscription", "transcription"],\n    ttl: Optional[float] = None,\n    default_in_memory_ttl: Optional[float] = None,\n\n    # redis \u7f13\u5b58\u53c2\u6570\n    host: Optional[str] = None,\n    port: Optional[str] = None,\n    password: Optional[str] = None,\n    namespace: Optional[str] = None,\n    default_in_redis_ttl: Optional[float] = None,\n    redis_flush_size=None,\n    \n    # GCP IAM Redis \u8ba4\u8bc1\u53c2\u6570\n    gcp_service_account: Optional[str] = None,\n    gcp_ssl_ca_certs: Optional[str] = None,\n    ssl: Optional[bool] = None,\n    ssl_cert_reqs: Optional[Union[str, None]] = None,\n    ssl_check_hostname: Optional[bool] = None,\n\n    # redis \u8bed\u4e49\u7f13\u5b58\u53c2\u6570\n    similarity_threshold: Optional[float] = None,\n    redis_semantic_cache_embedding_model: str = "text-embedding-ada-002",\n    redis_semantic_cache_index_name: Optional[str] = None,\n\n    # s3 \u6876\uff0cboto3 \u914d\u7f6e\n    s3_bucket_name: Optional[str] = None,\n    s3_region_name: Optional[str] = None,\n    s3_api_version: Optional[str] = None,\n    s3_path: Optional[str] = None, # \u5982\u679c\u60a8\u5e0c\u671b\u4fdd\u5b58\u5230\u7279\u5b9a\u8def\u5f84\n    s3_use_ssl: Optional[bool] = True,\n    s3_verify: Optional[Union[bool, str]] = None,\n    s3_endpoint_url: Optional[str] = None,\n    s3_aws_access_key_id: Optional[str] = None,\n    s3_aws_secret_access_key: Optional[str] = None,\n    s3_aws_session_token: Optional[str] = None,\n    s3_config: Optional[Any] = None,\n\n    # \u78c1\u76d8\u7f13\u5b58\u53c2\u6570\n    disk_cache_dir=None,\n\n    # Qdrant \u7f13\u5b58\u53c2\u6570\n    qdrant_api_base: Optional[str] = None,\n    qdrant_api_key: Optional[str] = None,\n    qdrant_collection_name: Optional[str] = None,\n    qdrant_quantization_config: Optional[str] = None,\n    qdrant_semantic_cache_embedding_model="text-embedding-ada-002",\n\n    **kwargs\n):\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u65e5\u5fd7\u8bb0\u5f55",children:"\u65e5\u5fd7\u8bb0\u5f55"}),"\n",(0,t.jsxs)(n.p,{children:["\u7f13\u5b58\u547d\u4e2d\u4f1a\u5728\u6210\u529f\u4e8b\u4ef6\u4e2d\u4ee5 ",(0,t.jsx)(n.code,{children:'kwarg["cache_hit"]'})," \u7684\u5f62\u5f0f\u8fdb\u884c\u65e5\u5fd7\u8bb0\u5f55\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f\u5982\u4f55\u8bbf\u95ee\u5b83\u7684\u793a\u4f8b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import litellm\nfrom litellm.integrations.custom_logger import CustomLogger\nfrom litellm import completion, acompletion, Cache\n\n# \u521b\u5efa\u81ea\u5b9a\u4e49\u56de\u8c03\u7528\u4e8e\u6210\u529f\u4e8b\u4ef6\nclass MyCustomHandler(CustomLogger):\n  async def async_log_success_event(self, kwargs, response_obj, start_time, end_time): \n      print(f"On Success")\n      print(f"Value of Cache hit: {kwargs[\'cache_hit\']}")\n\nasync def test_async_completion_azure_caching():\n  # \u8bbe\u7f6e\u81ea\u5b9a\u4e49\u56de\u8c03\n  customHandler_caching = MyCustomHandler()\n  litellm.callbacks = [customHandler_caching]\n\n  # \u521d\u59cb\u5316\u7f13\u5b58 \n  litellm.cache = Cache(type="redis", host=os.environ[\'REDIS_HOST\'], port=os.environ[\'REDIS_PORT\'], password=os.environ[\'REDIS_PASSWORD\'])\n  unique_time = time.time()\n  response1 = await litellm.acompletion(model="azure/chatgpt-v-2",\n                          messages=[{\n                              "role": "user",\n                              "content": f"Hi \ud83d\udc4b - i\'m async azure {unique_time}"\n                          }],\n                          caching=True)\n  await asyncio.sleep(1)\n  print(f"customHandler_caching.states pre-cache hit: {customHandler_caching.states}")\n  response2 = await litellm.acompletion(model="azure/chatgpt-v-2",\n                          messages=[{\n                              "role": "user",\n                              "content": f"Hi \ud83d\udc4b - i\'m async azure {unique_time}"\n                          }],\n                          caching=True)\n  await asyncio.sleep(1) # \u6210\u529f\u56de\u8c03\u5728\u5e76\u884c\u4e2d\u5b8c\u6210\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{})})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},28453(e,n,s){s.d(n,{R:()=>a,x:()=>o});var l=s(96540);const t={},r=l.createContext(t);function a(e){const n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),l.createElement(r.Provider,{value:n},e.children)}},49489(e,n,s){s.d(n,{A:()=>N});var l=s(96540),t=s(18215),r=s(24245),a=s(56347),o=s(36494),c=s(62814),i=s(45167),d=s(69900);function p(e){return l.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,l.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:n,children:s}=e;return(0,l.useMemo)(()=>{const e=n??function(e){return p(e).map(({props:{value:e,label:n,attributes:s,default:l}})=>({value:e,label:n,attributes:s,default:l}))}(s);return function(e){const n=(0,i.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,s])}function m({value:e,tabValues:n}){return n.some(n=>n.value===e)}function u({queryString:e=!1,groupId:n}){const s=(0,a.W6)(),t=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(t),(0,l.useCallback)(e=>{if(!t)return;const n=new URLSearchParams(s.location.search);n.set(t,e),s.replace({...s.location,search:n.toString()})},[t,s])]}function g(e){const{defaultValue:n,queryString:s=!1,groupId:t}=e,r=h(e),[a,c]=(0,l.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=n.find(e=>e.default)??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:r})),[i,p]=u({queryString:s,groupId:t}),[g,_]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,t]=(0,d.Dv)(n);return[s,(0,l.useCallback)(e=>{n&&t.set(e)},[n,t])]}({groupId:t}),x=(()=>{const e=i??g;return m({value:e,tabValues:r})?e:null})();(0,o.A)(()=>{x&&c(x)},[x]);return{selectedValue:a,selectValue:(0,l.useCallback)(e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);c(e),p(e),_(e)},[p,_,r]),tabValues:r}}var _=s(11062);const x="tabList__CuJ",j="tabItem_LNqP";var b=s(74848);function f({className:e,block:n,selectedValue:s,selectValue:l,tabValues:a}){const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,r.a_)(),i=e=>{const n=e.currentTarget,t=o.indexOf(n),r=a[t].value;r!==s&&(c(n),l(r))},d=e=>{let n=null;switch(e.key){case"Enter":i(e);break;case"ArrowRight":{const s=o.indexOf(e.currentTarget)+1;n=o[s]??o[0];break}case"ArrowLeft":{const s=o.indexOf(e.currentTarget)-1;n=o[s]??o[o.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":n},e),children:a.map(({value:e,label:n,attributes:l})=>(0,b.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{o.push(e)},onKeyDown:d,onClick:i,...l,className:(0,t.A)("tabs__item",j,l?.className,{"tabs__item--active":s===e}),children:n??e},e))})}function y({lazy:e,children:n,selectedValue:s}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find(e=>e.props.value===s);return e?(0,l.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:r.map((e,n)=>(0,l.cloneElement)(e,{key:n,hidden:e.props.value!==s}))})}function v(e){const n=g(e);return(0,b.jsxs)("div",{className:(0,t.A)("tabs-container",x),children:[(0,b.jsx)(f,{...n,...e}),(0,b.jsx)(y,{...n,...e})]})}function N(e){const n=(0,_.A)();return(0,b.jsx)(v,{...e,children:p(e.children)},String(n))}}}]);