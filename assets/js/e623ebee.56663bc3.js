"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[71184],{7227(e,n,s){s.d(n,{A:()=>i});s(96540);var l=s(18215);const r="tabItem_Ymn6";var o=s(74848);function i({children:e,hidden:n,className:s}){return(0,o.jsx)("div",{role:"tabpanel",className:(0,l.A)(r,s),hidden:n,children:e})}},28453(e,n,s){s.d(n,{R:()=>i,x:()=>t});var l=s(96540);const r={},o=l.createContext(r);function i(e){const n=l.useContext(o);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),l.createElement(o.Provider,{value:n},e.children)}},47756(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>h});const l=JSON.parse('{"id":"providers/bedrock","title":"AWS Bedrock","description":"\u6240\u6709 Bedrock \u6a21\u578b\uff08Anthropic\u3001Meta\u3001Deepseek\u3001Mistral\u3001Amazon \u7b49\uff09\u5747\u53d7\u652f\u6301","source":"@site/docs/providers/bedrock.md","sourceDirName":"providers","slug":"/providers/bedrock","permalink":"/docs/providers/bedrock","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"AWS Sagemaker","permalink":"/docs/providers/aws_sagemaker"},"next":{"title":"\u5d4c\u5165","permalink":"/docs/providers/bedrock_embedding"}}');var r=s(74848),o=s(28453),i=s(49489),t=s(7227);const a={},c="AWS Bedrock",d={},h=[{value:"\u8eab\u4efd\u9a8c\u8bc1",id:"\u8eab\u4efd\u9a8c\u8bc1",level:2},{value:"\u7528\u6cd5",id:"\u7528\u6cd5",level:2},{value:"LiteLLM \u4ee3\u7406\u7528\u6cd5",id:"litellm-\u4ee3\u7406\u7528\u6cd5",level:2},{value:"1. \u8bbe\u7f6e config.yaml",id:"1-\u8bbe\u7f6e-configyaml",level:3},{value:"2. \u542f\u52a8\u4ee3\u7406",id:"2-\u542f\u52a8\u4ee3\u7406",level:3},{value:"3. \u6d4b\u8bd5",id:"3-\u6d4b\u8bd5",level:3},{value:"\u8bbe\u7f6e temperature\u3001top p \u7b49",id:"\u8bbe\u7f6e-temperaturetop-p-\u7b49",level:2},{value:"\u4f20\u9012\u63d0\u4f9b\u5546\u7279\u5b9a\u53c2\u6570",id:"\u4f20\u9012\u63d0\u4f9b\u5546\u7279\u5b9a\u53c2\u6570",level:2},{value:"\u7528\u6cd5 - \u8bf7\u6c42\u5143\u6570\u636e",id:"\u7528\u6cd5---\u8bf7\u6c42\u5143\u6570\u636e",level:2},{value:"\u7528\u6cd5 - \u51fd\u6570\u8c03\u7528 / \u5de5\u5177\u8c03\u7528",id:"\u7528\u6cd5---\u51fd\u6570\u8c03\u7528--\u5de5\u5177\u8c03\u7528",level:2},{value:"\u7528\u6cd5 - \u89c6\u89c9",id:"\u7528\u6cd5---\u89c6\u89c9",level:2},{value:"\u7528\u6cd5 - &#39;thinking&#39; / &#39;reasoning content&#39;",id:"\u7528\u6cd5---thinking--reasoning-content",level:2},{value:"\u5c06 <code>thinking</code> \u4f20\u9012\u7ed9 Anthropic \u6a21\u578b",id:"\u5c06-thinking-\u4f20\u9012\u7ed9-anthropic-\u6a21\u578b",level:3},{value:"\u7528\u6cd5 - Anthropic Beta \u529f\u80fd",id:"\u7528\u6cd5---anthropic-beta-\u529f\u80fd",level:2},{value:"\u652f\u6301\u7684 Beta \u529f\u80fd",id:"\u652f\u6301\u7684-beta-\u529f\u80fd",level:3},{value:"\u7528\u6cd5 - \u7ed3\u6784\u5316\u8f93\u51fa / JSON \u6a21\u5f0f",id:"\u7528\u6cd5---\u7ed3\u6784\u5316\u8f93\u51fa--json-\u6a21\u5f0f",level:2},{value:"\u7528\u6cd5 - \u5ef6\u8fdf\u4f18\u5316\u63a8\u7406",id:"\u7528\u6cd5---\u5ef6\u8fdf\u4f18\u5316\u63a8\u7406",level:2},{value:"\u7528\u6cd5 - \u670d\u52a1\u5c42",id:"\u7528\u6cd5---\u670d\u52a1\u5c42",level:2},{value:"\u7528\u6cd5 - Bedrock Guardrails",id:"\u7528\u6cd5---bedrock-guardrails",level:2},{value:"\u4f7f\u7528 <code>guarded_text</code> \u8fdb\u884c\u9009\u62e9\u6027\u5185\u5bb9\u5ba1\u6838",id:"\u4f7f\u7528-guarded_text-\u8fdb\u884c\u9009\u62e9\u6027\u5185\u5bb9\u5ba1\u6838",level:3},{value:"\u7528\u6cd5 - &quot;\u52a9\u624b\u9884\u586b\u5145&quot;",id:"\u7528\u6cd5---\u52a9\u624b\u9884\u586b\u5145",level:2},{value:"\u53d1\u9001\u5230 Claude \u7684\u793a\u4f8b\u63d0\u793a",id:"\u53d1\u9001\u5230-claude-\u7684\u793a\u4f8b\u63d0\u793a",level:3},{value:"\u7528\u6cd5 - &quot;\u7cfb\u7edf&quot;\u6d88\u606f",id:"\u7528\u6cd5---\u7cfb\u7edf\u6d88\u606f",level:2},{value:"\u53d1\u9001\u5230 Claude \u7684\u793a\u4f8b\u63d0\u793a",id:"\u53d1\u9001\u5230-claude-\u7684\u793a\u4f8b\u63d0\u793a-1",level:3},{value:"\u7528\u6cd5 - \u6d41\u5f0f\u4f20\u8f93",id:"\u7528\u6cd5---\u6d41\u5f0f\u4f20\u8f93",level:2},{value:"\u793a\u4f8b\u6d41\u5f0f\u8f93\u51fa\u5757",id:"\u793a\u4f8b\u6d41\u5f0f\u8f93\u51fa\u5757",level:4},{value:"\u8de8\u533a\u57df\u63a8\u7406",id:"\u8de8\u533a\u57df\u63a8\u7406",level:2},{value:"1. \u8bbe\u7f6e config.yaml",id:"1-\u8bbe\u7f6e-configyaml-1",level:4},{value:"2. \u542f\u52a8\u4ee3\u7406",id:"2-\u542f\u52a8\u4ee3\u7406-1",level:4},{value:"3. \u6d4b\u8bd5",id:"3-\u6d4b\u8bd5-1",level:4},{value:"\u8bbe\u7f6e &#39;converse&#39; / &#39;invoke&#39; \u8def\u7531",id:"\u8bbe\u7f6e-converse--invoke-\u8def\u7531",level:2},{value:"\u4ea4\u66ff\u7528\u6237/\u52a9\u624b\u6d88\u606f",id:"\u4ea4\u66ff\u7528\u6237\u52a9\u624b\u6d88\u606f",level:2},{value:"\u7528\u6cd5 - PDF / \u6587\u6863\u7406\u89e3",id:"\u7528\u6cd5---pdf--\u6587\u6863\u7406\u89e3",level:2},{value:"url",id:"url",level:3},{value:"base64",id:"base64",level:3},{value:"OpenAI GPT OSS",id:"openai-gpt-oss",level:3},{value:"TwelveLabs Pegasus - \u89c6\u9891\u7406\u89e3",id:"twelvelabs-pegasus---\u89c6\u9891\u7406\u89e3",level:2},{value:"\u652f\u6301\u7684\u529f\u80fd",id:"\u652f\u6301\u7684\u529f\u80fd",level:3},{value:"\u4f7f\u7528 S3 \u89c6\u9891",id:"\u4f7f\u7528-s3-\u89c6\u9891",level:3},{value:"\u4f7f\u7528 Base64 \u89c6\u9891",id:"\u4f7f\u7528-base64-\u89c6\u9891",level:3},{value:"\u91cd\u8981\u8bf4\u660e",id:"\u91cd\u8981\u8bf4\u660e",level:3},{value:"\u9884\u914d\u7f6e\u541e\u5410\u91cf\u6a21\u578b",id:"\u9884\u914d\u7f6e\u541e\u5410\u91cf\u6a21\u578b",level:2},{value:"\u652f\u6301\u7684 AWS Bedrock \u6a21\u578b",id:"\u652f\u6301\u7684-aws-bedrock-\u6a21\u578b",level:2},{value:"Bedrock \u5d4c\u5165",id:"bedrock-\u5d4c\u5165",level:2},{value:"API \u5bc6\u94a5",id:"api-\u5bc6\u94a5",level:3},{value:"\u7528\u6cd5",id:"\u7528\u6cd5-1",level:3},{value:"Titan V2 - encoding_format \u652f\u6301",id:"titan-v2---encoding_format-\u652f\u6301",level:4},{value:"\u652f\u6301\u7684 AWS Bedrock \u5d4c\u5165\u6a21\u578b",id:"\u652f\u6301\u7684-aws-bedrock-\u5d4c\u5165\u6a21\u578b",level:2},{value:"\u9ad8\u7ea7 - \u5220\u9664\u4e0d\u652f\u6301\u7684\u53c2\u6570",id:"\u9ad8\u7ea7---\u5220\u9664\u4e0d\u652f\u6301\u7684\u53c2\u6570",level:3},{value:"\u9ad8\u7ea7 - \u4f20\u9012\u6a21\u578b/\u63d0\u4f9b\u5546\u7279\u5b9a\u53c2\u6570",id:"\u9ad8\u7ea7---\u4f20\u9012\u6a21\u578b\u63d0\u4f9b\u5546\u7279\u5b9a\u53c2\u6570",level:3},{value:"\u56fe\u50cf\u751f\u6210",id:"\u56fe\u50cf\u751f\u6210",level:2},{value:"Rerank API",id:"rerank-api",level:2},{value:"Bedrock \u5e94\u7528\u63a8\u7406\u914d\u7f6e\u6587\u4ef6",id:"bedrock-\u5e94\u7528\u63a8\u7406\u914d\u7f6e\u6587\u4ef6",level:2},{value:"\u901a\u8fc7 <code>model_id</code> \u8bbe\u7f6e",id:"\u901a\u8fc7-model_id-\u8bbe\u7f6e",level:3},{value:"Boto3 - \u8eab\u4efd\u9a8c\u8bc1",id:"boto3---\u8eab\u4efd\u9a8c\u8bc1",level:2},{value:"\u5c06\u51ed\u636e\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012 - Completion()",id:"\u5c06\u51ed\u636e\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012---completion",level:3},{value:"\u4f20\u9012\u989d\u5916\u7684\u5934 + \u81ea\u5b9a\u4e49 API \u7aef\u70b9",id:"\u4f20\u9012\u989d\u5916\u7684\u5934--\u81ea\u5b9a\u4e49-api-\u7aef\u70b9",level:3},{value:"SSO \u767b\u5f55\uff08AWS \u914d\u7f6e\u6587\u4ef6\uff09",id:"sso-\u767b\u5f55aws-\u914d\u7f6e\u6587\u4ef6",level:3},{value:"STS\uff08\u57fa\u4e8e\u89d2\u8272\u7684\u8eab\u4efd\u9a8c\u8bc1\uff09",id:"sts\u57fa\u4e8e\u89d2\u8272\u7684\u8eab\u4efd\u9a8c\u8bc1",level:3},{value:"IAM Roles Anywhere\uff08\u672c\u5730/\u5916\u90e8\u5de5\u4f5c\u8d1f\u8f7d\uff09",id:"iam-roles-anywhere\u672c\u5730\u5916\u90e8\u5de5\u4f5c\u8d1f\u8f7d",level:3},{value:"AssumeRole \u6240\u9700\u7684 AWS IAM \u7b56\u7565",id:"assumerole-\u6240\u9700\u7684-aws-iam-\u7b56\u7565",level:3},{value:"\u793a\u4f8b IAM \u7b56\u7565",id:"\u793a\u4f8b-iam-\u7b56\u7565",level:4},{value:"\u5c06\u5916\u90e8 BedrockRuntime.Client \u4f5c\u4e3a\u53c2\u6570\u4f20\u9012 - Completion()",id:"\u5c06\u5916\u90e8-bedrockruntimeclient-\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012---completion",level:3},{value:"\u901a\u8fc7\u5185\u90e8\u4ee3\u7406\u8c03\u7528\uff08\u4e0d\u517c\u5bb9 bedrock url\uff09",id:"\u901a\u8fc7\u5185\u90e8\u4ee3\u7406\u8c03\u7528\u4e0d\u517c\u5bb9-bedrock-url",level:2}];function m(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"aws-bedrock",children:"AWS Bedrock"})}),"\n",(0,r.jsx)(n.p,{children:"\u6240\u6709 Bedrock \u6a21\u578b\uff08Anthropic\u3001Meta\u3001Deepseek\u3001Mistral\u3001Amazon \u7b49\uff09\u5747\u53d7\u652f\u6301"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u5c5e\u6027"}),(0,r.jsx)(n.th,{children:"\u8be6\u60c5"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u63cf\u8ff0"}),(0,r.jsx)(n.td,{children:"Amazon Bedrock \u662f\u4e00\u9879\u5b8c\u5168\u6258\u7ba1\u7684\u670d\u52a1\uff0c\u63d0\u4f9b\u9ad8\u6027\u80fd\u57fa\u7840\u6a21\u578b\uff08FMs\uff09\u7684\u9009\u62e9\u3002"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"LiteLLM \u4e0a\u7684\u63d0\u4f9b\u5546\u8def\u7531"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"bedrock/"}),"\u3001",(0,r.jsx)(n.a,{href:"#%E8%AE%BE%E7%BD%AE-converse--invoke-%E8%B7%AF%E7%94%B1",children:(0,r.jsx)(n.code,{children:"bedrock/converse/"})}),"\u3001",(0,r.jsx)(n.a,{href:"#%E8%AE%BE%E7%BD%AE-invoke-%E8%B7%AF%E7%94%B1",children:(0,r.jsx)(n.code,{children:"bedrock/invoke/"})}),"\u3001",(0,r.jsx)(n.a,{href:"#%E9%80%9A%E8%BF%87%E5%86%85%E9%83%A8%E4%BB%A3%E7%90%86%E8%B0%83%E7%94%A8",children:(0,r.jsx)(n.code,{children:"bedrock/converse_like/"})}),"\u3001",(0,r.jsx)(n.a,{href:"#deepseek-%E9%9D%9E-r1",children:(0,r.jsx)(n.code,{children:"bedrock/llama/"})}),"\u3001",(0,r.jsx)(n.a,{href:"#deepseek-r1",children:(0,r.jsx)(n.code,{children:"bedrock/deepseek_r1/"})}),"\u3001",(0,r.jsx)(n.a,{href:"#qwen3-%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9E%8B",children:(0,r.jsx)(n.code,{children:"bedrock/qwen3/"})}),"\u3001",(0,r.jsx)(n.a,{href:"/docs/providers/bedrock_imported#qwen2-%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9E%8B",children:(0,r.jsx)(n.code,{children:"bedrock/qwen2/"})}),"\u3001",(0,r.jsx)(n.a,{href:"/docs/providers/bedrock_imported#openai-%E5%85%BC%E5%AE%B9%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9E%8B-qwen-25-vl-%E7%AD%89",children:(0,r.jsx)(n.code,{children:"bedrock/openai/"})})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u63d0\u4f9b\u5546\u6587\u6863"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/bedrock/latest/userguide/what-is-bedrock.html",children:"Amazon Bedrock \u2197"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u652f\u6301\u7684 OpenAI \u7aef\u70b9"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"/chat/completions"}),"\u3001",(0,r.jsx)(n.code,{children:"/completions"}),"\u3001",(0,r.jsx)(n.code,{children:"/embeddings"}),"\u3001",(0,r.jsx)(n.code,{children:"/images/generations"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Rerank \u7aef\u70b9"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"/rerank"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u76f4\u901a\u7aef\u70b9"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"/docs/pass_through/bedrock",children:"\u652f\u6301"})})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["LiteLLM \u9700\u8981\u5728\u60a8\u7684\u7cfb\u7edf\u4e0a\u5b89\u88c5 ",(0,r.jsx)(n.code,{children:"boto3"})," \u624d\u80fd\u8fdb\u884c Bedrock \u8bf7\u6c42"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"pip install boto3>=1.28.57\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["\u5bf9\u4e8e ",(0,r.jsx)(n.strong,{children:"Amazon Nova \u6a21\u578b"}),"\uff1a\u5347\u7ea7\u5230 v1.53.5+"]})}),"\n",(0,r.jsx)(n.h2,{id:"\u8eab\u4efd\u9a8c\u8bc1",children:"\u8eab\u4efd\u9a8c\u8bc1"}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["LiteLLM \u4f7f\u7528 boto3 \u6765\u5904\u7406\u8eab\u4efd\u9a8c\u8bc1\u3002\u652f\u6301\u6240\u6709\u8fd9\u4e9b\u9009\u9879 - ",(0,r.jsx)(n.a,{href:"https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html#credentials%E3%80%82",children:"https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html#credentials\u3002"})]})}),"\n",(0,r.jsxs)(n.p,{children:["\u9664\u4e86\u4f20\u7edf\u7684 boto3 \u8eab\u4efd\u9a8c\u8bc1\u65b9\u6cd5\u5916\uff0cLiteLLM \u8fd8\u652f\u6301 API \u5bc6\u94a5\u8eab\u4efd\u9a8c\u8bc1\u3002\u6709\u5173\u5176\u4ed6 API \u5bc6\u94a5\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ",(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/bedrock/latest/userguide/api-keys.html",children:"\u6587\u6863"}),"\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u9009\u9879 1\uff1a\u4f7f\u7528 AWS_BEARER_TOKEN_BEDROCK \u73af\u5883\u53d8\u91cf"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'export AWS_BEARER_TOKEN_BEDROCK="your-api-key"\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u9009\u9879 2\uff1a\u4f7f\u7528 api_key \u53c2\u6570\u5c06 API \u5bc6\u94a5\u4f20\u9012\u7ed9 completion\u3001embedding\u3001image_generation API \u8c03\u7528\u3002"}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'response = completion(\n  model="bedrock/anthropic.claude-3-sonnet-20240229-v1:0",\n  messages=[{ "content": "Hello, how are you?","role": "user"}],\n  api_key="your-api-key"\n)\n'})})}),(0,r.jsx)(t.A,{value:"proxy",label:"PROXY",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: bedrock-claude-3-sonnet\n    litellm_params:\n      model: bedrock/anthropic.claude-3-sonnet-20240229-v1:0\n      api_key: os.environ/AWS_BEARER_TOKEN_BEDROCK\n"})})})]}),"\n",(0,r.jsx)(n.h2,{id:"\u7528\u6cd5",children:"\u7528\u6cd5"}),"\n",(0,r.jsx)("a",{target:"_blank",href:"https://colab.research.google.com/github/BerriAI/litellm/blob/main/cookbook/LiteLLM_Bedrock.ipynb",children:(0,r.jsx)("img",{src:"https://colab.research.google.com/assets/colab-badge.svg",alt:"Open In Colab"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import os\nfrom litellm import completion\n\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\nresponse = completion(\n  model="bedrock/anthropic.claude-3-sonnet-20240229-v1:0",\n  messages=[{ "content": "Hello, how are you?","role": "user"}]\n)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"litellm-\u4ee3\u7406\u7528\u6cd5",children:"LiteLLM \u4ee3\u7406\u7528\u6cd5"}),"\n",(0,r.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f\u5982\u4f55\u4f7f\u7528 LiteLLM \u4ee3\u7406\u670d\u52a1\u5668\u8c03\u7528 Bedrock"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u8bbe\u7f6e-configyaml",children:"1. \u8bbe\u7f6e config.yaml"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: bedrock-claude-3-5-sonnet\n    litellm_params:\n      model: bedrock/anthropic.claude-3-5-sonnet-20240620-v1:0\n      aws_access_key_id: os.environ/AWS_ACCESS_KEY_ID\n      aws_secret_access_key: os.environ/AWS_SECRET_ACCESS_KEY\n      aws_region_name: os.environ/AWS_REGION_NAME\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u6240\u6709\u53ef\u80fd\u7684\u8eab\u4efd\u9a8c\u8bc1\u53c2\u6570\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"aws_access_key_id: Optional[str],\naws_secret_access_key: Optional[str],\naws_session_token: Optional[str],\naws_region_name: Optional[str],\naws_session_name: Optional[str],\naws_profile_name: Optional[str],\naws_role_name: Optional[str],\naws_web_identity_token: Optional[str],\naws_bedrock_runtime_endpoint: Optional[str],\napi_key: Optional[str],\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-\u542f\u52a8\u4ee3\u7406",children:"2. \u542f\u52a8\u4ee3\u7406"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"litellm --config /path/to/config.yaml\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-\u6d4b\u8bd5",children:"3. \u6d4b\u8bd5"}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"Curl",label:"Curl Request",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'curl --location \'http://0.0.0.0:4000/chat/completions\' \\\n--header \'Content-Type: application/json\' \\\n--data \' {\n      "model": "bedrock-claude-v1",\n      "messages": [\n        {\n          "role": "user",\n          "content": "what llm are you"\n        }\n      ]\n    }\n\'\n'})})}),(0,r.jsx)(t.A,{value:"openai",label:"OpenAI v1.0.0+",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import openai\nclient = openai.OpenAI(\n    api_key="anything",\n    base_url="http://0.0.0.0:4000"\n)\n\n# \u53d1\u9001\u5230\u5728 litellm \u4ee3\u7406\u4e0a\u8bbe\u7f6e\u7684\u6a21\u578b\u7684\u8bf7\u6c42\uff0c`litellm --model`\nresponse = client.chat.completions.create(model="bedrock-claude-v1", messages = [\n    {\n        "role": "user",\n        "content": "this is a test request, write a short poem"\n    }\n])\n\nprint(response)\n\n'})})}),(0,r.jsx)(t.A,{value:"langchain",label:"Langchain",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from langchain.chat_models import ChatOpenAI\nfrom langchain.prompts.chat import (\n    ChatPromptTemplate,\n    HumanMessagePromptTemplate,\n    SystemMessagePromptTemplate,\n)\nfrom langchain.schema import HumanMessage, SystemMessage\n\nchat = ChatOpenAI(\n    openai_api_base="http://0.0.0.0:4000", # \u5c06 openai_api_base \u8bbe\u7f6e\u4e3a LiteLLM \u4ee3\u7406\n    model = "bedrock-claude-v1",\n    temperature=0.1\n)\n\nmessages = [\n    SystemMessage(\n        content="You are a helpful assistant that im using to make a test request to."\n    ),\n    HumanMessage(\n        content="test from litellm. tell me why it\'s amazing in 1 sentence"\n    ),\n]\nresponse = chat(messages)\n\nprint(response)\n'})})})]}),"\n",(0,r.jsx)(n.h2,{id:"\u8bbe\u7f6e-temperaturetop-p-\u7b49",children:"\u8bbe\u7f6e temperature\u3001top p \u7b49"}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import os\nfrom litellm import completion\n\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\nresponse = completion(\n  model="bedrock/anthropic.claude-3-sonnet-20240229-v1:0",\n  messages=[{ "content": "Hello, how are you?","role": "user"}],\n  temperature=0.7,\n  top_p=1\n)\n'})})}),(0,r.jsxs)(t.A,{value:"proxy",label:"PROXY",children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5728 yaml \u4e0a\u8bbe\u7f6e"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: bedrock-claude-v1\n    litellm_params:\n      model: bedrock/anthropic.claude-instant-v1\n      temperature: <your-temp>\n      top_p: <your-top-p>\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5728\u8bf7\u6c42\u4e0a\u8bbe\u7f6e"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'\nimport openai\nclient = openai.OpenAI(\n    api_key="anything",\n    base_url="http://0.0.0.0:4000"\n)\n\n# \u53d1\u9001\u5230\u5728 litellm \u4ee3\u7406\u4e0a\u8bbe\u7f6e\u7684\u6a21\u578b\u7684\u8bf7\u6c42\uff0c`litellm --model`\nresponse = client.chat.completions.create(model="bedrock-claude-v1", messages = [\n    {\n        "role": "user",\n        "content": "this is a test request, write a short poem"\n    }\n],\ntemperature=0.7,\ntop_p=1\n)\n\nprint(response)\n\n'})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u4f20\u9012\u63d0\u4f9b\u5546\u7279\u5b9a\u53c2\u6570",children:"\u4f20\u9012\u63d0\u4f9b\u5546\u7279\u5b9a\u53c2\u6570"}),"\n",(0,r.jsxs)(n.p,{children:["\u5982\u679c\u60a8\u5411 litellm \u4f20\u9012\u975e openai \u53c2\u6570\uff0c\u6211\u4eec\u5047\u8bbe\u5b83\u662f\u63d0\u4f9b\u5546\u7279\u5b9a\u7684\uff0c\u5e76\u4f5c\u4e3a kwarg \u5728\u8bf7\u6c42\u6b63\u6587\u4e2d\u53d1\u9001\u3002",(0,r.jsx)(n.a,{href:"/docs/completion/input#provider-specific-params",children:"\u4e86\u89e3\u66f4\u591a"})]}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import os\nfrom litellm import completion\n\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\nresponse = completion(\n  model="bedrock/anthropic.claude-3-sonnet-20240229-v1:0",\n  messages=[{ "content": "Hello, how are you?","role": "user"}],\n  top_k=1 # \ud83d\udc48 \u63d0\u4f9b\u5546\u7279\u5b9a\u53c2\u6570\n)\n'})})}),(0,r.jsxs)(t.A,{value:"proxy",label:"PROXY",children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5728 yaml \u4e0a\u8bbe\u7f6e"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: bedrock-claude-v1\n    litellm_params:\n      model: bedrock/anthropic.claude-instant-v1\n      top_k: 1 # \ud83d\udc48 \u63d0\u4f9b\u5546\u7279\u5b9a\u53c2\u6570\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5728\u8bf7\u6c42\u4e0a\u8bbe\u7f6e"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'\nimport openai\nclient = openai.OpenAI(\n    api_key="anything",\n    base_url="http://0.0.0.0:4000"\n)\n\n# \u53d1\u9001\u5230\u5728 litellm \u4ee3\u7406\u4e0a\u8bbe\u7f6e\u7684\u6a21\u578b\u7684\u8bf7\u6c42\uff0c`litellm --model`\nresponse = client.chat.completions.create(model="bedrock-claude-v1", messages = [\n    {\n        "role": "user",\n        "content": "this is a test request, write a short poem"\n    }\n],\ntemperature=0.7,\nextra_body={\n    top_k=1 # \ud83d\udc48 \u63d0\u4f9b\u5546\u7279\u5b9a\u53c2\u6570\n}\n)\n\nprint(response)\n\n'})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u7528\u6cd5---\u8bf7\u6c42\u5143\u6570\u636e",children:"\u7528\u6cd5 - \u8bf7\u6c42\u5143\u6570\u636e"}),"\n",(0,r.jsx)(n.p,{children:"\u5c06\u5143\u6570\u636e\u9644\u52a0\u5230 Bedrock \u8bf7\u6c42\u4ee5\u8fdb\u884c\u65e5\u5fd7\u8bb0\u5f55\u548c\u6210\u672c\u5f52\u5c5e\u3002"}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import os\nfrom litellm import completion\n\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\nresponse = completion(\n    model="bedrock/anthropic.claude-3-5-sonnet-20240620-v1:0",\n    messages=[{"role": "user", "content": "Hello, how are you?"}],\n    requestMetadata={\n        "cost_center": "engineering",\n        "user_id": "user123"\n    }\n)\n'})})}),(0,r.jsxs)(t.A,{value:"proxy",label:"PROXY",children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5728 yaml \u4e0a\u8bbe\u7f6e"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'model_list:\n  - model_name: bedrock-claude-v1\n    litellm_params:\n      model: bedrock/anthropic.claude-3-5-sonnet-20240620-v1:0\n      requestMetadata:\n        cost_center: "engineering"\n'})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5728\u8bf7\u6c42\u4e0a\u8bbe\u7f6e"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import openai\nclient = openai.OpenAI(\n    api_key="anything",\n    base_url="http://0.0.0.0:4000"\n)\n\nresponse = client.chat.completions.create(\n    model="bedrock-claude-v1",\n    messages=[{"role": "user", "content": "Hello"}],\n    extra_body={\n        "requestMetadata": {"cost_center": "engineering"}\n    }\n)\n'})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u7528\u6cd5---\u51fd\u6570\u8c03\u7528--\u5de5\u5177\u8c03\u7528",children:"\u7528\u6cd5 - \u51fd\u6570\u8c03\u7528 / \u5de5\u5177\u8c03\u7528"}),"\n",(0,r.jsx)(n.p,{children:"LiteLLM \u901a\u8fc7 Bedrock \u7684 Converse \u548c Invoke API \u652f\u6301\u5de5\u5177\u8c03\u7528\u3002"}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\n\n# \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\ntools = [\n    {\n        "type": "function",\n        "function": {\n            "name": "get_current_weather",\n            "description": "Get the current weather in a given location",\n            "parameters": {\n                "type": "object",\n                "properties": {\n                    "location": {\n                        "type": "string",\n                        "description": "The city and state, e.g. San Francisco, CA",\n                    },\n                    "unit": {"type": "string", "enum": ["celsius", "fahrenheit"]},\n                },\n                "required": ["location"],\n            },\n        },\n    }\n]\nmessages = [{"role": "user", "content": "What\'s the weather like in Boston today?"}]\n\nresponse = completion(\n    model="bedrock/anthropic.claude-3-sonnet-20240229-v1:0",\n    messages=messages,\n    tools=tools,\n    tool_choice="auto",\n)\n# \u5728\u6b64\u5904\u6dfb\u52a0\u4efb\u4f55\u65ad\u8a00\uff0c\u4ee5\u68c0\u67e5\u54cd\u5e94\u53c2\u6570\nprint(response)\nassert isinstance(response.choices[0].message.tool_calls[0].function.name, str)\nassert isinstance(\n    response.choices[0].message.tool_calls[0].function.arguments, str\n)\n'})})}),(0,r.jsxs)(t.A,{value:"proxy",label:"PROXY",children:[(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8bbe\u7f6e config.yaml"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: bedrock-claude-3-7\n    litellm_params:\n      model: bedrock/us.anthropic.claude-3-7-sonnet-20250219-v1:0 # \u5bf9\u4e8e bedrock invoke\uff0c\u6307\u5b9a `bedrock/invoke/<model>`\n"})}),(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u542f\u52a8\u4ee3\u7406"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"litellm --config /path/to/config.yaml\n"})}),(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"\u6d4b\u8bd5\uff01"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl http://localhost:4000/v1/chat/completions \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer $LITELLM_API_KEY" \\\n-d \'{\n  "model": "bedrock-claude-3-7",\n  "messages": [\n    {\n      "role": "user",\n      "content": "What\'\\\'\'s the weather like in Boston today?"\n    }\n  ],\n  "tools": [\n    {\n      "type": "function",\n      "function": {\n        "name": "get_current_weather",\n        "description": "Get the current weather in a given location",\n        "parameters": {\n          "type": "object",\n          "properties": {\n            "location": {\n              "type": "string",\n              "description": "The city and state, e.g. San Francisco, CA"\n            },\n            "unit": {\n              "type": "string",\n              "enum": ["celsius", "fahrenheit"]\n            }\n          },\n          "required": ["location"]\n        }\n      }\n    }\n  ],\n  "tool_choice": "auto"\n}\n\n\n'})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u7528\u6cd5---\u89c6\u89c9",children:"\u7528\u6cd5 - \u89c6\u89c9"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\n\n# \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\n\ndef encode_image(image_path):\n    import base64\n\n    with open(image_path, "rb") as image_file:\n        return base64.b64encode(image_file.read()).decode("utf-8")\n\n\nimage_path = "../proxy/cached_logo.jpg"\n# \u83b7\u53d6 base64 \u5b57\u7b26\u4e32\nbase64_image = encode_image(image_path)\nresp = litellm.completion(\n    model="bedrock/anthropic.claude-3-sonnet-20240229-v1:0",\n    messages=[\n        {\n            "role": "user",\n            "content": [\n                {"type": "text", "text": "Whats in this image?"},\n                {\n                    "type": "image_url",\n                    "image_url": {\n                        "url": "data:image/jpeg;base64," + base64_image\n                    },\n                },\n            ],\n        }\n    ],\n)\nprint(f"\\nResponse: {resp}")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u7528\u6cd5---thinking--reasoning-content",children:"\u7528\u6cd5 - 'thinking' / 'reasoning content'"}),"\n",(0,r.jsx)(n.p,{children:"\u76ee\u524d\u4ec5\u652f\u6301 Anthropic \u7684 Claude 3.7 Sonnet + Deepseek R1 + GPT-OSS \u6a21\u578b\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u9002\u7528\u4e8e v1.61.20+\u3002"}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 ",(0,r.jsx)(n.code,{children:"message"})," \u548c ",(0,r.jsx)(n.code,{children:"delta"})," \u5bf9\u8c61\u4e2d\u8fd4\u56de 2 \u4e2a\u65b0\u5b57\u6bb5\uff1a"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"reasoning_content"})," - string - \u54cd\u5e94\u7684\u63a8\u7406\u5185\u5bb9"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"thinking_blocks"})," - \u5bf9\u8c61\u5217\u8868\uff08\u4ec5 Anthropic\uff09- \u54cd\u5e94\u7684\u601d\u7ef4\u5757"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u6bcf\u4e2a\u5bf9\u8c61\u5177\u6709\u4ee5\u4e0b\u5b57\u6bb5\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"}),' - Literal["thinking"] - \u601d\u7ef4\u5757\u7684\u7c7b\u578b']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"thinking"})," - string - \u54cd\u5e94\u7684\u601d\u7ef4\u3002\u4e5f\u5728 ",(0,r.jsx)(n.code,{children:"reasoning_content"})," \u4e2d\u8fd4\u56de"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"signature"})," - string - base64 \u7f16\u7801\u7684\u5b57\u7b26\u4e32\uff0c\u7531 Anthropic \u8fd4\u56de\u3002"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5982\u679c\u4f20\u9012\u4e86 'thinking' \u5185\u5bb9\uff08\u4ec5\u5728\u4f7f\u7528\u5de5\u5177\u8c03\u7528\u65f6\u9700\u8981\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"thinking"}),"\uff09\uff0cAnthropic \u9700\u8981\u5728\u540e\u7eed\u8c03\u7528\u4e2d\u63d0\u4f9b ",(0,r.jsx)(n.code,{children:"signature"}),"\u3002",(0,r.jsx)(n.a,{href:"https://docs.anthropic.com/en/docs/build-with-claude/extended-thinking#understanding-thinking-blocks",children:"\u4e86\u89e3\u66f4\u591a"})]}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\n\n# \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\n\nresp = completion(\n    model="bedrock/us.anthropic.claude-3-7-sonnet-20250219-v1:0",\n    messages=[{"role": "user", "content": "What is the capital of France?"}],\n    reasoning_effort="low",\n)\n\nprint(resp)\n'})})}),(0,r.jsxs)(t.A,{value:"proxy",label:"PROXY",children:[(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8bbe\u7f6e config.yaml"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'model_list:\n  - model_name: bedrock-claude-3-7\n    litellm_params:\n      model: bedrock/us.anthropic.claude-3-7-sonnet-20250219-v1:0\n      reasoning_effort: "low" # \ud83d\udc48 \u5728\u6b64\u5904\u6216\u8bf7\u6c42\u4e0a\u8bbe\u7f6e\n'})}),(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u542f\u52a8\u4ee3\u7406"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"litellm --config /path/to/config.yaml\n"})}),(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"\u6d4b\u8bd5\uff01"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl http://localhost:4000/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer <YOUR-LITELLM-KEY>" \\\n  -d \'{\n    "model": "bedrock-claude-3-7",\n    "messages": [{"role": "user", "content": "What is the capital of France?"}],\n    "reasoning_effort": "low" # \ud83d\udc48 \u5728\u6b64\u5904\u6216 CONFIG.YAML \u4e0a\u8bbe\u7f6e\n  }\'\n'})})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u9884\u671f\u54cd\u5e94"})}),"\n",(0,r.jsxs)(n.p,{children:["\u4e0e ",(0,r.jsx)(n.a,{href:"../providers/anthropic#usage---thinking--reasoning_content",children:"Anthropic API \u54cd\u5e94"})," \u76f8\u540c\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'{\n    "id": "chatcmpl-c661dfd7-7530-49c9-b0cc-d5018ba4727d",\n    "created": 1740640366,\n    "model": "us.anthropic.claude-3-7-sonnet-20250219-v1:0",\n    "object": "chat.completion",\n    "system_fingerprint": null,\n    "choices": [\n        {\n            "finish_reason": "stop",\n            "index": 0,\n            "message": {\n                "content": "The capital of France is Paris. It\'s not only the capital city but also the largest city in France, serving as the country\'s major cultural, economic, and political center.",\n                "role": "assistant",\n                "tool_calls": null,\n                "function_call": null,\n                "reasoning_content": "The capital of France is Paris. This is a straightforward factual question.",\n                "thinking_blocks": [\n                    {\n                        "type": "thinking",\n                        "thinking": "The capital of France is Paris. This is a straightforward factual question.",\n                        "signature": "EqoBCkgIARABGAIiQL2UoU0b1OHYi+yCHpBY7U6FQW8/FcoLewocJQPa2HnmLM+NECy50y44F/kD4SULFXi57buI9fAvyBwtyjlOiO0SDE3+r3spdg6PLOo9PBoMma2ku5OTAoR46j9VIjDRlvNmBvff7YW4WI9oU8XagaOBSxLPxElrhyuxppEn7m6bfT40dqBSTDrfiw4FYB4qEPETTI6TA6wtjGAAqmFqKTo="\n                    }\n                ]\n            }\n        }\n    ],\n    "usage": {\n        "completion_tokens": 64,\n        "prompt_tokens": 42,\n        "total_tokens": 106,\n        "completion_tokens_details": null,\n        "prompt_tokens_details": null\n    }\n}\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"\u5c06-thinking-\u4f20\u9012\u7ed9-anthropic-\u6a21\u578b",children:["\u5c06 ",(0,r.jsx)(n.code,{children:"thinking"})," \u4f20\u9012\u7ed9 Anthropic \u6a21\u578b"]}),"\n",(0,r.jsxs)(n.p,{children:["\u4e0e ",(0,r.jsx)(n.a,{href:"../providers/anthropic#usage---thinking--reasoning_content",children:"Anthropic API \u54cd\u5e94"})," \u76f8\u540c\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u7528\u6cd5---anthropic-beta-\u529f\u80fd",children:"\u7528\u6cd5 - Anthropic Beta \u529f\u80fd"}),"\n",(0,r.jsxs)(n.p,{children:["LiteLLM \u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"anthropic-beta"})," \u5934\u652f\u6301 AWS Bedrock \u4e0a\u7684 Anthropic beta \u529f\u80fd\u3002\u8fd9\u53ef\u4ee5\u8bbf\u95ee\u5b9e\u9a8c\u6027\u529f\u80fd\uff0c\u4f8b\u5982\uff1a"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"1M \u4e0a\u4e0b\u6587\u7a97\u53e3"})," - \u9ad8\u8fbe 100 \u4e07\u4e2a tokens \u7684\u4e0a\u4e0b\u6587\uff08Claude Sonnet 4\uff09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u8ba1\u7b97\u673a\u4f7f\u7528\u5de5\u5177"})," - \u53ef\u4ee5\u4e0e\u8ba1\u7b97\u673a\u63a5\u53e3\u4ea4\u4e92\u7684 AI"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Token \u9ad8\u6548\u5de5\u5177"})," - \u66f4\u9ad8\u6548\u7684\u5de5\u5177\u4f7f\u7528\u6a21\u5f0f"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6269\u5c55\u8f93\u51fa"})," - \u9ad8\u8fbe 128K \u8f93\u51fa tokens"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u589e\u5f3a\u601d\u7ef4"})," - \u9ad8\u7ea7\u63a8\u7406\u80fd\u529b"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u652f\u6301\u7684-beta-\u529f\u80fd",children:"\u652f\u6301\u7684 Beta \u529f\u80fd"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Beta \u529f\u80fd"}),(0,r.jsx)(n.th,{children:"\u5934\u503c"}),(0,r.jsx)(n.th,{children:"\u517c\u5bb9\u6a21\u578b"}),(0,r.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"1M \u4e0a\u4e0b\u6587\u7a97\u53e3"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"context-1m-2025-08-07"})}),(0,r.jsx)(n.td,{children:"Claude Sonnet 4"}),(0,r.jsx)(n.td,{children:"\u542f\u7528 100 \u4e07 token \u4e0a\u4e0b\u6587\u7a97\u53e3"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u8ba1\u7b97\u673a\u4f7f\u7528\uff08\u6700\u65b0\uff09"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"computer-use-2025-01-24"})}),(0,r.jsx)(n.td,{children:"Claude 3.7 Sonnet"}),(0,r.jsx)(n.td,{children:"\u6700\u65b0\u8ba1\u7b97\u673a\u4f7f\u7528\u5de5\u5177"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u8ba1\u7b97\u673a\u4f7f\u7528\uff08\u4f20\u7edf\uff09"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"computer-use-2024-10-22"})}),(0,r.jsx)(n.td,{children:"Claude 3.5 Sonnet v2"}),(0,r.jsx)(n.td,{children:"Claude 3.5 \u7684\u8ba1\u7b97\u673a\u4f7f\u7528\u5de5\u5177"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Token \u9ad8\u6548\u5de5\u5177"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"token-efficient-tools-2025-02-19"})}),(0,r.jsx)(n.td,{children:"Claude 3.7 Sonnet"}),(0,r.jsx)(n.td,{children:"\u66f4\u9ad8\u6548\u7684\u5de5\u5177\u4f7f\u7528"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u4ea4\u9519\u601d\u7ef4"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"interleaved-thinking-2025-05-14"})}),(0,r.jsx)(n.td,{children:"Claude 4 \u6a21\u578b"}),(0,r.jsx)(n.td,{children:"\u589e\u5f3a\u7684\u601d\u7ef4\u80fd\u529b"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u6269\u5c55\u8f93\u51fa"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"output-128k-2025-02-19"})}),(0,r.jsx)(n.td,{children:"Claude 3.7 Sonnet"}),(0,r.jsx)(n.td,{children:"\u9ad8\u8fbe 128K \u8f93\u51fa tokens"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u5f00\u53d1\u8005\u601d\u7ef4"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"dev-full-thinking-2025-05-14"})}),(0,r.jsx)(n.td,{children:"Claude 4 \u6a21\u578b"}),(0,r.jsx)(n.td,{children:"\u9762\u5411\u5f00\u53d1\u8005\u7684\u539f\u59cb\u601d\u7ef4\u6a21\u5f0f"})]})]})]}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsxs)(t.A,{value:"sdk",label:"SDK",children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5355\u4e2a Beta \u529f\u80fd"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\nimport os\n\n# \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\n# \u4f7f\u7528 1M \u4e0a\u4e0b\u6587\u7a97\u53e3\u4e0e Claude Sonnet 4\nresponse = completion(\n    model="bedrock/anthropic.claude-sonnet-4-20250115-v1:0",\n    messages=[{"role": "user", "content": "Hello! Testing 1M context window."}],\n    max_tokens=100,\n    extra_headers={\n        "anthropic-beta": "context-1m-2025-08-07"  # \ud83d\udc48 \u542f\u7528 1M \u4e0a\u4e0b\u6587\n    }\n)\n'})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u591a\u4e2a Beta \u529f\u80fd"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\n\n# \u7ec4\u5408\u591a\u4e2a beta \u529f\u80fd\uff08\u9017\u53f7\u5206\u9694\uff09\nresponse = completion(\n    model="bedrock/converse/anthropic.claude-3-5-sonnet-20241022-v2:0",\n    messages=[{"role": "user", "content": "Testing multiple beta features"}],\n    max_tokens=100,\n    extra_headers={\n        "anthropic-beta": "computer-use-2024-10-22,context-1m-2025-08-07"\n    }\n)\n'})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5e26 Beta \u529f\u80fd\u7684\u8ba1\u7b97\u673a\u4f7f\u7528\u5de5\u5177"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\n\n# \u8ba1\u7b97\u673a\u4f7f\u7528\u5de5\u5177\u81ea\u52a8\u6dfb\u52a0 computer-use-2024-10-22\n# \u60a8\u53ef\u4ee5\u6dfb\u52a0\u989d\u5916\u7684 beta \u529f\u80fd\nresponse = completion(\n    model="bedrock/converse/anthropic.claude-3-5-sonnet-20241022-v2:0",\n    messages=[{"role": "user", "content": "Take a screenshot"}],\n    tools=[{\n        "type": "computer_20241022",\n        "name": "computer",\n        "display_width_px": 1920,\n        "display_height_px": 1080\n    }],\n    extra_headers={\n        "anthropic-beta": "context-1m-2025-08-07"  # \u989d\u5916\u7684 beta \u529f\u80fd\n    }\n)\n'})})]}),(0,r.jsxs)(t.A,{value:"proxy",label:"PROXY",children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5728 YAML \u914d\u7f6e\u4e0a\u8bbe\u7f6e"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'model_list:\n  - model_name: claude-sonnet-4-1m\n    litellm_params:\n      model: bedrock/anthropic.claude-sonnet-4-20250115-v1:0\n      extra_headers:\n        anthropic-beta: "context-1m-2025-08-07"  # \ud83d\udc48 \u542f\u7528 1M \u4e0a\u4e0b\u6587\n\n  - model_name: claude-computer-use\n    litellm_params:\n      model: bedrock/converse/anthropic.claude-3-5-sonnet-20241022-v2:0\n      extra_headers:\n        anthropic-beta: "computer-use-2024-10-22,context-1m-2025-08-07"\n\ngeneral_settings:\n  forward_client_headers_to_llm_api: true  # \ud83d\udc48 \u5ba2\u6237\u7aef\u5934\u8f6c\u53d1\u6240\u5fc5\u9700\n'})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5728\u8bf7\u6c42\u4e0a\u8bbe\u7f6e"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import openai\n\nclient = openai.OpenAI(\n    api_key="anything",\n    base_url="http://0.0.0.0:4000"\n)\n\nresponse = client.chat.completions.create(\n    model="claude-sonnet-4-1m",\n    messages=[{\n        "role": "user",\n        "content": "Testing 1M context window"\n    }],\n    extra_headers={\n        "anthropic-beta": "context-1m-2025-08-07"\n    }\n)\n'})}),(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u5bf9\u4e8e\u5ba2\u6237\u7aef\u5934\u8f6c\u53d1"}),"\uff1a\u4f7f\u7528\u4ee3\u7406\u5e76\u53d1\u9001\u6765\u81ea\u5ba2\u6237\u7aef\uff08\u5982 OpenAI SDK\uff09\u7684 ",(0,r.jsx)(n.code,{children:"anthropic-beta"})," \u5934\u65f6\uff0c\u60a8\u9700\u8981\u5728\u4ee3\u7406\u7684 ",(0,r.jsx)(n.code,{children:"general_settings"})," \u4e2d\u542f\u7528 ",(0,r.jsx)(n.code,{children:"forward_client_headers_to_llm_api: true"}),"\u3002\u8fd9\u544a\u8bc9\u4ee3\u7406\u4ece HTTP \u8bf7\u6c42\u4e2d\u63d0\u53d6\u5934\u5e76\u5c06\u5176\u8f6c\u53d1\u5230\u5e95\u5c42 LLM \u63d0\u4f9b\u5546\u3002"]})})]})]}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["Beta \u529f\u80fd\u53ef\u80fd\u9700\u8981\u5728\u60a8\u7684 AWS \u8d26\u6237\u4e2d\u83b7\u5f97\u7279\u6b8a\u8bbf\u95ee\u6743\u9650\u6216\u8bb8\u53ef\u3002\u67d0\u4e9b\u529f\u80fd\u4ec5\u5728\u7279\u5b9a\u7684 AWS \u533a\u57df\u4e2d\u53ef\u7528\u3002\u8bf7\u67e5\u770b ",(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters-anthropic-claude-messages-request-response.html",children:"AWS Bedrock \u6587\u6863"})," \u4ee5\u4e86\u89e3\u53ef\u7528\u6027\u548c\u8bbf\u95ee\u8981\u6c42\u3002"]})}),"\n",(0,r.jsx)(n.h2,{id:"\u7528\u6cd5---\u7ed3\u6784\u5316\u8f93\u51fa--json-\u6a21\u5f0f",children:"\u7528\u6cd5 - \u7ed3\u6784\u5316\u8f93\u51fa / JSON \u6a21\u5f0f"}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\nimport os\nfrom pydantic import BaseModel\n\n# \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\nclass CalendarEvent(BaseModel):\n  name: str\n  date: str\n  participants: list[str]\n\nclass EventsList(BaseModel):\n    events: list[CalendarEvent]\n\nresponse = completion(\n  model="bedrock/anthropic.claude-3-7-sonnet-20250219-v1:0", # \u901a\u8fc7 `bedrock/invoke/anthropic.claude-3-7-sonnet-20250219-v1:0` \u6307\u5b9a invoke\n  response_format=EventsList,\n  messages=[\n    {"role": "system", "content": "You are a helpful assistant designed to output JSON."},\n    {"role": "user", "content": "Who won the world series in 2020?"}\n  ],\n)\nprint(response.choices[0].message.content)\n'})})}),(0,r.jsxs)(t.A,{value:"proxy",label:"PROXY",children:[(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8bbe\u7f6e config.yaml"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: bedrock-claude-3-7\n    litellm_params:\n      model: bedrock/us.anthropic.claude-3-7-sonnet-20250219-v1:0 # \u901a\u8fc7 `bedrock/invoke/<model_name>` \u6307\u5b9a invoke\n      aws_access_key_id: os.environ/CUSTOM_AWS_ACCESS_KEY_ID\n      aws_secret_access_key: os.environ/CUSTOM_AWS_SECRET_ACCESS_KEY\n      aws_region_name: os.environ/CUSTOM_AWS_REGION_NAME\n"})}),(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u542f\u52a8\u4ee3\u7406"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"litellm --config /path/to/config.yaml\n"})}),(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"\u6d4b\u8bd5\uff01"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl http://localhost:4000/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer $LITELLM_KEY" \\\n  -d \'{\n    "model": "bedrock-claude-3-7",\n    "messages": [\n      {\n        "role": "system",\n        "content": "You are a helpful assistant designed to output JSON."\n      },\n      {\n        "role": "user",\n        "content": "Who won the worlde series in 2020?"\n      }\n    ],\n    "response_format": {\n      "type": "json_schema",\n      "json_schema": {\n        "name": "math_reasoning",\n        "description": "reason about maths",\n        "schema": {\n          "type": "object",\n          "properties": {\n            "steps": {\n              "type": "array",\n              "items": {\n                "type": "object",\n                "properties": {\n                  "explanation": { "type": "string" },\n                  "output": { "type": "string" }\n                },\n                "required": ["explanation", "output"],\n                "additionalProperties": false\n              }\n            },\n            "final_answer": { "type": "string" }\n          },\n          "required": ["steps", "final_answer"],\n          "additionalProperties": false\n        },\n        "strict": true\n      }\n    }\n  }\'\n'})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u7528\u6cd5---\u5ef6\u8fdf\u4f18\u5316\u63a8\u7406",children:"\u7528\u6cd5 - \u5ef6\u8fdf\u4f18\u5316\u63a8\u7406"}),"\n",(0,r.jsx)(n.p,{children:"\u4ece v1.65.1+ \u7248\u672c\u5f00\u59cb\u6709\u6548"}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\n\nresponse = completion(\n    model="bedrock/anthropic.claude-3-7-sonnet-20250219-v1:0",\n    messages=[{"role": "user", "content": "What is the capital of France?"}],\n    performanceConfig={"latency": "optimized"},\n)\n'})})}),(0,r.jsxs)(t.A,{value:"proxy",label:"PROXY",children:[(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8bbe\u7f6e config.yaml"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'model_list:\n  - model_name: bedrock-claude-3-7\n    litellm_params:\n      model: bedrock/us.anthropic.claude-3-7-sonnet-20250219-v1:0\n      performanceConfig: {"latency": "optimized"} # \ud83d\udc48 \u5728\u6b64\u5904\u6216\u8bf7\u6c42\u4e0a\u8bbe\u7f6e\n'})}),(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u542f\u52a8\u4ee3\u7406"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"litellm --config /path/to/config.yaml\n"})}),(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"\u6d4b\u8bd5\uff01"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl http://localhost:4000/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer $LITELLM_KEY" \\\n  -d \'{\n    "model": "bedrock-claude-3-7",\n    "messages": [{"role": "user", "content": "What is the capital of France?"}],\n    "performanceConfig": {"latency": "optimized"} # \ud83d\udc48 \u5728\u6b64\u5904\u6216 CONFIG.YAML \u4e0a\u8bbe\u7f6e\n  }\'\n'})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u7528\u6cd5---\u670d\u52a1\u5c42",children:"\u7528\u6cd5 - \u670d\u52a1\u5c42"}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"serviceTier"})," \u63a7\u5236 Bedrock \u8bf7\u6c42\u7684\u5904\u7406\u5c42\u3002\u6709\u6548\u503c\u4e3a ",(0,r.jsx)(n.code,{children:"priority"}),"\u3001",(0,r.jsx)(n.code,{children:"default"})," \u6216 ",(0,r.jsx)(n.code,{children:"flex"}),"\u3002"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"priority"}),"\uff1a\u5177\u6709\u4fdd\u8bc1\u5bb9\u91cf\u7684\u66f4\u9ad8\u4f18\u5148\u7ea7\u5904\u7406"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"default"}),"\uff1a\u6807\u51c6\u5904\u7406\u5c42"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"flex"}),"\uff1a\u6279\u5904\u7406\u5de5\u4f5c\u8d1f\u8f7d\u7684\u6210\u672c\u4f18\u5316\u5904\u7406"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/bedrock/latest/APIReference/API_runtime_ServiceTier.html",children:"Bedrock ServiceTier API \u53c2\u8003"})}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\n\nresponse = completion(\n    model="bedrock/converse/qwen.qwen3-235b-a22b-2507-v1:0",\n    messages=[{"role": "user", "content": "What is the capital of France?"}],\n    serviceTier={"type": "priority"},\n)\n'})})}),(0,r.jsxs)(t.A,{value:"proxy",label:"PROXY",children:[(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8bbe\u7f6e config.yaml"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: qwen3-235b-priority\n    litellm_params:\n      model: bedrock/converse/qwen.qwen3-235b-a22b-2507-v1:0\n      aws_region_name: ap-northeast-1\n      serviceTier:\n        type: priority\n"})}),(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u542f\u52a8\u4ee3\u7406"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"litellm --config /path/to/config.yaml\n"})}),(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"\u6d4b\u8bd5\uff01"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl http://localhost:4000/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer $LITELLM_KEY" \\\n  -d \'{\n    "model": "qwen3-235b-priority",\n    "messages": [{"role": "user", "content": "What is the capital of France?"}],\n    "serviceTier": {"type": "priority"}\n  }\'\n'})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u7528\u6cd5---bedrock-guardrails",children:"\u7528\u6cd5 - Bedrock Guardrails"}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/bedrock/latest/userguide/guardrails-use-converse-api.html",children:"Bedrock Guardrails \u4e0e LiteLLM"})," \u7684\u793a\u4f8b"]}),"\n",(0,r.jsxs)(n.h3,{id:"\u4f7f\u7528-guarded_text-\u8fdb\u884c\u9009\u62e9\u6027\u5185\u5bb9\u5ba1\u6838",children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"guarded_text"})," \u8fdb\u884c\u9009\u62e9\u6027\u5185\u5bb9\u5ba1\u6838"]}),"\n",(0,r.jsxs)(n.p,{children:["LiteLLM \u652f\u6301\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"guarded_text"})," \u5185\u5bb9\u7c7b\u578b\u8fdb\u884c\u9009\u62e9\u6027\u5185\u5bb9\u5ba1\u6838\u3002\u8fd9\u5141\u8bb8\u60a8\u4ec5\u5305\u88c5\u5e94\u8be5\u7531 Bedrock Guardrails \u5ba1\u6838\u7684\u7279\u5b9a\u5185\u5bb9\uff0c\u800c\u4e0d\u662f\u8bc4\u4f30\u6574\u4e2a\u5bf9\u8bdd\u3002"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5de5\u4f5c\u539f\u7406\uff1a"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u5e26\u6709 ",(0,r.jsx)(n.code,{children:'type: "guarded_text"'})," \u7684\u5185\u5bb9\u4f1a\u81ea\u52a8\u5305\u88c5\u5728 ",(0,r.jsx)(n.code,{children:"guardrailConverseContent"})," \u5757\u4e2d"]}),"\n",(0,r.jsx)(n.li,{children:"\u53ea\u6709\u5305\u88c5\u7684\u5185\u5bb9\u7531 Bedrock Guardrails \u8bc4\u4f30"}),"\n",(0,r.jsxs)(n.li,{children:["\u5e26\u6709 ",(0,r.jsx)(n.code,{children:'type: "text"'})," \u7684\u5e38\u89c4\u5185\u5bb9\u7ed5\u8fc7 guardrail \u8bc4\u4f30"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["\u5982\u679c\u4e0d\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"guarded_text"}),"\uff0c\u6574\u4e2a\u5bf9\u8bdd\u5386\u53f2\u8bb0\u5f55\u5c06\u88ab\u53d1\u9001\u5230 guardrail \u8fdb\u884c\u8bc4\u4f30\uff0c\u8fd9\u53ef\u80fd\u4f1a\u589e\u52a0\u5ef6\u8fdf\u548c\u6210\u672c\u3002"]})}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"LiteLLM SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\n\n# \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\nresponse = completion(\n    model="anthropic.claude-v2",\n    messages=[\n        {\n            "content": "where do i buy coffee from? ",\n            "role": "user",\n        }\n    ],\n    max_tokens=10,\n    guardrailConfig={\n        "guardrailIdentifier": "ff6ujrregl1q", # guardrail \u7684\u6807\u8bc6\u7b26\uff08ID\uff09\u3002\n        "guardrailVersion": "DRAFT",           # guardrail \u7684\u7248\u672c\u3002\n        "trace": "disabled",                   # guardrail \u7684\u8ddf\u8e2a\u884c\u4e3a\u3002\u53ef\u4ee5\u662f "disabled" \u6216 "enabled"\n    },\n)\n\n# \u4f7f\u7528 guarded_text \u8fdb\u884c\u9009\u62e9\u6027 guardrail \u4f7f\u7528 - \u4ec5\u8bc4\u4f30\u7279\u5b9a\u5185\u5bb9\nresponse_guard = completion(\n    model="anthropic.claude-v2",\n    messages=[\n        {\n            "role": "user",\n            "content": [\n                {"type": "text", "text": "What is the main topic of this legal document?"},\n                {"type": "guarded_text", "text": "This      document contains sensitive legal information that should be moderated by guardrails."}\n            ]\n        }\n    ],\n    guardrailConfig={\n        "guardrailIdentifier": "gr-abc123",\n        "guardrailVersion": "DRAFT"\n    }\n)\n'})})}),(0,r.jsx)(t.A,{value:"proxy",label:"Proxy on request",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'\nimport openai\nclient = openai.OpenAI(\n    api_key="anything",\n    base_url="http://0.0.0.0:4000"\n)\n\n# \u53d1\u9001\u5230\u5728 litellm \u4ee3\u7406\u4e0a\u8bbe\u7f6e\u7684\u6a21\u578b\u7684\u8bf7\u6c42\uff0c`litellm --model`\nresponse = client.chat.completions.create(model="anthropic.claude-v2", messages = [\n    {\n        "role": "user",\n        "content": "this is a test request, write a short poem"\n    }\n],\ntemperature=0.7,\nextra_body={\n    "guardrailConfig": {\n        "guardrailIdentifier": "ff6ujrregl1q", # guardrail \u7684\u6807\u8bc6\u7b26\uff08ID\uff09\u3002\n        "guardrailVersion": "DRAFT",           # guardrail \u7684\u7248\u672c\u3002\n        "trace": "disabled",                   # guardrail \u7684\u8ddf\u8e2a\u884c\u4e3a\u3002\u53ef\u4ee5\u662f "disabled" \u6216 "enabled"\n    },\n}\n)\n\nprint(response)\n'})})}),(0,r.jsxs)(t.A,{value:"proxy-config",label:"Proxy on config.yaml",children:[(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u66f4\u65b0 config.yaml"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'model_list:\n  - model_name: bedrock-claude-v1\n    litellm_params:\n      model: bedrock/anthropic.claude-instant-v1\n      aws_access_key_id: os.environ/CUSTOM_AWS_ACCESS_KEY_ID\n      aws_secret_access_key: os.environ/CUSTOM_AWS_SECRET_ACCESS_KEY\n      aws_region_name: os.environ/CUSTOM_AWS_REGION_NAME\n      guardrailConfig: {\n        "guardrailIdentifier": "ff6ujrregl1q", # guardrail \u7684\u6807\u8bc6\u7b26\uff08ID\uff09\u3002\n        "guardrailVersion": "DRAFT",           # guardrail \u7684\u7248\u672c\u3002\n        "trace": "disabled",                   # guardrail \u7684\u8ddf\u8e2a\u884c\u4e3a\u3002\u53ef\u4ee5\u662f "disabled" \u6216 "enabled"\n    }\n\n'})}),(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u542f\u52a8\u4ee3\u7406"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"litellm --config /path/to/config.yaml\n"})}),(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"\u6d4b\u8bd5\uff01"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'\nimport openai\nclient = openai.OpenAI(\n    api_key="anything",\n    base_url="http://0.0.0.0:4000"\n)\n\n# \u53d1\u9001\u5230\u5728 litellm \u4ee3\u7406\u4e0a\u8bbe\u7f6e\u7684\u6a21\u578b\u7684\u8bf7\u6c42\uff0c`litellm --model`\nresponse = client.chat.completions.create(model="bedrock-claude-v1", messages = [\n    {\n        "role": "user",\n        "content": "this is a test request, write a short poem"\n    }\n],\ntemperature=0.7\n)\n\n# \u4f7f\u7528 guarded_text \u6dfb\u52a0\u9009\u62e9\u6027 guardrail \u4f7f\u7528\nresponse_guard = client.chat.completions.create(model="bedrock-claude-v1", messages = [\n   {\n            "role": "user",\n            "content": [\n                {"type": "text", "text": "What is the main topic of this legal document?"},\n                {"type": "guarded_text", "text": "This document contains sensitive legal information that should be moderated by guardrails."}\n            ]\n  }\n],\ntemperature=0.7\n)\n\nprint(response_guard)\n'})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u7528\u6cd5---\u52a9\u624b\u9884\u586b\u5145",children:'\u7528\u6cd5 - "\u52a9\u624b\u9884\u586b\u5145"'}),"\n",(0,r.jsxs)(n.p,{children:["\u5982\u679c\u60a8\u5728 Bedrock \u4e0a\u4f7f\u7528 Anthropic \u7684 Claude\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u5728 ",(0,r.jsx)(n.code,{children:"messages"})," \u6570\u7ec4\u4e2d\u4f5c\u4e3a\u6700\u540e\u4e00\u9879\u5305\u542b ",(0,r.jsx)(n.code,{children:"assistant"}),' \u89d2\u8272\u6d88\u606f\u6765"\u8ba9 Claude \u8bf4\u51fa\u60a8\u60f3\u8bf4\u7684\u8bdd"\u3002']}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["[!IMPORTANT]\n\u8fd4\u56de\u7684\u5b8c\u6210_",(0,r.jsx)(n.strong,{children:"\u4e0d\u4f1a"}),'_\u5305\u542b\u60a8\u7684"\u9884\u586b\u5145"\u6587\u672c\uff0c\u56e0\u4e3a\u5b83\u662f\u63d0\u793a\u672c\u8eab\u7684\u4e00\u90e8\u5206\u3002\u786e\u4fdd\u5728 Claude \u7684\u5b8c\u6210\u524d\u52a0\u4e0a\u60a8\u7684\u9884\u586b\u5145\u3002']}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import os\nfrom litellm import completion\n\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\nmessages = [\n    {"role": "user", "content": "How do you say \'Hello\' in German? Return your answer as a JSON object, like this:\\n\\n{ \\"Hello\\": \\"Hallo\\" }"},\n    {"role": "assistant", "content": "{"},\n]\nresponse = completion(model="bedrock/anthropic.claude-v2", messages=messages)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u53d1\u9001\u5230-claude-\u7684\u793a\u4f8b\u63d0\u793a",children:"\u53d1\u9001\u5230 Claude \u7684\u793a\u4f8b\u63d0\u793a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'Human: How do you say \'Hello\' in German? Return your answer as a JSON object, like this:\n\n{ "Hello": "Hallo" }\n\nAssistant: {\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u7528\u6cd5---\u7cfb\u7edf\u6d88\u606f",children:'\u7528\u6cd5 - "\u7cfb\u7edf"\u6d88\u606f'}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u60a8\u5728 Bedrock \u4e0a\u4f7f\u7528 Anthropic \u7684 Claude 2.1\uff0c\u7cfb\u7edf\u89d2\u8272\u6d88\u606f\u4f1a\u4e3a\u60a8\u6b63\u786e\u683c\u5f0f\u5316\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import os\nfrom litellm import completion\n\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\nmessages = [\n    {"role": "system", "content": "You are a snarky assistant."},\n    {"role": "user", "content": "How do I boil water?"},\n]\nresponse = completion(model="bedrock/anthropic.claude-v2:1", messages=messages)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u53d1\u9001\u5230-claude-\u7684\u793a\u4f8b\u63d0\u793a-1",children:"\u53d1\u9001\u5230 Claude \u7684\u793a\u4f8b\u63d0\u793a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"You are a snarky assistant.\n\nHuman: How do I boil water?\n\nAssistant:\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u7528\u6cd5---\u6d41\u5f0f\u4f20\u8f93",children:"\u7528\u6cd5 - \u6d41\u5f0f\u4f20\u8f93"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import os\nfrom litellm import completion\n\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\nresponse = completion(\n  model="bedrock/anthropic.claude-instant-v1",\n  messages=[{ "content": "Hello, how are you?","role": "user"}],\n  stream=True\n)\nfor chunk in response:\n  print(chunk)\n'})}),"\n",(0,r.jsx)(n.h4,{id:"\u793a\u4f8b\u6d41\u5f0f\u8f93\u51fa\u5757",children:"\u793a\u4f8b\u6d41\u5f0f\u8f93\u51fa\u5757"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "choices": [\n    {\n      "finish_reason": null,\n      "index": 0,\n      "delta": {\n        "content": "ase can appeal the case to a higher federal court. If a higher federal court rules in a way that conflicts with a ruling from a lower federal court or conflicts with a ruling from a higher state court, the parties involved in the case can appeal the case to the Supreme Court. In order to appeal a case to the Sup"\n      }\n    }\n  ],\n  "created": null,\n  "model": "anthropic.claude-instant-v1",\n  "usage": {\n    "prompt_tokens": null,\n    "completion_tokens": null,\n    "total_tokens": null\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u8de8\u533a\u57df\u63a8\u7406",children:"\u8de8\u533a\u57df\u63a8\u7406"}),"\n",(0,r.jsxs)(n.p,{children:["LiteLLM \u5728\u6240\u6709",(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/bedrock/latest/userguide/cross-region-inference-support.html",children:"\u652f\u6301\u7684 bedrock \u6a21\u578b"}),"\u4e0a\u652f\u6301 Bedrock ",(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/bedrock/latest/userguide/cross-region-inference.html",children:"\u8de8\u533a\u57df\u63a8\u7406"}),"\u3002"]}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\nimport os\n\n\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\n\nlitellm.set_verbose = True #  \ud83d\udc48 \u67e5\u770b\u539f\u59cb\u8bf7\u6c42\n\nresponse = completion(\n    model="bedrock/us.anthropic.claude-3-haiku-20240307-v1:0",\n    messages=messages,\n    max_tokens=10,\n    temperature=0.1,\n)\n\nprint("Final Response: {}".format(response))\n'})})}),(0,r.jsxs)(t.A,{value:"proxy",label:"PROXY",children:[(0,r.jsx)(n.h4,{id:"1-\u8bbe\u7f6e-configyaml-1",children:"1. \u8bbe\u7f6e config.yaml"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: bedrock-claude-haiku\n    litellm_params:\n      model: bedrock/us.anthropic.claude-3-haiku-20240307-v1:0\n      aws_access_key_id: os.environ/AWS_ACCESS_KEY_ID\n      aws_secret_access_key: os.environ/AWS_SECRET_ACCESS_KEY\n      aws_region_name: os.environ/AWS_REGION_NAME\n"})}),(0,r.jsx)(n.h4,{id:"2-\u542f\u52a8\u4ee3\u7406-1",children:"2. \u542f\u52a8\u4ee3\u7406"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"litellm --config /path/to/config.yaml\n"})}),(0,r.jsx)(n.h4,{id:"3-\u6d4b\u8bd5-1",children:"3. \u6d4b\u8bd5"}),(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"Curl",label:"Curl Request",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:'curl --location \'http://0.0.0.0:4000/chat/completions\' \\\n--header \'Content-Type: application/json\' \\\n--data \' {\n      "model": "bedrock-claude-haiku",\n      "messages": [\n        {\n          "role": "user",\n          "content": "what llm are you"\n        }\n      ]\n    }\n\'\n'})})}),(0,r.jsx)(t.A,{value:"openai",label:"OpenAI v1.0.0+",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import openai\nclient = openai.OpenAI(\n    api_key="anything",\n    base_url="http://0.0.0.0:4000"\n)\n\n# \u53d1\u9001\u5230\u5728 litellm \u4ee3\u7406\u4e0a\u8bbe\u7f6e\u7684\u6a21\u578b\u7684\u8bf7\u6c42\uff0c`litellm --model`\nresponse = client.chat.completions.create(model="bedrock-claude-haiku", messages = [\n    {\n        "role": "user",\n        "content": "this is a test request, write a short poem"\n    }\n])\n\nprint(response)\n\n'})})}),(0,r.jsx)(t.A,{value:"langchain",label:"Langchain",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from langchain.chat_models import ChatOpenAI\nfrom langchain.prompts.chat import (\n    ChatPromptTemplate,\n    HumanMessagePromptTemplate,\n    SystemMessagePromptTemplate,\n)\nfrom langchain.schema import HumanMessage, SystemMessage\n\nchat = ChatOpenAI(\n    openai_api_base="http://0.0.0.0:4000", # \u5c06 openai_api_base \u8bbe\u7f6e\u4e3a LiteLLM \u4ee3\u7406\n    model = "bedrock-claude-haiku",\n    temperature=0.1\n)\n\nmessages = [\n    SystemMessage(\n        content="You are a helpful assistant that im using to make a test request to."\n    ),\n    HumanMessage(\n        content="test from litellm. tell me why it\'s amazing in 1 sentence"\n    ),\n]\nresponse = chat(messages)\n\nprint(response)\n'})})})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u8bbe\u7f6e-converse--invoke-\u8def\u7531",children:"\u8bbe\u7f6e 'converse' / 'invoke' \u8def\u7531"}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["\u4ece LiteLLM \u7248\u672c ",(0,r.jsx)(n.code,{children:"v1.53.5"})," \u5f00\u59cb\u652f\u6301"]})}),"\n",(0,r.jsxs)(n.p,{children:["LiteLLM \u9ed8\u8ba4\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"invoke"})," \u8def\u7531\u3002LiteLLM \u5bf9\u652f\u6301\u5b83\u7684 Bedrock \u6a21\u578b\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"converse"})," \u8def\u7531\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u8981\u663e\u5f0f\u8bbe\u7f6e\u8def\u7531\uff0c\u8bf7\u6267\u884c ",(0,r.jsx)(n.code,{children:"bedrock/converse/<model>"})," \u6216 ",(0,r.jsx)(n.code,{children:"bedrock/invoke/<model>"}),"\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u4f8b\u5982"}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\n\ncompletion(model="bedrock/converse/us.amazon.nova-pro-v1:0")\n'})})}),(0,r.jsx)(t.A,{value:"proxy",label:"PROXY",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: bedrock-model\n    litellm_params:\n      model: bedrock/converse/us.amazon.nova-pro-v1:0\n"})})})]}),"\n",(0,r.jsx)(n.h2,{id:"\u4ea4\u66ff\u7528\u6237\u52a9\u624b\u6d88\u606f",children:"\u4ea4\u66ff\u7528\u6237/\u52a9\u624b\u6d88\u606f"}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"user_continue_message"})," \u6dfb\u52a0\u9ed8\u8ba4\u7528\u6237\u6d88\u606f\uff0c\u5bf9\u4e8e\uff08\u4f8b\u5982 Autogen\uff09\u5ba2\u6237\u7aef\u53ef\u80fd\u4e0d\u9075\u5faa\u4ee5\u7528\u6237\u6d88\u606f\u5f00\u59cb\u548c\u7ed3\u675f\u7684\u4ea4\u66ff\u7528\u6237/\u52a9\u624b\u6d88\u606f\u7684\u60c5\u51b5\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'model_list:\n  - model_name: "bedrock-claude"\n    litellm_params:\n      model: "bedrock/anthropic.claude-instant-v1"\n      user_continue_message: {"role": "user", "content": "Please continue"}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u6216\u8005"}),"\n",(0,r.jsxs)(n.p,{children:["\u53ea\u9700\u8bbe\u7f6e ",(0,r.jsx)(n.code,{children:"litellm.modify_params=True"}),"\uff0cLiteLLM \u5c06\u4f7f\u7528\u9ed8\u8ba4\u7684 user_continue_message \u81ea\u52a8\u5904\u7406\u6b64\u95ee\u9898\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'model_list:\n  - model_name: "bedrock-claude"\n    litellm_params:\n      model: "bedrock/anthropic.claude-instant-v1"\n\nlitellm_settings:\n   modify_params: true\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u6d4b\u8bd5\uff01"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST \'http://0.0.0.0:4000/chat/completions\' \\\n-H \'Content-Type: application/json\' \\\n-H \'Authorization: Bearer sk-1234\' \\\n-d \'{\n    "model": "bedrock-claude",\n    "messages": [{"role": "assistant", "content": "Hey, how\'s it going?"}]\n}\'\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u7528\u6cd5---pdf--\u6587\u6863\u7406\u89e3",children:"\u7528\u6cd5 - PDF / \u6587\u6863\u7406\u89e3"}),"\n",(0,r.jsxs)(n.p,{children:["LiteLLM \u652f\u6301 Bedrock \u6a21\u578b\u7684\u6587\u6863\u7406\u89e3 - ",(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/nova/latest/userguide/modalities-document.html",children:"AWS Bedrock \u6587\u6863"}),"\u3002"]}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsxs)(n.p,{children:["LiteLLM \u652f\u6301",(0,r.jsx)(n.strong,{children:"\u6240\u6709"})," Bedrock \u6587\u6863\u7c7b\u578b -"]}),(0,r.jsx)(n.p,{children:'\u4f8b\u5982\uff1a"pdf"\u3001"csv"\u3001"doc"\u3001"docx"\u3001"xls"\u3001"xlsx"\u3001"html"\u3001"txt"\u3001"md"'}),(0,r.jsxs)(n.p,{children:["\u60a8\u4e5f\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u4f5c\u4e3a ",(0,r.jsx)(n.code,{children:"image_url"})," \u6216 ",(0,r.jsx)(n.code,{children:"base64"})," \u4f20\u9012"]})]}),"\n",(0,r.jsx)(n.h3,{id:"url",children:"url"}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm.utils import supports_pdf_input, completion\n\n# \u8bbe\u7f6e aws \u51ed\u636e\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\n\n# pdf url\nimage_url = "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf"\n\n# \u4e0b\u8f7d\u6587\u4ef6\nresponse = requests.get(url)\nfile_data = response.content\n\nencoded_file = base64.b64encode(file_data).decode("utf-8")\n\n# \u6a21\u578b\nmodel = "bedrock/anthropic.claude-3-5-sonnet-20240620-v1:0"\n\nimage_content = [\n    {"type": "text", "text": "What\'s this file about?"},\n    {\n        "type": "file",\n        "file": {\n            "file_data": f"data:application/pdf;base64,{encoded_file}", # \ud83d\udc48 PDF\n        }\n    },\n]\n\n\nif not supports_pdf_input(model, None):\n    print("Model does not support image input")\n\nresponse = completion(\n    model=model,\n    messages=[{"role": "user", "content": image_content}],\n)\nassert response is not None\n'})})}),(0,r.jsxs)(t.A,{value:"proxy",label:"PROXY",children:[(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8bbe\u7f6e config.yaml"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: bedrock-model\n    litellm_params:\n      model: bedrock/anthropic.claude-3-5-sonnet-20240620-v1:0\n      aws_access_key_id: os.environ/AWS_ACCESS_KEY_ID\n      aws_secret_access_key: os.environ/AWS_SECRET_ACCESS_KEY\n      aws_region_name: os.environ/AWS_REGION_NAME\n"})}),(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u542f\u52a8\u4ee3\u7406"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"litellm --config /path/to/config.yaml\n"})}),(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"\u6d4b\u8bd5\uff01"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST \'http://0.0.0.0:4000/chat/completions\' \\\n-H \'Content-Type: application/json\' \\\n-H \'Authorization: Bearer sk-1234\' \\\n-d \'{\n    "model": "bedrock-model",\n    "messages": [\n        {"role": "user", "content": {"type": "text", "text": "What\'s this file about?"}},\n        {\n            "type": "file",\n            "file": {\n                "file_data": f"data:application/pdf;base64,{encoded_file}", # \ud83d\udc48 PDF\n            }\n        }\n    ]\n}\'\n'})})]})]}),"\n",(0,r.jsx)(n.h3,{id:"base64",children:"base64"}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm.utils import supports_pdf_input, completion\n\n# \u8bbe\u7f6e aws \u51ed\u636e\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\n\n# pdf url\nimage_url = "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf"\nresponse = requests.get(url)\nfile_data = response.content\n\nencoded_file = base64.b64encode(file_data).decode("utf-8")\nbase64_url = f"data:application/pdf;base64,{encoded_file}"\n\n# \u6a21\u578b\nmodel = "bedrock/anthropic.claude-3-5-sonnet-20240620-v1:0"\n\nimage_content = [\n    {"type": "text", "text": "What\'s this file about?"},\n    {\n        "type": "image_url",\n        "image_url": base64_url, # \u6216 {"url": base64_url}\n    },\n]\n\n\nif not supports_pdf_input(model, None):\n    print("Model does not support image input")\n\nresponse = completion(\n    model=model,\n    messages=[{"role": "user", "content": image_content}],\n)\nassert response is not None\n'})})}),(0,r.jsxs)(t.A,{value:"proxy",label:"PROXY",children:[(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8bbe\u7f6e config.yaml"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: bedrock-model\n    litellm_params:\n      model: bedrock/anthropic.claude-3-5-sonnet-20240620-v1:0\n      aws_access_key_id: os.environ/AWS_ACCESS_KEY_ID\n      aws_secret_access_key: os.environ/AWS_SECRET_ACCESS_KEY\n      aws_region_name: os.environ/AWS_REGION_NAME\n"})}),(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u542f\u52a8\u4ee3\u7406"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"litellm --config /path/to/config.yaml\n"})}),(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"\u6d4b\u8bd5\uff01"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST \'http://0.0.0.0:4000/chat/completions\' \\\n-H \'Content-Type: application/json\' \\\n-H \'Authorization: Bearer sk-1234\' \\\n-d \'{\n    "model": "bedrock-model",\n    "messages": [\n        {"role": "user", "content": {"type": "text", "text": "What\'s this file about?"}},\n        {\n            "type": "image_url",\n            "image_url": "data:application/pdf;base64,{b64_encoded_file}",\n        }\n    ]\n}\'\n'})})]})]}),"\n",(0,r.jsx)(n.h3,{id:"openai-gpt-oss",children:"OpenAI GPT OSS"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u5c5e\u6027"}),(0,r.jsx)(n.th,{children:"\u8be6\u60c5"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u63d0\u4f9b\u5546\u8def\u7531"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"bedrock/converse/openai.gpt-oss-20b-1:0"}),"\u3001",(0,r.jsx)(n.code,{children:"bedrock/converse/openai.gpt-oss-120b-1:0"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u63d0\u4f9b\u5546\u6587\u6863"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/bedrock/latest/userguide/what-is-bedrock.html",children:"Amazon Bedrock \u2197"})})]})]})]}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="GPT OSS SDK \u7528\u6cd5" showLineNumbers',children:'from litellm import completion\nimport os\n\n# \u8bbe\u7f6e AWS \u51ed\u636e\nos.environ["AWS_ACCESS_KEY_ID"] = "your-aws-access-key"\nos.environ["AWS_SECRET_ACCESS_KEY"] = "your-aws-secret-key"\nos.environ["AWS_REGION_NAME"] = "us-east-1"\n\n# GPT OSS 20B \u6a21\u578b\nresponse = completion(\n    model="bedrock/converse/openai.gpt-oss-20b-1:0",\n    messages=[{"role": "user", "content": "Hello, how are you?"}],\n)\nprint(response.choices[0].message.content)\n\n# GPT OSS 120B \u6a21\u578b\nresponse = completion(\n    model="bedrock/converse/openai.gpt-oss-120b-1:0",\n    messages=[{"role": "user", "content": "Explain machine learning in simple terms"}],\n)\nprint(response.choices[0].message.content)\n'})})}),(0,r.jsxs)(t.A,{value:"proxy",label:"Proxy",children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"1. \u6dfb\u52a0\u5230\u914d\u7f6e"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="config.yaml" showLineNumbers',children:"model_list:\n  - model_name: gpt-oss-20b\n    litellm_params:\n      model: bedrock/converse/openai.gpt-oss-20b-1:0\n      aws_access_key_id: os.environ/AWS_ACCESS_KEY_ID\n      aws_secret_access_key: os.environ/AWS_SECRET_ACCESS_KEY\n      aws_region_name: os.environ/AWS_REGION_NAME\n\n  - model_name: gpt-oss-120b\n    litellm_params:\n      model: bedrock/converse/openai.gpt-oss-120b-1:0\n      aws_access_key_id: os.environ/AWS_ACCESS_KEY_ID\n      aws_secret_access_key: os.environ/AWS_SECRET_ACCESS_KEY\n      aws_region_name: os.environ/AWS_REGION_NAME\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"2. \u542f\u52a8\u4ee3\u7406"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",metastring:'title="\u542f\u52a8 LiteLLM \u4ee3\u7406" showLineNumbers',children:"litellm --config /path/to/config.yaml\n\n# \u8fd0\u884c\u5728 http://0.0.0.0:4000\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"3. \u6d4b\u8bd5\uff01"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",metastring:'title="\u901a\u8fc7\u4ee3\u7406\u6d4b\u8bd5 GPT OSS" showLineNumbers',children:'curl --location \'http://0.0.0.0:4000/chat/completions\' \\\n  --header \'Authorization: Bearer sk-1234\' \\\n  --header \'Content-Type: application/json\' \\\n  --data \'{\n    "model": "gpt-oss-20b",\n    "messages": [\n      {\n        "role": "user",\n        "content": "What are the key benefits of open source AI?"\n      }\n    ]\n  }\'\n'})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"twelvelabs-pegasus---\u89c6\u9891\u7406\u89e3",children:"TwelveLabs Pegasus - \u89c6\u9891\u7406\u89e3"}),"\n",(0,r.jsxs)(n.p,{children:["TwelveLabs Pegasus 1.2 \u662f\u4e00\u4e2a\u89c6\u9891\u7406\u89e3\u6a21\u578b\uff0c\u53ef\u4ee5\u5206\u6790\u548c\u63cf\u8ff0\u89c6\u9891\u5185\u5bb9\u3002LiteLLM \u901a\u8fc7 Bedrock \u7684 ",(0,r.jsx)(n.code,{children:"/invoke"})," \u7aef\u70b9\u652f\u6301\u6b64\u6a21\u578b\u3002"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u5c5e\u6027"}),(0,r.jsx)(n.th,{children:"\u8be6\u60c5"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u63d0\u4f9b\u5546\u8def\u7531"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"bedrock/us.twelvelabs.pegasus-1-2-v1:0"}),"\u3001",(0,r.jsx)(n.code,{children:"bedrock/eu.twelvelabs.pegasus-1-2-v1:0"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u63d0\u4f9b\u5546\u6587\u6863"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://docs.twelvelabs.io/docs/models/pegasus",children:"TwelveLabs Pegasus \u6587\u6863 \u2197"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u652f\u6301\u7684\u53c2\u6570"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"max_tokens"}),"\u3001",(0,r.jsx)(n.code,{children:"temperature"}),"\u3001",(0,r.jsx)(n.code,{children:"response_format"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"\u5a92\u4f53\u8f93\u5165"}),(0,r.jsx)(n.td,{children:"S3 URI \u6216 base64 \u7f16\u7801\u7684\u89c6\u9891"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"\u652f\u6301\u7684\u529f\u80fd",children:"\u652f\u6301\u7684\u529f\u80fd"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u89c6\u9891\u5206\u6790"}),"\uff1a\u4ece S3 \u6216 base64 \u8f93\u5165\u5206\u6790\u89c6\u9891\u5185\u5bb9"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u7ed3\u6784\u5316\u8f93\u51fa"}),"\uff1a\u652f\u6301 JSON \u67b6\u6784\u54cd\u5e94\u683c\u5f0f"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"S3 \u96c6\u6210"}),"\uff1a\u652f\u6301\u5e26\u6709\u5b58\u50a8\u6876\u6240\u6709\u8005\u89c4\u8303\u7684 S3 \u89c6\u9891 URL"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\u4f7f\u7528-s3-\u89c6\u9891",children:"\u4f7f\u7528 S3 \u89c6\u9891"}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="TwelveLabs Pegasus SDK \u7528\u6cd5" showLineNumbers',children:'from litellm import completion\nimport os\n\n# \u8bbe\u7f6e AWS \u51ed\u636e\nos.environ["AWS_ACCESS_KEY_ID"] = "your-aws-access-key"\nos.environ["AWS_SECRET_ACCESS_KEY"] = "your-aws-secret-key"\nos.environ["AWS_REGION_NAME"] = "us-east-1"\n\nresponse = completion(\n    model="bedrock/us.twelvelabs.pegasus-1-2-v1:0",\n    messages=[{"role": "user", "content": "Describe what happens in this video."}],\n    mediaSource={\n        "s3Location": {\n            "uri": "s3://your-bucket/video.mp4",\n            "bucketOwner": "123456789012",  # 12 \u4f4d AWS \u8d26\u6237 ID\n        }\n    },\n    temperature=0.2\n)\n\nprint(response.choices[0].message.content)\n'})})}),(0,r.jsxs)(t.A,{value:"proxy",label:"Proxy",children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"1. \u6dfb\u52a0\u5230\u914d\u7f6e"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="config.yaml" showLineNumbers',children:"model_list:\n  - model_name: pegasus-video\n    litellm_params:\n      model: bedrock/us.twelvelabs.pegasus-1-2-v1:0\n      aws_access_key_id: os.environ/AWS_ACCESS_KEY_ID\n      aws_secret_access_key: os.environ/AWS_SECRET_ACCESS_KEY\n      aws_region_name: os.environ/AWS_REGION_NAME\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"2. \u542f\u52a8\u4ee3\u7406"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",metastring:'title="\u542f\u52a8 LiteLLM \u4ee3\u7406" showLineNumbers',children:"litellm --config /path/to/config.yaml\n\n# \u8fd0\u884c\u5728 http://0.0.0.0:4000\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"3. \u6d4b\u8bd5\uff01"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",metastring:'title="\u901a\u8fc7\u4ee3\u7406\u6d4b\u8bd5 Pegasus" showLineNumbers',children:'curl --location \'http://0.0.0.0:4000/chat/completions\' \\\n  --header \'Authorization: Bearer sk-1234\' \\\n  --header \'Content-Type: application/json\' \\\n  --data \'{\n    "model": "pegasus-video",\n    "messages": [\n      {\n        "role": "user",\n        "content": "Describe what happens in this video."\n      }\n    ],\n    "mediaSource": {\n      "s3Location": {\n        "uri": "s3://your-bucket/video.mp4",\n        "bucketOwner": "123456789012"\n      }\n    },\n    "temperature": 0.2\n  }\'\n'})})]})]}),"\n",(0,r.jsx)(n.h3,{id:"\u4f7f\u7528-base64-\u89c6\u9891",children:"\u4f7f\u7528 Base64 \u89c6\u9891"}),"\n",(0,r.jsx)(n.p,{children:"\u60a8\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5c06\u89c6\u9891\u5185\u5bb9\u4f5c\u4e3a base64 \u4f20\u9012\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="Base64 \u89c6\u9891\u8f93\u5165" showLineNumbers',children:'from litellm import completion\nimport base64\n\n# \u8bfb\u53d6\u89c6\u9891\u6587\u4ef6\u5e76\u7f16\u7801\u4e3a base64\nwith open("video.mp4", "rb") as video_file:\n    video_base64 = base64.b64encode(video_file.read()).decode("utf-8")\n\nresponse = completion(\n    model="bedrock/us.twelvelabs.pegasus-1-2-v1:0",\n    messages=[{"role": "user", "content": "What is happening in this video?"}],\n    mediaSource={\n        "base64String": video_base64\n    },\n    temperature=0.2,\n)\n\nprint(response.choices[0].message.content)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u91cd\u8981\u8bf4\u660e",children:"\u91cd\u8981\u8bf4\u660e"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u54cd\u5e94\u683c\u5f0f"}),"\uff1a\u8be5\u6a21\u578b\u901a\u8fc7\u5e26\u6709 JSON \u67b6\u6784\u7684 ",(0,r.jsx)(n.code,{children:"response_format"})," \u652f\u6301\u7ed3\u6784\u5316\u8f93\u51fa"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u9884\u914d\u7f6e\u541e\u5410\u91cf\u6a21\u578b",children:"\u9884\u914d\u7f6e\u541e\u5410\u91cf\u6a21\u578b"}),"\n",(0,r.jsx)(n.p,{children:"\u8981\u4f7f\u7528\u9884\u914d\u7f6e\u541e\u5410\u91cf Bedrock \u6a21\u578b\uff0c\u8bf7\u4f20\u9012"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"model=bedrock/<base-model>"}),"\uff0c\u4f8b\u5982 ",(0,r.jsx)(n.code,{children:"model=bedrock/anthropic.claude-v2"}),"\u3002\u5c06 ",(0,r.jsx)(n.code,{children:"model"})," \u8bbe\u7f6e\u4e3a\u4efb\u4f55",(0,r.jsx)(n.a,{href:"#%E6%94%AF%E6%8C%81%E7%9A%84-aws-bedrock-%E6%A8%A1%E5%9E%8B",children:"\u652f\u6301\u7684 AWS \u6a21\u578b"})]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"model_id=provisioned-model-arn"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5b8c\u6210"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import litellm\nresponse = litellm.completion(\n    model="bedrock/anthropic.claude-instant-v1",\n    model_id="provisioned-model-arn",\n    messages=[{"content": "Hello, how are you?", "role": "user"}]\n)\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5d4c\u5165"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import litellm\nresponse = litellm.embedding(\n    model="bedrock/amazon.titan-embed-text-v1",\n    model_id="provisioned-model-arn",\n    input=["hi"],\n)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u652f\u6301\u7684-aws-bedrock-\u6a21\u578b",children:"\u652f\u6301\u7684 AWS Bedrock \u6a21\u578b"}),"\n",(0,r.jsxs)(n.p,{children:["LiteLLM \u652f\u6301",(0,r.jsx)(n.strong,{children:"\u6240\u6709"})," Bedrock \u6a21\u578b\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u4ee5\u4e0b\u662f\u4f7f\u7528 Bedrock \u6a21\u578b\u4e0e LiteLLM \u7684\u793a\u4f8b\u3002\u6709\u5173\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u53c2\u9605",(0,r.jsx)(n.a,{href:"https://github.com/BerriAI/litellm/blob/main/model_prices_and_context_window.json",children:"\u6a21\u578b\u6210\u672c\u6620\u5c04"})]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u6a21\u578b\u540d\u79f0"}),(0,r.jsx)(n.th,{children:"\u547d\u4ee4"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"GPT-OSS 20B"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/converse/openai.gpt-oss-20b-1:0', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"GPT-OSS 120B"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/converse/openai.gpt-oss-120b-1:0', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Deepseek R1"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/us.deepseek.r1-v1:0', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Anthropic Claude Sonnet 4.5"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/us.anthropic.claude-sonnet-4-5-20250929-v1:0', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Anthropic Claude-V3.5 Sonnet"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/anthropic.claude-3-5-sonnet-20240620-v1:0', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Anthropic Claude-V3 sonnet"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/anthropic.claude-3-sonnet-20240229-v1:0', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Anthropic Claude-V3 Haiku"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/anthropic.claude-3-haiku-20240307-v1:0', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Anthropic Claude-V3 Opus"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/anthropic.claude-3-opus-20240229-v1:0', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Anthropic Claude-V2.1"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/anthropic.claude-v2:1', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Anthropic Claude-V2"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/anthropic.claude-v2', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Anthropic Claude-Instant V1"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/anthropic.claude-instant-v1', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Meta llama3-1-405b"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/meta.llama3-1-405b-instruct-v1:0', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Meta llama3-1-70b"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/meta.llama3-1-70b-instruct-v1:0', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Meta llama3-1-8b"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/meta.llama3-1-8b-instruct-v1:0', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Meta llama3-70b"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/meta.llama3-70b-instruct-v1:0', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Meta llama3-8b"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/meta.llama3-8b-instruct-v1:0', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Amazon Titan Lite"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/amazon.titan-text-lite-v1', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Amazon Titan Express"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/amazon.titan-text-express-v1', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Cohere Command"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/cohere.command-text-v14', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"AI21 J2-Mid"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/ai21.j2-mid-v1', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"AI21 J2-Ultra"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/ai21.j2-ultra-v1', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"AI21 Jamba-Instruct"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/ai21.jamba-instruct-v1:0', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Meta Llama 2 Chat 13b"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/meta.llama2-13b-chat-v1', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Meta Llama 2 Chat 70b"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/meta.llama2-70b-chat-v1', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Mistral 7B Instruct"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/mistral.mistral-7b-instruct-v0:2', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Mixtral 8x7B Instruct"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/mistral.mixtral-8x7b-instruct-v0:1', messages=messages)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"TwelveLabs Pegasus 1.2 (US)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/us.twelvelabs.pegasus-1-2-v1:0', messages=messages, mediaSource={...})"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"TwelveLabs Pegasus 1.2 (EU)"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"completion(model='bedrock/eu.twelvelabs.pegasus-1-2-v1:0', messages=messages, mediaSource={...})"})})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"bedrock-\u5d4c\u5165",children:"Bedrock \u5d4c\u5165"}),"\n",(0,r.jsx)(n.h3,{id:"api-\u5bc6\u94a5",children:"API \u5bc6\u94a5"}),"\n",(0,r.jsxs)(n.p,{children:["\u8fd9\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u73af\u5883\u53d8\u91cf\u6216\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9 ",(0,r.jsx)(n.strong,{children:"litellm.embedding()"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import os\nos.environ["AWS_ACCESS_KEY_ID"] = ""        # \u8bbf\u95ee\u5bc6\u94a5\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""    # \u79d8\u5bc6\u8bbf\u95ee\u5bc6\u94a5\nos.environ["AWS_REGION_NAME"] = ""           # us-east-1\u3001us-east-2\u3001us-west-1\u3001us-west-2\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u7528\u6cd5-1",children:"\u7528\u6cd5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import embedding\nresponse = embedding(\n    model="bedrock/amazon.titan-embed-text-v1",\n    input=["good morning from litellm"],\n)\nprint(response)\n'})}),"\n",(0,r.jsx)(n.h4,{id:"titan-v2---encoding_format-\u652f\u6301",children:"Titan V2 - encoding_format \u652f\u6301"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import embedding\n# Float \u683c\u5f0f\uff08\u9ed8\u8ba4\uff09\nresponse = embedding(\n    model="bedrock/amazon.titan-embed-text-v2:0",\n    input=["good morning from litellm"],\n    encoding_format="float"  # \u8fd4\u56de float \u6570\u7ec4\n)\n\n# Binary \u683c\u5f0f\nresponse = embedding(\n    model="bedrock/amazon.titan-embed-text-v2:0",\n    input=["good morning from litellm"],\n    encoding_format="base64"  # \u8fd4\u56de base64 \u7f16\u7801\u7684\u4e8c\u8fdb\u5236\n)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u652f\u6301\u7684-aws-bedrock-\u5d4c\u5165\u6a21\u578b",children:"\u652f\u6301\u7684 AWS Bedrock \u5d4c\u5165\u6a21\u578b"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u6a21\u578b\u540d\u79f0"}),(0,r.jsx)(n.th,{children:"\u7528\u6cd5"}),(0,r.jsx)(n.th,{children:"\u652f\u6301\u7684\u5176\u4ed6 OpenAI \u53c2\u6570"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Titan Embeddings V2"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'embedding(model="bedrock/amazon.titan-embed-text-v2:0", input=input)'})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"dimensions"}),"\u3001",(0,r.jsx)(n.code,{children:"encoding_format"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Titan Embeddings - V1"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'embedding(model="bedrock/amazon.titan-embed-text-v1", input=input)'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://github.com/BerriAI/litellm/blob/f5905e100068e7a4d61441d7453d7cf5609c2121/litellm/llms/bedrock/embed/amazon_titan_g1_transformation.py#L53",children:"\u6b64\u5904"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Titan Multimodal Embeddings"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'embedding(model="bedrock/amazon.titan-embed-image-v1", input=input)'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://github.com/BerriAI/litellm/blob/f5905e100068e7a4d61441d7453d7cf5609c2121/litellm/llms/bedrock/embed/amazon_titan_multimodal_transformation.py#L28",children:"\u6b64\u5904"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Cohere Embeddings - English"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'embedding(model="bedrock/cohere.embed-english-v3", input=input)'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://github.com/BerriAI/litellm/blob/f5905e100068e7a4d61441d7453d7cf5609c2121/litellm/llms/bedrock/embed/cohere_transformation.py#L18",children:"\u6b64\u5904"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Cohere Embeddings - Multilingual"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:'embedding(model="bedrock/cohere.embed-multilingual-v3", input=input)'})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://github.com/BerriAI/litellm/blob/f5905e100068e7a4d61441d7453d7cf5609c2121/litellm/llms/bedrock/embed/cohere_transformation.py#L18",children:"\u6b64\u5904"})})]})]})]}),"\n",(0,r.jsxs)(n.h3,{id:"\u9ad8\u7ea7---\u5220\u9664\u4e0d\u652f\u6301\u7684\u53c2\u6570",children:["\u9ad8\u7ea7 - ",(0,r.jsx)(n.a,{href:"https://docs.litellm.ai/docs/completion/drop_params#openai-%E4%BB%A3%E7%90%86%E7%94%A8%E6%B3%95",children:"\u5220\u9664\u4e0d\u652f\u6301\u7684\u53c2\u6570"})]}),"\n",(0,r.jsxs)(n.h3,{id:"\u9ad8\u7ea7---\u4f20\u9012\u6a21\u578b\u63d0\u4f9b\u5546\u7279\u5b9a\u53c2\u6570",children:["\u9ad8\u7ea7 - ",(0,r.jsx)(n.a,{href:"https://docs.litellm.ai/docs/completion/provider_specific_params#%E4%BB%A3%E7%90%86%E7%94%A8%E6%B3%95",children:"\u4f20\u9012\u6a21\u578b/\u63d0\u4f9b\u5546\u7279\u5b9a\u53c2\u6570"})]}),"\n",(0,r.jsx)(n.h2,{id:"\u56fe\u50cf\u751f\u6210",children:"\u56fe\u50cf\u751f\u6210"}),"\n",(0,r.jsxs)(n.p,{children:["\u8bf7\u53c2\u9605 ",(0,r.jsx)(n.a,{href:"./bedrock_image_gen",children:"Bedrock \u56fe\u50cf\u751f\u6210"}),"\uff0c\u4e86\u89e3\u5982\u4f55\u5728 Bedrock \u4e0a\u4f7f\u7528 Stable Diffusion \u548c Amazon Nova Canvas \u6a21\u578b\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"rerank-api",children:"Rerank API"}),"\n",(0,r.jsxs)(n.p,{children:["\u8bf7\u53c2\u9605 ",(0,r.jsx)(n.a,{href:"./bedrock_rerank",children:"Bedrock Rerank"}),"\uff0c\u4e86\u89e3\u5982\u4f55\u5728 Cohere ",(0,r.jsx)(n.code,{children:"/rerank"})," \u683c\u5f0f\u4e2d\u4f7f\u7528 Bedrock \u7684 Rerank API\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"bedrock-\u5e94\u7528\u63a8\u7406\u914d\u7f6e\u6587\u4ef6",children:"Bedrock \u5e94\u7528\u63a8\u7406\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,r.jsx)(n.p,{children:"\u4f7f\u7528 Bedrock \u5e94\u7528\u63a8\u7406\u914d\u7f6e\u6587\u4ef6\u6765\u8ddf\u8e2a AWS \u4e0a\u9879\u76ee\u7684\u6210\u672c\u3002"}),"\n",(0,r.jsxs)(n.p,{children:["\u60a8\u53ef\u4ee5\u5728\u6a21\u578b\u540d\u79f0\u4e2d\u4f20\u9012\u5b83 - ",(0,r.jsx)(n.code,{children:'model="bedrock/arn:..."'})," \u6216\u4f5c\u4e3a\u5355\u72ec\u7684 ",(0,r.jsx)(n.code,{children:'model_id="arn:.."'})," \u53c2\u6570\u3002"]}),"\n",(0,r.jsxs)(n.h3,{id:"\u901a\u8fc7-model_id-\u8bbe\u7f6e",children:["\u901a\u8fc7 ",(0,r.jsx)(n.code,{children:"model_id"})," \u8bbe\u7f6e"]}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{label:"SDK",value:"sdk",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\nimport os\n\nos.environ["AWS_ACCESS_KEY_ID"] = ""\nos.environ["AWS_SECRET_ACCESS_KEY"] = ""\nos.environ["AWS_REGION_NAME"] = ""\n\nresponse = completion(\n    model="bedrock/anthropic.claude-3-5-sonnet-20240620-v1:0",\n    messages=[{"role": "user", "content": "Hello, how are you?"}],\n    model_id="arn:aws:bedrock:eu-central-1:000000000000:application-inference-profile/a0a0a0a0a0a0",\n)\n\nprint(response)\n'})})}),(0,r.jsxs)(t.A,{label:"PROXY",value:"proxy",children:[(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8bbe\u7f6e config.yaml"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: anthropic-claude-3-5-sonnet\n    litellm_params:\n      model: bedrock/anthropic.claude-3-5-sonnet-20240620-v1:0\n      # \u60a8\u5fc5\u987b\u5728 model_id \u53c2\u6570\u4e2d\u8bbe\u7f6e ARN \u5e94\u7528\u63a8\u7406\u914d\u7f6e\u6587\u4ef6\n      model_id: arn:aws:bedrock:eu-central-1:000000000000:application-inference-profile/a0a0a0a0a0a0\n"})}),(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u542f\u52a8\u4ee3\u7406"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"litellm --config /path/to/config.yaml\n"})}),(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"\u6d4b\u8bd5\uff01"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -L -X POST \'http://0.0.0.0:4000/v1/chat/completions\' \\\n-H \'Content-Type: application/json\' \\\n-H \'Authorization: Bearer $LITELLM_API_KEY\' \\\n-d \'{\n  "model": "anthropic-claude-3-5-sonnet",\n  "messages": [\n    {\n      "role": "user",\n      "content": [\n        {\n          "type": "text",\n          "text": "List 5 important events in the XIX century"\n        }\n      ]\n    }\n  ]\n}\'\n'})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"boto3---\u8eab\u4efd\u9a8c\u8bc1",children:"Boto3 - \u8eab\u4efd\u9a8c\u8bc1"}),"\n",(0,r.jsx)(n.h3,{id:"\u5c06\u51ed\u636e\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012---completion",children:"\u5c06\u51ed\u636e\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012 - Completion()"}),"\n",(0,r.jsx)(n.p,{children:"\u5c06 AWS \u51ed\u636e\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9 litellm.completion"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import os\nfrom litellm import completion\n\nresponse = completion(\n            model="bedrock/anthropic.claude-instant-v1",\n            messages=[{ "content": "Hello, how are you?","role": "user"}],\n            aws_access_key_id="",\n            aws_secret_access_key="",\n            aws_region_name="",\n)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"\u4f20\u9012\u989d\u5916\u7684\u5934--\u81ea\u5b9a\u4e49-api-\u7aef\u70b9",children:"\u4f20\u9012\u989d\u5916\u7684\u5934 + \u81ea\u5b9a\u4e49 API \u7aef\u70b9"}),"\n",(0,r.jsxs)(n.p,{children:["\u8fd9\u53ef\u7528\u4e8e\u5728\u8c03\u7528\u81ea\u5b9a\u4e49 api \u7aef\u70b9\u65f6\u8986\u76d6\u73b0\u6709\u7684\u5934\uff08\u4f8b\u5982 ",(0,r.jsx)(n.code,{children:"Authorization"}),"\uff09"]}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import os\nimport litellm\nfrom litellm import completion\n\nlitellm.set_verbose = True # \ud83d\udc48 \u67e5\u770b\u539f\u59cb\u8bf7\u6c42\n\nresponse = completion(\n            model="bedrock/anthropic.claude-instant-v1",\n            messages=[{ "content": "Hello, how are you?","role": "user"}],\n            aws_access_key_id="",\n            aws_secret_access_key="",\n            aws_region_name="",\n            aws_bedrock_runtime_endpoint="https://my-fake-endpoint.com",\n            extra_headers={"key": "value"}\n)\n'})})}),(0,r.jsxs)(t.A,{value:"proxy",label:"PROXY",children:[(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8bbe\u7f6e config.yaml"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'model_list:\n    - model_name: bedrock-model\n      litellm_params:\n        model: bedrock/anthropic.claude-instant-v1\n        aws_access_key_id: "",\n        aws_secret_access_key: "",\n        aws_region_name: "",\n        aws_bedrock_runtime_endpoint: "https://my-fake-endpoint.com",\n        extra_headers: {"key": "value"}\n'})}),(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u542f\u52a8\u4ee3\u7406"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"litellm --config /path/to/config.yaml --detailed_debug\n"})}),(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"\u6d4b\u8bd5\uff01"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST \'http://0.0.0.0:4000/chat/completions\' \\\n-H \'Content-Type: application/json\' \\\n-H \'Authorization: Bearer sk-1234\' \\\n-d \'{\n    "model": "bedrock-model",\n    "messages": [\n      {\n        "role": "system",\n        "content": "You are a helpful math tutor. Guide the user through the solution step by step."\n      },\n      {\n        "role": "user",\n        "content": "how can I solve 8x + 7 = -23"\n      }\n    ]\n}\'\n'})})]})]}),"\n",(0,r.jsx)(n.h3,{id:"sso-\u767b\u5f55aws-\u914d\u7f6e\u6587\u4ef6",children:"SSO \u767b\u5f55\uff08AWS \u914d\u7f6e\u6587\u4ef6\uff09"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u8bbe\u7f6e ",(0,r.jsx)(n.code,{children:"AWS_PROFILE"})," \u73af\u5883\u53d8\u91cf"]}),"\n",(0,r.jsx)(n.li,{children:"\u8fdb\u884c bedrock \u5b8c\u6210\u8c03\u7528"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import os\nfrom litellm import completion\n\nresponse = completion(\n            model="bedrock/anthropic.claude-instant-v1",\n            messages=[{ "content": "Hello, how are you?","role": "user"}]\n)\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u6216\u4f20\u9012 ",(0,r.jsx)(n.code,{children:"aws_profile_name"}),"\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import os\nfrom litellm import completion\n\nresponse = completion(\n            model="bedrock/anthropic.claude-instant-v1",\n            messages=[{ "content": "Hello, how are you?","role": "user"}],\n            aws_profile_name="dev-profile",\n)\n'})}),"\n",(0,r.jsx)(n.h3,{id:"sts\u57fa\u4e8e\u89d2\u8272\u7684\u8eab\u4efd\u9a8c\u8bc1",children:"STS\uff08\u57fa\u4e8e\u89d2\u8272\u7684\u8eab\u4efd\u9a8c\u8bc1\uff09"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u8bbe\u7f6e ",(0,r.jsx)(n.code,{children:"aws_role_name"})," \u548c ",(0,r.jsx)(n.code,{children:"aws_session_name"})]}),"\n"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"LiteLLM \u53c2\u6570"}),(0,r.jsx)(n.th,{children:"Boto3 \u53c2\u6570"}),(0,r.jsx)(n.th,{children:"\u63cf\u8ff0"}),(0,r.jsx)(n.th,{children:"Boto3 \u6587\u6863"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"aws_access_key_id"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"aws_access_key_id"})}),(0,r.jsx)(n.td,{children:"\u4e0e IAM \u7528\u6237\u6216\u89d2\u8272\u5173\u8054\u7684 AWS \u8bbf\u95ee\u5bc6\u94a5"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html",children:"\u51ed\u636e"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"aws_secret_access_key"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"aws_secret_access_key"})}),(0,r.jsx)(n.td,{children:"\u4e0e\u8bbf\u95ee\u5bc6\u94a5\u5173\u8054\u7684 AWS \u79d8\u5bc6\u5bc6\u94a5"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://boto3.amazonaws.com/v1/documentation/api/latest/guide/credentials.html",children:"\u51ed\u636e"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"aws_role_name"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"RoleArn"})}),(0,r.jsx)(n.td,{children:"\u8981\u627f\u62c5\u7684\u89d2\u8272\u7684 Amazon \u8d44\u6e90\u540d\u79f0\uff08ARN\uff09"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/sts.html#STS.Client.assume_role",children:"AssumeRole API"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"aws_session_name"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"RoleSessionName"})}),(0,r.jsx)(n.td,{children:"\u627f\u62c5\u89d2\u8272\u4f1a\u8bdd\u7684\u6807\u8bc6\u7b26"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/sts.html#STS.Client.assume_role",children:"AssumeRole API"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"iam-roles-anywhere\u672c\u5730\u5916\u90e8\u5de5\u4f5c\u8d1f\u8f7d",children:"IAM Roles Anywhere\uff08\u672c\u5730/\u5916\u90e8\u5de5\u4f5c\u8d1f\u8f7d\uff09"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/rolesanywhere/latest/userguide/introduction.html",children:"IAM Roles Anywhere"})," \u5c06 IAM \u89d2\u8272\u6269\u5c55\u5230 ",(0,r.jsx)(n.strong,{children:"AWS \u5916\u90e8"}),"\u7684\u5de5\u4f5c\u8d1f\u8f7d\uff08\u672c\u5730\u670d\u52a1\u5668\u3001\u8fb9\u7f18\u8bbe\u5907\u3001\u5176\u4ed6\u4e91\uff09\u3002\u5b83\u4f7f\u7528\u4e0e\u5e38\u89c4 IAM \u89d2\u8272\u76f8\u540c\u7684 STS \u673a\u5236\uff0c\u4f46\u901a\u8fc7 X.509 \u8bc1\u4e66\u800c\u4e0d\u662f AWS \u51ed\u636e\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u8bbe\u7f6e"}),"\uff1a\u5728 ",(0,r.jsx)(n.code,{children:"~/.aws/config"})," \u4e2d\u5c06 ",(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/rolesanywhere/latest/userguide/credential-helper.html",children:"AWS Signing Helper"})," \u914d\u7f6e\u4e3a\u51ed\u636e\u6d41\u7a0b\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"[profile litellm-roles-anywhere]\ncredential_process = aws_signing_helper credential-process \\\n    --certificate /path/to/certificate.pem \\\n    --private-key /path/to/private-key.pem \\\n    --trust-anchor-arn arn:aws:rolesanywhere:us-east-1:123456789012:trust-anchor/abc123 \\\n    --profile-arn arn:aws:rolesanywhere:us-east-1:123456789012:profile/def456 \\\n    --role-arn arn:aws:iam::123456789012:role/MyBedrockRole\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u7528\u6cd5"}),"\uff1a\u5728 LiteLLM \u4e2d\u5f15\u7528\u914d\u7f6e\u6587\u4ef6\uff1a"]}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\n\nresponse = completion(\n    model="bedrock/anthropic.claude-3-sonnet-20240229-v1:0",\n    messages=[{"role": "user", "content": "Hello!"}],\n    aws_profile_name="litellm-roles-anywhere",\n)\n'})})}),(0,r.jsx)(t.A,{value:"proxy",label:"PROXY",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'model_list:\n  - model_name: bedrock-claude\n    litellm_params:\n      model: bedrock/anthropic.claude-3-sonnet-20240229-v1:0\n      aws_profile_name: "litellm-roles-anywhere"\n'})})})]}),"\n",(0,r.jsxs)(n.p,{children:["\u8bf7\u53c2\u9605 ",(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/rolesanywhere/latest/userguide/getting-started.html",children:"IAM Roles Anywhere \u5165\u95e8\u6307\u5357"})," \u4ee5\u4e86\u89e3\u4fe1\u4efb\u951a\u548c\u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u8fdb\u884c bedrock \u5b8c\u6210\u8c03\u7528"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"assumerole-\u6240\u9700\u7684-aws-iam-\u7b56\u7565",children:"AssumeRole \u6240\u9700\u7684 AWS IAM \u7b56\u7565"}),"\n",(0,r.jsxs)(n.p,{children:["\u8981\u5c06 ",(0,r.jsx)(n.code,{children:"aws_role_name"}),"\uff08STS AssumeRole\uff09\u4e0e LiteLLM \u4e00\u8d77\u4f7f\u7528\uff0c\u60a8\u7684 IAM \u7528\u6237\u6216\u89d2\u8272",(0,r.jsx)(n.strong,{children:"\u5fc5\u987b"}),"\u62e5\u6709\u8c03\u7528\u76ee\u6807\u89d2\u8272\u4e0a\u7684 ",(0,r.jsx)(n.code,{children:"sts:AssumeRole"})," \u7684\u6743\u9650\u3002\u5982\u679c\u60a8\u770b\u5230\u5982\u4e0b\u9519\u8bef\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"An error occurred (AccessDenied) when calling the AssumeRole operation: User: arn:aws:sts::...:assumed-role/litellm-ecs-task-role/... is not authorized to perform: sts:AssumeRole on resource: arn:aws:iam::...:role/Enterprise/BedrockCrossAccountConsumer\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8fd9\u610f\u5473\u7740\u8fd0\u884c LiteLLM \u7684 IAM \u8eab\u4efd",(0,r.jsx)(n.strong,{children:"\u6ca1\u6709"}),"\u627f\u62c5\u76ee\u6807\u89d2\u8272\u7684\u6743\u9650\u3002\u60a8\u5fc5\u987b\u66f4\u65b0\u60a8\u7684 IAM \u7b56\u7565\u4ee5\u5141\u8bb8\u6b64\u64cd\u4f5c\u3002"]}),"\n",(0,r.jsx)(n.h4,{id:"\u793a\u4f8b-iam-\u7b56\u7565",children:"\u793a\u4f8b IAM \u7b56\u7565"}),"\n",(0,r.jsxs)(n.p,{children:["\u5c06 ",(0,r.jsx)(n.code,{children:"<TARGET_ROLE_ARN>"})," \u66ff\u6362\u4e3a\u60a8\u8981\u627f\u62c5\u7684\u89d2\u8272\u7684 ARN\uff08\u4f8b\u5982\uff0c",(0,r.jsx)(n.code,{children:"arn:aws:iam::123456789012:role/Enterprise/BedrockCrossAccountConsumer"}),"\uff09\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Effect": "Allow",\n      "Action": "sts:AssumeRole",\n      "Resource": "<TARGET_ROLE_ARN>"\n    }\n  ]\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u6ce8\u610f\uff1a"})," \u76ee\u6807\u89d2\u8272\u672c\u8eab\u8fd8\u5fc5\u987b\u4fe1\u4efb\u8c03\u7528 IAM \u8eab\u4efd\uff08\u901a\u8fc7\u5176\u4fe1\u4efb\u7b56\u7565\uff09\uff0cAssumeRole \u624d\u80fd\u6210\u529f\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ",(0,r.jsx)(n.a,{href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-api.html",children:"AWS AssumeRole \u6587\u6863"}),"\u3002"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsxs)(t.A,{value:"sdk",label:"SDK",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\n\nresponse = completion(\n            model="bedrock/anthropic.claude-instant-v1",\n            messages=messages,\n            max_tokens=10,\n            temperature=0.1,\n            aws_role_name=aws_role_name,\n            aws_session_name="my-test-session",\n        )\n'})}),(0,r.jsx)(n.p,{children:"\u5982\u679c\u60a8\u8fd8\u9700\u8981\u52a8\u6001\u8bbe\u7f6e\u8bbf\u95ee\u89d2\u8272\u7684 aws \u7528\u6237\uff0c\u8bf7\u5728 completion()/embedding() \u51fd\u6570\u4e2d\u6dfb\u52a0\u989d\u5916\u7684\u53c2\u6570"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\n\nresponse = completion(\n            model="bedrock/anthropic.claude-instant-v1",\n            messages=messages,\n            max_tokens=10,\n            temperature=0.1,\n            aws_region_name=aws_region_name,\n            aws_access_key_id=aws_access_key_id,\n            aws_secret_access_key=aws_secret_access_key,\n            aws_role_name=aws_role_name,\n            aws_session_name="my-test-session",\n        )\n'})})]}),(0,r.jsx)(t.A,{value:"proxy",label:"PROXY",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'model_list:\n  - model_name: bedrock/*\n    litellm_params:\n      model: bedrock/*\n      aws_role_name: arn:aws:iam::888602223428:role/iam_local_role # AWS RoleArn\n      aws_session_name: "bedrock-session" # AWS RoleSessionName\n      aws_access_key_id: os.environ/AWS_ACCESS_KEY_ID # [\u53ef\u9009 - \u5982\u679c\u4f7f\u7528\u89d2\u8272\u5219\u4e0d\u9700\u8981]\n      aws_secret_access_key: os.environ/AWS_SECRET_ACCESS_KEY # [\u53ef\u9009 - \u5982\u679c\u4f7f\u7528\u89d2\u8272\u5219\u4e0d\u9700\u8981]\n'})})})]}),"\n",(0,r.jsx)(n.h3,{id:"\u5c06\u5916\u90e8-bedrockruntimeclient-\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012---completion",children:"\u5c06\u5916\u90e8 BedrockRuntime.Client \u4f5c\u4e3a\u53c2\u6570\u4f20\u9012 - Completion()"}),"\n",(0,r.jsxs)(n.p,{children:["\u8fd9\u662f\u4e00\u4e2a\u5df2\u5f03\u7528\u7684\u6d41\u7a0b\u3002Boto3 \u4e0d\u662f\u5f02\u6b65\u7684\u3002boto3.client \u4e0d\u5141\u8bb8\u6211\u4eec\u901a\u8fc7 httpx \u53d1\u8d77 http \u8c03\u7528\u3002\u901a\u8fc7\u4e0a\u9762\u7684\u65b9\u6cd5\u4f20\u9012\u60a8\u7684 aws \u53c2\u6570\ud83d\udc46\u3002",(0,r.jsx)(n.a,{href:"https://github.com/BerriAI/litellm/blob/55a20c7cce99a93d36a82bf3ae90ba3baf9a7f89/litellm/llms/bedrock_httpx.py#L284",children:"\u67e5\u770b\u8eab\u4efd\u9a8c\u8bc1\u4ee3\u7801"})," ",(0,r.jsx)(n.a,{href:"https://github.com/BerriAI/litellm/issues",children:"\u6dfb\u52a0\u65b0\u7684\u8eab\u4efd\u9a8c\u8bc1\u6d41\u7a0b"})]}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["\u5b9e\u9a8c\u6027 - 2024\u5e746\u670823\u65e5\uff1a\n",(0,r.jsx)(n.code,{children:"aws_access_key_id"}),"\u3001",(0,r.jsx)(n.code,{children:"aws_secret_access_key"})," \u548c ",(0,r.jsx)(n.code,{children:"aws_session_token"})," \u5c06\u4ece boto3.client \u4e2d\u63d0\u53d6\u5e76\u4f20\u9012\u5230 httpx \u5ba2\u6237\u7aef"]})}),"\n",(0,r.jsx)(n.p,{children:"\u5c06\u5916\u90e8 BedrockRuntime.Client \u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9 litellm.completion\u3002\u5728\u4f7f\u7528 AWS \u51ed\u636e\u914d\u7f6e\u6587\u4ef6\u3001SSO \u4f1a\u8bdd\u3001\u627f\u62c5\u89d2\u8272\u4f1a\u8bdd\u6216\u73af\u5883\u53d8\u91cf\u4e0d\u53ef\u7528\u4e8e\u8eab\u4efd\u9a8c\u8bc1\u65f6\u5f88\u6709\u7528\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u4ece\u4f1a\u8bdd\u51ed\u636e\u521b\u5efa\u5ba2\u6237\u7aef\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import boto3\nfrom litellm import completion\n\nbedrock = boto3.client(\n            service_name="bedrock-runtime",\n            region_name="us-east-1",\n            aws_access_key_id="",\n            aws_secret_access_key="",\n            aws_session_token="",\n)\n\nresponse = completion(\n            model="bedrock/anthropic.claude-instant-v1",\n            messages=[{ "content": "Hello, how are you?","role": "user"}],\n            aws_bedrock_client=bedrock,\n)\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u4ece ",(0,r.jsx)(n.code,{children:"~/.aws/config"})," \u4e2d\u7684 AWS \u914d\u7f6e\u6587\u4ef6\u521b\u5efa\u5ba2\u6237\u7aef\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import boto3\nfrom litellm import completion\n\ndev_session = boto3.Session(profile_name="dev-profile")\nbedrock = dev_session.client(\n            service_name="bedrock-runtime",\n            region_name="us-east-1",\n)\n\nresponse = completion(\n            model="bedrock/anthropic.claude-instant-v1",\n            messages=[{ "content": "Hello, how are you?","role": "user"}],\n            aws_bedrock_client=bedrock,\n)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u901a\u8fc7\u5185\u90e8\u4ee3\u7406\u8c03\u7528\u4e0d\u517c\u5bb9-bedrock-url",children:"\u901a\u8fc7\u5185\u90e8\u4ee3\u7406\u8c03\u7528\uff08\u4e0d\u517c\u5bb9 bedrock url\uff09"}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"bedrock/converse_like/model"})," \u7aef\u70b9\u901a\u8fc7\u60a8\u7684\u5185\u90e8\u4ee3\u7406\u8c03\u7528 bedrock converse \u6a21\u578b\u3002"]}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(t.A,{value:"sdk",label:"SDK",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from litellm import completion\n\nresponse = completion(\n    model="bedrock/converse_like/some-model",\n    messages=[{"role": "user", "content": "What\'s AWS?"}],\n    api_key="sk-1234",\n    api_base="https://some-api-url/models",\n    extra_headers={"test": "hello world"},\n)\n'})})}),(0,r.jsxs)(t.A,{value:"proxy",label:"LiteLLM Proxy",children:[(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8bbe\u7f6e config.yaml"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"model_list:\n    - model_name: anthropic-claude\n      litellm_params:\n        model: bedrock/converse_like/some-model\n        api_base: https://some-api-url/models\n"})}),(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u542f\u52a8\u4ee3\u7406\u670d\u52a1\u5668"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"litellm --config config.yaml\n\n# \u8fd0\u884c\u5728 http://0.0.0.0:4000\n"})}),(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"\u6d4b\u8bd5\uff01"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST \'http://0.0.0.0:4000/chat/completions\' \\\n-H \'Content-Type: application/json\' \\\n-H \'Authorization: Bearer sk-1234\' \\\n-d \'{\n    "model": "anthropic-claude",\n    "messages": [\n      {\n        "role": "system",\n        "content": "You are a helpful math tutor. Guide the user through the solution step by step."\n      },\n      { "content": "Hello, how are you?", "role": "user" }\n    ]\n}\'\n'})})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u9884\u671f\u8f93\u51fa URL"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"https://some-api-url/models\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},49489(e,n,s){s.d(n,{A:()=>f});var l=s(96540),r=s(18215),o=s(24245),i=s(56347),t=s(36494),a=s(62814),c=s(45167),d=s(69900);function h(e){return l.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,l.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function m(e){const{values:n,children:s}=e;return(0,l.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:s,default:l}})=>({value:e,label:n,attributes:s,default:l}))}(s);return function(e){const n=(0,c.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,s])}function p({value:e,tabValues:n}){return n.some(n=>n.value===e)}function u({queryString:e=!1,groupId:n}){const s=(0,i.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,a.aZ)(r),(0,l.useCallback)(e=>{if(!r)return;const n=new URLSearchParams(s.location.search);n.set(r,e),s.replace({...s.location,search:n.toString()})},[r,s])]}function x(e){const{defaultValue:n,queryString:s=!1,groupId:r}=e,o=m(e),[i,a]=(0,l.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=n.find(e=>e.default)??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:o})),[c,h]=u({queryString:s,groupId:r}),[x,j]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,r]=(0,d.Dv)(n);return[s,(0,l.useCallback)(e=>{n&&r.set(e)},[n,r])]}({groupId:r}),g=(()=>{const e=c??x;return p({value:e,tabValues:o})?e:null})();(0,t.A)(()=>{g&&a(g)},[g]);return{selectedValue:i,selectValue:(0,l.useCallback)(e=>{if(!p({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);a(e),h(e),j(e)},[h,j,o]),tabValues:o}}var j=s(11062);const g="tabList__CuJ",_="tabItem_LNqP";var b=s(74848);function v({className:e,block:n,selectedValue:s,selectValue:l,tabValues:i}){const t=[],{blockElementScrollPositionUntilNextRender:a}=(0,o.a_)(),c=e=>{const n=e.currentTarget,r=t.indexOf(n),o=i[r].value;o!==s&&(a(n),l(o))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const s=t.indexOf(e.currentTarget)+1;n=t[s]??t[0];break}case"ArrowLeft":{const s=t.indexOf(e.currentTarget)-1;n=t[s]??t[t.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e),children:i.map(({value:e,label:n,attributes:l})=>(0,b.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{t.push(e)},onKeyDown:d,onClick:c,...l,className:(0,r.A)("tabs__item",_,l?.className,{"tabs__item--active":s===e}),children:n??e},e))})}function k({lazy:e,children:n,selectedValue:s}){const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=o.find(e=>e.props.value===s);return e?(0,l.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:o.map((e,n)=>(0,l.cloneElement)(e,{key:n,hidden:e.props.value!==s}))})}function A(e){const n=x(e);return(0,b.jsxs)("div",{className:(0,r.A)("tabs-container",g),children:[(0,b.jsx)(v,{...n,...e}),(0,b.jsx)(k,{...n,...e})]})}function f(e){const n=(0,j.A)();return(0,b.jsx)(A,{...e,children:h(e.children)},String(n))}}}]);