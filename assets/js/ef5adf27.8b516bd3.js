"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[13879],{28453(e,l,t){t.d(l,{R:()=>n,x:()=>r});var s=t(96540);const d={},i=s.createContext(d);function n(e){const l=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(l):{...l,...e}},[l,e])}function r(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:n(e.components),s.createElement(i.Provider,{value:l},e.children)}},95977(e,l,t){t.r(l),t.d(l,{assets:()=>c,contentTitle:()=>r,default:()=>o,frontMatter:()=>n,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"completion/prompt_formatting","title":"Prompt \u683c\u5f0f\u5316","description":"LiteLLM \u4f1a\u81ea\u52a8\u5c06 OpenAI ChatCompletions \u7684\u63d0\u793a\u683c\u5f0f\u8f6c\u6362\u4e3a\u5176\u4ed6\u6a21\u578b\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u63d0\u793a\u6a21\u677f\u6765\u63a7\u5236\u6b64\u529f\u80fd\u3002","source":"@site/docs/completion/prompt_formatting.md","sourceDirName":"completion","slug":"/completion/prompt_formatting","permalink":"/docs/completion/prompt_formatting","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u63d0\u793a\u7f13\u5b58","permalink":"/docs/completion/prompt_caching"},"next":{"title":"\u53ef\u9760\u6027 - \u91cd\u8bd5\u4e0e\u56de\u9000","permalink":"/docs/completion/reliable_completions"}}');var d=t(74848),i=t(28453);const n={},r="Prompt \u683c\u5f0f\u5316",c={},h=[{value:"Huggingface \u6a21\u578b",id:"huggingface-\u6a21\u578b",level:2},{value:"\u81ea\u5b9a\u4e49\u683c\u5f0f\u5316\u63d0\u793a",id:"\u81ea\u5b9a\u4e49\u683c\u5f0f\u5316\u63d0\u793a",level:2},{value:"\u6240\u6709\u63d0\u4f9b\u65b9",id:"\u6240\u6709\u63d0\u4f9b\u65b9",level:2}];function a(e){const l={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.header,{children:(0,d.jsx)(l.h1,{id:"prompt-\u683c\u5f0f\u5316",children:"Prompt \u683c\u5f0f\u5316"})}),"\n",(0,d.jsx)(l.p,{children:"LiteLLM \u4f1a\u81ea\u52a8\u5c06 OpenAI ChatCompletions \u7684\u63d0\u793a\u683c\u5f0f\u8f6c\u6362\u4e3a\u5176\u4ed6\u6a21\u578b\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u63d0\u793a\u6a21\u677f\u6765\u63a7\u5236\u6b64\u529f\u80fd\u3002"}),"\n",(0,d.jsx)(l.h2,{id:"huggingface-\u6a21\u578b",children:"Huggingface \u6a21\u578b"}),"\n",(0,d.jsxs)(l.p,{children:["LiteLLM \u652f\u6301 ",(0,d.jsx)(l.a,{href:"https://huggingface.co/docs/transformers/main/chat_templating",children:"Huggingface \u63d0\u793a\u6a21\u677f"}),"\uff0c\u5e76\u5c06\u81ea\u52a8\u68c0\u67e5\u60a8\u7684 huggingface \u6a21\u578b\u662f\u5426\u6ce8\u518c\u4e86\u804a\u5929\u6a21\u677f\uff08\u4f8b\u5982\uff1a",(0,d.jsx)(l.a,{href:"https://huggingface.co/mistralai/Mistral-7B-Instruct-v0.1/blob/main/tokenizer_config.json#L32",children:"Mistral-7b"}),"\uff09\u3002"]}),"\n",(0,d.jsx)(l.p,{children:"\u5bf9\u4e8e\u6d41\u884c\u7684\u6a21\u578b\uff08\u5982 meta-llama/llama2\uff09\uff0c\u6211\u4eec\u5df2\u5c06\u5b83\u4eec\u7684\u6a21\u677f\u4f5c\u4e3a\u5305\u7684\u4e00\u90e8\u5206\u4fdd\u5b58\u4e0b\u6765\u3002"}),"\n",(0,d.jsx)(l.p,{children:(0,d.jsx)(l.strong,{children:"\u5b58\u50a8\u7684\u6a21\u677f"})}),"\n",(0,d.jsxs)(l.table,{children:[(0,d.jsx)(l.thead,{children:(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.th,{children:"\u6a21\u578b\u540d\u79f0"}),(0,d.jsx)(l.th,{children:"\u9002\u7528\u7684\u6a21\u578b"}),(0,d.jsx)(l.th,{children:"\u8865\u5168\u8c03\u7528"})]})}),(0,d.jsxs)(l.tbody,{children:[(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"mistralai/Mistral-7B-Instruct-v0.1"}),(0,d.jsx)(l.td,{children:"mistralai/Mistral-7B-Instruct-v0.1"}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.code,{children:"completion(model='huggingface/mistralai/Mistral-7B-Instruct-v0.1', messages=messages, api_base=\"your_api_endpoint\")"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"meta-llama/Llama-2-7b-chat"}),(0,d.jsx)(l.td,{children:"\u6240\u6709 meta-llama llama2 \u804a\u5929\u6a21\u578b"}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.code,{children:"completion(model='huggingface/meta-llama/Llama-2-7b', messages=messages, api_base=\"your_api_endpoint\")"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"tiiuae/falcon-7b-instruct"}),(0,d.jsx)(l.td,{children:"\u6240\u6709 falcon \u6307\u4ee4\u6a21\u578b"}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.code,{children:"completion(model='huggingface/tiiuae/falcon-7b-instruct', messages=messages, api_base=\"your_api_endpoint\")"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"mosaicml/mpt-7b-chat"}),(0,d.jsx)(l.td,{children:"\u6240\u6709 mpt \u804a\u5929\u6a21\u578b"}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.code,{children:"completion(model='huggingface/mosaicml/mpt-7b-chat', messages=messages, api_base=\"your_api_endpoint\")"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"codellama/CodeLlama-34b-Instruct-hf"}),(0,d.jsx)(l.td,{children:"\u6240\u6709 codellama \u6307\u4ee4\u6a21\u578b"}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.code,{children:"completion(model='huggingface/codellama/CodeLlama-34b-Instruct-hf', messages=messages, api_base=\"your_api_endpoint\")"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"WizardLM/WizardCoder-Python-34B-V1.0"}),(0,d.jsx)(l.td,{children:"\u6240\u6709 wizardcoder \u6a21\u578b"}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.code,{children:"completion(model='huggingface/WizardLM/WizardCoder-Python-34B-V1.0', messages=messages, api_base=\"your_api_endpoint\")"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"Phind/Phind-CodeLlama-34B-v2"}),(0,d.jsx)(l.td,{children:"\u6240\u6709 phind-codellama \u6a21\u578b"}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.code,{children:"completion(model='huggingface/Phind/Phind-CodeLlama-34B-v2', messages=messages, api_base=\"your_api_endpoint\")"})})]})]})]}),"\n",(0,d.jsx)(l.p,{children:(0,d.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/blob/main/litellm/llms/prompt_templates/factory.py",children:(0,d.jsx)(l.strong,{children:"\u8df3\u8f6c\u81f3\u4ee3\u7801"})})}),"\n",(0,d.jsx)(l.h2,{id:"\u81ea\u5b9a\u4e49\u683c\u5f0f\u5316\u63d0\u793a",children:"\u81ea\u5b9a\u4e49\u683c\u5f0f\u5316\u63d0\u793a"}),"\n",(0,d.jsx)(l.p,{children:"\u60a8\u4e5f\u53ef\u4ee5\u81ea\u5df1\u683c\u5f0f\u5316\u63d0\u793a\u3002\u4ee5\u4e0b\u662f\u64cd\u4f5c\u65b9\u6cd5\uff1a"}),"\n",(0,d.jsx)(l.pre,{children:(0,d.jsx)(l.code,{className:"language-python",children:'import litellm\n# \u521b\u5efa\u81ea\u5df1\u7684\u81ea\u5b9a\u4e49\u63d0\u793a\u6a21\u677f \nlitellm.register_prompt_template(\n    model="togethercomputer/LLaMA-2-7B-32K",\n    initial_prompt_value="You are a good assistant"  # [\u53ef\u9009]\n    roles={\n        "system": {\n            "pre_message": "[INST] <<SYS>>\\n",  # [\u53ef\u9009]\n            "post_message": "\\n<</SYS>>\\n [/INST]\\n"  # [\u53ef\u9009]\n        },\n        "user": { \n            "pre_message": "[INST] ",  # [\u53ef\u9009]\n            "post_message": " [/INST]"  # [\u53ef\u9009]\n        }, \n        "assistant": {\n            "pre_message": "\\n"  # [\u53ef\u9009]\n            "post_message": "\\n"  # [\u53ef\u9009]\n        }\n    },\n    final_prompt_value="Now answer as best you can:"  # [\u53ef\u9009]\n)\n\ndef test_huggingface_custom_model():\n    model = "huggingface/togethercomputer/LLaMA-2-7B-32K"\n    response = completion(model=model, messages=messages, api_base="https://my-huggingface-endpoint")\n    print(response[\'choices\'][0][\'message\'][\'content\'])\n    return response\n\ntest_huggingface_custom_model()\n'})}),"\n",(0,d.jsx)(l.p,{children:"\u76ee\u524d\u6b64\u529f\u80fd\u652f\u6301 Huggingface\u3001TogetherAI\u3001Ollama \u548c Petals\u3002\u5176\u4ed6\u63d0\u4f9b\u8005\u8981\u4e48\u6709\u56fa\u5b9a\u7684\u63d0\u793a\u6a21\u677f\uff08\u4f8b\u5982 Anthropic\uff09\uff0c\u8981\u4e48\u81ea\u884c\u683c\u5f0f\u5316\uff08\u4f8b\u5982 Replicate\uff09\u3002\u5982\u679c\u6709\u6211\u4eec\u672a\u6db5\u76d6\u7684\u63d0\u4f9b\u65b9\uff0c\u8bf7\u544a\u77e5\u6211\u4eec\uff01"}),"\n",(0,d.jsx)(l.h2,{id:"\u6240\u6709\u63d0\u4f9b\u65b9",children:"\u6240\u6709\u63d0\u4f9b\u65b9"}),"\n",(0,d.jsx)(l.p,{children:"\u4ee5\u4e0b\u662f\u6240\u6709\u63d0\u4f9b\u65b9\u7684\u4ee3\u7801\u5b9e\u73b0\u65b9\u5f0f\uff0c\u8ba9\u6211\u4eec\u77e5\u9053\u5982\u4f55\u8fdb\u4e00\u6b65\u6539\u8fdb\uff1a"}),"\n",(0,d.jsxs)(l.table,{children:[(0,d.jsx)(l.thead,{children:(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.th,{children:"\u63d0\u4f9b\u65b9"}),(0,d.jsx)(l.th,{children:"\u6a21\u578b\u540d\u79f0"}),(0,d.jsx)(l.th,{children:"\u4ee3\u7801"})]})}),(0,d.jsxs)(l.tbody,{children:[(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"Anthropic"}),(0,d.jsxs)(l.td,{children:[(0,d.jsx)(l.code,{children:"claude-instant-1"}),", ",(0,d.jsx)(l.code,{children:"claude-instant-1.2"}),", ",(0,d.jsx)(l.code,{children:"claude-2"})]}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/blob/721564c63999a43f96ee9167d0530759d51f8d45/litellm/llms/anthropic.py#L84",children:"\u4ee3\u7801"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"OpenAI \u6587\u672c\u8865\u5168"}),(0,d.jsxs)(l.td,{children:[(0,d.jsx)(l.code,{children:"text-davinci-003"}),", ",(0,d.jsx)(l.code,{children:"text-curie-001"}),", ",(0,d.jsx)(l.code,{children:"text-babbage-001"}),", ",(0,d.jsx)(l.code,{children:"text-ada-001"}),", ",(0,d.jsx)(l.code,{children:"babbage-002"}),", ",(0,d.jsx)(l.code,{children:"davinci-002"})]}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/blob/721564c63999a43f96ee9167d0530759d51f8d45/litellm/main.py#L442",children:"\u4ee3\u7801"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"Replicate"}),(0,d.jsxs)(l.td,{children:["\u6240\u6709\u4ee5 ",(0,d.jsx)(l.code,{children:"replicate/"})," \u5f00\u5934\u7684\u6a21\u578b\u540d\u79f0"]}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/blob/721564c63999a43f96ee9167d0530759d51f8d45/litellm/llms/replicate.py#L180",children:"\u4ee3\u7801"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"Cohere"}),(0,d.jsxs)(l.td,{children:[(0,d.jsx)(l.code,{children:"command-nightly"}),", ",(0,d.jsx)(l.code,{children:"command"}),", ",(0,d.jsx)(l.code,{children:"command-light"}),", ",(0,d.jsx)(l.code,{children:"command-medium-beta"}),", ",(0,d.jsx)(l.code,{children:"command-xlarge-beta"}),", ",(0,d.jsx)(l.code,{children:"command-r-plus"})]}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/blob/721564c63999a43f96ee9167d0530759d51f8d45/litellm/llms/cohere.py#L115",children:"\u4ee3\u7801"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"Huggingface"}),(0,d.jsxs)(l.td,{children:["\u6240\u6709\u4ee5 ",(0,d.jsx)(l.code,{children:"huggingface/"})," \u5f00\u5934\u7684\u6a21\u578b\u540d\u79f0"]}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/blob/721564c63999a43f96ee9167d0530759d51f8d45/litellm/llms/huggingface_restapi.py#L186",children:"\u4ee3\u7801"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"OpenRouter"}),(0,d.jsxs)(l.td,{children:["\u6240\u6709\u4ee5 ",(0,d.jsx)(l.code,{children:"openrouter/"})," \u5f00\u5934\u7684\u6a21\u578b\u540d\u79f0"]}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/blob/721564c63999a43f96ee9167d0530759d51f8d45/litellm/main.py#L611",children:"\u4ee3\u7801"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"AI21"}),(0,d.jsxs)(l.td,{children:[(0,d.jsx)(l.code,{children:"j2-mid"}),", ",(0,d.jsx)(l.code,{children:"j2-light"}),", ",(0,d.jsx)(l.code,{children:"j2-ultra"})]}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/blob/721564c63999a43f96ee9167d0530759d51f8d45/litellm/llms/ai21.py#L107",children:"\u4ee3\u7801"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"VertexAI"}),(0,d.jsxs)(l.td,{children:[(0,d.jsx)(l.code,{children:"text-bison"}),", ",(0,d.jsx)(l.code,{children:"text-bison@001"}),", ",(0,d.jsx)(l.code,{children:"chat-bison"}),", ",(0,d.jsx)(l.code,{children:"chat-bison@001"}),", ",(0,d.jsx)(l.code,{children:"chat-bison-32k"}),", ",(0,d.jsx)(l.code,{children:"code-bison"}),", ",(0,d.jsx)(l.code,{children:"code-bison@001"}),", ",(0,d.jsx)(l.code,{children:"code-gecko@001"}),", ",(0,d.jsx)(l.code,{children:"code-gecko@latest"}),", ",(0,d.jsx)(l.code,{children:"codechat-bison"}),", ",(0,d.jsx)(l.code,{children:"codechat-bison@001"}),", ",(0,d.jsx)(l.code,{children:"codechat-bison-32k"})]}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/blob/721564c63999a43f96ee9167d0530759d51f8d45/litellm/llms/vertex_ai.py#L89",children:"\u4ee3\u7801"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"Bedrock"}),(0,d.jsxs)(l.td,{children:["\u6240\u6709\u4ee5 ",(0,d.jsx)(l.code,{children:"bedrock/"})," \u5f00\u5934\u7684\u6a21\u578b\u540d\u79f0"]}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/blob/721564c63999a43f96ee9167d0530759d51f8d45/litellm/llms/bedrock.py#L183",children:"\u4ee3\u7801"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"Sagemaker"}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.code,{children:"sagemaker/jumpstart-dft-meta-textgeneration-llama-2-7b"})}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/blob/721564c63999a43f96ee9167d0530759d51f8d45/litellm/llms/sagemaker.py#L89",children:"\u4ee3\u7801"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"TogetherAI"}),(0,d.jsxs)(l.td,{children:["\u6240\u6709\u4ee5 ",(0,d.jsx)(l.code,{children:"together_ai/"})," \u5f00\u5934\u7684\u6a21\u578b\u540d\u79f0"]}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/blob/721564c63999a43f96ee9167d0530759d51f8d45/litellm/llms/together_ai.py#L101",children:"\u4ee3\u7801"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"AlephAlpha"}),(0,d.jsxs)(l.td,{children:["\u6240\u6709\u4ee5 ",(0,d.jsx)(l.code,{children:"aleph_alpha/"})," \u5f00\u5934\u7684\u6a21\u578b\u540d\u79f0"]}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/blob/721564c63999a43f96ee9167d0530759d51f8d45/litellm/llms/aleph_alpha.py#L184",children:"\u4ee3\u7801"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"Palm"}),(0,d.jsxs)(l.td,{children:["\u6240\u6709\u4ee5 ",(0,d.jsx)(l.code,{children:"palm/"})," \u5f00\u5934\u7684\u6a21\u578b\u540d\u79f0"]}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/blob/721564c63999a43f96ee9167d0530759d51f8d45/litellm/llms/palm.py#L95",children:"\u4ee3\u7801"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"NLP Cloud"}),(0,d.jsxs)(l.td,{children:["\u6240\u6709\u4ee5 ",(0,d.jsx)(l.code,{children:"palm/"})," \u5f00\u5934\u7684\u6a21\u578b\u540d\u79f0"]}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/blob/721564c63999a43f96ee9167d0530759d51f8d45/litellm/llms/nlp_cloud.py#L120",children:"\u4ee3\u7801"})})]}),(0,d.jsxs)(l.tr,{children:[(0,d.jsx)(l.td,{children:"Petals"}),(0,d.jsxs)(l.td,{children:["\u6240\u6709\u4ee5 ",(0,d.jsx)(l.code,{children:"petals/"})," \u5f00\u5934\u7684\u6a21\u578b\u540d\u79f0"]}),(0,d.jsx)(l.td,{children:(0,d.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/blob/721564c63999a43f96ee9167d0530759d51f8d45/litellm/llms/petals.py#L87",children:"\u4ee3\u7801"})})]})]})]})]})}function o(e={}){const{wrapper:l}={...(0,i.R)(),...e.components};return l?(0,d.jsx)(l,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}}}]);