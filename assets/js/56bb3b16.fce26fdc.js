"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[60516],{7227(e,n,l){l.d(n,{A:()=>t});l(96540);var a=l(18215);const s="tabItem_Ymn6";var i=l(74848);function t({children:e,hidden:n,className:l}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,a.A)(s,l),hidden:n,children:e})}},25313(e,n,l){l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>m,frontMatter:()=>c,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"proxy_server","title":"[\u65e7\u4ee3\u7406 \ud83d\udc49 [\u65b0\u4ee3\u7406](./simple_proxy)] \u672c\u5730\u8f7b\u91cf\u7ea7 LiteLLM \u4ee3\u7406\u670d\u52a1\u5668","description":"\u4e00\u4e2a\u5feb\u901f\u4e14\u8f7b\u91cf\u7684\u517c\u5bb9 OpenAI \u7684\u670d\u52a1\u5668\uff0c\u7528\u4e8e\u8c03\u7528 100 \u591a\u4e2a LLM API\u3002","source":"@site/docs/proxy_server.md","sourceDirName":".","slug":"/proxy_server","permalink":"/docs/proxy_server","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"[\u5df2\u5f03\u7528] \u533a\u57df\u8def\u7531","permalink":"/docs/proxy/customer_routing"},"next":{"title":"\u652f\u6301\u4e0e\u521b\u59cb\u4eba\u4ea4\u6d41","permalink":"/docs/troubleshoot"}}');var s=l(74848),i=l(28453),t=l(49489),r=l(7227);const c={},o="[\u65e7\u4ee3\u7406 \ud83d\udc49 \u65b0\u4ee3\u7406] \u672c\u5730\u8f7b\u91cf\u7ea7 LiteLLM \u4ee3\u7406\u670d\u52a1\u5668",d={},h=[{value:"\u4f7f\u7528\u65b9\u6cd5",id:"\u4f7f\u7528\u65b9\u6cd5",level:2},{value:"\u6d4b\u8bd5",id:"\u6d4b\u8bd5",level:3},{value:"\u66ff\u6362 openai \u57fa\u7840 URL",id:"\u66ff\u6362-openai-\u57fa\u7840-url",level:3},{value:"\u5176\u4ed6\u652f\u6301\u7684\u6a21\u578b\uff1a",id:"\u5176\u4ed6\u652f\u6301\u7684\u6a21\u578b",level:4},{value:"\u4f7f\u7528\u6559\u7a0b\uff1a\u4e0e\u591a\u4e2a LLM + LibreChat/Chatbot-UI/Auto-Gen/ChatDev/Langroid \u7b49\u4e00\u8d77\u4f7f\u7528",id:"\u4f7f\u7528\u6559\u7a0b\u4e0e\u591a\u4e2a-llm--librechatchatbot-uiauto-genchatdevlangroid-\u7b49\u4e00\u8d77\u4f7f\u7528",level:3},{value:"1. \u514b\u9686\u4ed3\u5e93",id:"1-\u514b\u9686\u4ed3\u5e93",level:4},{value:"2. \u4fee\u6539 <code>docker-compose.yml</code>",id:"2-\u4fee\u6539-docker-composeyml",level:4},{value:"3. \u5728 <code>.env</code> \u4e2d\u4fdd\u5b58\u5047\u7684 OpenAI \u5bc6\u94a5",id:"3-\u5728-env-\u4e2d\u4fdd\u5b58\u5047\u7684-openai-\u5bc6\u94a5",level:4},{value:"4. \u8fd0\u884c LibreChat:",id:"4-\u8fd0\u884c-librechat",level:4},{value:"1. \u514b\u9686\u4ed3\u5e93",id:"1-\u514b\u9686\u4ed3\u5e93-1",level:4},{value:"2. \u5b89\u88c5\u4f9d\u8d56\u9879",id:"2-\u5b89\u88c5\u4f9d\u8d56\u9879",level:4},{value:"3. \u521b\u5efa\u73af\u5883\u6587\u4ef6",id:"3-\u521b\u5efa\u73af\u5883\u6587\u4ef6",level:4},{value:"4. \u8bbe\u7f6e API \u5bc6\u94a5\u548c\u57fa\u7840 URL",id:"4-\u8bbe\u7f6e-api-\u5bc6\u94a5\u548c\u57fa\u7840-url",level:4},{value:"5. \u4f7f\u7528 docker compose \u8fd0\u884c",id:"5-\u4f7f\u7528-docker-compose-\u8fd0\u884c",level:4},{value:"\u8bbe\u7f6e ChatDev (\u6587\u6863)",id:"\u8bbe\u7f6e-chatdev-\u6587\u6863",level:3},{value:"\u4f7f\u7528\u4ee3\u7406\u8fd0\u884c ChatDev",id:"\u4f7f\u7528\u4ee3\u7406\u8fd0\u884c-chatdev",level:3},{value:"\u672c\u5730\u4ee3\u7406",id:"\u672c\u5730\u4ee3\u7406",level:2},{value:"\u4f7f\u7528\u6559\u7a0b\uff1a\u4e0e\u591a\u4e2a LLM + Aider/AutoGen/Langroid \u7b49\u4e00\u8d77\u4f7f\u7528",id:"\u4f7f\u7528\u6559\u7a0b\u4e0e\u591a\u4e2a-llm--aiderautogenlangroid-\u7b49\u4e00\u8d77\u4f7f\u7528",level:3},{value:"\u5411\u60a8\u7684\u4ee3\u7406\u53d1\u9001\u8bf7\u6c42",id:"\u5411\u60a8\u7684\u4ee3\u7406\u53d1\u9001\u8bf7\u6c42",level:4},{value:"\u8bbe\u7f6e ChatDev (\u6587\u6863)",id:"\u8bbe\u7f6e-chatdev-\u6587\u6863-1",level:3},{value:"\u4f7f\u7528\u4ee3\u7406\u8fd0\u884c ChatDev",id:"\u4f7f\u7528\u4ee3\u7406\u8fd0\u884c-chatdev-1",level:3},{value:"\u9ad8\u7ea7\u529f\u80fd",id:"\u9ad8\u7ea7\u529f\u80fd",level:2},{value:"\u65e5\u5fd7\u8bb0\u5f55",id:"\u65e5\u5fd7\u8bb0\u5f55",level:3},{value:"\u914d\u7f6e\u4ee3\u7406",id:"\u914d\u7f6e\u4ee3\u7406",level:3},{value:"\u4fdd\u5b58 API \u5bc6\u94a5",id:"\u4fdd\u5b58-api-\u5bc6\u94a5",level:4},{value:"\u6027\u80fd\u6d4b\u8bd5",id:"\u6027\u80fd\u6d4b\u8bd5",level:3},{value:"\u652f\u6301/\u4e0e\u521b\u59cb\u4eba\u4ea4\u8c08",id:"\u652f\u6301\u4e0e\u521b\u59cb\u4eba\u4ea4\u8c08",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsxs)(n.h1,{id:"\u65e7\u4ee3\u7406--\u65b0\u4ee3\u7406-\u672c\u5730\u8f7b\u91cf\u7ea7-litellm-\u4ee3\u7406\u670d\u52a1\u5668",children:["[\u65e7\u4ee3\u7406 \ud83d\udc49 ",(0,s.jsx)(n.a,{href:"./simple_proxy",children:"\u65b0\u4ee3\u7406"}),"] \u672c\u5730\u8f7b\u91cf\u7ea7 LiteLLM \u4ee3\u7406\u670d\u52a1\u5668"]})}),"\n",(0,s.jsx)(n.p,{children:"\u4e00\u4e2a\u5feb\u901f\u4e14\u8f7b\u91cf\u7684\u517c\u5bb9 OpenAI \u7684\u670d\u52a1\u5668\uff0c\u7528\u4e8e\u8c03\u7528 100 \u591a\u4e2a LLM API\u3002"}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["\u6587\u6863\u5df2\u8fc7\u65f6\u3002\u8bf7\u53c2\u9605\u65b0\u7248\u6587\u6863 \ud83d\udc49 ",(0,s.jsx)(n.a,{href:"./simple_proxy",children:"\u8fd9\u91cc"})]})}),"\n",(0,s.jsx)(n.h2,{id:"\u4f7f\u7528\u65b9\u6cd5",children:"\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"pip install 'litellm[proxy]'\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --model ollama/codellama \n\n#INFO: Ollama \u6b63\u5728\u8fd0\u884c\u4e8e http://0.0.0.0:8000\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u6d4b\u8bd5",children:"\u6d4b\u8bd5"}),"\n",(0,s.jsx)(n.p,{children:"\u5728\u65b0\u7ec8\u7aef\u4e2d\u8fd0\u884c\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --test\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u66ff\u6362-openai-\u57fa\u7840-url",children:"\u66ff\u6362 openai \u57fa\u7840 URL"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import openai \n\nopenai.api_base = "http://0.0.0.0:8000"\n\nprint(openai.ChatCompletion.create(model="test", messages=[{"role":"user", "content":"Hey!"}]))\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u5176\u4ed6\u652f\u6301\u7684\u6a21\u578b",children:"\u5176\u4ed6\u652f\u6301\u7684\u6a21\u578b\uff1a"}),"\n",(0,s.jsxs)(t.A,{children:[(0,s.jsxs)(r.A,{value:"vllm-local",label:"VLLM",children:[(0,s.jsx)(n.p,{children:"\u5047\u8bbe\u60a8\u5728\u672c\u5730\u8fd0\u884c vllm"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --model vllm/facebook/opt-125m\n"})})]}),(0,s.jsx)(r.A,{value:"openai-proxy",label:"\u517c\u5bb9 OpenAI \u7684\u670d\u52a1\u5668",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --model openai/<\u6a21\u578b\u540d\u79f0> --api_base <\u60a8\u7684\u57fa\u7840 URL>\n"})})}),(0,s.jsx)(r.A,{value:"huggingface",label:"Huggingface",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ export HUGGINGFACE_API_KEY=my-api-key #[\u53ef\u9009]\n$ litellm --model claude-instant-1\n"})})}),(0,s.jsx)(r.A,{value:"anthropic",label:"Anthropic",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ export ANTHROPIC_API_KEY=my-api-key\n$ litellm --model claude-instant-1\n"})})}),(0,s.jsx)(r.A,{value:"together_ai",label:"TogetherAI",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ export TOGETHERAI_API_KEY=my-api-key\n$ litellm --model together_ai/lmsys/vicuna-13b-v1.5-16k\n"})})}),(0,s.jsx)(r.A,{value:"replicate",label:"Replicate",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ export REPLICATE_API_KEY=my-api-key\n$ litellm \\\n  --model replicate/meta/llama-2-70b-chat:02e509c789964a7ea8736978a43525956ef40397be9033abf9fd2badfe68c9e3\n"})})}),(0,s.jsx)(r.A,{value:"petals",label:"Petals",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --model petals/meta-llama/Llama-2-70b-chat-hf\n"})})}),(0,s.jsx)(r.A,{value:"palm",label:"Palm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ export PALM_API_KEY=my-palm-key\n$ litellm --model palm/chat-bison\n"})})}),(0,s.jsx)(r.A,{value:"azure",label:"Azure OpenAI",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ export AZURE_API_KEY=my-api-key\n$ export AZURE_API_BASE=my-api-base\n\n$ litellm --model azure/my-deployment-name\n"})})}),(0,s.jsx)(r.A,{value:"ai21",label:"AI21",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ export AI21_API_KEY=my-api-key\n$ litellm --model j2-light\n"})})}),(0,s.jsx)(r.A,{value:"cohere",label:"Cohere",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ export COHERE_API_KEY=my-api-key\n$ litellm --model command-nightly\n"})})})]}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528\u6559\u7a0b\u4e0e\u591a\u4e2a-llm--librechatchatbot-uiauto-genchatdevlangroid-\u7b49\u4e00\u8d77\u4f7f\u7528",children:"\u4f7f\u7528\u6559\u7a0b\uff1a\u4e0e\u591a\u4e2a LLM + LibreChat/Chatbot-UI/Auto-Gen/ChatDev/Langroid \u7b49\u4e00\u8d77\u4f7f\u7528"}),"\n",(0,s.jsxs)(t.A,{children:[(0,s.jsxs)(r.A,{value:"multiple-LLMs",label:"\u591a\u4e2a\u6a21\u578b",children:[(0,s.jsx)(n.p,{children:"\u66ff\u6362 openai \u57fa\u7840 URL:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import openai \n\nopenai.api_key = "\u4efb\u4f55\u5b57\u7b26\u4e32"\nopenai.api_base = "http://0.0.0.0:8080" # \u60a8\u7684\u4ee3\u7406 URL\n\n# \u8c03\u7528 openai\nresponse = openai.ChatCompletion.create(model="gpt-3.5-turbo", messages=[{"role": "user", "content": "Hey"}])\n\nprint(response)\n\n# \u8c03\u7528 cohere\nresponse = openai.ChatCompletion.create(model="command-nightly", messages=[{"role": "user", "content": "Hey"}])\n\nprint(response)\n'})})]}),(0,s.jsxs)(r.A,{value:"librechat",label:"LibreChat",children:[(0,s.jsx)(n.h4,{id:"1-\u514b\u9686\u4ed3\u5e93",children:"1. \u514b\u9686\u4ed3\u5e93"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"git clone https://github.com/danny-avila/LibreChat.git\n"})}),(0,s.jsxs)(n.h4,{id:"2-\u4fee\u6539-docker-composeyml",children:["2. \u4fee\u6539 ",(0,s.jsx)(n.code,{children:"docker-compose.yml"})]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"OPENAI_REVERSE_PROXY=http://host.docker.internal:8000/v1/chat/completions\n"})}),(0,s.jsxs)(n.h4,{id:"3-\u5728-env-\u4e2d\u4fdd\u5b58\u5047\u7684-openai-\u5bc6\u94a5",children:["3. \u5728 ",(0,s.jsx)(n.code,{children:".env"})," \u4e2d\u4fdd\u5b58\u5047\u7684 OpenAI \u5bc6\u94a5"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-env",children:"OPENAI_API_KEY=sk-1234\n"})}),(0,s.jsx)(n.h4,{id:"4-\u8fd0\u884c-librechat",children:"4. \u8fd0\u884c LibreChat:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"docker compose up\n"})})]}),(0,s.jsxs)(r.A,{value:"smart-chatbot-ui",label:"SmartChatbotUI",children:[(0,s.jsx)(n.h4,{id:"1-\u514b\u9686\u4ed3\u5e93-1",children:"1. \u514b\u9686\u4ed3\u5e93"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"git clone https://github.com/dotneet/smart-chatbot-ui.git\n"})}),(0,s.jsx)(n.h4,{id:"2-\u5b89\u88c5\u4f9d\u8d56\u9879",children:"2. \u5b89\u88c5\u4f9d\u8d56\u9879"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"npm i\n"})}),(0,s.jsx)(n.h4,{id:"3-\u521b\u5efa\u73af\u5883\u6587\u4ef6",children:"3. \u521b\u5efa\u73af\u5883\u6587\u4ef6"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"cp .env.local.example .env.local\n"})}),(0,s.jsx)(n.h4,{id:"4-\u8bbe\u7f6e-api-\u5bc6\u94a5\u548c\u57fa\u7840-url",children:"4. \u8bbe\u7f6e API \u5bc6\u94a5\u548c\u57fa\u7840 URL"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-env",children:'OPENAI_API_KEY="\u6211\u7684\u5047\u5bc6\u94a5"\nOPENAI_API_HOST="http://0.0.0.0:8000\n'})}),(0,s.jsx)(n.h4,{id:"5-\u4f7f\u7528-docker-compose-\u8fd0\u884c",children:"5. \u4f7f\u7528 docker compose \u8fd0\u884c"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"docker compose up -d\n"})})]}),(0,s.jsxs)(r.A,{value:"autogen",label:"AutoGen",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"pip install pyautogen\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from autogen import AssistantAgent, UserProxyAgent, oai\nconfig_list=[\n    {\n        "model": "\u6211\u7684\u5047\u6a21\u578b",\n        "api_base": "http://0.0.0.0:8000",  # \u517c\u5bb9 LiteLLM \u7684\u7aef\u70b9\n        "api_type": "open_ai",\n        "api_key": "NULL", # \u53ea\u662f\u4e00\u4e2a\u5360\u4f4d\u7b26\n    }\n]\n\nresponse = oai.Completion.create(config_list=config_list, prompt="Hi")\nprint(response) # \u64cd\u4f5c\u6210\u529f\n\nllm_config={\n    "config_list": config_list,\n}\n\nassistant = AssistantAgent("assistant", llm_config=llm_config)\nuser_proxy = UserProxyAgent("user_proxy")\nuser_proxy.initiate_chat(assistant, message="Plot a chart of META and TESLA stock price change YTD.", config_list=config_list)\n'})}),(0,s.jsxs)(n.p,{children:["\u611f\u8c22 ",(0,s.jsx)(n.a,{href:"https://github.com/microsoft/autogen/issues/45#issuecomment-1749921972",children:"@victordibia"})," \u63d0\u4f9b\u7684\u6559\u7a0b\u3002"]})]}),(0,s.jsxs)(r.A,{value:"multi-LLM AutoGen",label:"AutoGen \u591a\u6a21\u578b",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from autogen import AssistantAgent, GroupChatManager, UserProxyAgent\nfrom autogen.agentchat import GroupChat\nconfig_list = [\n    {\n        "model": "ollama/mistralorca",\n        "api_base": "http://0.0.0.0:8000",  # \u517c\u5bb9 LiteLLM \u7684\u7aef\u70b9\n        "api_type": "open_ai",\n        "api_key": "NULL",  # \u53ea\u662f\u4e00\u4e2a\u5360\u4f4d\u7b26\n    }\n]\nllm_config = {"config_list": config_list, "seed": 42}\n\ncode_config_list = [\n    {\n        "model": "ollama/phind-code",\n        "api_base": "http://0.0.0.0:8000",  # \u517c\u5bb9 LiteLLM \u7684\u7aef\u70b9\n        "api_type": "open_ai",\n        "api_key": "NULL",  # \u53ea\u662f\u4e00\u4e2a\u5360\u4f4d\u7b26\n    }\n]\n\ncode_config = {"config_list": code_config_list, "seed": 42}\n\nadmin = UserProxyAgent(\n    name="Admin",\n    system_message="\u4eba\u7c7b\u7ba1\u7406\u5458\u3002\u4e0e\u89c4\u5212\u8005\u8ba8\u8bba\u8ba1\u5212\uff0c\u6267\u884c\u9700\u8981\u5f97\u5230\u6b64\u7ba1\u7406\u5458\u7684\u6279\u51c6\u3002",\n    llm_config=llm_config,\n    code_execution_config=False,\n)\n\n\nengineer = AssistantAgent(\n    name="Engineer",\n    llm_config=code_config,\n    system_message="""\u5de5\u7a0b\u5e08\u3002\u60a8\u9075\u5faa\u5df2\u6279\u51c6\u7684\u8ba1\u5212\u3002\u60a8\u7f16\u5199 Python \u6216 shell \u4ee3\u7801\u6765\u89e3\u51b3\u95ee\u9898\u3002\u5c06\u4ee3\u7801\u5c01\u88c5\u5728\u4e00\u4e2a\u6307\u5b9a\u811a\u672c\u7c7b\u578b\u7684\u4ee3\u7801\u5757\u4e2d\u3002\u7528\u6237\u4e0d\u80fd\u4fee\u6539\u60a8\u7684\u4ee3\u7801\u3002\u56e0\u6b64\u4e0d\u8981\u5efa\u8bae\u9700\u8981\u5176\u4ed6\u4eba\u4fee\u6539\u7684\u4e0d\u5b8c\u6574\u4ee3\u7801\u3002\u5982\u679c\u4ee3\u7801\u5757\u4e0d\u662f\u6253\u7b97\u7531\u6267\u884c\u8005\u8fd0\u884c\u7684\uff0c\u5219\u4e0d\u8981\u4f7f\u7528\u4ee3\u7801\u5757\u3002\n\u4e0d\u8981\u5728\u4e00\u6b21\u54cd\u5e94\u4e2d\u5305\u542b\u591a\u4e2a\u4ee3\u7801\u5757\u3002\u4e0d\u8981\u8981\u6c42\u4ed6\u4eba\u590d\u5236\u5e76\u7c98\u8d34\u7ed3\u679c\u3002\u68c0\u67e5\u6267\u884c\u8005\u8fd4\u56de\u7684\u7ed3\u679c\u3002\n\u5982\u679c\u7ed3\u679c\u663e\u793a\u5b58\u5728\u9519\u8bef\uff0c\u8bf7\u4fee\u590d\u9519\u8bef\u5e76\u518d\u6b21\u8f93\u51fa\u5b8c\u6574\u7684\u4ee3\u7801\u3002\u4ec5\u5efa\u8bae\u5b8c\u6574\u7684\u4ee3\u7801\u800c\u4e0d\u662f\u90e8\u5206\u4ee3\u7801\u6216\u4ee3\u7801\u66f4\u6539\u3002\u5982\u679c\u9519\u8bef\u65e0\u6cd5\u89e3\u51b3\uff0c\u6216\u8005\u5373\u4f7f\u4ee3\u7801\u6210\u529f\u6267\u884c\u4efb\u52a1\u4ecd\u672a\u89e3\u51b3\uff0c\u5219\u5206\u6790\u95ee\u9898\u3001\u91cd\u65b0\u5ba1\u89c6\u5047\u8bbe\u3001\u6536\u96c6\u6240\u9700\u7684\u4fe1\u606f\uff0c\u5e76\u5c1d\u8bd5\u4e0d\u540c\u7684\u65b9\u6cd5\u6765\u5c1d\u8bd5\u3002\n""",\n)\nplanner = AssistantAgent(\n    name="Planner",\n    system_message="""\u89c4\u5212\u8005\u3002\u63d0\u51fa\u8ba1\u5212\u3002\u6839\u636e\u7ba1\u7406\u5458\u548c\u6279\u8bc4\u8005\u7684\u53cd\u9988\u4fee\u8ba2\u8ba1\u5212\uff0c\u76f4\u5230\u83b7\u5f97\u6279\u51c6\u3002\n\u8be5\u8ba1\u5212\u53ef\u80fd\u6d89\u53ca\u4e00\u4e2a\u53ef\u4ee5\u7f16\u5199\u4ee3\u7801\u7684\u5de5\u7a0b\u5e08\u4ee5\u53ca\u4e00\u4e2a\u4e0d\u5199\u4ee3\u7801\u7684\u79d1\u5b66\u5bb6\u3002\n\u9996\u5148\u89e3\u91ca\u8ba1\u5212\u3002\u660e\u786e\u6307\u51fa\u54ea\u4e9b\u6b65\u9aa4\u7531\u5de5\u7a0b\u5e08\u6267\u884c\uff0c\u54ea\u4e9b\u6b65\u9aa4\u7531\u79d1\u5b66\u5bb6\u6267\u884c\u3002\n""",\n    llm_config=llm_config,\n)\nexecutor = UserProxyAgent(\n    name="Executor",\n    system_message="\u6267\u884c\u8005\u3002\u6267\u884c\u5de5\u7a0b\u5e08\u7f16\u5199\u7684\u4ee3\u7801\u5e76\u62a5\u544a\u7ed3\u679c\u3002",\n    human_input_mode="NEVER",\n    llm_config=llm_config,\n    code_execution_config={"last_n_messages": 3, "work_dir": "paper"},\n)\ncritic = AssistantAgent(\n    name="Critic",\n    system_message="\u6279\u8bc4\u8005\u3002\u68c0\u67e5\u5176\u4ed6\u4ee3\u7406\u7684\u8ba1\u5212\u3001\u58f0\u660e\u548c\u4ee3\u7801\uff0c\u5e76\u63d0\u4f9b\u53cd\u9988\u3002\u786e\u4fdd\u8ba1\u5212\u5305\u542b\u6dfb\u52a0\u53ef\u9a8c\u8bc1\u4fe1\u606f\uff0c\u4f8b\u5982\u6765\u6e90 URL\u3002",\n    llm_config=llm_config,\n)\ngroupchat = GroupChat(\n    agents=[admin, engineer, planner, executor, critic],\n    messages=[],\n    max_round=50,\n)\nmanager = GroupChatManager(groupchat=groupchat, llm_config=llm_config)\n\n\nadmin.initiate_chat(\n    manager,\n    message="""\n""",\n)\n'})}),(0,s.jsxs)(n.p,{children:["\u611f\u8c22 ",(0,s.jsx)(n.a,{href:"https://gist.github.com/CUexter",children:"@Nathan"})," \u63d0\u4f9b\u7684\u6559\u7a0b\u3002"]})]}),(0,s.jsxs)(r.A,{value:"chatDev",label:"ChatDev",children:[(0,s.jsxs)(n.h3,{id:"\u8bbe\u7f6e-chatdev-\u6587\u6863",children:["\u8bbe\u7f6e ChatDev (",(0,s.jsx)(n.a,{href:"https://github.com/OpenBMB/ChatDev#%EF%B8%8F-%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8",children:"\u6587\u6863"}),")"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"git clone https://github.com/OpenBMB/ChatDev.git\ncd ChatDev\nconda create -n ChatDev_conda_env python=3.9 -y\nconda activate ChatDev_conda_env\npip install -r requirements.txt\n"})}),(0,s.jsx)(n.h3,{id:"\u4f7f\u7528\u4ee3\u7406\u8fd0\u884c-chatdev",children:"\u4f7f\u7528\u4ee3\u7406\u8fd0\u884c ChatDev"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'export OPENAI_API_KEY="sk-1234"\n'})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'export OPENAI_BASE_URL="http://0.0.0.0:8000"\n'})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'python3 run.py --task "\u4e00\u4e2a\u8f93\u51fa hello world \u7684\u811a\u672c" --name "hello world"\n'})})]}),(0,s.jsxs)(r.A,{value:"langroid",label:"Langroid",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"pip install langroid\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from langroid.language_models.openai_gpt import OpenAIGPTConfig, OpenAIGPT\n\n# \u914d\u7f6e LLM\nmy_llm_config = OpenAIGPTConfig(\n    # \u4ee3\u7406\u670d\u52a1\u5668\u76d1\u542c\u7684\u5730\u5740 \n    api_base="http://0.0.0.0:8000", \n)\n\n# \u521b\u5efa\u4e00\u4e2a LLM\uff0c\u8fdb\u884c\u4e00\u6b21\u4ea4\u4e92\nllm = OpenAIGPT(my_llm_config)\nresponse = mdl.chat("\u4e2d\u56fd\u7684\u9996\u90fd\u662f\u54ea\u91cc\uff1f", max_tokens=50)\n\n# \u7528\u8fd9\u4e2a LLMS \u521b\u5efa\u4e00\u4e2a Agent\uff0c\u5c06\u5176\u5305\u88c5\u5728\u4e00\u4e2a Task \u4e2d\uff0c\u5e76\u4f5c\u4e3a\u4ea4\u4e92\u5f0f\u804a\u5929\u5e94\u7528\u8fd0\u884c\uff1a\nfrom langroid.agent.base import ChatAgent, ChatAgentConfig\nfrom langroid.agent.task import Task\n\nagent_config = ChatAgentConfig(llm=my_llm_config, name="my-llm-agent")\nagent = ChatAgent(agent_config)\n\ntask = Task(agent, name="my-llm-task")\ntask.run() \n'})}),(0,s.jsxs)(n.p,{children:["\u611f\u8c22 ",(0,s.jsx)(n.a,{href:"https://github.com/pchalasani",children:"@pchalasani"})," \u548c ",(0,s.jsx)(n.a,{href:"https://github.com/langroid/langroid",children:"Langroid"})," \u63d0\u4f9b\u7684\u6559\u7a0b\u3002"]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"\u672c\u5730\u4ee3\u7406",children:"\u672c\u5730\u4ee3\u7406"}),"\n",(0,s.jsx)(n.p,{children:"\u8fd9\u662f\u5982\u4f55\u4f7f\u7528\u672c\u5730\u4ee3\u7406\u6d4b\u8bd5 codellama/mistral \u7b49\u6a21\u578b\uff0c\u9002\u7528\u4e8e\u4e0d\u540c\u7684 GitHub \u4ed3\u5e93"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"pip install litellm\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ ollama pull codellama # \u6211\u4eec\u7684\u672c\u5730 CodeLlama  \n\n$ litellm --model ollama/codellama --temperature 0.3 --max_tokens 2048\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528\u6559\u7a0b\u4e0e\u591a\u4e2a-llm--aiderautogenlangroid-\u7b49\u4e00\u8d77\u4f7f\u7528",children:"\u4f7f\u7528\u6559\u7a0b\uff1a\u4e0e\u591a\u4e2a LLM + Aider/AutoGen/Langroid \u7b49\u4e00\u8d77\u4f7f\u7528"}),"\n",(0,s.jsxs)(t.A,{children:[(0,s.jsxs)(r.A,{value:"multiple-LLMs",label:"\u591a\u4e2a\u6a21\u578b",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm\n\n#INFO: LiteLLM \u4ee3\u7406\u6b63\u5728\u8fd0\u884c\u4e8e http://0.0.0.0:8000\n"})}),(0,s.jsx)(n.h4,{id:"\u5411\u60a8\u7684\u4ee3\u7406\u53d1\u9001\u8bf7\u6c42",children:"\u5411\u60a8\u7684\u4ee3\u7406\u53d1\u9001\u8bf7\u6c42"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import openai \n\nopenai.api_key = "\u4efb\u4f55\u5b57\u7b26\u4e32"\nopenai.api_base = "http://0.0.0.0:8080" # \u60a8\u7684\u4ee3\u7406 URL\n\n# \u8c03\u7528 gpt-3.5-turbo\nresponse = openai.ChatCompletion.create(model="gpt-3.5-turbo", messages=[{"role": "user", "content": "Hey"}])\n\nprint(response)\n\n# \u8c03\u7528 ollama/llama2\nresponse = openai.ChatCompletion.create(model="ollama/llama2", messages=[{"role": "user", "content": "Hey"}])\n\nprint(response)\n'})})]}),(0,s.jsxs)(r.A,{value:"continue-dev",label:"ContinueDev",children:[(0,s.jsxs)(n.p,{children:["Continue-Dev \u5c06 ChatGPT \u5e26\u5165 VSCode\u3002\u8bf7\u53c2\u9605 ",(0,s.jsx)(n.a,{href:"https://continue.dev/docs/quickstart",children:"\u8fd9\u91cc"})," \u5982\u4f55\u5b89\u88c5\u3002"]}),(0,s.jsxs)(n.p,{children:["\u5728 ",(0,s.jsx)(n.a,{href:"https://continue.dev/docs/reference/Models/openai",children:"config.py"})," \u4e2d\u8bbe\u7f6e\u6b64\u4e3a\u9ed8\u8ba4\u6a21\u578b\u3002"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'  default=OpenAI(\n      api_key="IGNORED",\n      model="fake-model-name",\n      context_length=2048, # \u6839\u636e\u60a8\u7684\u6a21\u578b\u9700\u8981\u81ea\u5b9a\u4e49\n      api_base="http://localhost:8000" # \u60a8\u7684\u4ee3\u7406\u670d\u52a1\u5668 URL\n  ),\n'})}),(0,s.jsxs)(n.p,{children:["\u611f\u8c22 ",(0,s.jsx)(n.a,{href:"https://github.com/ollama/ollama/issues/305#issuecomment-1751848077",children:"@vividfog"})," \u63d0\u4f9b\u7684\u6559\u7a0b\u3002"]})]}),(0,s.jsx)(r.A,{value:"aider",label:"Aider",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ pip install aider \n\n$ aider --openai-api-base http://0.0.0.0:8000 --openai-api-key fake-key\n"})})}),(0,s.jsxs)(r.A,{value:"autogen",label:"AutoGen",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"pip install pyautogen\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from autogen import AssistantAgent, UserProxyAgent, oai\nconfig_list=[\n    {\n        "model": "\u6211\u7684\u5047\u6a21\u578b",\n        "api_base": "http://localhost:8000",  # \u517c\u5bb9 LiteLLM \u7684\u7aef\u70b9\n        "api_type": "open_ai",\n        "api_key": "NULL", # \u53ea\u662f\u4e00\u4e2a\u5360\u4f4d\u7b26\n    }\n]\n\nresponse = oai.Completion.create(config_list=config_list, prompt="Hi")\nprint(response) # \u64cd\u4f5c\u6210\u529f\n\nllm_config={\n    "config_list": config_list,\n}\n\nassistant = AssistantAgent("assistant", llm_config=llm_config)\nuser_proxy = UserProxyAgent("user_proxy")\nuser_proxy.initiate_chat(assistant, message="Plot a chart of META and TESLA stock price change YTD.", config_list=config_list)\n'})}),(0,s.jsxs)(n.p,{children:["\u611f\u8c22 ",(0,s.jsx)(n.a,{href:"https://github.com/microsoft/autogen/issues/45#issuecomment-1749921972",children:"@victordibia"})," \u63d0\u4f9b\u7684\u6559\u7a0b\u3002"]})]}),(0,s.jsxs)(r.A,{value:"multi-LLM AutoGen",label:"AutoGen \u591a\u6a21\u578b",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from autogen import AssistantAgent, GroupChatManager, UserProxyAgent\nfrom autogen.agentchat import GroupChat\nconfig_list = [\n    {\n        "model": "ollama/mistralorca",\n        "api_base": "http://localhost:8000",  # \u517c\u5bb9 LiteLLM \u7684\u7aef\u70b9\n        "api_type": "open_ai",\n        "api_key": "NULL",  # \u53ea\u662f\u4e00\u4e2a\u5360\u4f4d\u7b26\n    }\n]\nllm_config = {"config_list": config_list, "seed": 42}\n\ncode_config_list = [\n    {\n        "model": "ollama/phind-code",\n        "api_base": "http://localhost:8000",  # \u517c\u5bb9 LiteLLM \u7684\u7aef\u70b9\n        "api_type": "open_ai",\n        "api_key": "NULL",  # \u53ea\u662f\u4e00\u4e2a\u5360\u4f4d\u7b26\n    }\n]\n\ncode_config = {"config_list": code_config_list, "seed": 42}\n\nadmin = UserProxyAgent(\n    name="Admin",\n    system_message="\u4eba\u7c7b\u7ba1\u7406\u5458\u3002\u4e0e\u89c4\u5212\u8005\u8ba8\u8bba\u8ba1\u5212\uff0c\u6267\u884c\u9700\u8981\u5f97\u5230\u6b64\u7ba1\u7406\u5458\u7684\u6279\u51c6\u3002",\n    llm_config=llm_config,\n    code_execution_config=False,\n)\n\n\nengineer = AssistantAgent(\n    name="Engineer",\n    llm_config=code_config,\n    system_message="""\u5de5\u7a0b\u5e08\u3002\u60a8\u9075\u5faa\u5df2\u6279\u51c6\u7684\u8ba1\u5212\u3002\u60a8\u7f16\u5199 Python \u6216 shell \u4ee3\u7801\u6765\u89e3\u51b3\u95ee\u9898\u3002\u5c06\u4ee3\u7801\u5c01\u88c5\u5728\u4e00\u4e2a\u6307\u5b9a\u811a\u672c\u7c7b\u578b\u7684\u4ee3\u7801\u5757\u4e2d\u3002\u7528\u6237\u4e0d\u80fd\u4fee\u6539\u60a8\u7684\u4ee3\u7801\u3002\u56e0\u6b64\u4e0d\u8981\u5efa\u8bae\u9700\u8981\u5176\u4ed6\u4eba\u4fee\u6539\u7684\u4e0d\u5b8c\u6574\u4ee3\u7801\u3002\u5982\u679c\u4ee3\u7801\u5757\u4e0d\u662f\u6253\u7b97\u7531\u6267\u884c\u8005\u8fd0\u884c\u7684\uff0c\u5219\u4e0d\u8981\u4f7f\u7528\u4ee3\u7801\u5757\u3002\n\u4e0d\u8981\u5728\u4e00\u6b21\u54cd\u5e94\u4e2d\u5305\u542b\u591a\u4e2a\u4ee3\u7801\u5757\u3002\u4e0d\u8981\u8981\u6c42\u4ed6\u4eba\u590d\u5236\u5e76\u7c98\u8d34\u7ed3\u679c\u3002\u68c0\u67e5\u6267\u884c\u8005\u8fd4\u56de\u7684\u7ed3\u679c\u3002\n\u5982\u679c\u7ed3\u679c\u663e\u793a\u5b58\u5728\u9519\u8bef\uff0c\u8bf7\u4fee\u590d\u9519\u8bef\u5e76\u518d\u6b21\u8f93\u51fa\u5b8c\u6574\u7684\u4ee3\u7801\u3002\u4ec5\u5efa\u8bae\u5b8c\u6574\u7684\u4ee3\u7801\u800c\u4e0d\u662f\u90e8\u5206\u4ee3\u7801\u6216\u4ee3\u7801\u66f4\u6539\u3002\u5982\u679c\u9519\u8bef\u65e0\u6cd5\u89e3\u51b3\uff0c\u6216\u8005\u5373\u4f7f\u4ee3\u7801\u6210\u529f\u6267\u884c\u4efb\u52a1\u4ecd\u672a\u89e3\u51b3\uff0c\u5219\u5206\u6790\u95ee\u9898\u3001\u91cd\u65b0\u5ba1\u89c6\u5047\u8bbe\u3001\u6536\u96c6\u6240\u9700\u7684\u4fe1\u606f\uff0c\u5e76\u5c1d\u8bd5\u4e0d\u540c\u7684\u65b9\u6cd5\u6765\u5c1d\u8bd5\u3002\n""",\n)\nplanner = AssistantAgent(\n    name="Planner",\n    system_message="""\u89c4\u5212\u8005\u3002\u63d0\u51fa\u8ba1\u5212\u3002\u6839\u636e\u7ba1\u7406\u5458\u548c\u6279\u8bc4\u8005\u7684\u53cd\u9988\u4fee\u8ba2\u8ba1\u5212\uff0c\u76f4\u5230\u83b7\u5f97\u6279\u51c6\u3002\n\u8be5\u8ba1\u5212\u53ef\u80fd\u6d89\u53ca\u4e00\u4e2a\u53ef\u4ee5\u7f16\u5199\u4ee3\u7801\u7684\u5de5\u7a0b\u5e08\u4ee5\u53ca\u4e00\u4e2a\u4e0d\u5199\u4ee3\u7801\u7684\u79d1\u5b66\u5bb6\u3002\n\u9996\u5148\u89e3\u91ca\u8ba1\u5212\u3002\u660e\u786e\u6307\u51fa\u54ea\u4e9b\u6b65\u9aa4\u7531\u5de5\u7a0b\u5e08\u6267\u884c\uff0c\u54ea\u4e9b\u6b65\u9aa4\u7531\u79d1\u5b66\u5bb6\u6267\u884c\u3002\n""",\n    llm_config=llm_config,\n)\nexecutor = UserProxyAgent(\n    name="Executor",\n    system_message="\u6267\u884c\u8005\u3002\u6267\u884c\u5de5\u7a0b\u5e08\u7f16\u5199\u7684\u4ee3\u7801\u5e76\u62a5\u544a\u7ed3\u679c\u3002",\n    human_input_mode="NEVER",\n    llm_config=llm_config,\n    code_execution_config={"last_n_messages": 3, "work_dir": "paper"},\n)\ncritic = AssistantAgent(\n    name="Critic",\n    system_message="\u6279\u8bc4\u8005\u3002\u68c0\u67e5\u5176\u4ed6\u4ee3\u7406\u7684\u8ba1\u5212\u3001\u58f0\u660e\u548c\u4ee3\u7801\uff0c\u5e76\u63d0\u4f9b\u53cd\u9988\u3002\u786e\u4fdd\u8ba1\u5212\u5305\u542b\u6dfb\u52a0\u53ef\u9a8c\u8bc1\u4fe1\u606f\uff0c\u4f8b\u5982\u6765\u6e90 URL\u3002",\n    llm_config=llm_config,\n)\ngroupchat = GroupChat(\n    agents=[admin, engineer, planner, executor, critic],\n    messages=[],\n    max_round=50,\n)\nmanager = GroupChatManager(groupchat=groupchat, llm_config=llm_config)\n\n\nadmin.initiate_chat(\n    manager,\n    message="""\n""",\n)\n'})}),(0,s.jsxs)(n.p,{children:["\u611f\u8c22 ",(0,s.jsx)(n.a,{href:"https://gist.github.com/CUexter",children:"@Nathan"})," \u63d0\u4f9b\u7684\u6559\u7a0b\u3002"]})]}),(0,s.jsxs)(r.A,{value:"chatDev",label:"ChatDev",children:[(0,s.jsxs)(n.h3,{id:"\u8bbe\u7f6e-chatdev-\u6587\u6863-1",children:["\u8bbe\u7f6e ChatDev (",(0,s.jsx)(n.a,{href:"https://github.com/OpenBMB/ChatDev#%EF%B8%8F-%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8",children:"\u6587\u6863"}),")"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"git clone https://github.com/OpenBMB/ChatDev.git\ncd ChatDev\nconda create -n ChatDev_conda_env python=3.9 -y\nconda activate ChatDev_conda_env\npip install -r requirements.txt\n"})}),(0,s.jsx)(n.h3,{id:"\u4f7f\u7528\u4ee3\u7406\u8fd0\u884c-chatdev-1",children:"\u4f7f\u7528\u4ee3\u7406\u8fd0\u884c ChatDev"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'export OPENAI_API_KEY="sk-1234"\n'})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'export OPENAI_BASE_URL="http://0.0.0.0:8000"\n'})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'python3 run.py --task "\u4e00\u4e2a\u8f93\u51fa hello world \u7684\u811a\u672c" --name "hello world"\n'})})]}),(0,s.jsxs)(r.A,{value:"langroid",label:"Langroid",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"pip install langroid\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from langroid.language_models.openai_gpt import OpenAIGPTConfig, OpenAIGPT\n\n# \u914d\u7f6e LLM\nmy_llm_config = OpenAIGPTConfig(\n    # \u683c\u5f0f: "local/[\u4ee3\u7406\u670d\u52a1\u5668\u76d1\u542c\u7684 URL]\n    chat_model="local/localhost:8000", \n    chat_context_length=2048,  # \u6839\u636e\u6a21\u578b\u8c03\u6574\n)\n\n# \u521b\u5efa\u4e00\u4e2a LLM\uff0c\u8fdb\u884c\u4e00\u6b21\u4ea4\u4e92\nllm = OpenAIGPT(my_llm_config)\nresponse = mdl.chat("\u4e2d\u56fd\u7684\u9996\u90fd\u662f\u54ea\u91cc\uff1f", max_tokens=50)\n\n# \u7528\u8fd9\u4e2a LLMS \u521b\u5efa\u4e00\u4e2a Agent\uff0c\u5c06\u5176\u5305\u88c5\u5728\u4e00\u4e2a Task \u4e2d\uff0c\u5e76\u4f5c\u4e3a\u4ea4\u4e92\u5f0f\u804a\u5929\u5e94\u7528\u8fd0\u884c\uff1a\nfrom langroid.agent.base import ChatAgent, ChatAgentConfig\nfrom langroid.agent.task import Task\n\nagent_config = ChatAgentConfig(llm=my_llm_config, name="my-llm-agent")\nagent = ChatAgent(agent_config)\n\ntask = Task(agent, name="my-llm-task")\ntask.run() \n'})}),(0,s.jsxs)(n.p,{children:["\u611f\u8c22 ",(0,s.jsx)(n.a,{href:"https://github.com/pchalasani",children:"@pchalasani"})," \u548c ",(0,s.jsx)(n.a,{href:"https://github.com/langroid/langroid",children:"Langroid"})," \u63d0\u4f9b\u7684\u6559\u7a0b\u3002"]})]}),(0,s.jsxs)(r.A,{value:"gpt-pilot",label:"GPT-Pilot",children:[(0,s.jsxs)(n.p,{children:["GPT-Pilot \u5e2e\u52a9\u60a8\u6784\u5efa\u5e26\u6709 AI \u4ee3\u7406\u7684\u5e94\u7528\u7a0b\u5e8f\u3002",(0,s.jsx)(n.a,{href:"https://github.com/Pythagora-io/gpt-pilot",children:"\u4e86\u89e3\u66f4\u591a"})]}),(0,s.jsx)(n.p,{children:"\u5728 .env \u4e2d\u8bbe\u7f6e openai \u7aef\u70b9\u4e3a\u672c\u5730\u670d\u52a1\u5668\u3002"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"OPENAI_ENDPOINT=http://0.0.0.0:8000\nOPENAI_API_KEY=my-fake-key\n"})})]}),(0,s.jsxs)(r.A,{value:"guidance",label:"Guidance",children:[(0,s.jsxs)(n.p,{children:["\u4e00\u79cd\u63a7\u5236\u5927\u578b\u8bed\u8a00\u6a21\u578b\u7684\u8bed\u8a00\u3002\n",(0,s.jsx)(n.a,{href:"https://github.com/guidance-ai/guidance",children:"https://github.com/guidance-ai/guidance"})]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u6ce8\u610f\uff1a"})," Guidance \u53d1\u9001\u989d\u5916\u7684\u53c2\u6570\u5982 ",(0,s.jsx)(n.code,{children:"stop_sequences"}),"\uff0c\u5982\u679c\u67d0\u4e9b\u6a21\u578b\u4e0d\u652f\u6301\u8fd9\u4e9b\u53c2\u6570\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5931\u8d25\u3002"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6cd5\uff1a"})," \u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"--drop_params"})," \u6807\u5fd7\u542f\u52a8\u60a8\u7684\u4ee3\u7406"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"litellm --model ollama/codellama --temperature 0.3 --max_tokens 2048 --drop_params\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import guidance\n\n# \u8bbe\u7f6e api_base \u5230\u60a8\u7684\u4ee3\u7406\n# \u8bbe\u7f6e api_key \u4e3a\u4efb\u4f55\u503c\ngpt4 = guidance.llms.OpenAI(\"gpt-4\", api_base=\"http://0.0.0.0:8000\", api_key=\"anything\")\n\nexperts = guidance('''\n{{#system~}}\n\u60a8\u662f\u4e00\u4e2a\u4e50\u4e8e\u52a9\u4eba\u4e14\u7b80\u6d01\u7684\u52a9\u624b\u3002\n{{~/system}}\n\n{{#user~}}\n\u6211\u60f3\u5bf9\u4ee5\u4e0b\u95ee\u9898\u505a\u51fa\u56de\u5e94\uff1a\n{{query}}\n\u5217\u51fa\u4e09\u4f4d\u4e16\u754c\u9876\u7ea7\u4e13\u5bb6\uff08\u8fc7\u53bb\u6216\u73b0\u5728\uff09\u6765\u56de\u7b54\u8fd9\u4e2a\u95ee\u9898\uff1f\n\u4e0d\u8981\u76f4\u63a5\u56de\u7b54\u95ee\u9898\u3002\n{{~/user}}\n\n{{#assistant~}}\n{{gen 'expert_names' temperature=0 max_tokens=300}}\n{{~/assistant}}\n''', llm=gpt4)\n\nresult = experts(query='\u6211\u5982\u4f55\u63d0\u9ad8\u5de5\u4f5c\u6548\u7387\uff1f')\nprint(result)\n"})})]})]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u8d21\u732e"})," \u60a8\u6b63\u5728\u4f7f\u7528\u6b64\u670d\u52a1\u5668\u4e0e\u67d0\u4e2a\u9879\u76ee\u5408\u4f5c\u5417\uff1f\u8bf7\u5728\u6b64 ",(0,s.jsx)(n.a,{href:"https://github.com/BerriAI/litellm",children:"\u8d21\u732e\u60a8\u7684\u6559\u7a0b"}),"\u3002"]})}),"\n",(0,s.jsx)(n.h2,{id:"\u9ad8\u7ea7\u529f\u80fd",children:"\u9ad8\u7ea7\u529f\u80fd"}),"\n",(0,s.jsx)(n.h3,{id:"\u65e5\u5fd7\u8bb0\u5f55",children:"\u65e5\u5fd7\u8bb0\u5f55"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --logs\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u8fd9\u5c06\u8fd4\u56de\u6700\u8fd1\u7684\u65e5\u5fd7\uff08\u8c03\u7528 LLM API \u7684\u8bf7\u6c42 + \u6536\u5230\u7684\u54cd\u5e94\uff09\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u6240\u6709\u65e5\u5fd7\u90fd\u4fdd\u5b58\u5728\u4e00\u4e2a\u540d\u4e3a ",(0,s.jsx)(n.code,{children:"api_logs.json"})," \u7684\u6587\u4ef6\u4e2d\uff0c\u4f4d\u4e8e\u5f53\u524d\u76ee\u5f55\u4e0b\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u4ee3\u7406",children:"\u914d\u7f6e\u4ee3\u7406"}),"\n",(0,s.jsx)(n.p,{children:"\u5982\u679c\u60a8\u9700\u8981\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4fdd\u5b58 API \u5bc6\u94a5"}),"\n",(0,s.jsx)(n.li,{children:"\u8bbe\u7f6e LiteLLM \u53c2\u6570\uff08\u4f8b\u5982\uff1a\u4e22\u5f03\u672a\u6620\u5c04\u53c2\u6570\u3001\u8bbe\u7f6e\u5907\u7528\u6a21\u578b\u7b49\uff09"}),"\n",(0,s.jsx)(n.li,{children:"\u8bbe\u7f6e\u7279\u5b9a\u4e8e\u6a21\u578b\u7684\u53c2\u6570\uff08\u6700\u5927\u4ee4\u724c\u6570\u3001\u6e29\u5ea6\u3001API \u57fa\u7840 URL\u3001\u63d0\u793a\u6a21\u677f\uff09"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u60a8\u53ef\u4ee5\u5728\u4f1a\u8bdd\u4e2d\u8bbe\u7f6e\u8fd9\u4e9b\u53c2\u6570\uff08\u901a\u8fc7\u547d\u4ee4\u884c\uff09\uff0c\u6216\u8005\u5728\u91cd\u542f\u65f6\u6301\u4e45\u5316\u8fd9\u4e9b\u8bbe\u7f6e\uff08\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\uff09\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"\u4fdd\u5b58-api-\u5bc6\u94a5",children:"\u4fdd\u5b58 API \u5bc6\u94a5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --api_key OPENAI_API_KEY=sk-...\n"})}),"\n",(0,s.jsx)(n.p,{children:"LiteLLM \u5c06\u5c06\u6b64\u4fe1\u606f\u5b58\u50a8\u5728\u4e00\u4e2a\u672c\u5730\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u5e76\u5728\u4f1a\u8bdd\u4e4b\u95f4\u4fdd\u6301\u4e00\u81f4\u3002"}),"\n",(0,s.jsx)(n.p,{children:"LiteLLM \u4ee3\u7406\u652f\u6301\u6240\u6709 LiteLLM \u652f\u6301\u7684 API \u5bc6\u94a5\u3002\u8981\u4e3a\u7279\u5b9a\u63d0\u4f9b\u8005\u6dfb\u52a0\u5bc6\u94a5\uff0c\u8bf7\u53c2\u9605\u4ee5\u4e0b\u5217\u8868\uff1a"}),"\n",(0,s.jsxs)(t.A,{children:[(0,s.jsx)(r.A,{value:"huggingface",label:"Huggingface",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --add_key HUGGINGFACE_API_KEY=my-api-key #[\u53ef\u9009]\n"})})}),(0,s.jsx)(r.A,{value:"anthropic",label:"Anthropic",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --add_key ANTHROPIC_API_KEY=my-api-key\n"})})}),(0,s.jsx)(r.A,{value:"perplexity",label:"PerplexityAI",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --add_key PERPLEXITYAI_API_KEY=my-api-key\n"})})}),(0,s.jsx)(r.A,{value:"together_ai",label:"TogetherAI",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --add_key TOGETHERAI_API_KEY=my-api-key\n"})})}),(0,s.jsx)(r.A,{value:"replicate",label:"Replicate",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --add_key REPLICATE_API_KEY=my-api-key\n"})})}),(0,s.jsx)(r.A,{value:"bedrock",label:"Bedrock",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --add_key AWS_ACCESS_KEY_ID=my-key-id\n$ litellm --add_key AWS_SECRET_ACCESS_KEY=my-secret-access-key\n"})})}),(0,s.jsx)(r.A,{value:"palm",label:"Palm",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --add_key PALM_API_KEY=my-palm-key\n"})})}),(0,s.jsx)(r.A,{value:"azure",label:"Azure OpenAI",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --add_key AZURE_API_KEY=my-api-key\n$ litellm --add_key AZURE_API_BASE=my-api-base\n\n"})})}),(0,s.jsx)(r.A,{value:"ai21",label:"AI21",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --add_key AI21_API_KEY=my-api-key\n"})})}),(0,s.jsx)(r.A,{value:"cohere",label:"Cohere",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ litellm --add_key COHERE_API_KEY=my-api-key\n"})})})]}),"\n",(0,s.jsx)(n.p,{children:"\u4f8b\u5982\uff1a\u8bbe\u7f6e API \u57fa\u7840 URL\u3001\u6700\u5927\u4ee4\u724c\u6570\u548c\u6e29\u5ea6\u3002"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u5bf9\u4e8e\u5f53\u524d\u4f1a\u8bdd"}),"\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"litellm --model ollama/llama2 \\\n  --api_base http://localhost:11434 \\\n  --max_tokens 250 \\\n  --temperature 0.5\n\n# \u517c\u5bb9 OpenAI \u7684\u670d\u52a1\u5668\u6b63\u5728\u8fd0\u884c\u4e8e http://0.0.0.0:8000\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u6027\u80fd\u6d4b\u8bd5",children:"\u6027\u80fd\u6d4b\u8bd5"}),"\n",(0,s.jsxs)(n.p,{children:["\u6211\u4eec\u4f7f\u7528 ",(0,s.jsx)(n.a,{href:"https://github.com/wg/wrk",children:"wrk"})," \u5bf9 FastAPI \u670d\u52a1\u5668\u8fdb\u884c\u4e86\u8d1f\u8f7d\u6d4b\u8bd5\uff0c\u6a21\u62df\u4e86 500,000 \u6b21 HTTP \u8fde\u63a5\uff0c\u5728\u4e00\u5206\u949f\u5185\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f\u6211\u4eec\u7684\u7ed3\u679c\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"\u7ebf\u7a0b\u7edf\u8ba1   \u5e73\u5747      \u504f\u5dee     \u6700\u5927   +/- \u504f\u5dee\n    \u5ef6\u8fdf   156.38ms   25.52ms 361.91ms   84.73%\n    \u6bcf\u79d2\u8bf7\u6c42\u6570    13.61      5.13    40.00     57.50%\n  383,625 \u8bf7\u6c42\u5728 1.00 \u5206\u949f\u5185\uff0c\u8bfb\u53d6\u4e86 391.10MB\n  Socket \u9519\u8bef\uff1a\u8fde\u63a5 0\uff0c\u8bfb\u53d6 1632 \u6b21\uff0c\u5199\u5165 1 \u6b21\uff0c\u8d85\u65f6 0 \u6b21\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u652f\u6301\u4e0e\u521b\u59cb\u4eba\u4ea4\u8c08",children:"\u652f\u6301/\u4e0e\u521b\u59cb\u4eba\u4ea4\u8c08"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://calendly.com/d/4mp-gd3-k5k/berriai-1-1-onboarding-litellm-hosted-version",children:"\u9884\u7ea6\u6f14\u793a \ud83d\udc4b"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://discord.gg/wuPM9dRgDw",children:"\u793e\u533a Discord \ud83d\udcad"})}),"\n",(0,s.jsx)(n.li,{children:"\u6211\u4eec\u7684\u7535\u8bdd\u53f7\u7801 \ud83d\udcde +1 (770) 8783-106 / \u202d+1 (412) 618-6238\u202c"}),"\n",(0,s.jsxs)(n.li,{children:["\u6211\u4eec\u7684\u7535\u5b50\u90ae\u4ef6 \u2709\ufe0f ",(0,s.jsx)(n.a,{href:"mailto:ishaan@berri.ai",children:"ishaan@berri.ai"})," / ",(0,s.jsx)(n.a,{href:"mailto:krrish@berri.ai",children:"krrish@berri.ai"})]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{})})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},28453(e,n,l){l.d(n,{R:()=>t,x:()=>r});var a=l(96540);const s={},i=a.createContext(s);function t(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),a.createElement(i.Provider,{value:n},e.children)}},49489(e,n,l){l.d(n,{A:()=>b});var a=l(96540),s=l(18215),i=l(24245),t=l(56347),r=l(36494),c=l(62814),o=l(45167),d=l(69900);function h(e){return a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:l}=e;return(0,a.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:l,default:a}})=>({value:e,label:n,attributes:l,default:a}))}(l);return function(e){const n=(0,o.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,l])}function m({value:e,tabValues:n}){return n.some(n=>n.value===e)}function u({queryString:e=!1,groupId:n}){const l=(0,t.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(s),(0,a.useCallback)(e=>{if(!s)return;const n=new URLSearchParams(l.location.search);n.set(s,e),l.replace({...l.location,search:n.toString()})},[s,l])]}function g(e){const{defaultValue:n,queryString:l=!1,groupId:s}=e,i=p(e),[t,c]=(0,a.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const l=n.find(e=>e.default)??n[0];if(!l)throw new Error("Unexpected error: 0 tabValues");return l.value}({defaultValue:n,tabValues:i})),[o,h]=u({queryString:l,groupId:s}),[g,x]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[l,s]=(0,d.Dv)(n);return[l,(0,a.useCallback)(e=>{n&&s.set(e)},[n,s])]}({groupId:s}),j=(()=>{const e=o??g;return m({value:e,tabValues:i})?e:null})();(0,r.A)(()=>{j&&c(j)},[j]);return{selectedValue:t,selectValue:(0,a.useCallback)(e=>{if(!m({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);c(e),h(e),x(e)},[h,x,i]),tabValues:i}}var x=l(11062);const j="tabList__CuJ",_="tabItem_LNqP";var A=l(74848);function f({className:e,block:n,selectedValue:l,selectValue:a,tabValues:t}){const r=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.a_)(),o=e=>{const n=e.currentTarget,s=r.indexOf(n),i=t[s].value;i!==l&&(c(n),a(i))},d=e=>{let n=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const l=r.indexOf(e.currentTarget)+1;n=r[l]??r[0];break}case"ArrowLeft":{const l=r.indexOf(e.currentTarget)-1;n=r[l]??r[r.length-1];break}}n?.focus()};return(0,A.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:t.map(({value:e,label:n,attributes:a})=>(0,A.jsx)("li",{role:"tab",tabIndex:l===e?0:-1,"aria-selected":l===e,ref:e=>{r.push(e)},onKeyDown:d,onClick:o,...a,className:(0,s.A)("tabs__item",_,a?.className,{"tabs__item--active":l===e}),children:n??e},e))})}function v({lazy:e,children:n,selectedValue:l}){const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=i.find(e=>e.props.value===l);return e?(0,a.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,A.jsx)("div",{className:"margin-top--md",children:i.map((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==l}))})}function y(e){const n=g(e);return(0,A.jsxs)("div",{className:(0,s.A)("tabs-container",j),children:[(0,A.jsx)(f,{...n,...e}),(0,A.jsx)(v,{...n,...e})]})}function b(e){const n=(0,x.A)();return(0,A.jsx)(y,{...e,children:h(e.children)},String(n))}}}]);