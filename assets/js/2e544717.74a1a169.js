"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[51628],{28453(e,n,l){l.d(n,{R:()=>t,x:()=>o});var r=l(96540);const s={},i=r.createContext(s);function t(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(i.Provider,{value:n},e.children)}},69699(e,n,l){l.r(n),l.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>t,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"rules","title":"\u89c4\u5219","description":"\u4f7f\u7528\u6b64\u529f\u80fd\u6839\u636e llm api \u8c03\u7528\u7684\u8f93\u5165\u6216\u8f93\u51fa\u6765\u5931\u8d25\u8bf7\u6c42\u3002","source":"@site/docs/rules.md","sourceDirName":".","slug":"/rules","permalink":"/docs/rules","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u4ee3\u7801\u8d28\u91cf","permalink":"/docs/extras/code_quality"},"next":{"title":"[\u5df2\u5f03\u7528] \u56e2\u961f\u57fa\u7840\u8def\u7531","permalink":"/docs/proxy/team_based_routing"}}');var s=l(74848),i=l(28453);const t={},o="\u89c4\u5219",c={},u=[{value:"\u53ef\u7528\u7aef\u70b9",id:"\u53ef\u7528\u7aef\u70b9",level:2},{value:"\u89c4\u5219\u7684\u9884\u671f\u683c\u5f0f",id:"\u89c4\u5219\u7684\u9884\u671f\u683c\u5f0f",level:2},{value:"\u8f93\u5165",id:"\u8f93\u5165",level:4},{value:"\u8f93\u51fa",id:"\u8f93\u51fa",level:4},{value:"\u793a\u4f8b\u89c4\u5219",id:"\u793a\u4f8b\u89c4\u5219",level:2},{value:"\u793a\u4f8b 1\uff1a\u5982\u679c\u7528\u6237\u8f93\u5165\u592a\u957f\u5219\u5931\u8d25",id:"\u793a\u4f8b-1\u5982\u679c\u7528\u6237\u8f93\u5165\u592a\u957f\u5219\u5931\u8d25",level:3},{value:"\u793a\u4f8b 2\uff1a\u5982\u679c llm \u62d2\u7edd\u56de\u7b54\uff0c\u5219\u56de\u9000\u5230\u672a\u5ba1\u67e5\u6a21\u578b",id:"\u793a\u4f8b-2\u5982\u679c-llm-\u62d2\u7edd\u56de\u7b54\u5219\u56de\u9000\u5230\u672a\u5ba1\u67e5\u6a21\u578b",level:3}];function a(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u89c4\u5219",children:"\u89c4\u5219"})}),"\n",(0,s.jsx)(n.p,{children:"\u4f7f\u7528\u6b64\u529f\u80fd\u6839\u636e llm api \u8c03\u7528\u7684\u8f93\u5165\u6216\u8f93\u51fa\u6765\u5931\u8d25\u8bf7\u6c42\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import litellm \nimport os \n\n# \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf \nos.environ["OPENAI_API_KEY"] = "your-api-key"\nos.environ["OPENROUTER_API_KEY"] = "your-api-key"\n\ndef my_custom_rule(input): # \u63a5\u6536\u6a21\u578b\u54cd\u5e94 \n    if "i don\'t think i can answer" in input: # \u89e6\u53d1\u56de\u9000\uff0c\u5982\u679c\u6a21\u578b\u62d2\u7edd\u56de\u7b54 \n        return False \n    return True \n\nlitellm.post_call_rules = [my_custom_rule] # \u8fd9\u4e9b\u662f\u53ef\u4ee5\u5728\u8c03\u7528\u524d\u88ab\u8c03\u7528\u7684\u51fd\u6570\n\nresponse = litellm.completion(model="gpt-3.5-turbo", messages=[{"role": "user", \n"content": "Hey, how\'s it going?"}], fallbacks=["openrouter/gryphe/mythomax-l2-13b"])\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u53ef\u7528\u7aef\u70b9",children:"\u53ef\u7528\u7aef\u70b9"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"litellm.pre_call_rules = []"})," - \u5728\u8c03\u7528 api \u4e4b\u524d\u8fed\u4ee3\u7684\u4e00\u7cfb\u5217\u51fd\u6570\u3002\u6bcf\u4e2a\u51fd\u6570\u9884\u671f\u8fd4\u56de True\uff08\u5141\u8bb8\u8c03\u7528\uff09\u6216 False\uff08\u5931\u8d25\u8c03\u7528\uff09\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"litellm.post_call_rules = []"})," - \u5728\u8c03\u7528 api \u4e4b\u524d\u8fed\u4ee3\u7684\u4e00\u7cfb\u5217\u51fd\u6570\u3002\u6bcf\u4e2a\u51fd\u6570\u9884\u671f\u8fd4\u56de True\uff08\u5141\u8bb8\u8c03\u7528\uff09\u6216 False\uff08\u5931\u8d25\u8c03\u7528\uff09\u3002"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u89c4\u5219\u7684\u9884\u671f\u683c\u5f0f",children:"\u89c4\u5219\u7684\u9884\u671f\u683c\u5f0f"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'def my_custom_rule(input: str) -> bool: # \u63a5\u6536\u6a21\u578b\u54cd\u5e94 \n    if "i don\'t think i can answer" in input: # \u89e6\u53d1\u56de\u9000\uff0c\u5982\u679c\u6a21\u578b\u62d2\u7edd\u56de\u7b54 \n        return False \n    return True \n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u8f93\u5165",children:"\u8f93\u5165"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"input"}),": ",(0,s.jsx)(n.em,{children:"str"}),": \u7528\u6237\u8f93\u5165\u6216 llm \u54cd\u5e94\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u8f93\u51fa",children:"\u8f93\u51fa"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"bool"}),": \u8fd4\u56de True\uff08\u5141\u8bb8\u8c03\u7528\uff09\u6216 False\uff08\u5931\u8d25\u8c03\u7528\uff09"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u793a\u4f8b\u89c4\u5219",children:"\u793a\u4f8b\u89c4\u5219"}),"\n",(0,s.jsx)(n.h3,{id:"\u793a\u4f8b-1\u5982\u679c\u7528\u6237\u8f93\u5165\u592a\u957f\u5219\u5931\u8d25",children:"\u793a\u4f8b 1\uff1a\u5982\u679c\u7528\u6237\u8f93\u5165\u592a\u957f\u5219\u5931\u8d25"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import litellm \nimport os \n\n# \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf \nos.environ["OPENAI_API_KEY"] = "your-api-key"\n\ndef my_custom_rule(input): # \u63a5\u6536\u6a21\u578b\u54cd\u5e94 \n    if len(input) > 10: # \u5982\u679c\u592a\u957f\uff0c\u5219\u5931\u8d25\u8c03\u7528\n        return False \n    return True \n\nlitellm.pre_call_rules = [my_custom_rule] # \u8fd9\u4e9b\u662f\u53ef\u4ee5\u5728\u8c03\u7528\u524d\u88ab\u8c03\u7528\u7684\u51fd\u6570\n\nresponse = litellm.completion(model="gpt-3.5-turbo", messages=[{"role": "user", "content": "Hey, how\'s it going?"}])\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u793a\u4f8b-2\u5982\u679c-llm-\u62d2\u7edd\u56de\u7b54\u5219\u56de\u9000\u5230\u672a\u5ba1\u67e5\u6a21\u578b",children:"\u793a\u4f8b 2\uff1a\u5982\u679c llm \u62d2\u7edd\u56de\u7b54\uff0c\u5219\u56de\u9000\u5230\u672a\u5ba1\u67e5\u6a21\u578b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import litellm \nimport os \n\n# \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf \nos.environ["OPENAI_API_KEY"] = "your-api-key"\nos.environ["OPENROUTER_API_KEY"] = "your-api-key"\n\ndef my_custom_rule(input): # \u63a5\u6536\u6a21\u578b\u54cd\u5e94 \n    if "i don\'t think i can answer" in input: # \u89e6\u53d1\u56de\u9000\uff0c\u5982\u679c\u6a21\u578b\u62d2\u7edd\u56de\u7b54 \n        return False \n    return True \n\nlitellm.post_call_rules = [my_custom_rule] # \u8fd9\u4e9b\u662f\u53ef\u4ee5\u5728\u8c03\u7528\u540e\u88ab\u8c03\u7528\u7684\u51fd\u6570\n\nresponse = litellm.completion(model="gpt-3.5-turbo", messages=[{"role": "user", \n"content": "Hey, how\'s it going?"}], fallbacks=["openrouter/gryphe/mythomax-l2-13b"])\n'})})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);