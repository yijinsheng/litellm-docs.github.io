"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[6932],{7227(e,n,l){l.d(n,{A:()=>d});l(96540);var i=l(18215);const t="tabItem_Ymn6";var r=l(74848);function d({children:e,hidden:n,className:l}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,i.A)(t,l),hidden:n,children:e})}},49489(e,n,l){l.d(n,{A:()=>A});var i=l(96540),t=l(18215),r=l(24245),d=l(56347),s=l(36494),a=l(62814),o=l(45167),c=l(69900);function m(e){return i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:l}=e;return(0,i.useMemo)(()=>{const e=n??function(e){return m(e).map(({props:{value:e,label:n,attributes:l,default:i}})=>({value:e,label:n,attributes:l,default:i}))}(l);return function(e){const n=(0,o.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,l])}function h({value:e,tabValues:n}){return n.some(n=>n.value===e)}function u({queryString:e=!1,groupId:n}){const l=(0,d.W6)(),t=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,a.aZ)(t),(0,i.useCallback)(e=>{if(!t)return;const n=new URLSearchParams(l.location.search);n.set(t,e),l.replace({...l.location,search:n.toString()})},[t,l])]}function x(e){const{defaultValue:n,queryString:l=!1,groupId:t}=e,r=p(e),[d,a]=(0,i.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!h({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const l=n.find(e=>e.default)??n[0];if(!l)throw new Error("Unexpected error: 0 tabValues");return l.value}({defaultValue:n,tabValues:r})),[o,m]=u({queryString:l,groupId:t}),[x,g]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[l,t]=(0,c.Dv)(n);return[l,(0,i.useCallback)(e=>{n&&t.set(e)},[n,t])]}({groupId:t}),j=(()=>{const e=o??x;return h({value:e,tabValues:r})?e:null})();(0,s.A)(()=>{j&&a(j)},[j]);return{selectedValue:d,selectValue:(0,i.useCallback)(e=>{if(!h({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);a(e),m(e),g(e)},[m,g,r]),tabValues:r}}var g=l(11062);const j="tabList__CuJ",b="tabItem_LNqP";var _=l(74848);function v({className:e,block:n,selectedValue:l,selectValue:i,tabValues:d}){const s=[],{blockElementScrollPositionUntilNextRender:a}=(0,r.a_)(),o=e=>{const n=e.currentTarget,t=s.indexOf(n),r=d[t].value;r!==l&&(a(n),i(r))},c=e=>{let n=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const l=s.indexOf(e.currentTarget)+1;n=s[l]??s[0];break}case"ArrowLeft":{const l=s.indexOf(e.currentTarget)-1;n=s[l]??s[s.length-1];break}}n?.focus()};return(0,_.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":n},e),children:d.map(({value:e,label:n,attributes:i})=>(0,_.jsx)("li",{role:"tab",tabIndex:l===e?0:-1,"aria-selected":l===e,ref:e=>{s.push(e)},onKeyDown:c,onClick:o,...i,className:(0,t.A)("tabs__item",b,i?.className,{"tabs__item--active":l===e}),children:n??e},e))})}function y({lazy:e,children:n,selectedValue:l}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find(e=>e.props.value===l);return e?(0,i.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,_.jsx)("div",{className:"margin-top--md",children:r.map((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==l}))})}function f(e){const n=x(e);return(0,_.jsxs)("div",{className:(0,t.A)("tabs-container",j),children:[(0,_.jsx)(v,{...n,...e}),(0,_.jsx)(y,{...n,...e})]})}function A(e){const n=(0,g.A)();return(0,_.jsx)(f,{...e,children:m(e.children)},String(n))}},76029(e,n,l){l.r(n),l.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>m});const i=JSON.parse('{"id":"providers/vertex_embedding","title":"Vertex AI \u5d4c\u5165","description":"\u4f7f\u7528 - \u5d4c\u5165","source":"@site/docs/providers/vertex_embedding.md","sourceDirName":"providers","slug":"/providers/vertex_embedding","permalink":"/docs/providers/vertex_embedding","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Vertex AI - \u81ea\u90e8\u7f72\u6a21\u578b","permalink":"/docs/providers/vertex_self_deployed"},"next":{"title":"Vertex AI \u56fe\u50cf\u751f\u6210","permalink":"/docs/providers/vertex_image"}}');var t=l(74848),r=l(28453),d=(l(90547),l(49489)),s=l(7227);const a={},o="Vertex AI \u5d4c\u5165",c={},m=[{value:"\u4f7f\u7528 - \u5d4c\u5165",id:"\u4f7f\u7528---\u5d4c\u5165",level:2},{value:"\u652f\u6301\u7684\u5d4c\u5165\u6a21\u578b",id:"\u652f\u6301\u7684\u5d4c\u5165\u6a21\u578b",level:4},{value:"\u652f\u6301\u7684 OpenAI (\u7edf\u4e00) \u53c2\u6570",id:"\u652f\u6301\u7684-openai-\u7edf\u4e00-\u53c2\u6570",level:3},{value:"\u4f7f\u7528 OpenAI (\u7edf\u4e00) \u53c2\u6570",id:"\u4f7f\u7528-openai-\u7edf\u4e00-\u53c2\u6570",level:4},{value:"Vertex \u7279\u5b9a\u53c2\u6570",id:"vertex-\u7279\u5b9a\u53c2\u6570",level:3},{value:"\u4f7f\u7528 Vertex \u7279\u5b9a\u53c2\u6570 (\u4f7f\u7528 <code>task_type</code> \u548c <code>title</code>)",id:"\u4f7f\u7528-vertex-\u7279\u5b9a\u53c2\u6570-\u4f7f\u7528-task_type-\u548c-title",level:4},{value:"<strong>BGE \u5d4c\u5165</strong>",id:"bge-\u5d4c\u5165",level:2},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:3},{value:"<strong>\u591a\u6a21\u6001\u5d4c\u5165</strong>",id:"\u591a\u6a21\u6001\u5d4c\u5165",level:2},{value:"\u4f7f\u7528",id:"\u4f7f\u7528-1",level:3},{value:"\u6587\u672c + \u56fe\u50cf + \u89c6\u9891\u5d4c\u5165",id:"\u6587\u672c--\u56fe\u50cf--\u89c6\u9891\u5d4c\u5165",level:3}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"vertex-ai-\u5d4c\u5165",children:"Vertex AI \u5d4c\u5165"})}),"\n",(0,t.jsx)(n.h2,{id:"\u4f7f\u7528---\u5d4c\u5165",children:"\u4f7f\u7528 - \u5d4c\u5165"}),"\n",(0,t.jsx)(d.A,{children:(0,t.jsxs)(s.A,{value:"sdk",label:"SDK",children:[(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import litellm\nfrom litellm import embedding\nlitellm.vertex_project = "hardy-device-38811"  # Your Project ID\nlitellm.vertex_location = "us-central1"  # proj location\n\nresponse = embedding(\n    model="vertex_ai/textembedding-gecko",\n    input=["good morning from litellm"],\n)\nprint(response)\n\n\n</TabItem>\n\n<TabItem value="proxy" label="LiteLLM PROXY">\n\n\n1. \u5c06\u6a21\u578b\u6dfb\u52a0\u5230 config.yaml\n```yaml\nmodel_list:\n  - model_name: snowflake-arctic-embed-m-long-1731622468876\n    litellm_params:\n      model: vertex_ai/<your-model-id>\n      vertex_project: "adroit-crow-413218"\n      vertex_location: "us-central1"\n      vertex_credentials: adroit-crow-413218-a956eef1a2a8.json \n\nlitellm_settings:\n  drop_params: True\n'})}),(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"\u542f\u52a8\u4ee3\u7406"}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ litellm --config /path/to/config.yaml\n"})}),(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"\u4f7f\u7528 OpenAI Python SDK \u6216 Langchain Python SDK \u53d1\u9001\u8bf7\u6c42"}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import openai\n\nclient = openai.OpenAI(api_key="sk-1234", base_url="http://0.0.0.0:4000")\n\nresponse = client.embeddings.create(\n    model="snowflake-arctic-embed-m-long-1731622468876", \n    input = ["good morning from litellm", "this is another item"],\n)\n\nprint(response)\n'})})]})}),"\n",(0,t.jsx)(n.h4,{id:"\u652f\u6301\u7684\u5d4c\u5165\u6a21\u578b",children:"\u652f\u6301\u7684\u5d4c\u5165\u6a21\u578b"}),"\n",(0,t.jsxs)(n.p,{children:["\u6240\u6709\u5728 ",(0,t.jsx)(n.a,{href:"https://github.com/BerriAI/litellm/blob/57f37f743886a0249f630a6792d49dffc2c5d9b7/model_prices_and_context_window.json#L835",children:"\u8fd9\u91cc"})," \u5217\u51fa\u7684\u6a21\u578b\u90fd\u652f\u6301"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u6a21\u578b\u540d\u79f0"}),(0,t.jsx)(n.th,{children:"\u8c03\u7528\u51fd\u6570"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"text-embedding-004"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'embedding(model="vertex_ai/text-embedding-004", input)'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"text-multilingual-embedding-002"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'embedding(model="vertex_ai/text-multilingual-embedding-002", input)'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"textembedding-gecko"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'embedding(model="vertex_ai/textembedding-gecko", input)'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"textembedding-gecko-multilingual"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'embedding(model="vertex_ai/textembedding-gecko-multilingual", input)'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"textembedding-gecko-multilingual@001"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'embedding(model="vertex_ai/textembedding-gecko-multilingual@001", input)'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"textembedding-gecko@001"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'embedding(model="vertex_ai/textembedding-gecko@001", input)'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"textembedding-gecko@003"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'embedding(model="vertex_ai/textembedding-gecko@003", input)'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"text-embedding-preview-0409"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'embedding(model="vertex_ai/text-embedding-preview-0409", input)'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"text-multilingual-embedding-preview-0409"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'embedding(model="vertex_ai/text-multilingual-embedding-preview-0409", input)'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"\u7ec6\u8c03\u6216\u81ea\u5b9a\u4e49\u5d4c\u5165\u6a21\u578b"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'embedding(model="vertex_ai/<your-model-id>", input)'})})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"\u652f\u6301\u7684-openai-\u7edf\u4e00-\u53c2\u6570",children:"\u652f\u6301\u7684 OpenAI (\u7edf\u4e00) \u53c2\u6570"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:(0,t.jsx)(n.a,{href:"/docs/embedding/supported_embedding#input-params-for-litellmembedding",children:"\u53c2\u6570"})}),(0,t.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.a,{href:"https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/text-embeddings-api",children:"Vertex \u7b49\u6548\u503c"})})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"input"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"string \u6216 List[string]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"instances"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"dimensions"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"int"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"output_dimensionality"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"input_type"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:'Literal["RETRIEVAL_QUERY","RETRIEVAL_DOCUMENT", "SEMANTIC_SIMILARITY", "CLASSIFICATION", "CLUSTERING", "QUESTION_ANSWERING", "FACT_VERIFICATION"]'})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"task_type"})})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"\u4f7f\u7528-openai-\u7edf\u4e00-\u53c2\u6570",children:"\u4f7f\u7528 OpenAI (\u7edf\u4e00) \u53c2\u6570"}),"\n",(0,t.jsxs)(d.A,{children:[(0,t.jsx)(s.A,{value:"sdk",label:"SDK",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'response = litellm.embedding(\n    model="vertex_ai/text-embedding-004",\n    input=["good morning from litellm", "gm"]\n    input_type = "RETRIEVAL_DOCUMENT",\n    dimensions=1,\n)\n'})})}),(0,t.jsx)(s.A,{value:"proxy",label:"LiteLLM PROXY",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import openai\n\nclient = openai.OpenAI(api_key="sk-1234", base_url="http://0.0.0.0:4000")\n\nresponse = client.embeddings.create(\n    model="text-embedding-004", \n    input = ["good morning from litellm", "gm"],\n    dimensions=1,\n    extra_body = {\n        "input_type": "RETRIEVAL_QUERY",\n    }\n)\n\nprint(response)\n'})})})]}),"\n",(0,t.jsx)(n.h3,{id:"vertex-\u7279\u5b9a\u53c2\u6570",children:"Vertex \u7279\u5b9a\u53c2\u6570"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u53c2\u6570"}),(0,t.jsx)(n.th,{children:"\u7c7b\u578b"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"auto_truncate"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"bool"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"task_type"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:'Literal["RETRIEVAL_QUERY","RETRIEVAL_DOCUMENT", "SEMANTIC_SIMILARITY", "CLASSIFICATION", "CLUSTERING", "QUESTION_ANSWERING", "FACT_VERIFICATION"]'})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"title"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"str"})})]})]})]}),"\n",(0,t.jsxs)(n.h4,{id:"\u4f7f\u7528-vertex-\u7279\u5b9a\u53c2\u6570-\u4f7f\u7528-task_type-\u548c-title",children:["\u4f7f\u7528 Vertex \u7279\u5b9a\u53c2\u6570 (\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"task_type"})," \u548c ",(0,t.jsx)(n.code,{children:"title"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"\u60a8\u53ef\u4ee5\u5411\u5d4c\u5165\u6a21\u578b\u4f20\u9012\u4efb\u4f55 Vertex \u7279\u5b9a\u53c2\u6570\u3002\u53ea\u9700\u5c06\u5b83\u4eec\u4f20\u9012\u7ed9 embedding \u51fd\u6570\uff0c\u5982\u4e0b\u6240\u793a\uff1a"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/text-embeddings-api#request_body",children:"\u76f8\u5173 Vertex AI \u6587\u6863\uff0c\u5305\u542b\u6240\u6709\u5d4c\u5165\u53c2\u6570"})}),"\n",(0,t.jsxs)(d.A,{children:[(0,t.jsx)(s.A,{value:"sdk",label:"SDK",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'response = litellm.embedding(\n    model="vertex_ai/text-embedding-004",\n    input=["good morning from litellm", "gm"]\n    task_type = "RETRIEVAL_DOCUMENT",\n    title = "test",\n    dimensions=1,\n    auto_truncate=True,\n)\n'})})}),(0,t.jsx)(s.A,{value:"proxy",label:"LiteLLM PROXY",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import openai\n\nclient = openai.OpenAI(api_key="sk-1234", base_url="http://0.0.0.0:4000")\n\nresponse = client.embeddings.create(\n    model="text-embedding-004", \n    input = ["good morning from litellm", "gm"],\n    dimensions=1,\n    extra_body = {\n        "task_type": "RETRIEVAL_QUERY",\n        "auto_truncate": True,\n        "title": "test",\n    }\n)\n\nprint(response)\n'})})})]}),"\n",(0,t.jsx)(n.h2,{id:"bge-\u5d4c\u5165",children:(0,t.jsx)(n.strong,{children:"BGE \u5d4c\u5165"})}),"\n",(0,t.jsx)(n.p,{children:"\u4f7f\u7528\u90e8\u7f72\u5728 Vertex AI \u4e0a\u7684 BGE (\u767e\u5ea6\u901a\u7528\u5d4c\u5165) \u6a21\u578b\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u4f7f\u7528",children:"\u4f7f\u7528"}),"\n",(0,t.jsxs)(d.A,{children:[(0,t.jsx)(s.A,{value:"sdk",label:"SDK",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",metastring:'showLineNumbers title="\u4f7f\u7528 BGE \u5728 Vertex AI"',children:'import litellm\n\nresponse = litellm.embedding(\n    model="vertex_ai/bge/<your-endpoint-id>",\n    input=["Hello", "World"],\n    vertex_project="your-project-id",\n    vertex_location="your-location"\n)\n\nprint(response)\n'})})}),(0,t.jsxs)(s.A,{value:"proxy",label:"LiteLLM PROXY",children:[(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u5c06\u6a21\u578b\u6dfb\u52a0\u5230 config.yaml"}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'showLineNumbers title="config.yaml"',children:'model_list:\n  - model_name: bge-embedding\n    litellm_params:\n      model: vertex_ai/bge/<your-endpoint-id>\n      vertex_project: "your-project-id"\n      vertex_location: "us-central1"\n      vertex_credentials: your-credentials.json\n\nlitellm_settings:\n  drop_params: True\n'})}),(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"\u542f\u52a8\u4ee3\u7406"}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ litellm --config /path/to/config.yaml\n"})}),(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"\u4f7f\u7528 OpenAI Python SDK \u53d1\u9001\u8bf7\u6c42"}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",metastring:'showLineNumbers title="\u5411 BGE \u53d1\u9001\u8bf7\u6c42"',children:'import openai\n\nclient = openai.OpenAI(api_key="sk-1234", base_url="http://0.0.0.0:4000")\n\nresponse = client.embeddings.create(\n    model="bge-embedding",\n    input=["good morning from litellm", "this is another item"]\n)\n\nprint(response)\n'})}),(0,t.jsx)(n.p,{children:"\u4f7f\u7528 Private Service Connect (PSC) \u7aef\u70b9"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'showLineNumbers title="config.yaml (PSC)"',children:"model_list:\n  - model_name: bge-small-en-v1.5\n    litellm_params:\n      model: vertex_ai/bge/1234567890 \n      api_base: http://10.96.32.8  # Your PSC IP\n      vertex_project: my-project-id  #optional\n      vertex_location: us-central1 #optional\n"})})]})]}),"\n",(0,t.jsx)(n.h2,{id:"\u591a\u6a21\u6001\u5d4c\u5165",children:(0,t.jsx)(n.strong,{children:"\u591a\u6a21\u6001\u5d4c\u5165"})}),"\n",(0,t.jsx)(n.p,{children:"\u5df2\u77e5\u9650\u5236\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u53ea\u652f\u6301\u6bcf\u8bf7\u6c42\u4e00\u4e2a\u56fe\u50cf/\u89c6\u9891/\u56fe\u50cf"}),"\n",(0,t.jsx)(n.li,{children:"\u53ea\u652f\u6301 GCS \u6216 base64 \u7f16\u7801\u7684\u56fe\u50cf/\u89c6\u9891"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u4f7f\u7528-1",children:"\u4f7f\u7528"}),"\n",(0,t.jsxs)(d.A,{children:[(0,t.jsxs)(s.A,{value:"sdk",label:"SDK",children:[(0,t.jsx)(n.p,{children:"\u4f7f\u7528 GCS \u56fe\u50cf"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'response = await litellm.aembedding(\n    model="vertex_ai/multimodalembedding@001",\n    input="gs://cloud-samples-data/vertex-ai/llm/prompts/landmark1.png"  # \u5c06\u4f5c\u4e3a GCS \u56fe\u50cf\u53d1\u9001\n)\n'})}),(0,t.jsx)(n.p,{children:"\u4f7f\u7528 base64 \u7f16\u7801\u7684\u56fe\u50cf"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'response = await litellm.aembedding(\n    model="vertex_ai/multimodalembedding@001",\n    input="data:image/jpeg;base64,..."  # \u5c06\u4f5c\u4e3a base64 \u7f16\u7801\u7684\u56fe\u50cf\u53d1\u9001\n)\n'})})]}),(0,t.jsxs)(s.A,{value:"proxy",label:"LiteLLM PROXY (\u7edf\u4e00\u7aef\u70b9)",children:[(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u5c06\u6a21\u578b\u6dfb\u52a0\u5230 config.yaml"}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'model_list:\n  - model_name: multimodalembedding@001\n    litellm_params:\n      model: vertex_ai/multimodalembedding@001\n      vertex_project: "adroit-crow-413218"\n      vertex_location: "us-central1"\n      vertex_credentials: adroit-crow-413218-a956eef1a2a8.json \n\nlitellm_settings:\n  drop_params: True\n'})}),(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"\u542f\u52a8\u4ee3\u7406"}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ litellm --config /path/to/config.yaml\n"})}),(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"\u4f7f\u7528 OpenAI Python SDK \u6216 Langchain Python SDK \u53d1\u9001\u8bf7\u6c42"}),"\n"]}),(0,t.jsxs)(d.A,{children:[(0,t.jsxs)(s.A,{value:"OpenAI SDK",label:"OpenAI SDK",children:[(0,t.jsx)(n.p,{children:"\u4f7f\u7528 GCS \u56fe\u50cf/\u89c6\u9891 URI \u7684\u8bf7\u6c42"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import openai\n\nclient = openai.OpenAI(api_key="sk-1234", base_url="http://0.0.0.0:4000")\n\n# # \u8bf7\u6c42\u53d1\u9001\u5230\u7531 litellm \u4ee3\u7406\u8bbe\u7f6e\u7684\u6a21\u578b\uff0c`litellm --model`\nresponse = client.embeddings.create(\n    model="multimodalembedding@001", \n    input = "gs://cloud-samples-data/vertex-ai/llm/prompts/landmark1.png",\n)\n\nprint(response)\n'})}),(0,t.jsx)(n.p,{children:"\u4f7f\u7528 base64 \u7f16\u7801\u7684\u56fe\u50cf\u7684\u8bf7\u6c42"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import openai\n\nclient = openai.OpenAI(api_key="sk-1234", base_url="http://0.0.0.0:4000")\n\n# # \u8bf7\u6c42\u53d1\u9001\u5230\u7531 litellm \u4ee3\u7406\u8bbe\u7f6e\u7684\u6a21\u578b\uff0c`litellm --model`\nresponse = client.embeddings.create(\n    model="multimodalembedding@001", \n    input = "data:image/jpeg;base64,...",\n)\n\nprint(response)\n'})})]}),(0,t.jsxs)(s.A,{value:"langchain",label:"Langchain",children:[(0,t.jsx)(n.p,{children:"\u4f7f\u7528 GCS \u56fe\u50cf/\u89c6\u9891 URI \u7684\u8bf7\u6c42"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from langchain_openai import OpenAIEmbeddings\n\nembeddings_models = "multimodalembedding@001"\n\nembeddings = OpenAIEmbeddings(\n    model="multimodalembedding@001",\n    base_url="http://0.0.0.0:4000",\n    api_key="sk-1234",  # type: ignore\n)\n\n\nquery_result = embeddings.embed_query(\n    "gs://cloud-samples-data/vertex-ai/llm/prompts/landmark1.png"\n)\nprint(query_result)\n\n'})}),(0,t.jsx)(n.p,{children:"\u4f7f\u7528 base64 \u7f16\u7801\u7684\u56fe\u50cf\u7684\u8bf7\u6c42"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from langchain_openai import OpenAIEmbeddings\n\nembeddings_models = "multimodalembedding@001"\n\nembeddings = OpenAIEmbeddings(\n    model="multimodalembedding@001",\n    base_url="http://0.0.0.0:4000",\n    api_key="sk-1234",  # type: ignore\n)\n\n\nquery_result = embeddings.embed_query(\n    "data:image/jpeg;base64,..."\n)\nprint(query_result)\n\n'})})]})]})]}),(0,t.jsxs)(s.A,{value:"proxy-vtx",label:"LiteLLM PROXY (Vertex SDK)",children:[(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u5c06\u6a21\u578b\u6dfb\u52a0\u5230 config.yaml"}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'default_vertex_config:\n  vertex_project: "adroit-crow-413218"\n  vertex_location: "us-central1"\n  vertex_credentials: adroit-crow-413218-a956eef1a2a8.json \n'})}),(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"\u542f\u52a8\u4ee3\u7406"}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ litellm --config /path/to/config.yaml\n"})}),(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"\u4f7f\u7528 OpenAI Python SDK \u53d1\u9001\u8bf7\u6c42"}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import vertexai\n\nfrom vertexai.vision_models import Image, MultiModalEmbeddingModel, Video\nfrom vertexai.vision_models import VideoSegmentConfig\nfrom google.auth.credentials import Credentials\n\n\nLITELLM_PROXY_API_KEY = "sk-1234"\nLITELLM_PROXY_BASE = "http://0.0.0.0:4000/vertex-ai"\n\nimport datetime\n\nclass CredentialsWrapper(Credentials):\n    def __init__(self, token=None):\n        super().__init__()\n        self.token = token\n        self.expiry = None  # or set to a future date if needed\n        \n    def refresh(self, request):\n        pass\n    \n    def apply(self, headers, token=None):\n        headers[\'Authorization\'] = f\'Bearer {self.token}\'\n\n    @property\n    def expired(self):\n        return False  # Always consider the token as non-expired\n\n    @property\n    def valid(self):\n        return True  # Always consider the credentials as valid\n\ncredentials = CredentialsWrapper(token=LITELLM_PROXY_API_KEY)\n\nvertexai.init(\n    project="adroit-crow-413218",\n    location="us-central1",\n    api_endpoint=LITELLM_PROXY_BASE,\n    credentials = credentials,\n    api_transport="rest",\n   \n)\n\nmodel = MultiModalEmbeddingModel.from_pretrained("multimodalembedding")\nimage = Image.load_from_file(\n    "gs://cloud-samples-data/vertex-ai/llm/prompts/landmark1.png"\n)\n\nembeddings = model.get_embeddings(\n    image=image,\n    contextual_text="Colosseum",\n    dimension=1408,\n)\nprint(f"Image Embedding: {embeddings.image_embedding}")\nprint(f"Text Embedding: {embeddings.text_embedding}")\n'})})]})]}),"\n",(0,t.jsx)(n.h3,{id:"\u6587\u672c--\u56fe\u50cf--\u89c6\u9891\u5d4c\u5165",children:"\u6587\u672c + \u56fe\u50cf + \u89c6\u9891\u5d4c\u5165"}),"\n",(0,t.jsxs)(d.A,{children:[(0,t.jsxs)(s.A,{value:"sdk",label:"SDK",children:[(0,t.jsx)(n.p,{children:"\u6587\u672c + \u56fe\u50cf"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'response = await litellm.aembedding(\n    model="vertex_ai/multimodalembedding@001",\n    input=["hey", "gs://cloud-samples-data/vertex-ai/llm/prompts/landmark1.png"]  # \u5c06\u4f5c\u4e3a GCS \u56fe\u50cf\u53d1\u9001\n)\n'})}),(0,t.jsx)(n.p,{children:"\u6587\u672c + \u89c6\u9891"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'response = await litellm.aembedding(\n    model="vertex_ai/multimodalembedding@001",\n    input=["hey", "gs://my-bucket/embeddings/supermarket-video.mp4"]  # \u5c06\u4f5c\u4e3a GCS \u56fe\u50cf\u53d1\u9001\n)\n'})}),(0,t.jsx)(n.p,{children:"\u56fe\u50cf + \u89c6\u9891"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'response = await litellm.aembedding(\n    model="vertex_ai/multimodalembedding@001",\n    input=["gs://cloud-samples-data/vertex-ai/llm/prompts/landmark1.png", "gs://my-bucket/embeddings/supermarket-video.mp4"]  # \u5c06\u4f5c\u4e3a GCS \u56fe\u50cf\u53d1\u9001\n)\n'})})]}),(0,t.jsxs)(s.A,{value:"proxy",label:"LiteLLM PROXY (\u7edf\u4e00\u7aef\u70b9)",children:[(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u5c06\u6a21\u578b\u6dfb\u52a0\u5230 config.yaml"}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'model_list:\n  - model_name: multimodalembedding@001\n    litellm_params:\n      model: vertex_ai/multimodalembedding@001\n      vertex_project: "adroit-crow-413218"\n      vertex_location: "us-central1"\n      vertex_credentials: adroit-crow-413218-a956eef1a2a8.json \n\nlitellm_settings:\n  drop_params: True\n'})}),(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"\u542f\u52a8\u4ee3\u7406"}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ litellm --config /path/to/config.yaml\n"})}),(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:"\u4f7f\u7528 OpenAI Python SDK \u6216 Langchain Python SDK \u53d1\u9001\u8bf7\u6c42"}),"\n"]}),(0,t.jsx)(n.p,{children:"\u6587\u672c + \u56fe\u50cf"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import openai\n\nclient = openai.OpenAI(api_key="sk-1234", base_url="http://0.0.0.0:4000")\n\n# # \u8bf7\u6c42\u53d1\u9001\u5230\u7531 litellm \u4ee3\u7406\u8bbe\u7f6e\u7684\u6a21\u578b\uff0c`litellm --model`\nresponse = client.embeddings.create(\n    model="multimodalembedding@001", \n    input = ["hey", "gs://cloud-samples-data/vertex-ai/llm/prompts/landmark1.png"],\n)\n\nprint(response)\n'})}),(0,t.jsx)(n.p,{children:"\u6587\u672c + \u89c6\u9891"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import openai\n\nclient = openai.OpenAI(api_key="sk-1234", base_url="http://0.0.0.0:4000")\n\n# # \u8bf7\u6c42\u53d1\u9001\u5230\u7531 litellm \u4ee3\u7406\u8bbe\u7f6e\u7684\u6a21\u578b\uff0c`litellm --model`\nresponse = client.embeddings.create(\n    model="multimodalembedding@001", \n    input = ["hey", "gs://my-bucket/embeddings/supermarket-video.mp4"],\n)\n\nprint(response)\n'})}),(0,t.jsx)(n.p,{children:"\u56fe\u50cf + \u89c6\u9891"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import openai\n\nclient = openai.OpenAI(api_key="sk-1234", base_url="http://0.0.0.0:4000")\n\n# # \u8bf7\u6c42\u53d1\u9001\u5230\u7531 litellm \u4ee3\u7406\u8bbe\u7f6e\u7684\u6a21\u578b\uff0c`litellm --model`\nresponse = client.embeddings.create(\n    model="multimodalembedding@001", \n    input = ["gs://cloud-samples-data/vertex-ai/llm/prompts/landmark1.png", "gs://my-bucket/embeddings/supermarket-video.mp4"],\n)\n\nprint(response)\n'})})]})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}}}]);