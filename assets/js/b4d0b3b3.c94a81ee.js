"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[39601],{7227(n,e,i){i.d(e,{A:()=>s});i(96540);var r=i(18215);const l="tabItem_Ymn6";var a=i(74848);function s({children:n,hidden:e,className:i}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.A)(l,i),hidden:e,children:n})}},7887(n,e,i){i.r(e),i.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>v,frontMatter:()=>t,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"providers/nvidia_nim_rerank","title":"Nvidia NIM - Rerank","description":"\u4f7f\u7528 LiteLLM \u901a\u8fc7 Nvidia NIM Rerank \u6a21\u578b\u8fdb\u884c\u63a8\u7406\u3002","source":"@site/docs/providers/nvidia_nim_rerank.md","sourceDirName":"providers","slug":"/providers/nvidia_nim_rerank","permalink":"/docs/providers/nvidia_nim_rerank","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Nvidia NIM","permalink":"/docs/providers/nvidia_nim"},"next":{"title":"Oracle Cloud Infrastructure (OCI)","permalink":"/docs/providers/oci"}}');var l=i(74848),a=i(28453),s=i(49489),d=i(7227);const t={},c="Nvidia NIM - Rerank",o={},h=[{value:"\u6982\u89c8",id:"\u6982\u89c8",level:2},{value:"\u4f7f\u7528\u65b9\u6cd5",id:"\u4f7f\u7528\u65b9\u6cd5",level:2},{value:"LiteLLM Python SDK",id:"litellm-python-sdk",level:3},{value:"\u4f7f\u7528 LiteLLM \u4ee3\u7406",id:"\u4f7f\u7528-litellm-\u4ee3\u7406",level:2},{value:"1. \u8bbe\u7f6e\u914d\u7f6e",id:"1-\u8bbe\u7f6e\u914d\u7f6e",level:3},{value:"2. \u542f\u52a8\u4ee3\u7406",id:"2-\u542f\u52a8\u4ee3\u7406",level:3},{value:"3. \u53d1\u9001\u91cd\u6392\u5e8f\u8bf7\u6c42",id:"3-\u53d1\u9001\u91cd\u6392\u5e8f\u8bf7\u6c42",level:3},{value:"<code>/v1/ranking</code> \u6a21\u578b (llama-3.2-nv-rerankqa-1b-v2)",id:"v1ranking-\u6a21\u578b-llama-32-nv-rerankqa-1b-v2",level:2},{value:"LiteLLM Python SDK",id:"litellm-python-sdk-1",level:3},{value:"LiteLLM \u4ee3\u7406",id:"litellm-\u4ee3\u7406",level:3},{value:"\u6a21\u578b\u89e3\u6790\u7406\u89e3",id:"\u6a21\u578b\u89e3\u6790\u7406\u89e3",level:3},{value:"API \u53c2\u6570",id:"api-\u53c2\u6570",level:2},{value:"\u5fc5\u9700\u53c2\u6570",id:"\u5fc5\u9700\u53c2\u6570",level:3},{value:"\u53ef\u9009\u53c2\u6570",id:"\u53ef\u9009\u53c2\u6570",level:3},{value:"Nvidia \u7279\u5b9a\u53c2\u6570",id:"nvidia-\u7279\u5b9a\u53c2\u6570",level:3},{value:"\u8ba4\u8bc1",id:"\u8ba4\u8bc1",level:2},{value:"\u81ea\u5b9a\u4e49 API \u57fa\u7840 URL",id:"\u81ea\u5b9a\u4e49-api-\u57fa\u7840-url",level:2},{value:"\u5982\u4f55\u83b7\u53d6 API \u5bc6\u94a5\uff1f",id:"\u5982\u4f55\u83b7\u53d6-api-\u5bc6\u94a5",level:3},{value:"\u76f8\u5173\u6587\u6863",id:"\u76f8\u5173\u6587\u6863",level:2}];function u(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"nvidia-nim---rerank",children:"Nvidia NIM - Rerank"})}),"\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528 LiteLLM \u901a\u8fc7 Nvidia NIM Rerank \u6a21\u578b\u8fdb\u884c\u63a8\u7406\u3002"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u5c5e\u6027"}),(0,l.jsx)(e.th,{children:"\u8be6\u60c5"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u63cf\u8ff0"}),(0,l.jsx)(e.td,{children:"Nvidia NIM \u63d0\u4f9b\u9ad8\u6027\u80fd\u7684\u91cd\u6392\u5e8f\u6a21\u578b\uff0c\u7528\u4e8e\u8bed\u4e49\u641c\u7d22\u548c\u68c0\u7d22\u589e\u5f3a\u751f\u6210 (RAG)"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u63d0\u4f9b\u8005\u6587\u6863"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.a,{href:"https://docs.api.nvidia.com/nim/reference/nvidia-llama-3_2-nv-rerankqa-1b-v2-infer",children:"Nvidia NIM Rerank API \u2197"})})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u652f\u6301\u7684\u7ec8\u7ed3\u70b9"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"/rerank"})})]})]})]}),"\n",(0,l.jsx)(e.h2,{id:"\u6982\u89c8",children:"\u6982\u89c8"}),"\n",(0,l.jsx)(e.p,{children:"Nvidia NIM \u91cd\u6392\u5e8f\u6a21\u578b\u5e2e\u52a9\u60a8\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6839\u636e\u67e5\u8be2\u7684\u76f8\u5173\u6027\u91cd\u65b0\u6392\u5217\u641c\u7d22\u7ed3\u679c"}),"\n",(0,l.jsx)(e.li,{children:"\u63d0\u9ad8 RAG\uff08\u68c0\u7d22\u589e\u5f3a\u751f\u6210\uff09\u7684\u51c6\u786e\u6027"}),"\n",(0,l.jsx)(e.li,{children:"\u9ad8\u6548\u5730\u8fc7\u6ee4\u548c\u6392\u540d\u5927\u91cf\u6587\u6863\u96c6"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u652f\u6301\u7684\u6a21\u578b\uff1a"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Nvidia NIM \u5e73\u53f0\u4e0a\u6240\u6709\u91cd\u6392\u5e8f\u6a21\u578b"}),"\n"]}),"\n",(0,l.jsx)(e.admonition,{type:"tip",children:(0,l.jsxs)(e.p,{children:["\u5728 ",(0,l.jsx)(e.a,{href:"https://models.litellm.ai",children:"Nvidia NIM"})," \u4e0a\u67e5\u770b LiteLLM \u652f\u6301\u7684\u6240\u6709 Nvidia NIM \u91cd\u6392\u5e8f\u6a21\u578b\u5217\u8868\u3002"]})}),"\n",(0,l.jsx)(e.h2,{id:"\u4f7f\u7528\u65b9\u6cd5",children:"\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,l.jsx)(e.h3,{id:"litellm-python-sdk",children:"LiteLLM Python SDK"}),"\n",(0,l.jsx)(s.A,{children:(0,l.jsx)(d.A,{value:"llama-1b",label:"LLaMa 1B \u6a21\u578b",children:(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'import litellm\nimport os\n\nos.environ[\'NVIDIA_NIM_API_KEY\'] = "nvapi-..."\n\nresponse = litellm.rerank(\n    model="nvidia_nim/nvidia/llama-3_2-nv-rerankqa-1b-v2",\n    query="H100 \u7684 GPU \u5185\u5b58\u5e26\u5bbd\u662f\u591a\u5c11\uff1f",\n    documents=[\n        "Hopper GPU \u4e0e Grace CPU \u914d\u5bf9\uff0c\u4f7f\u7528 NVIDIA \u8d85\u5feb\u7684\u82af\u7247\u5230\u82af\u7247\u4e92\u8fde\u6280\u672f\uff0c\u63d0\u4f9b\u9ad8\u8fbe 900GB/s \u7684\u5e26\u5bbd\u3002",\n        "A100 \u76f8\u6bd4\u4e0a\u4e00\u4ee3\u6027\u80fd\u63d0\u9ad8\u4e86 20 \u500d\u3002",\n        "\u914d\u5907 H100 \u7684\u52a0\u901f\u670d\u52a1\u5668\u6bcf GPU \u63d0\u4f9b 3TB/s \u7684\u5185\u5b58\u5e26\u5bbd\u3002"\n    ],\n    top_n=3,\n)\n\nprint(response)\n\n\n</TabItem>\n<TabItem value="mistral-4b" label="Mistral 4B \u6a21\u578b">\n\n```python\nimport litellm\nimport os\n\nos.environ[\'NVIDIA_NIM_API_KEY\'] = "nvapi-..."\n\nresponse = litellm.rerank(\n    model="nvidia_nim/nvidia/nv-rerankqa-mistral-4b-v3",\n    query="H100 \u7684 GPU \u5185\u5b58\u5e26\u5bbd\u662f\u591a\u5c11\uff1f",\n    documents=[\n        "Hopper GPU \u4e0e Grace CPU \u914d\u5bf9\uff0c\u4f7f\u7528 NVIDIA \u8d85\u5feb\u7684\u82af\u7247\u5230\u82af\u7247\u4e92\u8fde\u6280\u672f\uff0c\u63d0\u4f9b\u9ad8\u8fbe 900GB/s \u7684\u5e26\u5bbd\u3002",\n        "A100 \u76f8\u6bd4\u4e0a\u4e00\u4ee3\u6027\u80fd\u63d0\u9ad8\u4e86 20 \u500d\u3002",\n        "\u914d\u5907 H100 \u7684\u52a0\u901f\u670d\u52a1\u5668\u6bcf GPU \u63d0\u4f9b 3TB/s \u7684\u5185\u5b58\u5e26\u5bbd\u3002"\n    ],\n    top_n=3,\n)\n\nprint(response)\n'})})})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u54cd\u5e94\uff1a"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json",children:'{\n    "results": [\n        {\n            "index": 2,\n            "relevance_score": 6.828125,\n            "document": {\n                "text": "\u914d\u5907 H100 \u7684\u52a0\u901f\u670d\u52a1\u5668\u6bcf GPU \u63d0\u4f9b 3TB/s \u7684\u5185\u5b58\u5e26\u5bbd\u3002"\n            }\n        },\n        {\n            "index": 0,\n            "relevance_score": -1.564453125,\n            "document": {\n                "text": "Hopper GPU \u4e0e Grace CPU \u914d\u5bf9\uff0c\u4f7f\u7528 NVIDIA \u8d85\u5feb\u7684\u82af\u7247\u5230\u82af\u7247\u4e92\u8fde\u6280\u672f\uff0c\u63d0\u4f9b\u9ad8\u8fbe 900GB/s \u7684\u5e26\u5bbd\u3002"\n            }\n        }\n    ]\n}\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u4f7f\u7528-litellm-\u4ee3\u7406",children:"\u4f7f\u7528 LiteLLM \u4ee3\u7406"}),"\n",(0,l.jsx)(e.h3,{id:"1-\u8bbe\u7f6e\u914d\u7f6e",children:"1. \u8bbe\u7f6e\u914d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"\u5c06 Nvidia NIM \u91cd\u6392\u5e8f\u6a21\u578b\u6dfb\u52a0\u5230\u60a8\u7684\u4ee3\u7406\u914d\u7f6e\u4e2d\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"model_list:\n  - model_name: nvidia-rerank\n    litellm_params:\n      model: nvidia_nim/nvidia/llama-3_2-nv-rerankqa-1b-v2\n      api_key: os.environ/NVIDIA_NIM_API_KEY\n"})}),"\n",(0,l.jsx)(e.h3,{id:"2-\u542f\u52a8\u4ee3\u7406",children:"2. \u542f\u52a8\u4ee3\u7406"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"litellm --config /path/to/config.yaml\n"})}),"\n",(0,l.jsx)(e.h3,{id:"3-\u53d1\u9001\u91cd\u6392\u5e8f\u8bf7\u6c42",children:"3. \u53d1\u9001\u91cd\u6392\u5e8f\u8bf7\u6c42"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://0.0.0.0:4000/rerank \\\n  -H "Authorization: Bearer sk-1234" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "model": "nvidia-rerank",\n    "query": "H100 \u7684 GPU \u5185\u5b58\u5e26\u5bbd\u662f\u591a\u5c11\uff1f",\n    "documents": [\n      "H100 \u63d0\u4f9b\u6bcf GPU 3TB/s \u7684\u5185\u5b58\u5e26\u5bbd\u3002",\n      "A100 \u63d0\u4f9b\u6bcf GPU 2TB/s \u7684\u5185\u5b58\u5e26\u5bbd\u3002",\n      "V100 \u63d0\u4f9b\u6bcf GPU 900GB/s \u7684\u5185\u5b58\u5e26\u5bbd\u3002"\n    ],\n    "top_n": 2\n  }\'\n'})}),"\n",(0,l.jsxs)(e.h2,{id:"v1ranking-\u6a21\u578b-llama-32-nv-rerankqa-1b-v2",children:[(0,l.jsx)(e.code,{children:"/v1/ranking"})," \u6a21\u578b (llama-3.2-nv-rerankqa-1b-v2)"]}),"\n",(0,l.jsxs)(e.p,{children:["\u67d0\u4e9b Nvidia NIM \u91cd\u6392\u5e8f\u6a21\u578b\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"/v1/ranking"})," \u7ec8\u7ed3\u70b9\u800c\u4e0d\u662f\u9ed8\u8ba4\u7684 ",(0,l.jsx)(e.code,{children:"/v1/retrieval/{model}/reranking"})," \u7ec8\u7ed3\u70b9\u3002"]}),"\n",(0,l.jsxs)(e.p,{children:["\u901a\u8fc7 ",(0,l.jsx)(e.code,{children:"ranking/"})," \u524d\u7f00\u5f3a\u5236\u8bf7\u6c42\u53d1\u9001\u5230 ",(0,l.jsx)(e.code,{children:"/v1/ranking"})," \u7ec8\u7ed3\u70b9\uff1a"]}),"\n",(0,l.jsx)(e.h3,{id:"litellm-python-sdk-1",children:"LiteLLM Python SDK"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",metastring:'showLineNumbers title="\u4f7f\u7528 ranking/ \u524d\u7f00\u5f3a\u5236 /v1/ranking \u7ec8\u7ed3\u70b9"',children:'import litellm\nimport os\n\nos.environ[\'NVIDIA_NIM_API_KEY\'] = "nvapi-..."\n\n# \u4f7f\u7528 "ranking/" \u524d\u7f00\u5f3a\u5236 /v1/ranking \u7ec8\u7ed3\u70b9\nresponse = litellm.rerank(\n    model="nvidia_nim/ranking/nvidia/llama-3.2-nv-rerankqa-1b-v2",\n    query="\u65c5\u8005\u53bb\u4e86\u54ea\u4e2a\u65b9\u5411\uff1f",\n    documents=[\n        "\u4e24\u6761\u8def\u5728\u9ec4\u8272\u7684\u6811\u6797\u91cc\u5206\u5c94...",\n        "\u7136\u540e\u4ed6\u9009\u62e9\u4e86\u53e6\u4e00\u6761\uff0c\u540c\u6837\u597d\u8d70...",\n        "\u6211\u5c06\u5728\u5f88\u4e45\u5f88\u4e45\u4ee5\u540e\uff0c\u5728\u67d0\u4e2a\u5730\u65b9\u53f9\u606f\u5730\u8bb2\u8ff0..."\n    ],\n    top_n=3,\n    truncate="END",  # \u53ef\u9009\uff1a\u4ece\u6587\u672c\u672b\u5c3e\u622a\u65ad\u957f\u6587\u672c\n)\n\nprint(response)\n'})}),"\n",(0,l.jsx)(e.h3,{id:"litellm-\u4ee3\u7406",children:"LiteLLM \u4ee3\u7406"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",metastring:'showLineNumbers title="config.yaml"',children:"model_list:\n  - model_name: nvidia-ranking\n    litellm_params:\n      model: nvidia_nim/ranking/nvidia/llama-3.2-nv-rerankqa-1b-v2\n      api_key: os.environ/NVIDIA_NIM_API_KEY\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",metastring:'title="\u5411 LiteLLM \u4ee3\u7406\u53d1\u9001\u8bf7\u6c42"',children:'curl -X POST http://0.0.0.0:4000/rerank \\\n  -H "Authorization: Bearer sk-1234" \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "model": "nvidia-ranking",\n    "query": "\u65c5\u8005\u53bb\u4e86\u54ea\u4e2a\u65b9\u5411\uff1f",\n    "documents": [\n      "\u4e24\u6761\u8def\u5728\u9ec4\u8272\u7684\u6811\u6797\u91cc\u5206\u5c94...",\n      "\u7136\u540e\u4ed6\u9009\u62e9\u4e86\u53e6\u4e00\u6761\uff0c\u540c\u6837\u597d\u8d70..."\n    ],\n    "top_n": 2\n  }\'\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u6a21\u578b\u89e3\u6790\u7406\u89e3",children:"\u6a21\u578b\u89e3\u6790\u7406\u89e3"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsxs)(e.strong,{children:["\u6392\u540d\u7ec8\u7ed3\u70b9 (",(0,l.jsx)(e.code,{children:"/v1/ranking"}),")\uff1a"]})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"model: nvidia_nim/ranking/nvidia/llama-3.2-nv-rerankqa-1b-v2\n       \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u252c\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            \u2502        \u2502                   \u2502\n            \u2502        \u2502                   \u2514\u2500\u2500\u2500\u2500\u25b6 \u6a21\u578b\u540d\u79f0\u53d1\u9001\u7ed9\u63d0\u4f9b\u8005\n            \u2502        \u2502\n            \u2502        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6 \u544a\u8bc9 LiteLLM \u8bf7\u6c42/\u54cd\u5e94\u548c URL \u5e94\u8be5\u53d1\u9001\u5230 Nvidia NIM \u7684 `/v1/ranking` \u7ec8\u7ed3\u70b9\n            \u2502\n            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6 \u63d0\u4f9b\u8005\u524d\u7f00\n\nAPI URL: https://ai.api.nvidia.com/v1/ranking\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u89c6\u89c9\u6d41\u7a0b\uff1a"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:'\u5ba2\u6237\u7aef\u8bf7\u6c42                LiteLLM                              \u63d0\u4f9b\u8005 API\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500              \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500                         \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n# \u9ed8\u8ba4\u91cd\u6392\u5e8f\u7ec8\u7ed3\u70b9\nmodel: "nvidia_nim/nvidia/model-name"\n                            1. \u63d0\u53d6 model: nvidia/model-name\n                            2. \u8def\u7531\u5230\u9ed8\u8ba4\u7ec8\u7ed3\u70b9 \u2500\u2500\u2500\u2500\u2500\u2500\u25b6 POST /v1/retrieval/nvidia/model-name/reranking\n\n\n# \u5f3a\u5236\u6392\u540d\u7ec8\u7ed3\u70b9  \nmodel: "nvidia_nim/ranking/nvidia/model-name"\n                            1. \u68c0\u6d4b "ranking/" \u524d\u7f00\n                            2. \u63d0\u53d6 model: nvidia/model-name\n                            3. \u8def\u7531\u5230 ranking \u7ec8\u7ed3\u70b9 \u2500\u2500\u2500\u2500\u2500\u2500\u25b6 POST /v1/ranking\n                                                                  Body: {"model": "nvidia/model-name", ...}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u4f55\u65f6\u4f7f\u7528\u6bcf\u4e2a\u7ec8\u7ed3\u70b9\uff1a"})}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u7ec8\u7ed3\u70b9"}),(0,l.jsx)(e.th,{children:"\u6a21\u578b\u524d\u7f00"}),(0,l.jsx)(e.th,{children:"\u4f7f\u7528\u573a\u666f"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"/v1/retrieval/{model}/reranking"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"nvidia_nim/<model>"})}),(0,l.jsx)(e.td,{children:"\u5bf9\u4e8e\u5927\u591a\u6570\u91cd\u6392\u5e8f\u6a21\u578b\uff0c\u9ed8\u8ba4\u4f7f\u7528\u6b64\u7ec8\u7ed3\u70b9"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"/v1/ranking"})}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"nvidia_nim/ranking/<model>"})}),(0,l.jsxs)(e.td,{children:["\u7528\u4e8e\u9700\u8981\u6b64\u7ec8\u7ed3\u70b9\u7684\u6a21\u578b\uff0c\u5982 ",(0,l.jsx)(e.code,{children:"nvidia/llama-3.2-nv-rerankqa-1b-v2"})]})]})]})]}),"\n",(0,l.jsx)(e.admonition,{type:"tip",children:(0,l.jsxs)(e.p,{children:["\u5728 ",(0,l.jsx)(e.a,{href:"https://build.nvidia.com/nvidia/llama-3_2-nv-rerankqa-1b-v2/deploy",children:"Nvidia NIM \u6a21\u578b\u90e8\u7f72\u9875\u9762"})," \u4e0a\u67e5\u770b\u60a8\u7684\u6a21\u578b\u9700\u8981\u54ea\u4e2a\u7ec8\u7ed3\u70b9\u3002"]})}),"\n",(0,l.jsx)(e.h2,{id:"api-\u53c2\u6570",children:"API \u53c2\u6570"}),"\n",(0,l.jsx)(e.h3,{id:"\u5fc5\u9700\u53c2\u6570",children:"\u5fc5\u9700\u53c2\u6570"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u53c2\u6570"}),(0,l.jsx)(e.th,{children:"\u7c7b\u578b"}),(0,l.jsx)(e.th,{children:"\u63cf\u8ff0"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"model"})}),(0,l.jsx)(e.td,{children:"string"}),(0,l.jsxs)(e.td,{children:["\u5e26\u6709 ",(0,l.jsx)(e.code,{children:"nvidia_nim/"})," \u524d\u7f00\u7684 Nvidia NIM \u91cd\u6392\u5e8f\u6a21\u578b\u540d\u79f0"]})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"query"})}),(0,l.jsx)(e.td,{children:"string"}),(0,l.jsx)(e.td,{children:"\u8981\u7528\u4e8e\u6392\u540d\u6587\u6863\u7684\u67e5\u8be2"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"documents"})}),(0,l.jsx)(e.td,{children:"array"}),(0,l.jsx)(e.td,{children:"\u9700\u8981\u6392\u540d\u7684\u6587\u6863\u5217\u8868\uff081-1000 \u6587\u6863\uff09"})]})]})]}),"\n",(0,l.jsx)(e.h3,{id:"\u53ef\u9009\u53c2\u6570",children:"\u53ef\u9009\u53c2\u6570"}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u53c2\u6570"}),(0,l.jsx)(e.th,{children:"\u7c7b\u578b"}),(0,l.jsx)(e.th,{children:"\u9ed8\u8ba4\u503c"}),(0,l.jsx)(e.th,{children:"\u63cf\u8ff0"})]})}),(0,l.jsx)(e.tbody,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"top_n"})}),(0,l.jsx)(e.td,{children:"integer"}),(0,l.jsx)(e.td,{children:"\u6240\u6709\u6587\u6863"}),(0,l.jsx)(e.td,{children:"\u8fd4\u56de\u9876\u7ea7\u6392\u540d\u6587\u6863\u7684\u6570\u91cf"})]})})]}),"\n",(0,l.jsx)(e.h3,{id:"nvidia-\u7279\u5b9a\u53c2\u6570",children:"Nvidia \u7279\u5b9a\u53c2\u6570"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:(0,l.jsx)(e.code,{children:"truncate"})}),": \u63a7\u5236\u6587\u672c\u5982\u4f55\u5728\u8d85\u8fc7\u6a21\u578b\u7684\u4e0a\u4e0b\u6587\u7a97\u53e3\u65f6\u8fdb\u884c\u622a\u65ad"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:'"NONE"'}),": \u4e0d\u622a\u65ad\uff08\u5982\u679c\u592a\u957f\u53ef\u80fd\u4f1a\u5bfc\u81f4\u8bf7\u6c42\u5931\u8d25\uff09"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:'"END"'}),": \u4ece\u6587\u672c\u672b\u5c3e\u622a\u65ad"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'response = litellm.rerank(\n    model="nvidia_nim/nvidia/llama-3_2-nv-rerankqa-1b-v2",\n    query="GPU \u6027\u80fd",\n    documents=["\u9ad8\u6027\u80fd\u8ba1\u7b97", "\u5feb\u901f GPU \u5904\u7406"],\n    top_n=2,\n    truncate="END",  # Nvidia \u7279\u5b9a\u53c2\u6570\n)\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u8ba4\u8bc1",children:"\u8ba4\u8bc1"}),"\n",(0,l.jsx)(e.p,{children:"\u8bbe\u7f6e\u60a8\u7684 Nvidia NIM API \u5bc6\u94a5\uff1a"}),"\n",(0,l.jsxs)(s.A,{children:[(0,l.jsx)(d.A,{value:"env",label:"\u73af\u5883\u53d8\u91cf",children:(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'export NVIDIA_NIM_API_KEY="nvapi-..."\n'})})}),(0,l.jsx)(d.A,{value:"python",label:"Python",children:(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'import os\nos.environ[\'NVIDIA_NIM_API_KEY\'] = "nvapi-..."\n\n# \u6216\u76f4\u63a5\u4f20\u9012\nresponse = litellm.rerank(\n    model="nvidia_nim/nvidia/llama-3_2-nv-rerankqa-1b-v2",\n    query="\u6d4b\u8bd5",\n    documents=["\u6587\u68631"],\n    api_key="nvapi-...",\n)\n'})})})]}),"\n",(0,l.jsx)(e.h2,{id:"\u81ea\u5b9a\u4e49-api-\u57fa\u7840-url",children:"\u81ea\u5b9a\u4e49 API \u57fa\u7840 URL"}),"\n",(0,l.jsx)(e.p,{children:"\u60a8\u53ef\u4ee5\u4f7f\u7528\u51e0\u79cd\u65b9\u5f0f\u8986\u76d6\u9ed8\u8ba4\u7684\u57fa\u7840 URL\uff1a"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9009\u9879 1: \u73af\u5883\u53d8\u91cf"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'export NVIDIA_NIM_API_BASE="https://your-custom-endpoint.com"\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9009\u9879 2: \u4f5c\u4e3a\u53c2\u6570\u4f20\u9012"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'response = litellm.rerank(\n    model="nvidia_nim/nvidia/llama-3_2-nv-rerankqa-1b-v2",\n    query="\u6d4b\u8bd5",\n    documents=["\u6587\u68631"],\n    api_base="https://your-custom-endpoint.com",\n)\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9009\u9879 3: \u5b8c\u6574 URL\uff08\u5305\u62ec\u6a21\u578b\u8def\u5f84\uff09"})}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u679c\u60a8\u6709\u5b8c\u6574\u7684\u7ec8\u7ed3\u70b9 URL\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f20\u9012\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-python",children:'response = litellm.rerank(\n    model="nvidia_nim/nvidia/llama-3_2-nv-rerankqa-1b-v2",\n    query="\u6d4b\u8bd5",\n    documents=["\u6587\u68631"],\n    api_base="https://your-custom-endpoint.com/v1/retrieval/nvidia/llama-3_2-nv-rerankqa-1b-v2/reranking",\n)\n'})}),"\n",(0,l.jsxs)(e.p,{children:["LiteLLM \u4f1a\u68c0\u6d4b\u5b8c\u6574 URL\uff08\u901a\u8fc7\u68c0\u67e5\u8def\u5f84\u4e2d\u7684 ",(0,l.jsx)(e.code,{children:"/retrieval/"}),"\uff09\u5e76\u76f4\u63a5\u4f7f\u7528\u5b83\u3002"]}),"\n",(0,l.jsx)(e.h3,{id:"\u5982\u4f55\u83b7\u53d6-api-\u5bc6\u94a5",children:"\u5982\u4f55\u83b7\u53d6 API \u5bc6\u94a5\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:["\u4ece ",(0,l.jsx)(e.a,{href:"https://developer.nvidia.com/nim/",children:"Nvidia \u7684\u7f51\u7ad9"})," \u83b7\u53d6 Nvidia NIM API \u5bc6\u94a5\u3002"]}),"\n",(0,l.jsx)(e.h2,{id:"\u76f8\u5173\u6587\u6863",children:"\u76f8\u5173\u6587\u6863"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"./nvidia_nim",children:"Nvidia NIM - \u4e3b\u6587\u6863"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"./nvidia_nim#%E6%A0%B7%E6%9C%AC%E4%BD%BF%E7%94%A8",children:"Nvidia NIM \u804a\u5929\u8865\u5168"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"../rerank",children:"LiteLLM \u91cd\u6392\u5e8f\u7ec8\u7ed3\u70b9"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://docs.api.nvidia.com/nim/reference/",children:"Nvidia NIM \u5b98\u65b9\u6587\u6863 \u2197"})}),"\n"]})]})}function v(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(u,{...n})}):u(n)}},28453(n,e,i){i.d(e,{R:()=>s,x:()=>d});var r=i(96540);const l={},a=r.createContext(l);function s(n){const e=r.useContext(a);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:s(n.components),r.createElement(a.Provider,{value:e},n.children)}},49489(n,e,i){i.d(e,{A:()=>_});var r=i(96540),l=i(18215),a=i(24245),s=i(56347),d=i(36494),t=i(62814),c=i(45167),o=i(69900);function h(n){return r.Children.toArray(n).filter(n=>"\n"!==n).map(n=>{if(!n||(0,r.isValidElement)(n)&&function(n){const{props:e}=n;return!!e&&"object"==typeof e&&"value"in e}(n))return n;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof n.type?n.type:n.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function u(n){const{values:e,children:i}=n;return(0,r.useMemo)(()=>{const n=e??function(n){return h(n).map(({props:{value:n,label:e,attributes:i,default:r}})=>({value:n,label:e,attributes:i,default:r}))}(i);return function(n){const e=(0,c.XI)(n,(n,e)=>n.value===e.value);if(e.length>0)throw new Error(`Docusaurus error: Duplicate values "${e.map(n=>n.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(n),n},[e,i])}function v({value:n,tabValues:e}){return e.some(e=>e.value===n)}function m({queryString:n=!1,groupId:e}){const i=(0,s.W6)(),l=function({queryString:n=!1,groupId:e}){if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!e)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return e??null}({queryString:n,groupId:e});return[(0,t.aZ)(l),(0,r.useCallback)(n=>{if(!l)return;const e=new URLSearchParams(i.location.search);e.set(l,n),i.replace({...i.location,search:e.toString()})},[l,i])]}function x(n){const{defaultValue:e,queryString:i=!1,groupId:l}=n,a=u(n),[s,t]=(0,r.useState)(()=>function({defaultValue:n,tabValues:e}){if(0===e.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!v({value:n,tabValues:e}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${e.map(n=>n.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const i=e.find(n=>n.default)??e[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:e,tabValues:a})),[c,h]=m({queryString:i,groupId:l}),[x,p]=function({groupId:n}){const e=function(n){return n?`docusaurus.tab.${n}`:null}(n),[i,l]=(0,o.Dv)(e);return[i,(0,r.useCallback)(n=>{e&&l.set(n)},[e,l])]}({groupId:l}),j=(()=>{const n=c??x;return v({value:n,tabValues:a})?n:null})();(0,d.A)(()=>{j&&t(j)},[j]);return{selectedValue:s,selectValue:(0,r.useCallback)(n=>{if(!v({value:n,tabValues:a}))throw new Error(`Can't select invalid tab value=${n}`);t(n),h(n),p(n)},[h,p,a]),tabValues:a}}var p=i(11062);const j="tabList__CuJ",b="tabItem_LNqP";var g=i(74848);function N({className:n,block:e,selectedValue:i,selectValue:r,tabValues:s}){const d=[],{blockElementScrollPositionUntilNextRender:t}=(0,a.a_)(),c=n=>{const e=n.currentTarget,l=d.indexOf(e),a=s[l].value;a!==i&&(t(e),r(a))},o=n=>{let e=null;switch(n.key){case"Enter":c(n);break;case"ArrowRight":{const i=d.indexOf(n.currentTarget)+1;e=d[i]??d[0];break}case"ArrowLeft":{const i=d.indexOf(n.currentTarget)-1;e=d[i]??d[d.length-1];break}}e?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":e},n),children:s.map(({value:n,label:e,attributes:r})=>(0,g.jsx)("li",{role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:n=>{d.push(n)},onKeyDown:o,onClick:c,...r,className:(0,l.A)("tabs__item",b,r?.className,{"tabs__item--active":i===n}),children:e??n},n))})}function k({lazy:n,children:e,selectedValue:i}){const a=(Array.isArray(e)?e:[e]).filter(Boolean);if(n){const n=a.find(n=>n.props.value===i);return n?(0,r.cloneElement)(n,{className:(0,l.A)("margin-top--md",n.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:a.map((n,e)=>(0,r.cloneElement)(n,{key:e,hidden:n.props.value!==i}))})}function I(n){const e=x(n);return(0,g.jsxs)("div",{className:(0,l.A)("tabs-container",j),children:[(0,g.jsx)(N,{...e,...n}),(0,g.jsx)(k,{...e,...n})]})}function _(n){const e=(0,p.A)();return(0,g.jsx)(I,{...n,children:h(n.children)},String(e))}}}]);