"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[40549],{7227(e,n,l){l.d(n,{A:()=>i});l(96540);var s=l(18215);const c="tabItem_Ymn6";var a=l(74848);function i({children:e,hidden:n,className:l}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,s.A)(c,l),hidden:n,children:e})}},28453(e,n,l){l.d(n,{R:()=>i,x:()=>r});var s=l(96540);const c={},a=s.createContext(c);function i(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),s.createElement(a.Provider,{value:n},e.children)}},49489(e,n,l){l.d(n,{A:()=>f});var s=l(96540),c=l(18215),a=l(24245),i=l(56347),r=l(36494),d=l(62814),t=l(45167),o=l(69900);function h(e){return s.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:l}=e;return(0,s.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:l,default:s}})=>({value:e,label:n,attributes:l,default:s}))}(l);return function(e){const n=(0,t.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,l])}function m({value:e,tabValues:n}){return n.some(n=>n.value===e)}function u({queryString:e=!1,groupId:n}){const l=(0,i.W6)(),c=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,d.aZ)(c),(0,s.useCallback)(e=>{if(!c)return;const n=new URLSearchParams(l.location.search);n.set(c,e),l.replace({...l.location,search:n.toString()})},[c,l])]}function x(e){const{defaultValue:n,queryString:l=!1,groupId:c}=e,a=p(e),[i,d]=(0,s.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const l=n.find(e=>e.default)??n[0];if(!l)throw new Error("Unexpected error: 0 tabValues");return l.value}({defaultValue:n,tabValues:a})),[t,h]=u({queryString:l,groupId:c}),[x,j]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[l,c]=(0,o.Dv)(n);return[l,(0,s.useCallback)(e=>{n&&c.set(e)},[n,c])]}({groupId:c}),g=(()=>{const e=t??x;return m({value:e,tabValues:a})?e:null})();(0,r.A)(()=>{g&&d(g)},[g]);return{selectedValue:i,selectValue:(0,s.useCallback)(e=>{if(!m({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);d(e),h(e),j(e)},[h,j,a]),tabValues:a}}var j=l(11062);const g="tabList__CuJ",_="tabItem_LNqP";var v=l(74848);function y({className:e,block:n,selectedValue:l,selectValue:s,tabValues:i}){const r=[],{blockElementScrollPositionUntilNextRender:d}=(0,a.a_)(),t=e=>{const n=e.currentTarget,c=r.indexOf(n),a=i[c].value;a!==l&&(d(n),s(a))},o=e=>{let n=null;switch(e.key){case"Enter":t(e);break;case"ArrowRight":{const l=r.indexOf(e.currentTarget)+1;n=r[l]??r[0];break}case"ArrowLeft":{const l=r.indexOf(e.currentTarget)-1;n=r[l]??r[r.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,c.A)("tabs",{"tabs--block":n},e),children:i.map(({value:e,label:n,attributes:s})=>(0,v.jsx)("li",{role:"tab",tabIndex:l===e?0:-1,"aria-selected":l===e,ref:e=>{r.push(e)},onKeyDown:o,onClick:t,...s,className:(0,c.A)("tabs__item",_,s?.className,{"tabs__item--active":l===e}),children:n??e},e))})}function b({lazy:e,children:n,selectedValue:l}){const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=a.find(e=>e.props.value===l);return e?(0,s.cloneElement)(e,{className:(0,c.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:a.map((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==l}))})}function S(e){const n=x(e);return(0,v.jsxs)("div",{className:(0,c.A)("tabs-container",g),children:[(0,v.jsx)(y,{...n,...e}),(0,v.jsx)(b,{...n,...e})]})}function f(e){const n=(0,j.A)();return(0,v.jsx)(S,{...e,children:h(e.children)},String(n))}},56063(e,n,l){l.r(n),l.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>m,frontMatter:()=>d,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"proxy/caching","title":"\u7f13\u5b58","description":"\u5bf9\u4e8e OpenAI/Anthropic \u63d0\u793a\u7f13\u5b58\uff0c\u8bf7\u53c2\u9605 here","source":"@site/docs/proxy/caching.md","sourceDirName":"proxy","slug":"/proxy/caching","permalink":"/docs/proxy/caching","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u2728 \u4e34\u65f6\u9884\u7b97\u589e\u52a0","permalink":"/docs/proxy/temporary_budget_increase"},"next":{"title":"\u4fee\u6539\u6216\u62d2\u7edd\u4f20\u5165\u8bf7\u6c42","permalink":"/docs/proxy/call_hooks"}}');var c=l(74848),a=l(28453),i=l(49489),r=l(7227);const d={},t="\u7f13\u5b58",o={},h=[{value:"\u652f\u6301\u7684\u7f13\u5b58",id:"\u652f\u6301\u7684\u7f13\u5b58",level:3},{value:"\u5feb\u901f\u5f00\u59cb",id:"\u5feb\u901f\u5f00\u59cb",level:2},{value:"\u6b65\u9aa41\uff1a\u5728 <code>config.yaml</code> \u4e2d\u6dfb\u52a0 <code>cache</code>",id:"\u6b65\u9aa41\u5728-configyaml-\u4e2d\u6dfb\u52a0-cache",level:4},{value:"[\u53ef\u9009] \u6b65\u9aa41.5\uff1a\u6dfb\u52a0 Redis \u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4 ttl",id:"\u53ef\u9009-\u6b65\u9aa415\u6dfb\u52a0-redis-\u547d\u540d\u7a7a\u95f4\u9ed8\u8ba4-ttl",level:4},{value:"\u547d\u540d\u7a7a\u95f4",id:"\u547d\u540d\u7a7a\u95f4",level:4},{value:"Redis \u96c6\u7fa4",id:"redis-\u96c6\u7fa4",level:4},{value:"Redis Sentinel",id:"redis-sentinel",level:4},{value:"TTL",id:"ttl",level:4},{value:"SSL",id:"ssl",level:4},{value:"GCP IAM \u8ba4\u8bc1",id:"gcp-iam-\u8ba4\u8bc1",level:4},{value:"\u6b65\u9aa42\uff1a\u5c06 Redis \u51ed\u8bc1\u6dfb\u52a0\u5230 <code>.env</code>",id:"\u6b65\u9aa42\u5c06-redis-\u51ed\u8bc1\u6dfb\u52a0\u5230-env",level:4},{value:"\u6b65\u9aa43\uff1a\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406",id:"\u6b65\u9aa43\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406",level:4},{value:"\u6b65\u9aa41\uff1a\u5728 <code>config.yaml</code> \u4e2d\u6dfb\u52a0 <code>cache</code>",id:"\u6b65\u9aa41\u5728-configyaml-\u4e2d\u6dfb\u52a0-cache-1",level:4},{value:"\u6b65\u9aa42\uff1a\u5728 <code>.env</code> \u6587\u4ef6\u4e2d\u6dfb\u52a0 Qdrant \u51ed\u8bc1",id:"\u6b65\u9aa42\u5728-env-\u6587\u4ef6\u4e2d\u6dfb\u52a0-qdrant-\u51ed\u8bc1",level:4},{value:"\u6b65\u9aa43\uff1a\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406",id:"\u6b65\u9aa43\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406-1",level:4},{value:"\u6b65\u9aa44. \u6d4b\u8bd5",id:"\u6b65\u9aa44-\u6d4b\u8bd5",level:4},{value:"\u6b65\u9aa41\uff1a\u5728 <code>config.yaml</code> \u4e2d\u6dfb\u52a0 <code>cache</code>",id:"\u6b65\u9aa41\u5728-configyaml-\u4e2d\u6dfb\u52a0-cache-2",level:4},{value:"\u6b65\u9aa42\uff1a\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406",id:"\u6b65\u9aa42\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406",level:4},{value:"\u6b65\u9aa41\uff1a\u5728 <code>config.yaml</code> \u4e2d\u6dfb\u52a0 <code>cache</code>",id:"\u6b65\u9aa41\u5728-configyaml-\u4e2d\u6dfb\u52a0-cache-3",level:4},{value:"\u6b65\u9aa42\uff1a\u5c06 Redis \u51ed\u8bc1\u6dfb\u52a0\u5230 <code>.env</code>",id:"\u6b65\u9aa42\u5c06-redis-\u51ed\u8bc1\u6dfb\u52a0\u5230-env-1",level:4},{value:"\u6b65\u9aa43\uff1a\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406",id:"\u6b65\u9aa43\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406-2",level:4},{value:"\u6b65\u9aa41\uff1a\u5728 <code>config.yaml</code> \u4e2d\u6dfb\u52a0 <code>cache</code>",id:"\u6b65\u9aa41\u5728-configyaml-\u4e2d\u6dfb\u52a0-cache-4",level:4},{value:"\u6b65\u9aa42\uff1a\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406",id:"\u6b65\u9aa42\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406-1",level:4},{value:"\u6b65\u9aa41\uff1a\u5728 <code>config.yaml</code> \u4e2d\u6dfb\u52a0 <code>cache</code>",id:"\u6b65\u9aa41\u5728-configyaml-\u4e2d\u6dfb\u52a0-cache-5",level:4},{value:"\u6b65\u9aa42\uff1a\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406",id:"\u6b65\u9aa42\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406-2",level:4},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:2},{value:"\u57fa\u672c\u7528\u6cd5",id:"\u57fa\u672c\u7528\u6cd5",level:3},{value:"\u52a8\u6001\u7f13\u5b58\u63a7\u5236",id:"\u52a8\u6001\u7f13\u5b58\u63a7\u5236",level:3},{value:"<code>ttl</code>",id:"ttl-1",level:3},{value:"<code>s-maxage</code>",id:"s-maxage",level:3},{value:"<code>no-cache</code>",id:"no-cache",level:3},{value:"<code>no-store</code>",id:"no-store",level:3},{value:"<code>namespace</code>",id:"namespace",level:3},{value:"\u5728\u4ee3\u7406\u4e2d\u8bbe\u7f6e\u7f13\u5b58\uff0c\u4f46\u4e0d\u5728\u5b9e\u9645\u7684 llm api \u8c03\u7528\u4e0a",id:"\u5728\u4ee3\u7406\u4e2d\u8bbe\u7f6e\u7f13\u5b58\u4f46\u4e0d\u5728\u5b9e\u9645\u7684-llm-api-\u8c03\u7528\u4e0a",level:2},{value:"\u7f13\u5b58\u8c03\u8bd5 - <code>/cache/ping</code>",id:"\u7f13\u5b58\u8c03\u8bd5---cacheping",level:2},{value:"\u9ad8\u7ea7\u7528\u6cd5",id:"\u9ad8\u7ea7\u7528\u6cd5",level:2},{value:"\u63a7\u5236\u7f13\u5b58\u751f\u6548\u7684\u8c03\u7528\u7c7b\u578b - (<code>/chat/completions</code>, <code>/embeddings</code> \u7b49)",id:"\u63a7\u5236\u7f13\u5b58\u751f\u6548\u7684\u8c03\u7528\u7c7b\u578b---chatcompletions-embeddings-\u7b49",level:3},{value:"\u5728 <code>config.yaml</code> \u4e2d\u8bbe\u7f6e\u7f13\u5b58\u53c2\u6570",id:"\u5728-configyaml-\u4e2d\u8bbe\u7f6e\u7f13\u5b58\u53c2\u6570",level:3},{value:"\u5220\u9664\u7f13\u5b58\u952e - <code>/cache/delete</code>",id:"\u5220\u9664\u7f13\u5b58\u952e---cachedelete",level:3},{value:"\u4ece\u54cd\u5e94\u4e2d\u67e5\u770b\u7f13\u5b58\u952e",id:"\u4ece\u54cd\u5e94\u4e2d\u67e5\u770b\u7f13\u5b58\u952e",level:4},{value:"<strong>\u9ed8\u8ba4\u5173\u95ed\u7f13\u5b58 - \u53ea\u542f\u7528</strong>",id:"\u9ed8\u8ba4\u5173\u95ed\u7f13\u5b58---\u53ea\u542f\u7528",level:3},{value:"Redis max_connections",id:"redis-max_connections",level:2},{value:"\u652f\u6301\u7684\u7f13\u5b58\u53c2\u6570",id:"\u652f\u6301\u7684\u7f13\u5b58\u53c2\u6570",level:2},{value:"\u63d0\u4f9b\u5546\u7279\u5b9a\u7684\u53ef\u9009\u53c2\u6570\u7f13\u5b58",id:"\u63d0\u4f9b\u5546\u7279\u5b9a\u7684\u53ef\u9009\u53c2\u6570\u7f13\u5b58",level:2},{value:"\u542f\u7528\u63d0\u4f9b\u5546\u4f1a\u8bdd\u7279\u5b9a\u7684\u53ef\u9009\u53c2\u6570\u7f13\u5b58",id:"\u542f\u7528\u63d0\u4f9b\u5546\u4f1a\u8bdd\u7279\u5b9a\u7684\u53ef\u9009\u53c2\u6570\u7f13\u5b58",level:3},{value:"\u9ad8\u7ea7 - \u7528\u6237 API \u5bc6\u94a5\u7f13\u5b58 TTL",id:"\u9ad8\u7ea7---\u7528\u6237-api-\u5bc6\u94a5\u7f13\u5b58-ttl",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"\u7f13\u5b58",children:"\u7f13\u5b58"})}),"\n",(0,c.jsxs)(n.admonition,{type:"note",children:[(0,c.jsx)(n.mdxAdmonitionTitle,{}),(0,c.jsxs)(n.p,{children:["\u5bf9\u4e8e OpenAI/Anthropic \u63d0\u793a\u7f13\u5b58\uff0c\u8bf7\u53c2\u9605 ",(0,c.jsx)(n.a,{href:"/docs/completion/prompt_caching",children:"here"})]})]}),"\n",(0,c.jsx)(n.p,{children:"\u7f13\u5b58 LLM \u54cd\u5e94\u3002LiteLLM \u7684\u7f13\u5b58\u7cfb\u7edf\u4f1a\u5b58\u50a8\u5e76\u91cd\u7528 LLM \u54cd\u5e94\uff0c\u4ee5\u8282\u7701\u6210\u672c\u548c\u51cf\u5c11\u5ef6\u8fdf\u3002\u5f53\u4f60\u518d\u6b21\u53d1\u9001\u76f8\u540c\u7684\u8bf7\u6c42\u65f6\uff0c\u5c06\u8fd4\u56de\u7f13\u5b58\u7684\u54cd\u5e94\uff0c\u800c\u4e0d\u662f\u518d\u6b21\u8c03\u7528 LLM API\u3002"}),"\n",(0,c.jsx)(n.h3,{id:"\u652f\u6301\u7684\u7f13\u5b58",children:"\u652f\u6301\u7684\u7f13\u5b58"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\u5185\u5b58\u7f13\u5b58"}),"\n",(0,c.jsx)(n.li,{children:"\u78c1\u76d8\u7f13\u5b58"}),"\n",(0,c.jsx)(n.li,{children:"Redis \u7f13\u5b58"}),"\n",(0,c.jsx)(n.li,{children:"Qdrant \u8bed\u4e49\u7f13\u5b58"}),"\n",(0,c.jsx)(n.li,{children:"Redis \u8bed\u4e49\u7f13\u5b58"}),"\n",(0,c.jsx)(n.li,{children:"s3 \u6876\u7f13\u5b58"}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"\u5feb\u901f\u5f00\u59cb",children:"\u5feb\u901f\u5f00\u59cb"}),"\n",(0,c.jsxs)(i.A,{children:[(0,c.jsxs)(r.A,{value:"redis",label:"Redis \u7f13\u5b58",children:[(0,c.jsxs)(n.p,{children:["\u53ef\u4ee5\u901a\u8fc7\u5728 ",(0,c.jsx)(n.code,{children:"config.yaml"})," \u4e2d\u6dfb\u52a0 ",(0,c.jsx)(n.code,{children:"cache"})," \u952e\u6765\u542f\u7528\u7f13\u5b58"]}),(0,c.jsxs)(n.h4,{id:"\u6b65\u9aa41\u5728-configyaml-\u4e2d\u6dfb\u52a0-cache",children:["\u6b65\u9aa41\uff1a\u5728 ",(0,c.jsx)(n.code,{children:"config.yaml"})," \u4e2d\u6dfb\u52a0 ",(0,c.jsx)(n.code,{children:"cache"})]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: gpt-3.5-turbo\n    litellm_params:\n      model: gpt-3.5-turbo\n  - model_name: text-embedding-ada-002\n    litellm_params:\n      model: text-embedding-ada-002\n\nlitellm_settings:\n  set_verbose: True\n  cache: True          # \u8bbe\u7f6e\u7f13\u5b58\u54cd\u5e94\u4e3a True\uff0cLiteLLM \u9ed8\u8ba4\u4f7f\u7528 Redis \u7f13\u5b58\n"})}),(0,c.jsx)(n.h4,{id:"\u53ef\u9009-\u6b65\u9aa415\u6dfb\u52a0-redis-\u547d\u540d\u7a7a\u95f4\u9ed8\u8ba4-ttl",children:"[\u53ef\u9009] \u6b65\u9aa41.5\uff1a\u6dfb\u52a0 Redis \u547d\u540d\u7a7a\u95f4\uff0c\u9ed8\u8ba4 ttl"}),(0,c.jsx)(n.h4,{id:"\u547d\u540d\u7a7a\u95f4",children:"\u547d\u540d\u7a7a\u95f4"}),(0,c.jsx)(n.p,{children:"\u5982\u679c\u4f60\u60f3\u4e3a\u4f60\u7684\u952e\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u547d\u540d\u7a7a\u95f4\uff0c\u4f8b\u5982\uff1a"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:'litellm_settings:\n  cache: true \n  cache_params:        # \u8bbe\u7f6e Redis \u7f13\u5b58\u53c2\u6570\n    type: redis\n    namespace: "litellm.caching.caching"\n'})}),(0,c.jsx)(n.p,{children:"\u90a3\u4e48\u952e\u5c06\u88ab\u5b58\u50a8\u4e3a\uff1a"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"litellm.caching.caching:<hash>\n"})}),(0,c.jsx)(n.h4,{id:"redis-\u96c6\u7fa4",children:"Redis \u96c6\u7fa4"}),(0,c.jsxs)(i.A,{children:[(0,c.jsx)(r.A,{value:"redis-cluster-config",label:"\u5728 `config.yaml` \u4e2d\u8bbe\u7f6e",children:(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:'model_list:\n  - model_name: "*"\n    litellm_params:\n      model: "*"\n\n\nlitellm_settings:\n  cache: True\n  cache_params:\n    type: redis\n    redis_startup_nodes: [{"host": "127.0.0.1", "port": "7001"}] \n'})})}),(0,c.jsxs)(r.A,{value:"redis-env",label:"\u5728 `.env` \u4e2d\u8bbe\u7f6e",children:[(0,c.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u5728 ",(0,c.jsx)(n.code,{children:".env"})," \u6587\u4ef6\u4e2d\u901a\u8fc7\u8bbe\u7f6e ",(0,c.jsx)(n.code,{children:"REDIS_CLUSTER_NODES"})," \u6765\u914d\u7f6e Redis \u96c6\u7fa4"]}),(0,c.jsx)(n.p,{children:(0,c.jsxs)(n.strong,{children:["\u793a\u4f8b ",(0,c.jsx)(n.code,{children:"REDIS_CLUSTER_NODES"})," \u503c"]})}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-env",children:'REDIS_CLUSTER_NODES = "[{"host": "127.0.0.1", "port": "7001"}, {"host": "127.0.0.1", "port": "7003"}, {"host": "127.0.0.1", "port": "7004"}, {"host": "127.0.0.1", "port": "7005"}, {"host": "127.0.0.1", "port": "7006"}, {"host": "127.0.0.1", "port": "7007"}]"\n'})}),(0,c.jsxs)(n.admonition,{type:"note",children:[(0,c.jsxs)(n.p,{children:["\u4ee5\u4e0b\u662f\u4e00\u4e2a\u5728 ",(0,c.jsx)(n.code,{children:".env"})," \u4e2d\u8bbe\u7f6e Redis \u96c6\u7fa4\u8282\u70b9\u7684 Python \u811a\u672c\u793a\u4f8b\uff1a"]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:'# \u5217\u51fa\u542f\u52a8\u8282\u70b9\nstartup_nodes = [\n    {"host": "127.0.0.1", "port": "7001"},\n    {"host": "127.0.0.1", "port": "7003"},\n    {"host": "127.0.0.1", "port": "7004"},\n    {"host": "127.0.0.1", "port": "7005"},\n    {"host": "127.0.0.1", "port": "7006"},\n    {"host": "127.0.0.1", "port": "7007"},\n]\n\n# \u5c06\u542f\u52a8\u8282\u70b9\u8bbe\u7f6e\u5728\u73af\u5883\u53d8\u91cf\u4e2d\nos.environ["REDIS_CLUSTER_NODES"] = json.dumps(startup_nodes)\nprint("REDIS_CLUSTER_NODES", os.environ["REDIS_CLUSTER_NODES"])\n'})})]})]})]}),(0,c.jsx)(n.h4,{id:"redis-sentinel",children:"Redis Sentinel"}),(0,c.jsxs)(i.A,{children:[(0,c.jsx)(r.A,{value:"redis-sentinel-config",label:"\u5728 `config.yaml` \u4e2d\u8bbe\u7f6e",children:(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:'model_list:\n  - model_name: "*"\n    litellm_params:\n      model: "*"\n\n\nlitellm_settings:\n  cache: true\n  cache_params:\n    type: "redis"\n    service_name: "mymaster"\n    sentinel_nodes: [["localhost", 26379]]\n    sentinel_password: "password" # [\u53ef\u9009]\n'})})}),(0,c.jsxs)(r.A,{value:"redis-env",label:"\u5728 `.env` \u4e2d\u8bbe\u7f6e",children:[(0,c.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u5728 ",(0,c.jsx)(n.code,{children:".env"})," \u6587\u4ef6\u4e2d\u901a\u8fc7\u8bbe\u7f6e ",(0,c.jsx)(n.code,{children:"REDIS_SENTINEL_NODES"})," \u6765\u914d\u7f6e Redis Sentinel"]}),(0,c.jsx)(n.p,{children:(0,c.jsxs)(n.strong,{children:["\u793a\u4f8b ",(0,c.jsx)(n.code,{children:"REDIS_SENTINEL_NODES"})," \u503c"]})}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-env",children:'REDIS_SENTINEL_NODES=\'[["localhost", 26379]]\'\nREDIS_SERVICE_NAME = "mymaster"\nREDIS_SENTINEL_PASSWORD = "password"\n'})}),(0,c.jsxs)(n.admonition,{type:"note",children:[(0,c.jsxs)(n.p,{children:["\u4ee5\u4e0b\u662f\u4e00\u4e2a\u5728 ",(0,c.jsx)(n.code,{children:".env"})," \u4e2d\u8bbe\u7f6e Redis Sentinel \u8282\u70b9\u7684 Python \u811a\u672c\u793a\u4f8b\uff1a"]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:'# \u5217\u51fa\u542f\u52a8\u8282\u70b9\nsentinel_nodes = [["localhost", 26379]]\n\n# \u5c06\u542f\u52a8\u8282\u70b9\u8bbe\u7f6e\u5728\u73af\u5883\u53d8\u91cf\u4e2d\nos.environ["REDIS_SENTINEL_NODES"] = json.dumps(sentinel_nodes)\nprint("REDIS_SENTINEL_NODES", os.environ["REDIS_SENTINEL_NODES"])\n'})})]})]})]}),(0,c.jsx)(n.h4,{id:"ttl",children:"TTL"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:"litellm_settings:\n  cache: true \n  cache_params:        # \u8bbe\u7f6e Redis \u7f13\u5b58\u53c2\u6570\n    type: redis\n    ttl: 600 # \u5c06\u7f13\u5b58\u5728 Redis \u4e2d 600 \u79d2\n    # default_in_memory_ttl: Optional[float], \u9ed8\u8ba4\u4e3a None\u3002\u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\u3002\n    # default_in_redis_ttl: Optional[float], \u9ed8\u8ba4\u4e3a None\u3002\u4ee5\u79d2\u4e3a\u5355\u4f4d\u7684\u65f6\u95f4\u3002\n"})}),(0,c.jsx)(n.h4,{id:"ssl",children:"SSL"}),(0,c.jsxs)(n.p,{children:["\u53ea\u9700\u5728 ",(0,c.jsx)(n.code,{children:".env"})," \u4e2d\u8bbe\u7f6e ",(0,c.jsx)(n.code,{children:'REDIS_SSL="True"'}),"\uff0cLiteLLM \u5c06\u81ea\u52a8\u8bfb\u53d6\u6b64\u4fe1\u606f\u3002"]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-env",children:'REDIS_SSL="True"\n'})}),(0,c.jsxs)(n.p,{children:["\u5bf9\u4e8e\u5feb\u901f\u6d4b\u8bd5\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 ",(0,c.jsx)(n.code,{children:"REDIS_URL"}),"\uff0c\u4f8b\u5982\uff1a"]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'REDIS_URL="rediss://.."\n'})}),(0,c.jsxs)(n.p,{children:["\u4f46\u4e0d\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 ",(0,c.jsx)(n.code,{children:"REDIS_URL"}),"\u3002\u6211\u4eec\u6ce8\u610f\u5230\u4e0e\u4e4b\u76f8\u6bd4\u4f7f\u7528 ",(0,c.jsx)(n.code,{children:"redis_host"}),", ",(0,c.jsx)(n.code,{children:"port"})," \u7b49\u7684\u65b9\u5f0f\u5b58\u5728\u6027\u80fd\u5dee\u5f02\u3002"]}),(0,c.jsx)(n.h4,{id:"gcp-iam-\u8ba4\u8bc1",children:"GCP IAM \u8ba4\u8bc1"}),(0,c.jsx)(n.p,{children:"\u5bf9\u4e8e\u901a\u8fc7 GCP IAM \u8ba4\u8bc1\u7684 GCP Memorystore Redis\uff0c\u5b89\u88c5\u6240\u9700\u7684\u4f9d\u8d56\uff1a"}),(0,c.jsx)(n.admonition,{type:"info",children:(0,c.jsx)(n.p,{children:"Redis \u901a\u8fc7 GCP IAM \u53ea\u652f\u6301 GCP \u5e76\u4e14\u4ec5\u9650\u4e8e Redis \u96c6\u7fa4\u3002"})}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"pip install google-cloud-iam\n"})}),(0,c.jsxs)(i.A,{children:[(0,c.jsxs)(r.A,{value:"gcp-iam-config",label:"\u5728 `config.yaml` \u4e2d\u8bbe\u7f6e",children:[(0,c.jsx)(n.p,{children:"\u5bf9\u4e8e\u5e26\u6709 GCP IAM \u7684 Redis \u96c6\u7fa4\uff1a"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:'litellm_settings:\n  cache: True\n  cache_params:\n    type: redis\n    redis_startup_nodes: [{"host": "10.128.0.2", "port": 6379}, {"host": "10.128.0.2", "port": 11008}]\n    gcp_service_account: "projects/-/serviceAccounts/your-sa@project.iam.gserviceaccount.com"\n    ssl: true\n    ssl_cert_reqs: null\n    ssl_check_hostname: false\n'})})]}),(0,c.jsxs)(r.A,{value:"gcp-iam-env",label:"\u5728 `.env` \u4e2d\u8bbe\u7f6e",children:[(0,c.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u5728 ",(0,c.jsx)(n.code,{children:".env"})," \u6587\u4ef6\u4e2d\u901a\u8fc7\u8bbe\u7f6e ",(0,c.jsx)(n.code,{children:"REDIS_GCP_SERVICE_ACCOUNT"})," \u6765\u914d\u7f6e GCP IAM Redis \u8ba4\u8bc1\uff1a"]}),(0,c.jsx)(n.p,{children:"\u5bf9\u4e8e Redis \u96c6\u7fa4\uff1a"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-env",children:'REDIS_CLUSTER_NODES=\'[{"host": "10.128.0.2", "port": 6379}, {"host": "10.128.0.2", "port": 11008}]\'\nREDIS_GCP_SERVICE_ACCOUNT="projects/-/serviceAccounts/your-sa@project.iam.gserviceaccount.com"\nREDIS_GCP_SSL_CA_CERTS="./server-ca.pem"\nREDIS_SSL="True"\nREDIS_SSL_CERT_REQS="None"\nREDIS_SSL_CHECK_HOSTNAME="False"\n'})}),(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"GCP \u8ba4\u8bc1\u8bbe\u7f6e"})}),(0,c.jsx)(n.p,{children:"\u786e\u4fdd\u4f60\u7684 GCP \u51ed\u636e\u5df2\u914d\u7f6e\uff1a"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'# \u9009\u98791\uff1a\u670d\u52a1\u8d26\u6237\u5bc6\u94a5\u6587\u4ef6\nexport GOOGLE_APPLICATION_CREDENTIALS="/path/to/service-account-key.json"\n\n# \u9009\u98792\uff1a\u5982\u679c\u4f60\u5728\u8fd0\u884c\u4e8e\u5e26\u6709\u9644\u52a0\u670d\u52a1\u8d26\u6237\u7684 GCP \u8ba1\u7b97\u673a\u5b9e\u4f8b\u4e0a\n# \u4e0d\u9700\u8981\u989d\u5916\u8bbe\u7f6e\n'})}),(0,c.jsx)(n.p,{children:":::"})]})]}),(0,c.jsxs)(n.h4,{id:"\u6b65\u9aa42\u5c06-redis-\u51ed\u8bc1\u6dfb\u52a0\u5230-env",children:["\u6b65\u9aa42\uff1a\u5c06 Redis \u51ed\u8bc1\u6dfb\u52a0\u5230 ",(0,c.jsx)(n.code,{children:".env"})]}),(0,c.jsxs)(n.p,{children:["\u8bbe\u7f6e ",(0,c.jsx)(n.code,{children:"REDIS_URL"})," \u6216\u8005 ",(0,c.jsx)(n.code,{children:"REDIS_HOST"}),"\uff0c\u4ee5\u542f\u7528\u7f13\u5b58\u3002"]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"REDIS_URL = \"\"        # REDIS_URL='redis://username:password@hostname:port/database'\n## OR ## \nREDIS_HOST = \"\"       # REDIS_HOST='redis-18841.c274.us-east-1-3.ec2.cloud.redislabs.com'\nREDIS_PORT = \"\"       # REDIS_PORT='18841'\nREDIS_PASSWORD = \"\"   # REDIS_PASSWORD='liteLlmIsAmazing'\nREDIS_USERNAME = \"\"   # REDIS_USERNAME='my-redis-username' [\u53ef\u9009] \u5982\u679c\u4f60\u7684 Redis \u670d\u52a1\u5668\u9700\u8981\u7528\u6237\u540d\nREDIS_SSL = \"True\"    # REDIS_SSL='True' \u9ed8\u8ba4\u4e3a False\n"})}),(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"\u9644\u52a0\u53c2\u6570"}),"\n\u4f60\u53ef\u4ee5\u901a\u8fc7\u5c06\u53d8\u91cf\u548c\u503c\u5b58\u50a8\u5728\u73af\u5883\u53d8\u91cf\u4e2d\u6765\u4f20\u9012\u4efb\u4f55\u989d\u5916\u7684 ",(0,c.jsx)(n.code,{children:"redis.Redis"})," \u53c2\u6570\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'REDIS_<redis-kwarg-name> = ""\n'})}),(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"https://github.com/BerriAI/litellm/blob/4d7ff1b33b9991dcf38d821266290631d9bcd2dd/litellm/_redis.py#L40",children:(0,c.jsx)(n.strong,{children:"\u67e5\u770b\u5b83\u662f\u5982\u4f55\u4ece\u73af\u5883\u4e2d\u8bfb\u53d6\u7684"})})}),(0,c.jsx)(n.h4,{id:"\u6b65\u9aa43\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406",children:"\u6b65\u9aa43\uff1a\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"$ litellm --config /path/to/config.yaml\n"})})]}),(0,c.jsxs)(r.A,{value:"qdrant-semantic",label:"Qdrant \u8bed\u4e49\u7f13\u5b58",children:[(0,c.jsxs)(n.p,{children:["\u53ef\u4ee5\u901a\u8fc7\u5728 ",(0,c.jsx)(n.code,{children:"config.yaml"})," \u4e2d\u6dfb\u52a0 ",(0,c.jsx)(n.code,{children:"cache"})," \u952e\u6765\u542f\u7528\u7f13\u5b58"]}),(0,c.jsxs)(n.h4,{id:"\u6b65\u9aa41\u5728-configyaml-\u4e2d\u6dfb\u52a0-cache-1",children:["\u6b65\u9aa41\uff1a\u5728 ",(0,c.jsx)(n.code,{children:"config.yaml"})," \u4e2d\u6dfb\u52a0 ",(0,c.jsx)(n.code,{children:"cache"})]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: fake-openai-endpoint\n    litellm_params:\n      model: openai/fake\n      api_key: fake-key\n      api_base: https://exampleopenaiendpoint-production.up.railway.app/\n  - model_name: openai-embedding\n    litellm_params:\n      model: openai/text-embedding-3-small\n      api_key: os.environ/OPENAI_API_KEY\n\nlitellm_settings:\n  set_verbose: True\n  cache: True          # \u8bbe\u7f6e\u7f13\u5b58\u54cd\u5e94\u4e3a True\uff0cLiteLLM \u9ed8\u8ba4\u4f7f\u7528 Redis \u7f13\u5b58\n  cache_params:\n    type: qdrant-semantic\n    qdrant_semantic_cache_embedding_model: openai-embedding # \u5728 `model_list` \u4e2d\u5b9a\u4e49\u7684\u6a21\u578b\n    qdrant_collection_name: test_collection\n    qdrant_quantization_config: binary\n    similarity_threshold: 0.8   # \u8bed\u4e49\u7f13\u5b58\u76f8\u4f3c\u5ea6\u9608\u503c\n"})}),(0,c.jsxs)(n.h4,{id:"\u6b65\u9aa42\u5728-env-\u6587\u4ef6\u4e2d\u6dfb\u52a0-qdrant-\u51ed\u8bc1",children:["\u6b65\u9aa42\uff1a\u5728 ",(0,c.jsx)(n.code,{children:".env"})," \u6587\u4ef6\u4e2d\u6dfb\u52a0 Qdrant \u51ed\u8bc1"]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'QDRANT_API_KEY = "16rJUMBRx*************"\nQDRANT_API_BASE = "https://5392d382-45*********.cloud.qdrant.io"\n'})}),(0,c.jsx)(n.h4,{id:"\u6b65\u9aa43\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406-1",children:"\u6b65\u9aa43\uff1a\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"$ litellm --config /path/to/config.yaml\n"})}),(0,c.jsx)(n.h4,{id:"\u6b65\u9aa44-\u6d4b\u8bd5",children:"\u6b65\u9aa44. \u6d4b\u8bd5"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'curl -i http://localhost:4000/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer sk-1234" \\\n  -d \'{\n    "model": "fake-openai-endpoint",\n    "messages": [\n      {"role": "user", "content": "Hello"}\n    ]\n  }\'\n'})}),(0,c.jsx)(n.p,{children:(0,c.jsxs)(n.strong,{children:["\u671f\u671b\u5728\u54cd\u5e94\u5934\u4e2d\u770b\u5230 ",(0,c.jsx)(n.code,{children:"x-litellm-semantic-similarity"})," \u5f53\u8bed\u4e49\u7f13\u5b58\u5f00\u542f\u65f6"]})})]}),(0,c.jsxs)(r.A,{value:"s3",label:"S3 \u7f13\u5b58",children:[(0,c.jsxs)(n.h4,{id:"\u6b65\u9aa41\u5728-configyaml-\u4e2d\u6dfb\u52a0-cache-2",children:["\u6b65\u9aa41\uff1a\u5728 ",(0,c.jsx)(n.code,{children:"config.yaml"})," \u4e2d\u6dfb\u52a0 ",(0,c.jsx)(n.code,{children:"cache"})]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: gpt-3.5-turbo\n    litellm_params:\n      model: gpt-3.5-turbo\n  - model_name: text-embedding-ada-002\n    litellm_params:\n      model: text-embedding-ada-002\n\nlitellm_settings:\n  set_verbose: True\n  cache: True          # \u8bbe\u7f6e\u7f13\u5b58\u54cd\u5e94\u4e3a True\n  cache_params:        # \u8bbe\u7f6e S3 \u7f13\u5b58\u53c2\u6570\n    type: s3\n    s3_bucket_name: cache-bucket-litellm   # AWS \u6876\u540d\u79f0\n    s3_region_name: us-west-2              # AWS \u533a\u57df\u540d\n    s3_aws_access_key_id: os.environ/AWS_ACCESS_KEY_ID  # \u4f7f\u7528 `os.environ/<\u53d8\u91cf\u540d>` \u6765\u4f20\u9012\u73af\u5883\u53d8\u91cf\u3002\u8fd9\u662f S3 \u7684 AWS \u8bbf\u95ee\u5bc6\u94a5 ID\n    s3_aws_secret_access_key: os.environ/AWS_SECRET_ACCESS_KEY  # S3 \u7684 AWS \u5bc6\u94a5\u8bbf\u95ee\u5bc6\u94a5\n    s3_endpoint_url: https://s3.amazonaws.com  # [\u53ef\u9009] S3 \u7aef\u70b9 URL\uff0c\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f Backblaze \u6216 Cloudflare S3 \u6876\n"})}),(0,c.jsx)(n.h4,{id:"\u6b65\u9aa42\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406",children:"\u6b65\u9aa42\uff1a\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"$ litellm --config /path/to/config.yaml\n"})})]}),(0,c.jsxs)(r.A,{value:"redis-sem",label:"Redis \u8bed\u4e49\u7f13\u5b58",children:[(0,c.jsxs)(n.p,{children:["\u53ef\u4ee5\u901a\u8fc7\u5728 ",(0,c.jsx)(n.code,{children:"config.yaml"})," \u4e2d\u6dfb\u52a0 ",(0,c.jsx)(n.code,{children:"cache"})," \u952e\u6765\u542f\u7528\u7f13\u5b58"]}),(0,c.jsxs)(n.h4,{id:"\u6b65\u9aa41\u5728-configyaml-\u4e2d\u6dfb\u52a0-cache-3",children:["\u6b65\u9aa41\uff1a\u5728 ",(0,c.jsx)(n.code,{children:"config.yaml"})," \u4e2d\u6dfb\u52a0 ",(0,c.jsx)(n.code,{children:"cache"})]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:'model_list:\n  - model_name: gpt-3.5-turbo\n    litellm_params:\n      model: gpt-3.5-turbo\n  - model_name: azure-embedding-model\n    litellm_params:\n      model: azure/azure-embedding-model\n      api_base: os.environ/AZURE_API_BASE\n      api_key: os.environ/AZURE_API_KEY\n      api_version: "2023-07-01-preview"\n\nlitellm_settings:\n  set_verbose: True\n  cache: True          # \u8bbe\u7f6e\u7f13\u5b58\u54cd\u5e94\u4e3a True\n  cache_params:\n    type: "redis-semantic"  \n    similarity_threshold: 0.8   # \u8bed\u4e49\u7f13\u5b58\u76f8\u4f3c\u5ea6\u9608\u503c\n    redis_semantic_cache_embedding_model: azure-embedding-model # \u5728 `model_list` \u4e2d\u5b9a\u4e49\u7684\u6a21\u578b\n'})}),(0,c.jsxs)(n.h4,{id:"\u6b65\u9aa42\u5c06-redis-\u51ed\u8bc1\u6dfb\u52a0\u5230-env-1",children:["\u6b65\u9aa42\uff1a\u5c06 Redis \u51ed\u8bc1\u6dfb\u52a0\u5230 ",(0,c.jsx)(n.code,{children:".env"})]}),(0,c.jsxs)(n.p,{children:["\u8bbe\u7f6e ",(0,c.jsx)(n.code,{children:"REDIS_URL"})," \u6216\u8005 ",(0,c.jsx)(n.code,{children:"REDIS_HOST"}),"\uff0c\u4ee5\u542f\u7528\u7f13\u5b58\u3002"]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"REDIS_URL = \"\"        # REDIS_URL='redis://username:password@hostname:port/database'\n## OR ## \nREDIS_HOST = \"\"       # REDIS_HOST='redis-18841.c274.us-east-1-3.ec2.cloud.redislabs.com'\n"})}),(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"\u9644\u52a0\u53c2\u6570"}),"\n\u4f60\u53ef\u4ee5\u901a\u8fc7\u5c06\u53d8\u91cf\u548c\u503c\u5b58\u50a8\u5728\u73af\u5883\u53d8\u91cf\u4e2d\u6765\u4f20\u9012\u4efb\u4f55\u989d\u5916\u7684 ",(0,c.jsx)(n.code,{children:"redis.Redis"})," \u53c2\u6570\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'REDIS_<redis-kwarg-name> = ""\n'})}),(0,c.jsx)(n.h4,{id:"\u6b65\u9aa43\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406-2",children:"\u6b65\u9aa43\uff1a\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"$ litellm --config /path/to/config.yaml\n"})})]}),(0,c.jsxs)(r.A,{value:"local",label:"\u5185\u5b58\u7f13\u5b58",children:[(0,c.jsxs)(n.h4,{id:"\u6b65\u9aa41\u5728-configyaml-\u4e2d\u6dfb\u52a0-cache-4",children:["\u6b65\u9aa41\uff1a\u5728 ",(0,c.jsx)(n.code,{children:"config.yaml"})," \u4e2d\u6dfb\u52a0 ",(0,c.jsx)(n.code,{children:"cache"})]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:"litellm_settings:\n  cache: True\n  cache_params:\n    type: local\n"})}),(0,c.jsx)(n.h4,{id:"\u6b65\u9aa42\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406-1",children:"\u6b65\u9aa42\uff1a\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"$ litellm --config /path/to/config.yaml\n"})})]}),(0,c.jsxs)(r.A,{value:"disk",label:"\u78c1\u76d8\u7f13\u5b58",children:[(0,c.jsxs)(n.h4,{id:"\u6b65\u9aa41\u5728-configyaml-\u4e2d\u6dfb\u52a0-cache-5",children:["\u6b65\u9aa41\uff1a\u5728 ",(0,c.jsx)(n.code,{children:"config.yaml"})," \u4e2d\u6dfb\u52a0 ",(0,c.jsx)(n.code,{children:"cache"})]}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:"litellm_settings:\n  cache: True\n  cache_params:\n    type: disk\n    disk_cache_dir: /tmp/litellm-cache  # \u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a ./.litellm_cache\n"})}),(0,c.jsx)(n.h4,{id:"\u6b65\u9aa42\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406-2",children:"\u6b65\u9aa42\uff1a\u4f7f\u7528\u914d\u7f6e\u8fd0\u884c\u4ee3\u7406"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"$ litellm --config /path/to/config.yaml\n"})})]})]}),"\n",(0,c.jsx)(n.h2,{id:"\u4f7f\u7528",children:"\u4f7f\u7528"}),"\n",(0,c.jsx)(n.h3,{id:"\u57fa\u672c\u7528\u6cd5",children:"\u57fa\u672c\u7528\u6cd5"}),"\n",(0,c.jsxs)(i.A,{children:[(0,c.jsxs)(r.A,{value:"chat_completions",label:"/chat/completions",children:[(0,c.jsx)(n.p,{children:"\u53d1\u9001\u76f8\u540c\u7684\u8bf7\u6c42\u4e24\u6b21\uff1a"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'curl http://0.0.0.0:4000/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n     "model": "gpt-3.5-turbo",\n     "messages": [{"role": "user", "content": "write a poem about litellm!"}],\n     "temperature": 0.7\n   }\'\n\ncurl http://0.0.0.0:4000/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n     "model": "gpt-3.5-turbo",\n     "messages": [{"role": "user", "content": "write a poem about litellm!"}],\n     "temperature": 0.7\n   }\'\n'})})]}),(0,c.jsxs)(r.A,{value:"embeddings",label:"/embeddings",children:[(0,c.jsx)(n.p,{children:"\u53d1\u9001\u76f8\u540c\u7684\u8bf7\u6c42\u4e24\u6b21\uff1a"}),(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'curl --location \'http://0.0.0.0:4000/embeddings\' \\\n  --header \'Content-Type: application/json\' \\\n  --data \' {\n  "model": "text-embedding-ada-002",\n  "input": ["write a litellm poem"]\n  }\'\n\ncurl --location \'http://0.0.0.0:4000/embeddings\' \\\n  --header \'Content-Type: application/json\' \\\n  --data \' {\n  "model": "text-embedding-ada-002",\n  "input": ["write a litellm poem"]\n  }\'\n'})})]})]}),"\n",(0,c.jsx)(n.h3,{id:"\u52a8\u6001\u7f13\u5b58\u63a7\u5236",children:"\u52a8\u6001\u7f13\u5b58\u63a7\u5236"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"\u53c2\u6570"}),(0,c.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,c.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"ttl"})}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.em,{children:"\u53ef\u9009(int)"})}),(0,c.jsx)(n.td,{children:"\u5c06\u54cd\u5e94\u7f13\u5b58\u5728\u7528\u6237\u5b9a\u4e49\u7684\u65f6\u95f4\u957f\u5ea6\uff08\u79d2\uff09\u5185"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"s-maxage"})}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.em,{children:"\u53ef\u9009(int)"})}),(0,c.jsx)(n.td,{children:"\u53ea\u63a5\u53d7\u5728\u7528\u6237\u5b9a\u4e49\u8303\u56f4\u5185\uff08\u79d2\uff09\u7684\u7f13\u5b58\u54cd\u5e94"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"no-cache"})}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.em,{children:"\u53ef\u9009(bool)"})}),(0,c.jsx)(n.td,{children:"\u4e0d\u5b58\u50a8\u54cd\u5e94\u5728\u7f13\u5b58\u4e2d\u3002"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"no-store"})}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.em,{children:"\u53ef\u9009(bool)"})}),(0,c.jsx)(n.td,{children:"\u4e0d\u7f13\u5b58\u54cd\u5e94"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:(0,c.jsx)(n.code,{children:"namespace"})}),(0,c.jsx)(n.td,{children:(0,c.jsx)(n.em,{children:"\u53ef\u9009(str)"})}),(0,c.jsx)(n.td,{children:"\u5c06\u54cd\u5e94\u7f13\u5b58\u5728\u7528\u6237\u5b9a\u4e49\u7684\u547d\u540d\u7a7a\u95f4\u4e0b"})]})]})]}),"\n",(0,c.jsx)(n.p,{children:"\u6bcf\u4e2a\u7f13\u5b58\u53c2\u6570\u53ef\u4ee5\u5728\u6bcf\u6b21\u8bf7\u6c42\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u63a7\u5236\u3002\u4ee5\u4e0b\u662f\u6bcf\u4e2a\u53c2\u6570\u7684\u793a\u4f8b\uff1a"}),"\n",(0,c.jsx)(n.h3,{id:"ttl-1",children:(0,c.jsx)(n.code,{children:"ttl"})}),"\n",(0,c.jsx)(n.p,{children:"\u8bbe\u7f6e\u54cd\u5e94\u7f13\u5b58\u7684\u65f6\u95f4\u957f\u5ea6\uff08\u79d2\uff09\u3002"}),"\n",(0,c.jsxs)(i.A,{children:[(0,c.jsx)(r.A,{value:"openai",label:"OpenAI Python SDK",children:(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:'from openai import OpenAI\n\nclient = OpenAI(\n    api_key="your-api-key",\n    base_url="http://0.0.0.0:4000"\n)\n\nchat_completion = client.chat.completions.create(\n    messages=[{"role": "user", "content": "Hello"}],\n    model="gpt-3.5-turbo",\n    extra_body={\n        "cache": {\n            "ttl": 300  # \u7f13\u5b58\u54cd\u5e94 5 \u5206\u949f\n        }\n    }\n)\n'})})}),(0,c.jsx)(r.A,{value:"curl",label:"curl",children:(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'curl http://localhost:4000/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer sk-1234" \\\n  -d \'{\n    "model": "gpt-3.5-turbo",\n    "cache": {"ttl": 300},\n    "messages": [\n      {"role": "user", "content": "Hello"}\n    ]\n  }\'\n'})})})]}),"\n",(0,c.jsx)(n.h3,{id:"s-maxage",children:(0,c.jsx)(n.code,{children:"s-maxage"})}),"\n",(0,c.jsx)(n.p,{children:"\u53ea\u63a5\u53d7\u5728\u6307\u5b9a\u8303\u56f4\u5185\uff08\u79d2\uff09\u7684\u7f13\u5b58\u54cd\u5e94\u3002"}),"\n",(0,c.jsxs)(i.A,{children:[(0,c.jsx)(r.A,{value:"openai",label:"OpenAI Python SDK",children:(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:'from openai import OpenAI\n\nclient = OpenAI(\n    api_key="your-api-key",\n    base_url="http://0.0.0.0:4000"\n)\n\nchat_completion = client.chat.completions.create(\n    messages=[{"role": "user", "content": "Hello"}],\n    model="gpt-3.5-turbo",\n    extra_body={\n        "cache": {\n            "s-maxage": 600  # \u53ea\u4f7f\u7528\u7f13\u5b58\uff0c\u5982\u679c\u54cd\u5e94\u5728 10 \u5206\u949f\u5185\u6709\u6548\n        }\n    }\n)\n'})})}),(0,c.jsx)(r.A,{value:"curl",label:"curl",children:(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'curl http://localhost:4000/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer sk-1234" \\\n  -d \'{\n    "model": "gpt-3.5-turbo",\n    "cache": {"s-maxage": 600},\n    "messages": [\n      {"role": "user", "content": "Hello"}\n    ]\n  }\'\n'})})})]}),"\n",(0,c.jsx)(n.h3,{id:"no-cache",children:(0,c.jsx)(n.code,{children:"no-cache"})}),"\n",(0,c.jsx)(n.p,{children:"\u5f3a\u5236\u83b7\u53d6\u65b0\u9c9c\u54cd\u5e94\uff0c\u7ed5\u8fc7\u7f13\u5b58\u3002"}),"\n",(0,c.jsxs)(i.A,{children:[(0,c.jsx)(r.A,{value:"openai",label:"OpenAI Python SDK",children:(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:'from openai import OpenAI\n\nclient = OpenAI(\n    api_key="your-api-key",\n    base_url="http://0.0.0.0:4000"\n)\n\nchat_completion = client.chat.completions.create(\n    messages=[{"role": "user", "content": "Hello"}],\n    model="gpt-3.5-turbo",\n    extra_body={\n        "cache": {\n            "no-cache": True  # \u8df3\u8fc7\u7f13\u5b58\u68c0\u67e5\uff0c\u83b7\u53d6\u65b0\u9c9c\u54cd\u5e94\n        }\n    }\n)\n'})})}),(0,c.jsx)(r.A,{value:"curl",label:"curl",children:(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'curl http://localhost:4000/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer sk-1234" \\\n  -d \'{\n    "model": "gpt-3.5-turbo",\n    "cache": {"no-cache": true},\n    "messages": [\n      {"role": "user", "content": "Hello"}\n    ]\n  }\'\n'})})})]}),"\n",(0,c.jsx)(n.h3,{id:"no-store",children:(0,c.jsx)(n.code,{children:"no-store"})}),"\n",(0,c.jsx)(n.p,{children:"\u4e0d\u7f13\u5b58\u54cd\u5e94\u3002"}),"\n",(0,c.jsxs)(i.A,{children:[(0,c.jsx)(r.A,{value:"openai",label:"OpenAI Python SDK",children:(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:'from openai import OpenAI\n\nclient = OpenAI(\n    api_key="your-api-key",\n    base_url="http://0.0.0.0:4000"\n)\n\nchat_completion = client.chat.completions.create(\n    messages=[{"role": "user", "content": "Hello"}],\n    model="gpt-3.5-turbo",\n    extra_body={\n        "cache": {\n            "no-store": True  # \u4e0d\u7f13\u5b58\u6b64\u54cd\u5e94\n        }\n    }\n)\n'})})}),(0,c.jsx)(r.A,{value:"curl",label:"curl",children:(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'curl http://localhost:4000/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer sk-1234" \\\n  -d \'{\n    "model": "gpt-3.5-turbo",\n    "cache": {"no-store": true},\n    "messages": [\n      {"role": "user", "content": "Hello"}\n    ]\n  }\'\n'})})})]}),"\n",(0,c.jsx)(n.h3,{id:"namespace",children:(0,c.jsx)(n.code,{children:"namespace"})}),"\n",(0,c.jsx)(n.p,{children:"\u5728\u7279\u5b9a\u7f13\u5b58\u547d\u540d\u7a7a\u95f4\u4e0b\u5b58\u50a8\u54cd\u5e94\u3002"}),"\n",(0,c.jsxs)(i.A,{children:[(0,c.jsx)(r.A,{value:"openai",label:"OpenAI Python SDK",children:(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:'from openai import OpenAI\n\nclient = OpenAI(\n    api_key="your-api-key",\n    base_url="http://0.0.0.0:4000"\n)\n\nchat_completion = client.chat.completions.create(\n    messages=[{"role": "user", "content": "Hello"}],\n    model="gpt-3.5-turbo",\n    extra_body={\n        "cache": {\n            "namespace": "my-custom-namespace"  # \u5728\u81ea\u5b9a\u4e49\u547d\u540d\u7a7a\u95f4\u4e0b\u5b58\u50a8\n        }\n    }\n)\n'})})}),(0,c.jsx)(r.A,{value:"curl",label:"curl",children:(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'curl http://localhost:4000/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer sk-1234" \\\n  -d \'{\n    "model": "gpt-3.5-turbo",\n    "cache": {"namespace": "my-custom-namespace"},\n    "messages": [\n      {"role": "user", "content": "Hello"}\n    ]\n  }\'\n'})})})]}),"\n",(0,c.jsx)(n.h2,{id:"\u5728\u4ee3\u7406\u4e2d\u8bbe\u7f6e\u7f13\u5b58\u4f46\u4e0d\u5728\u5b9e\u9645\u7684-llm-api-\u8c03\u7528\u4e0a",children:"\u5728\u4ee3\u7406\u4e2d\u8bbe\u7f6e\u7f13\u5b58\uff0c\u4f46\u4e0d\u5728\u5b9e\u9645\u7684 llm api \u8c03\u7528\u4e0a"}),"\n",(0,c.jsx)(n.p,{children:"\u5982\u679c\u4f60\u53ea\u60f3\u542f\u7528\u5982\u9650\u6d41\u3001\u8d1f\u8f7d\u5747\u8861\u7b49\u7279\u6027\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b64\u529f\u80fd\u3002"}),"\n",(0,c.jsxs)(n.p,{children:["\u5c06 ",(0,c.jsx)(n.code,{children:"supported_call_types: []"})," \u8bbe\u7f6e\u4e3a\u7981\u7528\u5728\u5b9e\u9645 api \u8c03\u7528\u4e0a\u7684\u7f13\u5b58\u3002"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:"litellm_settings:\n  cache: True\n  cache_params:\n    type: redis\n    supported_call_types: [] \n"})}),"\n",(0,c.jsxs)(n.h2,{id:"\u7f13\u5b58\u8c03\u8bd5---cacheping",children:["\u7f13\u5b58\u8c03\u8bd5 - ",(0,c.jsx)(n.code,{children:"/cache/ping"})]}),"\n",(0,c.jsxs)(n.p,{children:["LiteLLM \u4ee3\u7406\u66b4\u9732\u4e86\u4e00\u4e2a ",(0,c.jsx)(n.code,{children:"/cache/ping"})," \u7aef\u70b9\uff0c\u7528\u4e8e\u6d4b\u8bd5\u7f13\u5b58\u662f\u5426\u6309\u9884\u671f\u5de5\u4f5c"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u4f7f\u7528\u65b9\u6cd5"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:"curl --location 'http://0.0.0.0:4000/cache/ping'  -H \"Authorization: Bearer sk-1234\"\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.strong,{children:"\u5065\u5eb7\u54cd\u5e94\u793a\u4f8b"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'{\n    "status": "healthy",\n    "cache_type": "redis",\n    "ping_response": true,\n    "set_cache_response": "success",\n    "litellm_cache_params": {\n        "supported_call_types": "[\'completion\', \'acompletion\', \'embedding\', \'aembedding\', \'atranscription\', \'transcription\']",\n        "type": "redis",\n        "namespace": "None"\n    },\n    "redis_cache_params": {\n        "redis_client": "Redis<ConnectionPool<Connection<host=redis-16337.c322.us-east-1-2.ec2.cloud.redislabs.com,port=16337,db=0>>>",\n        "redis_kwargs": "{\'url\': \'redis://:******@redis-16337.c322.us-east-1-2.ec2.cloud.redislabs.com:16337\'}",\n        "async_redis_conn_pool": "BlockingConnectionPool<Connection<host=redis-16337.c322.us-east-1-2.ec2.cloud.redislabs.com,port=16337,db=0>>",\n        "redis_version": "7.2.0"\n    }\n}\n'})}),"\n",(0,c.jsx)(n.h2,{id:"\u9ad8\u7ea7\u7528\u6cd5",children:"\u9ad8\u7ea7\u7528\u6cd5"}),"\n",(0,c.jsxs)(n.h3,{id:"\u63a7\u5236\u7f13\u5b58\u751f\u6548\u7684\u8c03\u7528\u7c7b\u578b---chatcompletions-embeddings-\u7b49",children:["\u63a7\u5236\u7f13\u5b58\u751f\u6548\u7684\u8c03\u7528\u7c7b\u578b - (",(0,c.jsx)(n.code,{children:"/chat/completions"}),", ",(0,c.jsx)(n.code,{children:"/embeddings"})," \u7b49)"]}),"\n",(0,c.jsxs)(n.p,{children:["\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u8c03\u7528\u7c7b\u578b\u7684\u7f13\u5b58\u90fd\u662f\u5f00\u542f\u7684\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e ",(0,c.jsx)(n.code,{children:"cache_params"})," \u4e2d\u7684 ",(0,c.jsx)(n.code,{children:"supported_call_types"})," \u6765\u63a7\u5236\u54ea\u4e9b\u8c03\u7528\u7c7b\u578b\u542f\u7528\u7f13\u5b58\u3002"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsxs)(n.strong,{children:["\u53ea\u6709\u5728 ",(0,c.jsx)(n.code,{children:"supported_call_types"})," \u6307\u5b9a\u7684\u8c03\u7528\u7c7b\u578b\u4e0a\u624d\u4f1a\u542f\u7528\u7f13\u5b58"]})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:'litellm_settings:\n  cache: True\n  cache_params:\n    type: redis\n    supported_call_types: ["acompletion", "atext_completion", "aembedding", "atranscription"]\n                          # /chat/completions, /completions, /embeddings, /audio/transcriptions\n'})}),"\n",(0,c.jsxs)(n.h3,{id:"\u5728-configyaml-\u4e2d\u8bbe\u7f6e\u7f13\u5b58\u53c2\u6570",children:["\u5728 ",(0,c.jsx)(n.code,{children:"config.yaml"})," \u4e2d\u8bbe\u7f6e\u7f13\u5b58\u53c2\u6570"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:'model_list:\n  - model_name: gpt-3.5-turbo\n    litellm_params:\n      model: gpt-3.5-turbo\n  - model_name: text-embedding-ada-002\n    litellm_params:\n      model: text-embedding-ada-002\n\nlitellm_settings:\n  set_verbose: True\n  cache: True          # \u8bbe\u7f6e\u7f13\u5b58\u54cd\u5e94\u4e3a True\uff0cLiteLLM \u9ed8\u8ba4\u4f7f\u7528 Redis \u7f13\u5b58\n  cache_params:         # `cache_params` \u662f\u53ef\u9009\u7684\n    type: "redis"  # \u8981\u521d\u59cb\u5316\u7684\u7f13\u5b58\u7c7b\u578b\u3002\u53ef\u4ee5\u662f "local" \u6216 "redis"\u3002\u9ed8\u8ba4\u503c\u4e3a "local"\u3002\n    host: "localhost"  # Redis \u7f13\u5b58\u7684\u4e3b\u673a\u5730\u5740\u3002\u5982\u679c\u7c7b\u578b\u662f "redis"\uff0c\u5219\u9700\u8981\u6b64\u53c2\u6570\u3002\n    port: 6379  # Redis \u7f13\u5b58\u7684\u7aef\u53e3\u53f7\u3002\u5982\u679c\u7c7b\u578b\u662f "redis"\uff0c\u5219\u9700\u8981\u6b64\u53c2\u6570\u3002\n    password: "your_password"  # Redis \u7f13\u5b58\u7684\u5bc6\u7801\u3002\u5982\u679c\u7c7b\u578b\u662f "redis"\uff0c\u5219\u9700\u8981\u6b64\u53c2\u6570\u3002\n    \n    # \u53ef\u9009\u914d\u7f6e\n    supported_call_types: ["acompletion", "atext_completion", "aembedding", "atranscription"]\n                      # /chat/completions, /completions, /embeddings, /audio/transcriptions\n'})}),"\n",(0,c.jsxs)(n.h3,{id:"\u5220\u9664\u7f13\u5b58\u952e---cachedelete",children:["\u5220\u9664\u7f13\u5b58\u952e - ",(0,c.jsx)(n.code,{children:"/cache/delete"})]}),"\n",(0,c.jsxs)(n.p,{children:["\u4e3a\u4e86\u5220\u9664\u7f13\u5b58\u952e\uff0c\u53d1\u9001\u4e00\u4e2a\u5e26\u6709 ",(0,c.jsx)(n.code,{children:"keys"})," \u7684\u8bf7\u6c42\u5230 ",(0,c.jsx)(n.code,{children:"/cache/delete"}),"\u3002"]}),"\n",(0,c.jsx)(n.p,{children:"\u793a\u4f8b"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'curl -X POST "http://0.0.0.0:4000/cache/delete" \\\n  -H "Authorization: Bearer sk-1234" \\\n  -d \'{"keys": ["586bf3f3c1bf5aecb55bd9996494d3bbc69eb58397163add6d49537762a7548d", "key2"]}\'\n'})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'# {"status":"success"}\n'})}),"\n",(0,c.jsx)(n.h4,{id:"\u4ece\u54cd\u5e94\u4e2d\u67e5\u770b\u7f13\u5b58\u952e",children:"\u4ece\u54cd\u5e94\u4e2d\u67e5\u770b\u7f13\u5b58\u952e"}),"\n",(0,c.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u5728\u54cd\u5e94\u5934\u4e2d\u770b\u5230\u7f13\u5b58\u952e\uff0c\u5f53\u547d\u4e2d\u7f13\u5b58\u65f6\uff0c",(0,c.jsx)(n.code,{children:"x-litellm-cache-key"})," \u54cd\u5e94\u5934\u4f1a\u53d1\u9001\u7f13\u5b58\u952e\u3002"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'curl -i --location \'http://0.0.0.0:4000/chat/completions\' \\\n    --header \'Authorization: Bearer sk-1234\' \\\n    --header \'Content-Type: application/json\' \\\n    --data \'{\n    "model": "gpt-3.5-turbo",\n    "user": "ishan",\n    "messages": [\n        {\n        "role": "user",\n        "content": "what is litellm"\n        }\n    ],\n}\'\n'})}),"\n",(0,c.jsx)(n.p,{children:"\u6765\u81ea LiteLLM \u4ee3\u7406\u7684\u54cd\u5e94"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-json",children:'date: Thu, 04 Apr 2024 17:37:21 GMT\ncontent-type: application/json\nx-litellm-cache-key: 586bf3f3c1bf5aecb55bd9996494d3bbc69eb58397163add6d49537762a7548d\n\n{\n    "id": "chatcmpl-9ALJTzsBlXR9zTxPvzfFFtFbFtG6T",\n    "choices": [\n        {\n            "finish_reason": "stop",\n            "index": 0,\n            "message": {\n                "content": "I\'m sorr.."\n                "role": "assistant"\n            }\n        }\n    ],\n    "created": 1712252235,\n}\n             \n'})}),"\n",(0,c.jsx)(n.h3,{id:"\u9ed8\u8ba4\u5173\u95ed\u7f13\u5b58---\u53ea\u542f\u7528",children:(0,c.jsx)(n.strong,{children:"\u9ed8\u8ba4\u5173\u95ed\u7f13\u5b58 - \u53ea\u542f\u7528"})}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsxs)(n.strong,{children:["\u8bbe\u7f6e ",(0,c.jsx)(n.code,{children:"mode: default_off"})," \u4ee5\u5173\u95ed\u7f13\u5b58"]})}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:"model_list:\n  - model_name: fake-openai-endpoint\n    litellm_params:\n      model: openai/fake\n      api_key: fake-key\n      api_base: https://exampleopenaiendpoint-production.up.railway.app/\n\n# \u9ed8\u8ba4\u5173\u95ed\u6a21\u5f0f\nlitellm_settings:\n  set_verbose: True\n  cache: True\n  cache_params:\n    mode: default_off # \ud83d\udc48 \u5173\u952e\u66f4\u6539\uff0c\u7f13\u5b58\u9ed8\u8ba4\u4e3a\u5173\u95ed\u72b6\u6001\n"})}),"\n",(0,c.jsxs)(n.ol,{start:"2",children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.strong,{children:"\u5f53\u7f13\u5b58\u9ed8\u8ba4\u5173\u95ed\u65f6\u542f\u7528\u7f13\u5b58"})}),"\n"]}),"\n",(0,c.jsxs)(i.A,{children:[(0,c.jsx)(r.A,{value:"openai",label:"OpenAI Python SDK",children:(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-python",children:'import os\nfrom openai import OpenAI\n\nclient = OpenAI(api_key=<litellm-api-key>, base_url="http://0.0.0.0:4000")\n\nchat_completion = client.chat.completions.create(\n    messages=[\n        {\n            "role": "user",\n            "content": "Say this is a test",\n        }\n    ],\n    model="gpt-3.5-turbo",\n    extra_body = {        # OpenAI Python SDK \u63a5\u53d7 `extra_body` \u4e2d\u7684\u989d\u5916\u53c2\u6570\n        "cache": {"use-cache": True}\n    }\n)\n'})})}),(0,c.jsx)(r.A,{value:"curl",label:"curl",children:(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'curl http://localhost:4000/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer sk-1234" \\\n  -d \'{\n    "model": "gpt-3.5-turbo",\n    "cache": {"use-cache": True}\n    "messages": [\n      {"role": "user", "content": "Say this is a test"}\n    ]\n  }\'\n'})})})]}),"\n",(0,c.jsx)(n.h2,{id:"redis-max_connections",children:"Redis max_connections"}),"\n",(0,c.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u5728 ",(0,c.jsx)(n.code,{children:"cache_params"})," \u4e2d\u8bbe\u7f6e ",(0,c.jsx)(n.code,{children:"max_connections"})," \u53c2\u6570\u4ee5\u9488\u5bf9 Redis\u3002\u6b64\u53c2\u6570\u76f4\u63a5\u4f20\u9012\u7ed9 Redis \u5ba2\u6237\u7aef\uff0c\u5e76\u63a7\u5236\u8fde\u63a5\u6c60\u4e2d\u7684\u6700\u5927\u5e76\u53d1\u8fde\u63a5\u6570\u3002\u5982\u679c\u4f60\u9047\u5230\u7c7b\u4f3c ",(0,c.jsx)(n.code,{children:"No connection available"})," \u7684\u9519\u8bef\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u589e\u52a0\u8fd9\u4e2a\u503c\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:"litellm_settings:\n  cache: true\n  cache_params:\n    type: redis\n    max_connections: 100\n"})}),"\n",(0,c.jsx)(n.h2,{id:"\u652f\u6301\u7684\u7f13\u5b58\u53c2\u6570",children:"\u652f\u6301\u7684\u7f13\u5b58\u53c2\u6570"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:'cache_params:\n  # ttl \n  ttl: Optional[float]\n  default_in_memory_ttl: Optional[float]\n  default_in_redis_ttl: Optional[float]\n  max_connections: Optional[Int]\n\n  # \u7f13\u5b58\u7c7b\u578b\uff08\u9009\u9879\uff1a "local", "redis", "s3"\uff09\n  type: s3\n\n  # \u8981\u7f13\u5b58\u7684 LiteLLM \u8c03\u7528\u7c7b\u578b\u5217\u8868\n  # \u9009\u9879\uff1a"completion", "acompletion", "embedding", "aembedding"\n  supported_call_types: ["acompletion", "atext_completion", "aembedding", "atranscription"]\n                      # /chat/completions, /completions, /embeddings, /audio/transcriptions\n\n  # Redis \u7f13\u5b58\u53c2\u6570\n  host: localhost  # Redis \u670d\u52a1\u5668\u4e3b\u673a\u540d\u6216 IP \u5730\u5740\n  port: "6379"  # Redis \u670d\u52a1\u5668\u7aef\u53e3\u53f7\uff08\u4f5c\u4e3a\u5b57\u7b26\u4e32\uff09\n  password: secret_password  # Redis \u670d\u52a1\u5668\u5bc6\u7801\n  namespace: Optional[str] = None,\n  \n  # GCP IAM \u8ba4\u8bc1\u7528\u4e8e Redis\n  gcp_service_account: "projects/-/serviceAccounts/your-sa@project.iam.gserviceaccount.com"  # GCP \u670d\u52a1\u8d26\u6237\u4ee5\u8fdb\u884c IAM \u8ba4\u8bc1\n  gcp_ssl_ca_certs: "./server-ca.pem"  # GCP Memorystore Redis \u7684 SSL CA \u8bc1\u4e66\u8def\u5f84\n  REDIS_SSL="True"\n  REDIS_SSL_CERT_REQS="None"\n  REDIS_SSL_CHECK_HOSTNAME="False"\n\n'})}),"\n",(0,c.jsx)(n.h2,{id:"\u63d0\u4f9b\u5546\u7279\u5b9a\u7684\u53ef\u9009\u53c2\u6570\u7f13\u5b58",children:"\u63d0\u4f9b\u5546\u7279\u5b9a\u7684\u53ef\u9009\u53c2\u6570\u7f13\u5b58"}),"\n",(0,c.jsx)(n.p,{children:"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cLiteLLM \u53ea\u5728\u6807\u51c6 OpenAI \u53c2\u6570\u4e2d\u5305\u542b\u7f13\u5b58\u952e\u3002\u4f46\u662f\uff0c\u6709\u4e9b\u63d0\u4f9b\u5546\uff08\u5982 Vertex AI\uff09\u4f7f\u7528\u989d\u5916\u7684\u53c2\u6570\u6765\u5f71\u54cd\u8f93\u51fa\uff0c\u8fd9\u4e9b\u53c2\u6570\u4e0d\u5728\u6807\u51c6\u7f13\u5b58\u952e\u751f\u6210\u4e2d\u5305\u62ec\u3002"}),"\n",(0,c.jsx)(n.h3,{id:"\u542f\u7528\u63d0\u4f9b\u5546\u4f1a\u8bdd\u7279\u5b9a\u7684\u53ef\u9009\u53c2\u6570\u7f13\u5b58",children:"\u542f\u7528\u63d0\u4f9b\u5546\u4f1a\u8bdd\u7279\u5b9a\u7684\u53ef\u9009\u53c2\u6570\u7f13\u5b58"}),"\n",(0,c.jsxs)(n.p,{children:["\u5728 ",(0,c.jsx)(n.code,{children:"config.yaml"})," \u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u8bbe\u7f6e\u4ee5\u5c06\u63d0\u4f9b\u5546\u4f1a\u8bdd\u7279\u5b9a\u7684\u53ef\u9009\u53c2\u6570\u5305\u542b\u5728\u7f13\u5b58\u952e\u4e2d\uff1a"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:'litellm_settings:\n  cache: True\n  cache_params:\n    type: "redis"\n  enable_caching_on_provider_specific_optional_params: True  # \u5305\u542b\u63d0\u4f9b\u5546\u7279\u5b9a\u7684\u53c2\u6570\u5728\u7f13\u5b58\u952e\u4e2d\n'})}),"\n",(0,c.jsx)(n.h2,{id:"\u9ad8\u7ea7---\u7528\u6237-api-\u5bc6\u94a5\u7f13\u5b58-ttl",children:"\u9ad8\u7ea7 - \u7528\u6237 API \u5bc6\u94a5\u7f13\u5b58 TTL"}),"\n",(0,c.jsx)(n.p,{children:"\u914d\u7f6e\u5185\u5b58\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u5bc6\u94a5\u5bf9\u8c61\u7684\u65f6\u95f4\uff08\u9632\u6b62\u6570\u636e\u5e93\u8bf7\u6c42\uff09"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-yaml",children:"general_settings:\n  user_api_key_cache_ttl: <your-number> # \u65f6\u95f4\u4ee5\u79d2\u4e3a\u5355\u4f4d\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6b64\u503c\u8bbe\u7f6e\u4e3a60\u79d2\u3002"})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(p,{...e})}):p(e)}}}]);