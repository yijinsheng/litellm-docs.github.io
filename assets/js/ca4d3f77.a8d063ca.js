(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[54938],{1403(e,n,s){"use strict";s.r(n),s.d(n,{assets:()=>h,contentTitle:()=>d,default:()=>m,frontMatter:()=>o,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"mcp","title":"MCP \u6982\u8ff0","description":"LiteLLM Proxy \u63d0\u4f9b\u4e86\u4e00\u4e2a MCP Gateway\uff0c\u5141\u8bb8\u60a8\u4e3a\u6240\u6709 MCP \u5de5\u5177\u4f7f\u7528\u56fa\u5b9a\u7aef\u70b9\uff0c\u5e76\u901a\u8fc7 Key\u3001Team \u63a7\u5236 MCP \u8bbf\u95ee\u6743\u9650\u3002","source":"@site/docs/mcp.md","sourceDirName":".","slug":"/mcp","permalink":"/docs/mcp","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"/vector_stores/\\\\{vector_store_id\\\\}/files","permalink":"/docs/vector_store_files"},"next":{"title":"\u4f7f\u7528\u60a8\u7684MCP","permalink":"/docs/mcp_usage"}}');var i=s(74848),l=s(28453),t=s(49489),a=s(7227),c=s(90547);const o={},d="MCP \u6982\u8ff0",h={},p=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u6dfb\u52a0\u60a8\u7684 MCP",id:"\u6dfb\u52a0\u60a8\u7684-mcp",level:2},{value:"\u524d\u63d0\u6761\u4ef6",id:"\u524d\u63d0\u6761\u4ef6",level:3},{value:"\u7ec6\u7c92\u5ea6\u6570\u636e\u5e93\u5b58\u50a8\u63a7\u5236",id:"\u7ec6\u7c92\u5ea6\u6570\u636e\u5e93\u5b58\u50a8\u63a7\u5236",level:4},{value:"\u6dfb\u52a0 HTTP MCP Server",id:"\u6dfb\u52a0-http-mcp-server",level:3},{value:"\u6dfb\u52a0 SSE MCP Server",id:"\u6dfb\u52a0-sse-mcp-server",level:3},{value:"\u6dfb\u52a0 STDIO MCP Server",id:"\u6dfb\u52a0-stdio-mcp-server",level:3},{value:"OAuth \u914d\u7f6e\u548c\u8986\u76d6",id:"oauth-\u914d\u7f6e\u548c\u8986\u76d6",level:3},{value:"\u9759\u6001 Headers",id:"\u9759\u6001-headers",level:3},{value:"MCP \u6f14\u793a",id:"mcp-\u6f14\u793a",level:3},{value:"MCP \u522b\u540d",id:"mcp-\u522b\u540d",level:3},{value:"\u5c06 OpenAPI \u89c4\u8303\u8f6c\u6362\u4e3a MCP \u670d\u52a1\u5668",id:"\u5c06-openapi-\u89c4\u8303\u8f6c\u6362\u4e3a-mcp-\u670d\u52a1\u5668",level:2},{value:"\u4f7f\u7528\u793a\u4f8b",id:"\u4f7f\u7528\u793a\u4f8b",level:3},{value:"MCP OAuth",id:"mcp-oauth",level:2},{value:"\u5de5\u4f5c\u539f\u7406",id:"\u5de5\u4f5c\u539f\u7406",level:3},{value:"\u5c06\u81ea\u5b9a\u4e49 Headers \u8f6c\u53d1\u5230 MCP \u670d\u52a1\u5668",id:"\u5c06\u81ea\u5b9a\u4e49-headers-\u8f6c\u53d1\u5230-mcp-\u670d\u52a1\u5668",level:2},{value:"\u5ba2\u6237\u7aef\u4f7f\u7528",id:"\u5ba2\u6237\u7aef\u4f7f\u7528",level:4},{value:"\u5de5\u4f5c\u539f\u7406",id:"\u5de5\u4f5c\u539f\u7406-1",level:4},{value:"\u5c06\u8bf7\u6c42 Headers \u4f20\u9012\u7ed9 STDIO \u73af\u5883\u53d8\u91cf",id:"\u5c06\u8bf7\u6c42-headers-\u4f20\u9012\u7ed9-stdio-\u73af\u5883\u53d8\u91cf",level:3},{value:"\u4f7f\u7528\u5e26\u6709\u5ba2\u6237\u7aef\u51ed\u636e\u7684 MCP",id:"\u4f7f\u7528\u5e26\u6709\u5ba2\u6237\u7aef\u51ed\u636e\u7684-mcp",level:2},{value:"\u65b0\u7684\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1 Headers (\u63a8\u8350)",id:"\u65b0\u7684\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1-headers-\u63a8\u8350",level:3},{value:"\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1 Header (\u5df2\u5f03\u7528)",id:"\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1-header-\u5df2\u5f03\u7528",level:3},{value:"\u901a\u8fc7 OpenAI Responses API \u8fde\u63a5\uff0c\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1",id:"\u901a\u8fc7-openai-responses-api-\u8fde\u63a5\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1",level:4},{value:"\u901a\u8fc7 OpenAI Responses API \u8fde\u63a5\uff0c\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1",id:"\u901a\u8fc7-openai-responses-api-\u8fde\u63a5\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1",level:4},{value:"\u901a\u8fc7 LiteLLM Proxy Responses API \u8fde\u63a5\uff0c\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1",id:"\u901a\u8fc7-litellm-proxy-responses-api-\u8fde\u63a5\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1",level:4},{value:"\u901a\u8fc7 LiteLLM Proxy Responses API \u8fde\u63a5\uff0c\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1",id:"\u901a\u8fc7-litellm-proxy-responses-api-\u8fde\u63a5\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1",level:4},{value:"\u901a\u8fc7 Cursor IDE \u8fde\u63a5\uff0c\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1",id:"\u901a\u8fc7-cursor-ide-\u8fde\u63a5\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1",level:4},{value:"\u901a\u8fc7 Cursor IDE \u8fde\u63a5\uff0c\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1",id:"\u901a\u8fc7-cursor-ide-\u8fde\u63a5\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1",level:4},{value:"\u901a\u8fc7\u53ef\u6d41\u5f0f HTTP \u4f20\u8f93\u8fde\u63a5\uff0c\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1",id:"\u901a\u8fc7\u53ef\u6d41\u5f0f-http-\u4f20\u8f93\u8fde\u63a5\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1",level:4},{value:"\u901a\u8fc7\u53ef\u6d41\u5f0f HTTP \u4f20\u8f93\u8fde\u63a5\uff0c\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1",id:"\u901a\u8fc7\u53ef\u6d41\u5f0f-http-\u4f20\u8f93\u8fde\u63a5\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1",level:4},{value:"\u901a\u8fc7 Python FastMCP \u5ba2\u6237\u7aef\u8fde\u63a5\uff0c\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1",id:"\u901a\u8fc7-python-fastmcp-\u5ba2\u6237\u7aef\u8fde\u63a5\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1",level:4},{value:"\u901a\u8fc7 Python FastMCP \u5ba2\u6237\u7aef\u8fde\u63a5\uff0c\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1",id:"\u901a\u8fc7-python-fastmcp-\u5ba2\u6237\u7aef\u8fde\u63a5\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1",level:4},{value:"\u81ea\u5b9a\u4e49 MCP \u8eab\u4efd\u9a8c\u8bc1 Header \u540d\u79f0",id:"\u81ea\u5b9a\u4e49-mcp-\u8eab\u4efd\u9a8c\u8bc1-header-\u540d\u79f0",level:3},{value:"\u4f7f\u7528 authorization header",id:"\u4f7f\u7528-authorization-header",level:4},{value:"\u5728 <code>/chat/completions</code> \u4e2d\u4f7f\u7528 MCP \u5de5\u5177",id:"\u5728-chatcompletions-\u4e2d\u4f7f\u7528-mcp-\u5de5\u5177",level:2},{value:"LiteLLM Proxy - \u6f14\u793a MCP Gateway",id:"litellm-proxy---\u6f14\u793a-mcp-gateway",level:2},{value:"LiteLLM Python SDK MCP Bridge",id:"litellm-python-sdk-mcp-bridge",level:2},{value:"1. \u5217\u51fa\u53ef\u7528\u7684 MCP \u5de5\u5177",id:"1-\u5217\u51fa\u53ef\u7528\u7684-mcp-\u5de5\u5177",level:3},{value:"2. \u5217\u51fa\u548c\u8c03\u7528 MCP \u5de5\u5177",id:"2-\u5217\u51fa\u548c\u8c03\u7528-mcp-\u5de5\u5177",level:3},{value:"<code>litellm.experimental_mcp_client.call_openai_tool</code> \u5982\u4f55\u5de5\u4f5c",id:"litellmexperimental_mcp_clientcall_openai_tool-\u5982\u4f55\u5de5\u4f5c",level:4}];function x(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"mcp-\u6982\u8ff0",children:"MCP \u6982\u8ff0"})}),"\n",(0,i.jsx)(n.p,{children:"LiteLLM Proxy \u63d0\u4f9b\u4e86\u4e00\u4e2a MCP Gateway\uff0c\u5141\u8bb8\u60a8\u4e3a\u6240\u6709 MCP \u5de5\u5177\u4f7f\u7528\u56fa\u5b9a\u7aef\u70b9\uff0c\u5e76\u901a\u8fc7 Key\u3001Team \u63a7\u5236 MCP \u8bbf\u95ee\u6743\u9650\u3002"}),"\n",(0,i.jsx)(c.A,{img:s(38507),style:{width:"100%",display:"block",margin:"2rem auto"}}),"\n",(0,i.jsx)("p",{style:{textAlign:"left",color:"#666"},children:(0,i.jsx)(n.p,{children:"LiteLLM MCP \u67b6\u6784\uff1a\u5c06 MCP \u5de5\u5177\u4e0e\u6240\u6709 LiteLLM \u652f\u6301\u7684\u6a21\u578b\u4e00\u8d77\u4f7f\u7528"})}),"\n",(0,i.jsx)(n.h2,{id:"\u6982\u8ff0",children:"\u6982\u8ff0"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u529f\u80fd"}),(0,i.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"MCP \u64cd\u4f5c"}),(0,i.jsxs)(n.td,{children:["\u2022 \u5217\u51fa\u5de5\u5177",(0,i.jsx)("br",{}),"\u2022 \u8c03\u7528\u5de5\u5177 ",(0,i.jsx)("br",{}),"\u2022 \u63d0\u793a ",(0,i.jsx)("br",{}),"\u2022 \u8d44\u6e90"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u652f\u6301\u7684 MCP \u4f20\u8f93\u65b9\u5f0f"}),(0,i.jsxs)(n.td,{children:["\u2022 \u53ef\u6d41\u5f0f HTTP",(0,i.jsx)("br",{}),"\u2022 SSE",(0,i.jsx)("br",{}),"\u2022 \u6807\u51c6\u8f93\u5165/\u8f93\u51fa (stdio)"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"LiteLLM \u6743\u9650\u7ba1\u7406"}),(0,i.jsxs)(n.td,{children:["\u2022 \u6309 Key",(0,i.jsx)("br",{}),"\u2022 \u6309 Team",(0,i.jsx)("br",{}),"\u2022 \u6309 Organization"]})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"\u6dfb\u52a0\u60a8\u7684-mcp",children:"\u6dfb\u52a0\u60a8\u7684 MCP"}),"\n",(0,i.jsx)(n.h3,{id:"\u524d\u63d0\u6761\u4ef6",children:"\u524d\u63d0\u6761\u4ef6"}),"\n",(0,i.jsx)(n.p,{children:"\u8981\u5c06 MCP \u670d\u52a1\u5668\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\uff0c\u9700\u8981\u542f\u7528\u6570\u636e\u5e93\u5b58\u50a8\uff1a"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u73af\u5883\u53d8\u91cf\uff1a"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"export STORE_MODEL_IN_DB=True\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u6216\u5728 config.yaml \u4e2d\uff1a"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"general_settings:\n  store_model_in_db: true\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u7ec6\u7c92\u5ea6\u6570\u636e\u5e93\u5b58\u50a8\u63a7\u5236",children:"\u7ec6\u7c92\u5ea6\u6570\u636e\u5e93\u5b58\u50a8\u63a7\u5236"}),"\n",(0,i.jsxs)(n.p,{children:["\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5f53 ",(0,i.jsx)(n.code,{children:"store_model_in_db"})," \u4e3a ",(0,i.jsx)(n.code,{children:"true"})," \u65f6\uff0c\u6240\u6709\u5bf9\u8c61\u7c7b\u578b\uff08\u6a21\u578b\u3001MCP\u3001\u9632\u62a4\u673a\u5236\u3001\u5411\u91cf\u5b58\u50a8\u7b49\uff09\u90fd\u4f1a\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002\u5982\u679c\u53ea\u60f3\u5b58\u50a8\u7279\u5b9a\u7684\u5bf9\u8c61\u7c7b\u578b\uff0c\u8bf7\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"supported_db_objects"})," \u8bbe\u7f6e\u3002"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u793a\u4f8b\uff1a\u4ec5\u5728\u6570\u636e\u5e93\u4e2d\u5b58\u50a8 MCP \u670d\u52a1\u5668"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="config.yaml" showLineNumbers',children:'general_settings:\n  store_model_in_db: true\n  supported_db_objects: ["mcp"]  # \u4ec5\u5728\u6570\u636e\u5e93\u4e2d\u5b58\u50a8 MCP \u670d\u52a1\u5668\n\nmodel_list:\n  - model_name: gpt-4o\n    litellm_params:\n      model: openai/gpt-4o\n      api_key: sk-xxxxxxx\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u67e5\u770b\u6240\u6709\u53ef\u7528\u7684\u5bf9\u8c61\u7c7b\u578b\uff1a"})," ",(0,i.jsx)(n.a,{href:"/docs/proxy/config_settings#general_settings---reference",children:"\u914d\u7f6e\u8bbe\u7f6e - supported_db_objects"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u672a\u8bbe\u7f6e ",(0,i.jsx)(n.code,{children:"supported_db_objects"}),"\uff0c\u5219\u4ece\u6570\u636e\u5e93\u52a0\u8f7d\u6240\u6709\u5bf9\u8c61\u7c7b\u578b\uff08\u9ed8\u8ba4\u884c\u4e3a\uff09\u3002"]}),"\n",(0,i.jsxs)(t.A,{children:[(0,i.jsxs)(a.A,{value:"ui",label:"LiteLLM UI",children:[(0,i.jsx)(n.p,{children:'\u5728 LiteLLM UI \u4e0a\uff0c\u5bfc\u822a\u5230 "MCP Servers" \u5e76\u70b9\u51fb "Add New MCP Server"\u3002'}),(0,i.jsx)(n.p,{children:"\u5728\u6b64\u8868\u5355\u4e2d\uff0c\u60a8\u5e94\u8be5\u8f93\u5165 MCP Server URL \u548c\u60a8\u60f3\u8981\u4f7f\u7528\u7684\u4f20\u8f93\u65b9\u5f0f\u3002"}),(0,i.jsx)(n.p,{children:"LiteLLM \u652f\u6301\u4ee5\u4e0b MCP \u4f20\u8f93\u65b9\u5f0f\uff1a"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u53ef\u6d41\u5f0f HTTP"}),"\n",(0,i.jsx)(n.li,{children:"SSE (Server-Sent Events)"}),"\n",(0,i.jsx)(n.li,{children:"\u6807\u51c6\u8f93\u5165/\u8f93\u51fa (stdio)"}),"\n"]}),(0,i.jsx)(c.A,{img:s(40872),style:{width:"80%",display:"block",margin:"0"}}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(n.h3,{id:"\u6dfb\u52a0-http-mcp-server",children:"\u6dfb\u52a0 HTTP MCP Server"}),(0,i.jsx)(n.p,{children:"\u6b64\u89c6\u9891\u4ecb\u7ecd\u5982\u4f55\u5728 LiteLLM UI \u4e0a\u6dfb\u52a0\u548c\u4f7f\u7528 HTTP MCP \u670d\u52a1\u5668\uff0c\u4ee5\u53ca\u5728 Cursor IDE \u4e2d\u4f7f\u7528\u5b83\u3002"}),(0,i.jsx)("iframe",{width:"840",height:"500",src:"https://www.loom.com/embed/e2aebce78e8d46beafeb4bacdde31f14",frameborder:"0",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(n.h3,{id:"\u6dfb\u52a0-sse-mcp-server",children:"\u6dfb\u52a0 SSE MCP Server"}),(0,i.jsx)(n.p,{children:"\u6b64\u89c6\u9891\u4ecb\u7ecd\u5982\u4f55\u5728 LiteLLM UI \u4e0a\u6dfb\u52a0\u548c\u4f7f\u7528 SSE MCP \u670d\u52a1\u5668\uff0c\u4ee5\u53ca\u5728 Cursor IDE \u4e2d\u4f7f\u7528\u5b83\u3002"}),(0,i.jsx)("iframe",{width:"840",height:"500",src:"https://www.loom.com/embed/07e04e27f5e74475b9cf8ef8247d2c3e",frameborder:"0",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(n.h3,{id:"\u6dfb\u52a0-stdio-mcp-server",children:"\u6dfb\u52a0 STDIO MCP Server"}),(0,i.jsx)(n.p,{children:'\u5bf9\u4e8e stdio MCP \u670d\u52a1\u5668\uff0c\u9009\u62e9 "Standard Input/Output (stdio)" \u4f5c\u4e3a\u4f20\u8f93\u7c7b\u578b\uff0c\u5e76\u4ee5 JSON \u683c\u5f0f\u63d0\u4f9b stdio \u914d\u7f6e\uff1a'}),(0,i.jsx)(c.A,{img:s(26670),style:{width:"80%",display:"block",margin:"0"}}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(n.h3,{id:"oauth-\u914d\u7f6e\u548c\u8986\u76d6",children:"OAuth \u914d\u7f6e\u548c\u8986\u76d6"}),(0,i.jsxs)(n.p,{children:["LiteLLM \u9ed8\u8ba4\u5c1d\u8bd5 ",(0,i.jsx)(n.a,{href:"https://datatracker.ietf.org/doc/html/rfc8414",children:"OAuth 2.0 \u6388\u6743\u670d\u52a1\u5668\u53d1\u73b0"}),"\u3002\u5f53\u60a8\u5728 UI \u4e2d\u521b\u5efa MCP \u670d\u52a1\u5668\u5e76\u8bbe\u7f6e ",(0,i.jsx)(n.code,{children:"Authentication: OAuth"})," \u65f6\uff0cLiteLLM \u5c06\u5b9a\u4f4d\u63d0\u4f9b\u5546\u5143\u6570\u636e\u3001\u52a8\u6001\u6ce8\u518c\u5ba2\u6237\u7aef\uff0c\u5e76\u6267\u884c\u57fa\u4e8e PKCE \u7684\u6388\u6743\uff0c\u800c\u65e0\u9700\u60a8\u63d0\u4f9b\u4efb\u4f55\u5176\u4ed6\u8be6\u7ec6\u4fe1\u606f\u3002"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u9700\u8981\u65f6\u81ea\u5b9a\u4e49 OAuth \u6d41\u7a0b\uff1a"})}),(0,i.jsx)(c.A,{img:s(45680),style:{width:"80%",display:"block",margin:"0"}}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u63d0\u4f9b\u663e\u5f0f\u5ba2\u6237\u7aef\u51ed\u636e"})," \u2013 \u5982\u679c MCP \u63d0\u4f9b\u5546\u4e0d\u652f\u6301\u52a8\u6001\u5ba2\u6237\u7aef\u6ce8\u518c\uff0c\u6216\u8005\u60a8\u5e0c\u671b\u81ea\u5df1\u7ba1\u7406\u5ba2\u6237\u7aef\uff0c\u8bf7\u586b\u5199 ",(0,i.jsx)(n.code,{children:"client_id"}),"\u3001",(0,i.jsx)(n.code,{children:"client_secret"})," \u548c\u6240\u9700\u7684 ",(0,i.jsx)(n.code,{children:"scopes"}),"\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8986\u76d6\u53d1\u73b0 URL"})," \u2013 \u5728\u67d0\u4e9b\u73af\u5883\u4e2d\uff0cLiteLLM \u53ef\u80fd\u65e0\u6cd5\u5230\u8fbe\u63d0\u4f9b\u5546\u7684\u5143\u6570\u636e\u7aef\u70b9\u3002\u4f7f\u7528\u53ef\u9009\u7684 ",(0,i.jsx)(n.code,{children:"authorization_url"}),"\u3001",(0,i.jsx)(n.code,{children:"token_url"})," \u548c ",(0,i.jsx)(n.code,{children:"registration_url"})," \u5b57\u6bb5\u76f4\u63a5\u5c06 LiteLLM \u6307\u5411\u6b63\u786e\u7684\u7aef\u70b9\u3002"]}),"\n"]}),(0,i.jsx)("br",{}),(0,i.jsx)(n.h3,{id:"\u9759\u6001-headers",children:"\u9759\u6001 Headers"}),(0,i.jsx)(n.p,{children:"\u6709\u65f6\u60a8\u7684 MCP \u670d\u52a1\u5668\u9700\u8981\u5728\u6bcf\u4e2a\u8bf7\u6c42\u4e0a\u6dfb\u52a0\u7279\u5b9a\u7684 headers\u3002\u53ef\u80fd\u662f API key\uff0c\u4e5f\u53ef\u80fd\u662f\u670d\u52a1\u5668\u671f\u671b\u7684\u81ea\u5b9a\u4e49 header\u3002\u60a8\u53ef\u4ee5\u4e0d\u914d\u7f6e\u8eab\u4efd\u9a8c\u8bc1\uff0c\u800c\u662f\u76f4\u63a5\u8bbe\u7f6e\u5b83\u4eec\u3002"}),(0,i.jsx)(c.A,{img:s(22723),style:{width:"80%",display:"block",margin:"0"}}),(0,i.jsx)(n.p,{children:"\u8fd9\u4e9b headers \u4f1a\u968f\u6bcf\u4e2a\u8bf7\u6c42\u4e00\u8d77\u53d1\u9001\u5230\u670d\u52a1\u5668\u3002\u5c31\u662f\u8fd9\u6837\u3002"}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u4f55\u65f6\u4f7f\u7528\u6b64\u529f\u80fd\uff1a"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u60a8\u7684\u670d\u52a1\u5668\u9700\u8981\u4e0d\u7b26\u5408\u6807\u51c6\u8eab\u4efd\u9a8c\u8bc1\u6a21\u5f0f\u7684\u81ea\u5b9a\u4e49 headers"}),"\n",(0,i.jsx)(n.li,{children:"\u60a8\u5e0c\u671b\u5b8c\u5168\u63a7\u5236\u53d1\u9001\u54ea\u4e9b headers"}),"\n",(0,i.jsx)(n.li,{children:"\u60a8\u6b63\u5728\u8c03\u8bd5\uff0c\u9700\u8981\u5feb\u901f\u6dfb\u52a0 headers \u800c\u65e0\u9700\u66f4\u6539\u8eab\u4efd\u9a8c\u8bc1\u914d\u7f6e"}),"\n"]})]}),(0,i.jsxs)(a.A,{value:"config",label:"config.yaml",children:[(0,i.jsxs)(n.p,{children:["\u76f4\u63a5\u5728 ",(0,i.jsx)(n.code,{children:"config.yaml"})," \u6587\u4ef6\u4e2d\u6dfb\u52a0 MCP \u670d\u52a1\u5668\uff1a"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="config.yaml" showLineNumbers',children:'model_list:\n  - model_name: gpt-4o\n    litellm_params:\n      model: openai/gpt-4o\n      api_key: sk-xxxxxxx\n\nlitellm_settings:\n  # MCP \u522b\u540d - \u5c06\u522b\u540d\u6620\u5c04\u5230\u670d\u52a1\u5668\u540d\u79f0\u4ee5\u4fbf\u4e8e\u5de5\u5177\u8bbf\u95ee\n  mcp_aliases:\n    "github": "github_mcp_server"\n    "zapier": "zapier_mcp_server"\n    "deepwiki": "deepwiki_mcp_server"\n\nmcp_servers:\n  # HTTP \u53ef\u6d41\u5f0f\u670d\u52a1\u5668\n  deepwiki_mcp:\n    url: "https://mcp.deepwiki.com/mcp"\n  # SSE \u670d\u52a1\u5668\n  zapier_mcp:\n    url: "https://actions.zapier.com/mcp/sk-akxxxxx/sse"\n\n  # \u6807\u51c6\u8f93\u5165/\u8f93\u51fa (stdio) \u670d\u52a1\u5668 - CircleCI \u793a\u4f8b\n  circleci_mcp:\n    transport: "stdio"\n    command: "npx"\n    args: ["-y", "@circleci/mcp-server-circleci"]\n    env:\n      CIRCLECI_TOKEN: "your-circleci-token"\n      CIRCLECI_BASE_URL: "https://circleci.com"\n\n  # \u5305\u542b\u6240\u6709\u53ef\u9009\u5b57\u6bb5\u7684\u5b8c\u6574\u914d\u7f6e\n  my_http_server:\n    url: "https://my-mcp-server.com/mcp"\n    transport: "http"\n    description: "My custom MCP server"\n    auth_type: "api_key"\n    auth_value: "abc123"\n'})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u914d\u7f6e\u9009\u9879\uff1a"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u670d\u52a1\u5668\u540d\u79f0"}),"\uff1a\u4e3a MCP \u670d\u52a1\u5668\u4f7f\u7528\u4efb\u4f55\u63cf\u8ff0\u6027\u540d\u79f0\uff08\u4f8b\u5982 ",(0,i.jsx)(n.code,{children:"zapier_mcp"}),"\u3001",(0,i.jsx)(n.code,{children:"deepwiki_mcp"}),"\u3001",(0,i.jsx)(n.code,{children:"circleci_mcp"}),"\uff09"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u522b\u540d"}),'\uff1a\u6b64\u540d\u79f0\u5c06\u9884\u586b\u5145\u670d\u52a1\u5668\u540d\u79f0\uff0c\u7a7a\u683c\u66ff\u6362\u4e3a"_"\uff0c\u5426\u5219\u53ef\u4ee5\u5c06\u5176\u7f16\u8f91\u4e3a\u5de5\u5177\u540d\u79f0\u4e2d\u7684\u524d\u7f00']}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"URL"}),"\uff1aMCP \u670d\u52a1\u5668\u7684\u7aef\u70b9 URL\uff08HTTP/SSE \u4f20\u8f93\u5fc5\u9700\uff09"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4f20\u8f93"}),"\uff1a\u53ef\u9009\u7684\u4f20\u8f93\u7c7b\u578b\uff08\u9ed8\u8ba4\u4e3a ",(0,i.jsx)(n.code,{children:"sse"}),"\uff09"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sse"})," - SSE (Server-Sent Events) \u4f20\u8f93"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"http"})," - \u53ef\u6d41\u5f0f HTTP \u4f20\u8f93"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"stdio"})," - \u6807\u51c6\u8f93\u5165/\u8f93\u51fa\u4f20\u8f93"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u547d\u4ee4"}),"\uff1a\u4e3a stdio \u4f20\u8f93\u6267\u884c\u7684\u547d\u4ee4\uff08stdio \u5fc5\u9700\uff09"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"allow_all_keys"}),"\uff1a\u8bbe\u7f6e\u4e3a ",(0,i.jsx)(n.code,{children:"true"})," \u4ee5\u4f7f\u6bcf\u4e2a LiteLLM API key \u90fd\u53ef\u4ee5\u4f7f\u7528\u8be5\u670d\u52a1\u5668\uff0c\u5373\u4f7f key/team \u672a\u5728\u5176 MCP \u6743\u9650\u4e2d\u5217\u51fa\u8be5\u670d\u52a1\u5668\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u53c2\u6570"}),"\uff1a\u4f20\u9012\u7ed9\u547d\u4ee4\u7684\u53c2\u6570\u6570\u7ec4\uff08stdio \u53ef\u9009\uff09"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u73af\u5883\u53d8\u91cf"}),"\uff1a\u4e3a stdio \u8fdb\u7a0b\u8bbe\u7f6e\u7684\u73af\u5883\u53d8\u91cf\uff08stdio \u53ef\u9009\uff09"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u63cf\u8ff0"}),"\uff1a\u670d\u52a1\u5668\u7684\u53ef\u9009\u63cf\u8ff0"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u8eab\u4efd\u9a8c\u8bc1\u7c7b\u578b"}),"\uff1a\u53ef\u9009\u7684\u8eab\u4efd\u9a8c\u8bc1\u7c7b\u578b\u3002\u652f\u6301\u7684\u503c\uff1a"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u503c"}),(0,i.jsx)(n.th,{children:"\u53d1\u9001\u7684 Header"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"api_key"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"X-API-Key: <auth_value>"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bearer_token"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Authorization: Bearer <auth_value>"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"basic"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Authorization: Basic <auth_value>"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"authorization"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Authorization: <auth_value>"})})]})]})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u989d\u5916 Headers"}),"\uff1a\u53ef\u9009\u7684\u5176\u4ed6 header \u540d\u79f0\u5217\u8868\uff0c\u8fd9\u4e9b headers \u5e94\u4ece\u5ba2\u6237\u7aef\u8f6c\u53d1\u5230 MCP \u670d\u52a1\u5668"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u9759\u6001 Headers"}),"\uff1a\u53ef\u9009\u7684 header \u952e\u503c\u5bf9\u6620\u5c04\uff0c\u5305\u542b\u5728\u6bcf\u4e2a\u5bf9 MCP \u670d\u52a1\u5668\u7684\u8bf7\u6c42\u4e2d\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u89c4\u8303\u7248\u672c"}),"\uff1a\u53ef\u9009\u7684 MCP \u89c4\u8303\u7248\u672c\uff08\u9ed8\u8ba4\u4e3a ",(0,i.jsx)(n.code,{children:"2025-06-18"}),"\uff09"]}),"\n"]}),"\n"]}),(0,i.jsx)(n.p,{children:"\u6bcf\u79cd\u8eab\u4efd\u9a8c\u8bc1\u7c7b\u578b\u7684\u793a\u4f8b\uff1a"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="MCP \u8eab\u4efd\u9a8c\u8bc1\u793a\u4f8b (config.yaml)" showLineNumbers',children:'mcp_servers:\n  api_key_example:\n    url: "https://my-mcp-server.com/mcp"\n    auth_type: "api_key"\n    auth_value: "abc123"        # headers={"X-API-Key": "abc123"}\n\n  # NEW \u2013 OAuth 2.0 \u5ba2\u6237\u7aef\u51ed\u636e (v1.77.5)\n  oauth2_example:\n    url: "https://my-mcp-server.com/mcp"\n    auth_type: "oauth2"         # \ud83d\udc48 \u5173\u952e\u53d8\u66f4\n    authorization_url: "https://my-mcp-server.com/oauth/authorize" # \u53ef\u9009\u8986\u76d6\n    token_url: "https://my-mcp-server.com/oauth/token"             # \u53ef\u9009\u8986\u76d6\n    registration_url: "https://my-mcp-server.com/oauth/register"   # \u53ef\u9009\u8986\u76d6\n    client_id: os.environ/OAUTH_CLIENT_ID\n    client_secret: os.environ/OAUTH_CLIENT_SECRET\n    scopes: ["tool.read", "tool.write"] # \u53ef\u9009\u8986\u76d6\n\n  bearer_example:\n    url: "https://my-mcp-server.com/mcp"\n    auth_type: "bearer_token"\n    auth_value: "abc123"        # headers={"Authorization": "Bearer abc123"}\n\n  basic_example:\n    url: "https://my-mcp-server.com/mcp"\n    auth_type: "basic"\n    auth_value: "dXNlcjpwYXNz"  # headers={"Authorization": "Basic dXNlcjpwYXNz"}\n\n  custom_auth_example:\n    url: "https://my-mcp-server.com/mcp"\n    auth_type: "authorization"\n    auth_value: "Token example123"  # headers={"Authorization": "Token example123"}\n\n  # \u989d\u5916 headers \u8f6c\u53d1\u793a\u4f8b\n  github_mcp:\n    url: "https://api.githubcopilot.com/mcp"\n    auth_type: "bearer_token"\n    auth_value: "ghp_example_token"\n    extra_headers: ["custom_key", "x-custom-header"]  # \u8fd9\u4e9b headers \u5c06\u4ece\u5ba2\u6237\u7aef\u8f6c\u53d1\n\n  # \u9759\u6001 headers \u793a\u4f8b\n  my_mcp_server:\n    url: "https://my-mcp-server.com/mcp"\n    static_headers: # \u8fd9\u4e9b headers \u5c06\u88ab\u53d1\u9001\u5230 MCP \u670d\u52a1\u5668\n      X-API-Key: "abc123"\n      X-Custom-Header: "some-value"\n'})}),(0,i.jsx)(n.h3,{id:"mcp-\u6f14\u793a",children:"MCP \u6f14\u793a"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Strands (STDIO)"})," \u2013 ",(0,i.jsx)(n.a,{href:"https://screen.studio/share/ruv4D73F",children:"\u89c2\u770b\u6559\u7a0b"})]}),"\n"]}),(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\u4ece UI \u6dfb\u52a0"}),"\n"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="strands-mcp" showLineNumbers',children:'{\n  "mcpServers": {\n    "strands-agents": {\n      "command": "uvx",\n      "args": ["strands-agents-mcp-server"],\n      "env": {\n        "FASTMCP_LOG_LEVEL": "INFO"\n      },\n      "disabled": false,\n      "autoApprove": ["search_docs", "fetch_doc"]\n    }\n  }\n}\n'})}),(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"config.yml"}),"\n"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="config.yml \u2013 strands MCP" showLineNumbers',children:'mcp_servers:\n  strands_mcp:\n    transport: "stdio"\n    command: "uvx"\n    args: ["strands-agents-mcp-server"]\n    env:\n      FASTMCP_LOG_LEVEL: "INFO"\n'})}),(0,i.jsx)(n.h3,{id:"mcp-\u522b\u540d",children:"MCP \u522b\u540d"}),(0,i.jsxs)(n.p,{children:["\u60a8\u53ef\u4ee5\u5728 ",(0,i.jsx)(n.code,{children:"litellm_settings"})," \u90e8\u5206\u4e3a MCP \u670d\u52a1\u5668\u5b9a\u4e49\u522b\u540d\u3002\u8fd9\u5141\u8bb8\u60a8\uff1a"]}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6620\u5c04\u53cb\u597d\u540d\u79f0\u5230\u670d\u52a1\u5668\u540d\u79f0"}),"\uff1a\u4f7f\u7528\u66f4\u77ed\u3001\u66f4\u6613\u8bb0\u7684\u522b\u540d"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8986\u76d6\u670d\u52a1\u5668\u522b\u540d"}),"\uff1a\u5982\u679c\u670d\u52a1\u5668\u6ca1\u6709\u5b9a\u4e49\u522b\u540d\uff0c\u7cfb\u7edf\u5c06\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"mcp_aliases"})," \u4e2d\u7684\u7b2c\u4e00\u4e2a\u5339\u914d\u522b\u540d"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u786e\u4fdd\u552f\u4e00\u6027"}),"\uff1a\u4ec5\u4f7f\u7528\u6bcf\u4e2a\u670d\u52a1\u5668\u7684\u7b2c\u4e00\u4e2a\u522b\u540d\uff0c\u9632\u6b62\u51b2\u7a81"]}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u793a\u4f8b\uff1a"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'litellm_settings:\n  mcp_aliases:\n    "github": "github_mcp_server"      # \u5c06 "github" \u522b\u540d\u6620\u5c04\u5230 "github_mcp_server"\n    "zapier": "zapier_mcp_server"      # \u5c06 "zapier" \u522b\u540d\u6620\u5c04\u5230 "zapier_mcp_server"\n    "docs": "deepwiki_mcp_server"      # \u5c06 "docs" \u522b\u540d\u6620\u5c04\u5230 "deepwiki_mcp_server"\n    "github_alt": "github_mcp_server"  # \u8fd9\u5c06\u88ab\u5ffd\u7565\uff0c\u56e0\u4e3a "github" \u5df2\u7ecf\u6620\u5c04\u5230\u6b64\u670d\u52a1\u5668\n'})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u4f18\u52bf\uff1a"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u7b80\u5316\u5de5\u5177\u8bbf\u95ee"}),"\uff1a\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"github_create_issue"})," \u800c\u4e0d\u662f ",(0,i.jsx)(n.code,{children:"github_mcp_server_create_issue"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u4e00\u81f4\u6027\u547d\u540d"}),"\uff1a\u5728\u6574\u4e2a\u7ec4\u7ec7\u4e2d\u6807\u51c6\u5316\u522b\u540d\u6a21\u5f0f"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8f7b\u677e\u8fc1\u79fb"}),"\uff1a\u66f4\u6539\u670d\u52a1\u5668\u540d\u79f0\u800c\u4e0d\u4f1a\u7834\u574f\u73b0\u6709\u7684\u5de5\u5177\u5f15\u7528"]}),"\n"]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"\u5c06-openapi-\u89c4\u8303\u8f6c\u6362\u4e3a-mcp-\u670d\u52a1\u5668",children:"\u5c06 OpenAPI \u89c4\u8303\u8f6c\u6362\u4e3a MCP \u670d\u52a1\u5668"}),"\n",(0,i.jsx)(n.p,{children:"LiteLLM \u53ef\u4ee5\u81ea\u52a8\u5c06 OpenAPI \u89c4\u8303\u8f6c\u6362\u4e3a MCP \u670d\u52a1\u5668\uff0c\u5141\u8bb8\u60a8\u5c06\u4efb\u4f55 REST API \u66b4\u9732\u4e3a MCP \u5de5\u5177\u3002\u5f53\u60a8\u62e5\u6709\u5177\u6709 OpenAPI/Swagger \u6587\u6863\u7684\u73b0\u6709 API \u5e76\u5e0c\u671b\u5c06\u5176\u4f5c\u4e3a MCP \u5de5\u5177\u4f7f\u7528\u65f6\uff0c\u8fd9\u975e\u5e38\u6709\u7528\u3002"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u4f18\u52bf\uff1a"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5feb\u901f\u96c6\u6210"}),"\uff1a\u5c06\u73b0\u6709 API \u8f6c\u6362\u4e3a MCP \u5de5\u5177\uff0c\u800c\u65e0\u9700\u7f16\u5199\u81ea\u5b9a\u4e49 MCP \u670d\u52a1\u5668\u4ee3\u7801"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u81ea\u52a8\u5de5\u5177\u751f\u6210"}),"\uff1aLiteLLM \u81ea\u52a8\u4ece\u60a8\u7684 OpenAPI \u89c4\u8303\u751f\u6210 MCP \u5de5\u5177"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u7edf\u4e00\u63a5\u53e3"}),"\uff1a\u4e3a\u539f\u751f MCP \u670d\u52a1\u5668\u548c\u57fa\u4e8e OpenAPI \u7684 API \u4f7f\u7528\u76f8\u540c\u7684 MCP \u63a5\u53e3"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8f7b\u677e\u6d4b\u8bd5"}),"\uff1a\u5feb\u901f\u6d4b\u8bd5\u548c\u8fed\u4ee3 API \u96c6\u6210"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u914d\u7f6e\uff1a"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5c06\u57fa\u4e8e OpenAPI \u7684 MCP \u670d\u52a1\u5668\u6dfb\u52a0\u5230 ",(0,i.jsx)(n.code,{children:"config.yaml"}),"\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="config.yaml - OpenAPI \u8f6c MCP" showLineNumbers',children:'model_list:\n  - model_name: gpt-4o\n    litellm_params:\n      model: openai/gpt-4o\n      api_key: sk-xxxxxxx\n\nmcp_servers:\n  # OpenAPI \u89c4\u8303\u793a\u4f8b - Petstore API\n  petstore_mcp:\n    url: "https://petstore.swagger.io/v2"\n    spec_path: "/path/to/openapi.json"\n    auth_type: "none"\n\n  # \u5e26 API Key \u8eab\u4efd\u9a8c\u8bc1\u7684 OpenAPI \u89c4\u8303\n  my_api_mcp:\n    url: "http://0.0.0.0:8090"\n    spec_path: "/path/to/openapi.json"\n    auth_type: "api_key"\n    auth_value: "your-api-key-here"\n\n  # \u5e26 Bearer Token \u7684 OpenAPI \u89c4\u8303\n  secured_api_mcp:\n    url: "https://api.example.com"\n    spec_path: "/path/to/openapi.json"\n    auth_type: "bearer_token"\n    auth_value: "your-bearer-token"\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u914d\u7f6e\u53c2\u6570\uff1a"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u53c2\u6570"}),(0,i.jsx)(n.th,{children:"\u5fc5\u9700"}),(0,i.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"url"})}),(0,i.jsx)(n.td,{children:"\u662f"}),(0,i.jsx)(n.td,{children:"API \u7aef\u70b9\u7684\u57fa\u672c URL"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"spec_path"})}),(0,i.jsx)(n.td,{children:"\u662f"}),(0,i.jsx)(n.td,{children:"OpenAPI \u89c4\u8303\u6587\u4ef6\u7684\u8def\u5f84\u6216 URL\uff08JSON \u6216 YAML\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"auth_type"})}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsxs)(n.td,{children:["\u8eab\u4efd\u9a8c\u8bc1\u7c7b\u578b\uff1a",(0,i.jsx)(n.code,{children:"none"}),"\u3001",(0,i.jsx)(n.code,{children:"api_key"}),"\u3001",(0,i.jsx)(n.code,{children:"bearer_token"}),"\u3001",(0,i.jsx)(n.code,{children:"basic"}),"\u3001",(0,i.jsx)(n.code,{children:"authorization"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"auth_value"})}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsxs)(n.td,{children:["\u8eab\u4efd\u9a8c\u8bc1\u503c\uff08\u5982\u679c\u8bbe\u7f6e\u4e86 ",(0,i.jsx)(n.code,{children:"auth_type"})," \u5219\u5fc5\u9700\uff09"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"authorization_url"})}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsxs)(n.td,{children:["\u7528\u4e8e ",(0,i.jsx)(n.code,{children:"auth_type: oauth2"}),"\u3002\u53ef\u9009\u8986\u76d6\uff1b\u5982\u679c\u7701\u7565\uff0cLiteLLM \u4f1a\u81ea\u52a8\u53d1\u73b0\u3002"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"token_url"})}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsxs)(n.td,{children:["\u7528\u4e8e ",(0,i.jsx)(n.code,{children:"auth_type: oauth2"}),"\u3002\u53ef\u9009\u8986\u76d6\uff1b\u5982\u679c\u7701\u7565\uff0cLiteLLM \u4f1a\u81ea\u52a8\u53d1\u73b0\u3002"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"registration_url"})}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsxs)(n.td,{children:["\u7528\u4e8e ",(0,i.jsx)(n.code,{children:"auth_type: oauth2"}),"\u3002\u53ef\u9009\u8986\u76d6\uff1b\u5982\u679c\u7701\u7565\uff0cLiteLLM \u4f1a\u81ea\u52a8\u53d1\u73b0\u3002"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"scopes"})}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsxs)(n.td,{children:["\u7528\u4e8e ",(0,i.jsx)(n.code,{children:"auth_type: oauth2"}),"\u3002\u53ef\u9009\u8986\u76d6\uff1b\u5982\u679c\u7701\u7565\uff0cLiteLLM \u4f7f\u7528\u670d\u52a1\u5668\u901a\u544a\u7684\u8303\u56f4\u3002"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"description"})}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsx)(n.td,{children:"MCP \u670d\u52a1\u5668\u7684\u53ef\u9009\u63cf\u8ff0"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"allowed_tools"})}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsxs)(n.td,{children:["\u8981\u5141\u8bb8\u7684\u7279\u5b9a\u5de5\u5177\u5217\u8868\uff08\u8bf7\u53c2\u9605 ",(0,i.jsx)(n.a,{href:"#mcp-tool-filtering",children:"MCP \u5de5\u5177\u8fc7\u6ee4"}),"\uff09"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"disallowed_tools"})}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsxs)(n.td,{children:["\u8981\u963b\u6b62\u7684\u7279\u5b9a\u5de5\u5177\u5217\u8868\uff08\u8bf7\u53c2\u9605 ",(0,i.jsx)(n.a,{href:"#mcp-tool-filtering",children:"MCP \u5de5\u5177\u8fc7\u6ee4"}),"\uff09"]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"\u4f7f\u7528\u793a\u4f8b",children:"\u4f7f\u7528\u793a\u4f8b"}),"\n",(0,i.jsx)(n.p,{children:"\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u60a8\u53ef\u4ee5\u50cf\u4f7f\u7528\u4efb\u4f55\u5176\u4ed6 MCP \u670d\u52a1\u5668\u4e00\u6837\u4f7f\u7528\u57fa\u4e8e OpenAPI \u7684 MCP \u670d\u52a1\u5668\uff1a"}),"\n",(0,i.jsxs)(t.A,{children:[(0,i.jsx)(a.A,{value:"fastmcp",label:"Python FastMCP",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="\u4f7f\u7528\u57fa\u4e8e OpenAPI \u7684 MCP \u670d\u52a1\u5668" showLineNumbers',children:'from fastmcp import Client\nimport asyncio\n\n# \u6807\u51c6 MCP \u914d\u7f6e\nconfig = {\n    "mcpServers": {\n        "petstore": {\n            "url": "http://localhost:4000/petstore_mcp/mcp",\n            "headers": {\n                "x-litellm-api-key": "Bearer sk-1234"\n            }\n        }\n    }\n}\n\n# \u521b\u5efa\u8fde\u63a5\u5230\u670d\u52a1\u5668\u7684\u5ba2\u6237\u7aef\nclient = Client(config)\n\nasync def main():\n    async with client:\n        # \u5217\u51fa\u4ece OpenAPI \u89c4\u8303\u751f\u6210\u7684\u53ef\u7528\u5de5\u5177\n        tools = await client.list_tools()\n        print(f"Available tools: {[tool.name for tool in tools]}")\n\n        # \u793a\u4f8b\uff1a\u901a\u8fc7 ID \u83b7\u53d6\u5ba0\u7269\uff08\u6765\u81ea Petstore API\uff09\n        response = await client.call_tool(\n            name="getpetbyid",\n            arguments={"petId": "1"}\n        )\n        print(f"Response:\\n{response}\\n")\n\n        # \u793a\u4f8b\uff1a\u6309\u72b6\u6001\u67e5\u627e\u5ba0\u7269\n        response = await client.call_tool(\n            name="findpetsbystatus",\n            arguments={"status": "available"}\n        )\n        print(f"Response:\\n{response}\\n")\n\nif __name__ == "__main__":\n    asyncio.run(main())\n'})})}),(0,i.jsx)(a.A,{value:"cursor",label:"Cursor IDE",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="OpenAPI \u670d\u52a1\u5668\u7684 Cursor MCP \u914d\u7f6e" showLineNumbers',children:'{\n  "mcpServers": {\n    "Petstore": {\n      "url": "http://localhost:4000/petstore_mcp/mcp",\n      "headers": {\n        "x-litellm-api-key": "Bearer $LITELLM_API_KEY"\n      }\n    }\n  }\n}\n'})})}),(0,i.jsx)(a.A,{value:"openai",label:"OpenAI Responses API",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="\u5c06 OpenAPI MCP \u670d\u52a1\u5668\u4e0e OpenAI \u4e00\u8d77\u4f7f\u7528" showLineNumbers',children:'curl --location \'https://api.openai.com/v1/responses\' \\\n--header \'Content-Type: application/json\' \\\n--header "Authorization: Bearer $OPENAI_API_KEY" \\\n--data \'{\n    "model": "gpt-4o",\n    "tools": [\n        {\n            "type": "mcp",\n            "server_label": "petstore",\n            "server_url": "http://localhost:4000/petstore_mcp/mcp",\n            "require_approval": "never",\n            "headers": {\n                "x-litellm-api-key": "Bearer YOUR_LITELLM_API_KEY"\n            }\n        }\n    ],\n    "input": "Find all available pets in the petstore",\n    "tool_choice": "required"\n}\'\n'})})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u5de5\u4f5c\u539f\u7406"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u89c4\u8303\u52a0\u8f7d"}),"\uff1aLiteLLM \u4ece\u63d0\u4f9b\u7684 ",(0,i.jsx)(n.code,{children:"spec_path"})," \u52a0\u8f7d OpenAPI \u89c4\u8303"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5de5\u5177\u751f\u6210"}),"\uff1a\u89c4\u8303\u4e2d\u7684\u6bcf\u4e2a API \u7aef\u70b9\u90fd\u6210\u4e3a\u4e00\u4e2a MCP \u5de5\u5177"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u53c2\u6570\u6620\u5c04"}),"\uff1aOpenAPI \u53c2\u6570\u81ea\u52a8\u6620\u5c04\u5230 MCP \u5de5\u5177\u53c2\u6570"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8bf7\u6c42\u5904\u7406"}),"\uff1a\u8c03\u7528\u5de5\u5177\u65f6\uff0cLiteLLM \u5c06 MCP \u8bf7\u6c42\u8f6c\u6362\u4e3a\u76f8\u5e94\u7684 HTTP \u8bf7\u6c42"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u54cd\u5e94\u8f6c\u6362"}),"\uff1aAPI \u54cd\u5e94\u88ab\u8f6c\u6362\u56de MCP \u683c\u5f0f"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"OpenAPI \u89c4\u8303\u8981\u6c42"})}),"\n",(0,i.jsx)(n.p,{children:"\u60a8\u7684 OpenAPI \u89c4\u8303\u5e94\u9075\u5faa\u6807\u51c6\u7684 OpenAPI/Swagger \u7ea6\u5b9a\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u652f\u6301\u7684\u7248\u672c"}),"\uff1aOpenAPI 3.0.x\u3001OpenAPI 3.1.x\u3001Swagger 2.0"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5fc5\u9700\u5b57\u6bb5"}),"\uff1a",(0,i.jsx)(n.code,{children:"paths"}),"\u3001",(0,i.jsx)(n.code,{children:"info"})," \u90e8\u5206\u5e94\u6b63\u786e\u5b9a\u4e49"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u64cd\u4f5c ID"}),"\uff1a\u6bcf\u4e2a\u64cd\u4f5c\u5e94\u5177\u6709\u552f\u4e00\u7684 ",(0,i.jsx)(n.code,{children:"operationId"}),"\uff08\u8fd9\u5c06\u6210\u4e3a\u5de5\u5177\u540d\u79f0\uff09"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u53c2\u6570"}),"\uff1a\u8bf7\u6c42\u53c2\u6570\u5e94\u4f7f\u7528\u7c7b\u578b\u548c\u63cf\u8ff0\u6b63\u786e\u8bb0\u5f55"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"mcp-oauth",children:"MCP OAuth"}),"\n",(0,i.jsx)(n.p,{children:"LiteLLM v 1.77.6 \u6dfb\u52a0\u4e86\u5bf9 MCP \u670d\u52a1\u5668\u7684 OAuth 2.0 \u5ba2\u6237\u7aef\u51ed\u636e\u7684\u652f\u6301\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u6b64\u914d\u7f6e\u76ee\u524d\u5728 config.yaml \u4e0a\u53ef\u7528\uff0cUI \u652f\u6301\u5373\u5c06\u63a8\u51fa\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'mcp_servers:\n  github_mcp:\n    url: "https://api.githubcopilot.com/mcp"\n    auth_type: oauth2\n    client_id: os.environ/GITHUB_OAUTH_CLIENT_ID\n    client_secret: os.environ/GITHUB_OAUTH_CLIENT_SECRET\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"./tutorials/claude_responses_api#connecting-mcp-servers",children:(0,i.jsx)(n.strong,{children:"\u67e5\u770b Claude Code \u6559\u7a0b"})})}),"\n",(0,i.jsx)(n.h3,{id:"\u5de5\u4f5c\u539f\u7406",children:"\u5de5\u4f5c\u539f\u7406"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Browser as \u7528\u6237\u4ee3\u7406 (\u6d4f\u89c8\u5668)\n    participant Client as \u5ba2\u6237\u7aef\n    participant LiteLLM as LiteLLM Proxy\n    participant MCP as MCP \u670d\u52a1\u5668 (\u8d44\u6e90\u670d\u52a1\u5668)\n    participant Auth as \u6388\u6743\u670d\u52a1\u5668\n\n    Note over Client,LiteLLM: \u6b65\u9aa4 1 \u2013 \u8d44\u6e90\u53d1\u73b0\n    Client->>LiteLLM: GET /.well-known/oauth-protected-resource/{mcp_server_name}/mcp\n    LiteLLM->>Client: \u8fd4\u56de\u8d44\u6e90\u5143\u6570\u636e\n\n    Note over Client,LiteLLM: \u6b65\u9aa4 2 \u2013 \u6388\u6743\u670d\u52a1\u5668\u53d1\u73b0\n    Client->>LiteLLM: GET /.well-known/oauth-authorization-server/{mcp_server_name}\n    LiteLLM->>Client: \u8fd4\u56de\u6388\u6743\u670d\u52a1\u5668\u5143\u6570\u636e\n\n    Note over Client,Auth: \u6b65\u9aa4 3 \u2013 \u52a8\u6001\u5ba2\u6237\u7aef\u6ce8\u518c\n    Client->>LiteLLM: POST /{mcp_server_name}/register\n    LiteLLM->>Auth: \u8f6c\u53d1\u6ce8\u518c\u8bf7\u6c42\n    Auth->>LiteLLM: \u9881\u53d1\u5ba2\u6237\u7aef\u51ed\u636e\n    LiteLLM->>Client: \u8fd4\u56de\u5ba2\u6237\u7aef\u51ed\u636e\n\n    Note over Client,Browser: \u6b65\u9aa4 4 \u2013 \u7528\u6237\u6388\u6743 (PKCE)\n    Client->>Browser: \u6253\u5f00\u6388\u6743 URL + code_challenge + resource\n    Browser->>Auth: \u6388\u6743\u8bf7\u6c42\n    Note over Auth: \u7528\u6237\u6388\u6743\n    Auth->>Browser: \u4f7f\u7528\u6388\u6743\u4ee3\u7801\u91cd\u5b9a\u5411\n    Browser->>LiteLLM: \u4f7f\u7528\u4ee3\u7801\u56de\u8c03\u5230 LiteLLM\n    LiteLLM->>Browser: \u4f7f\u7528\u6388\u6743\u4ee3\u7801\u91cd\u5b9a\u5411\u56de\n    Browser->>Client: \u4f7f\u7528\u6388\u6743\u4ee3\u7801\u56de\u8c03\n\n    Note over Client,Auth: \u6b65\u9aa4 5 \u2013 \u4ee4\u724c\u4ea4\u6362\n    Client->>LiteLLM: \u4ee4\u724c\u8bf7\u6c42 + code_verifier + resource\n    LiteLLM->>Auth: \u8f6c\u53d1\u4ee4\u724c\u8bf7\u6c42\n    Auth->>LiteLLM: \u8bbf\u95ee\uff08\u548c\u5237\u65b0\uff09\u4ee4\u724c\n    LiteLLM->>Client: \u8fd4\u56de\u4ee4\u724c\n\n    Note over Client,MCP: \u6b65\u9aa4 6 \u2013 \u5df2\u8ba4\u8bc1\u7684 MCP \u8c03\u7528\n    Client->>LiteLLM: MCP \u8bf7\u6c42 + \u8bbf\u95ee\u4ee4\u724c + LiteLLM API key\n    LiteLLM->>MCP: \u5e26 Bearer \u4ee4\u724c\u7684 MCP \u8bf7\u6c42\n    MCP--\x3e>LiteLLM: MCP \u54cd\u5e94\n    LiteLLM--\x3e>Client: \u8fd4\u56de MCP \u54cd\u5e94"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u53c2\u4e0e\u8005"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5ba2\u6237\u7aef"})," \u2013 \u652f\u6301 MCP \u7684 AI \u4ee3\u7406\uff08\u4f8b\u5982 Claude Code\u3001Cursor \u6216\u5176\u4ed6 IDE/\u4ee3\u7406\uff09\uff0c\u4ee3\u8868\u7528\u6237\u53d1\u8d77 OAuth \u53d1\u73b0\u3001\u6388\u6743\u548c\u5de5\u5177\u8c03\u7528\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"LiteLLM Proxy"})," \u2013 \u5728\u4fdd\u62a4\u5b58\u50a8\u7684\u51ed\u636e\u7684\u540c\u65f6\uff0c\u8c03\u89e3\u6240\u6709 OAuth \u53d1\u73b0\u3001\u6ce8\u518c\u3001\u4ee4\u724c\u4ea4\u6362\u548c MCP \u6d41\u91cf\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6388\u6743\u670d\u52a1\u5668"})," \u2013 \u901a\u8fc7\u52a8\u6001\u5ba2\u6237\u7aef\u6ce8\u518c\u3001PKCE \u6388\u6743\u548c\u4ee4\u724c\u7aef\u70b9\u9881\u53d1 OAuth 2.0 \u4ee4\u724c\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"MCP \u670d\u52a1\u5668 (\u8d44\u6e90\u670d\u52a1\u5668)"})," \u2013 \u53d7\u4fdd\u62a4\u7684 MCP \u7aef\u70b9\uff0c\u63a5\u6536 LiteLLM \u7684\u5df2\u8ba4\u8bc1 JSON-RPC \u8bf7\u6c42\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u7528\u6237\u4ee3\u7406 (\u6d4f\u89c8\u5668)"})," \u2013 \u4e34\u65f6\u53c2\u4e0e\uff0c\u4ee5\u4fbf\u6700\u7ec8\u7528\u6237\u53ef\u4ee5\u5728\u6388\u6743\u6b65\u9aa4\u671f\u95f4\u6388\u4e88\u540c\u610f\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u6d41\u7a0b\u6b65\u9aa4"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8d44\u6e90\u53d1\u73b0"}),"\uff1a\u5ba2\u6237\u7aef\u4ece LiteLLM \u7684 ",(0,i.jsx)(n.code,{children:".well-known/oauth-protected-resource"})," \u7aef\u70b9\u83b7\u53d6 MCP \u8d44\u6e90\u5143\u6570\u636e\uff0c\u4ee5\u4e86\u89e3\u8303\u56f4\u548c\u529f\u80fd\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6388\u6743\u670d\u52a1\u5668\u53d1\u73b0"}),"\uff1a\u5ba2\u6237\u7aef\u901a\u8fc7 LiteLLM \u7684 ",(0,i.jsx)(n.code,{children:".well-known/oauth-authorization-server"})," \u7aef\u70b9\u68c0\u7d22 OAuth \u670d\u52a1\u5668\u5143\u6570\u636e\uff08\u4ee4\u724c\u7aef\u70b9\u3001\u6388\u6743\u7aef\u70b9\u3001\u652f\u6301\u7684 PKCE \u65b9\u6cd5\uff09\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u52a8\u6001\u5ba2\u6237\u7aef\u6ce8\u518c"}),"\uff1a\u5ba2\u6237\u7aef\u901a\u8fc7 LiteLLM \u6ce8\u518c\uff0c\u540e\u8005\u5c06\u8bf7\u6c42\u8f6c\u53d1\u5230\u6388\u6743\u670d\u52a1\u5668\uff08RFC 7591\uff09\u3002\u5982\u679c\u63d0\u4f9b\u5546\u4e0d\u652f\u6301\u52a8\u6001\u6ce8\u518c\uff0c\u60a8\u53ef\u4ee5\u5728 LiteLLM \u4e2d\u9884\u5b58 ",(0,i.jsx)(n.code,{children:"client_id"}),"/",(0,i.jsx)(n.code,{children:"client_secret"}),"\uff08\u4f8b\u5982 GitHub MCP\uff09\uff0c\u6d41\u7a0b\u5c06\u4ee5\u76f8\u540c\u65b9\u5f0f\u7ee7\u7eed\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u7528\u6237\u6388\u6743"}),"\uff1a\u5ba2\u6237\u7aef\u542f\u52a8\u6d4f\u89c8\u5668\u4f1a\u8bdd\uff08\u5e26\u6709\u4ee3\u7801\u6311\u6218\u548c\u8d44\u6e90\u63d0\u793a\uff09\u3002\u7528\u6237\u6279\u51c6\u8bbf\u95ee\uff0c\u6388\u6743\u670d\u52a1\u5668\u901a\u8fc7 LiteLLM \u5c06\u4ee3\u7801\u53d1\u9001\u56de\u5ba2\u6237\u7aef\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u4ee4\u724c\u4ea4\u6362"}),"\uff1a\u5ba2\u6237\u7aef\u4f7f\u7528\u6388\u6743\u4ee3\u7801\u3001\u4ee3\u7801\u9a8c\u8bc1\u5668\u548c\u8d44\u6e90\u8c03\u7528 LiteLLM\u3002LiteLLM \u4e0e\u6388\u6743\u670d\u52a1\u5668\u4ea4\u6362\u5b83\u4eec\u5e76\u8fd4\u56de\u9881\u53d1\u7684\u8bbf\u95ee/\u5237\u65b0\u4ee4\u724c\u3002"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"MCP \u8c03\u7528"}),"\uff1a\u4f7f\u7528\u6709\u6548\u4ee4\u724c\uff0c\u5ba2\u6237\u7aef\u5c06 MCP JSON-RPC \u8bf7\u6c42\uff08\u52a0\u4e0a LiteLLM API key\uff09\u53d1\u9001\u5230 LiteLLM\uff0c\u540e\u8005\u5c06\u5176\u8f6c\u53d1\u5230 MCP \u670d\u52a1\u5668\u5e76\u4e2d\u7ee7\u5de5\u5177\u54cd\u5e94\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u6709\u5173\u5176\u4ed6\u53c2\u8003\uff0c\u8bf7\u53c2\u9605\u5b98\u65b9 ",(0,i.jsx)(n.a,{href:"https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization#authorization-flow-steps",children:"MCP \u6388\u6743\u6d41\u7a0b"}),"\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u5c06\u81ea\u5b9a\u4e49-headers-\u8f6c\u53d1\u5230-mcp-\u670d\u52a1\u5668",children:"\u5c06\u81ea\u5b9a\u4e49 Headers \u8f6c\u53d1\u5230 MCP \u670d\u52a1\u5668"}),"\n",(0,i.jsxs)(n.p,{children:["LiteLLM \u652f\u6301\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"extra_headers"})," \u914d\u7f6e\u53c2\u6570\u5c06\u6765\u81ea MCP \u5ba2\u6237\u7aef\u7684\u5176\u4ed6\u81ea\u5b9a\u4e49 headers \u8f6c\u53d1\u5230\u540e\u7aef MCP \u670d\u52a1\u5668\u3002\u8fd9\u5141\u8bb8\u60a8\u4f20\u9012\u81ea\u5b9a\u4e49\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u3001API keys \u6216 MCP \u670d\u52a1\u5668\u6240\u9700\u7684\u5176\u4ed6 headers\u3002"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u914d\u7f6e"})}),"\n",(0,i.jsxs)(t.A,{children:[(0,i.jsxs)(a.A,{value:"config",label:"config.yaml",children:[(0,i.jsxs)(n.p,{children:["\u5728 MCP \u670d\u52a1\u5668\u914d\u7f6e\u4e2d\u914d\u7f6e ",(0,i.jsx)(n.code,{children:"extra_headers"})," \u4ee5\u6307\u5b9a\u5e94\u8f6c\u53d1\u54ea\u4e9b header \u540d\u79f0\uff1a"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="config.yaml with extra_headers" showLineNumbers',children:'mcp_servers:\n  github_mcp:\n    url: "https://api.githubcopilot.com/mcp"\n    auth_type: "bearer_token"\n    auth_value: "ghp_default_token"\n    extra_headers: ["custom_key", "x-custom-header", "Authorization"]\n    description: "GitHub MCP server with custom header forwarding"\n'})})]}),(0,i.jsxs)(a.A,{value:"clientside",label:"\u52a8\u6001\u5728\u5ba2\u6237\u7aef",children:[(0,i.jsxs)(n.p,{children:["\u5728\u6388\u4e88\u7528\u6237\u8bbf\u95ee",(0,i.jsx)(n.a,{href:"#grouping-mcps-access-groups",children:"MCP \u670d\u52a1\u5668\u7ec4"}),"\u7684\u6743\u9650\u65f6\u4f7f\u7528\u6b64\u529f\u80fd\u3002"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u683c\u5f0f\uff1a"})," ",(0,i.jsx)(n.code,{children:"x-mcp-{server_alias}-{header_name}: value"})]}),(0,i.jsx)(n.p,{children:"\u8fd9\u5141\u8bb8\u60a8\u4e3a\u4e0d\u540c\u7684 MCP \u670d\u52a1\u5668\u4f7f\u7528\u4e0d\u540c\u7684\u8eab\u4efd\u9a8c\u8bc1\u3002"}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u793a\u4f8b\uff1a"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"x-mcp-github-authorization: Bearer ghp_xxxxxxxxx"})," - GitHub MCP \u670d\u52a1\u5668\u4f7f\u7528 Bearer \u4ee4\u724c"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"x-mcp-zapier-x-api-key: sk-xxxxxxxxx"})," - Zapier MCP \u670d\u52a1\u5668\u4f7f\u7528 API key"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"x-mcp-deepwiki-authorization: Basic base64_encoded_creds"})," - DeepWiki MCP \u670d\u52a1\u5668\u4f7f\u7528 Basic \u8eab\u4efd\u9a8c\u8bc1"]}),"\n"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="\u5177\u6709\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1\u7684 Python \u5ba2\u6237\u7aef" showLineNumbers',children:'from fastmcp import Client\nimport asyncio\n\n# \u5e26\u6709\u591a\u4e2a\u670d\u52a1\u5668\u7684\u6807\u51c6 MCP \u914d\u7f6e\nconfig = {\n    "mcpServers": {\n        "mcp_group": {\n            "url": "http://localhost:4000/mcp",\n            "headers": {\n                "x-mcp-servers": "dev_group", # \u5047\u8bbe\u8fd9\u6388\u4e88\u5bf9 github\u3001zapier \u548c deepwiki \u7684\u8bbf\u95ee\u6743\u9650\n                "x-litellm-api-key": "Bearer sk-1234",\n                "x-mcp-github-authorization": "Bearer gho_token",\n                "x-mcp-zapier-x-api-key": "sk-xxxxxxxxx",\n                "x-mcp-deepwiki-authorization": "Basic base64_encoded_creds",\n                "custom_key": "value"\n            }\n        }\n    }\n}\n\n# \u521b\u5efa\u8fde\u63a5\u5230\u6240\u6709\u670d\u52a1\u5668\u7684\u5ba2\u6237\u7aef\nclient = Client(config)\n\n\nasync def main():\n    async with client:\n        tools = await client.list_tools()\n        print(f"Available tools: {tools}")\n\n        # \u8c03\u7528 mcp\n        await client.call_tool(\n            name="github_mcp-search_issues",\n            arguments={\'query\': \'created:>2024-01-01\', \'sort\': \'created\', \'order\': \'desc\', \'perPage\': 30}\n        )\n\nif __name__ == "__main__":\n    asyncio.run(main())\n\n'})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u4f18\u52bf\uff1a"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1"}),"\uff1a\u6bcf\u4e2a MCP \u670d\u52a1\u5668\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u8eab\u4efd\u9a8c\u8bc1\u65b9\u6cd5"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u66f4\u597d\u7684\u5b89\u5168\u6027"}),"\uff1a\u65e0\u9700\u5728\u6240\u6709\u670d\u52a1\u5668\u4e4b\u95f4\u5171\u4eab\u76f8\u540c\u7684\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u7075\u6d3b\u7684 header \u540d\u79f0"}),"\uff1a\u652f\u6301\u4e0d\u540c\u7684\u8eab\u4efd\u9a8c\u8bc1 header \u7c7b\u578b\uff08authorization\u3001x-api-key \u7b49\uff09"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6e05\u6670\u7684\u5206\u79bb"}),"\uff1a\u6bcf\u4e2a\u670d\u52a1\u5668\u7684\u8eab\u4efd\u9a8c\u8bc1\u90fd\u88ab\u6e05\u6670\u8bc6\u522b"]}),"\n"]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"\u5ba2\u6237\u7aef\u4f7f\u7528",children:"\u5ba2\u6237\u7aef\u4f7f\u7528"}),"\n",(0,i.jsxs)(n.p,{children:["\u4ece MCP \u5ba2\u6237\u7aef\u8fde\u63a5\u65f6\uff0c\u5305\u62ec\u4e0e ",(0,i.jsx)(n.code,{children:"extra_headers"})," \u914d\u7f6e\u5339\u914d\u7684\u81ea\u5b9a\u4e49 headers\uff1a"]}),"\n",(0,i.jsxs)(t.A,{children:[(0,i.jsx)(a.A,{value:"fastmcp",label:"Python FastMCP",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="\u5e26\u6709\u81ea\u5b9a\u4e49 Headers \u7684 FastMCP \u5ba2\u6237\u7aef" showLineNumbers',children:'from fastmcp import Client\nimport asyncio\n\n# \u5e26\u6709\u81ea\u5b9a\u4e49 headers \u7684 MCP \u5ba2\u6237\u7aef\u914d\u7f6e\nconfig = {\n    "mcpServers": {\n        "github": {\n            "url": "http://localhost:4000/github_mcp/mcp",\n            "headers": {\n                "x-litellm-api-key": "Bearer sk-1234",\n                "Authorization": "Bearer gho_token",\n                "custom_key": "custom_value",\n                "x-custom-header": "additional_data"\n            }\n        }\n    }\n}\n\n# \u521b\u5efa\u8fde\u63a5\u5230\u670d\u52a1\u5668\u7684\u5ba2\u6237\u7aef\nclient = Client(config)\n\nasync def main():\n    async with client:\n        # \u5217\u51fa\u53ef\u7528\u5de5\u5177\n        tools = await client.list_tools()\n        print(f"Available tools: {tools}")\n\n        # \u5982\u679c\u53ef\u7528\uff0c\u8c03\u7528\u5de5\u5177\n        if tools:\n            result = await client.call_tool(tools[0].name, {})\n            print(f"Tool result: {result}")\n\n# \u8fd0\u884c\u5ba2\u6237\u7aef\nasyncio.run(main())\n'})})}),(0,i.jsx)(a.A,{value:"cursor",label:"Cursor IDE",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="\u5e26\u6709\u81ea\u5b9a\u4e49 Headers \u7684 Cursor MCP \u914d\u7f6e" showLineNumbers',children:'{\n  "mcpServers": {\n    "GitHub": {\n      "url": "http://localhost:4000/github_mcp/mcp",\n      "headers": {\n        "x-litellm-api-key": "Bearer $LITELLM_API_KEY",\n        "Authorization": "Bearer $GITHUB_TOKEN",\n        "custom_key": "custom_value",\n        "x-custom-header": "additional_data"\n      }\n    }\n  }\n}\n'})})}),(0,i.jsx)(a.A,{value:"http",label:"HTTP \u5ba2\u6237\u7aef",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="\u5e26\u6709\u81ea\u5b9a\u4e49 Headers \u7684 cURL" showLineNumbers',children:"curl --location 'http://localhost:4000/github_mcp/mcp' \\\n--header 'Content-Type: application/json' \\\n--header 'x-litellm-api-key: Bearer sk-1234' \\\n--header 'Authorization: Bearer gho_token' \\\n--header 'custom_key: custom_value' \\\n--header 'x-custom-header: additional_data' \\\n--data '{\n    \"jsonrpc\": \"2.0\",\n    \"id\": 1,\n    \"method\": \"tools/list\"\n}'\n"})})})]}),"\n",(0,i.jsx)(n.h4,{id:"\u5de5\u4f5c\u539f\u7406-1",children:"\u5de5\u4f5c\u539f\u7406"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u914d\u7f6e"}),"\uff1a\u5728 MCP \u670d\u52a1\u5668\u914d\u7f6e\u4e2d\u5b9a\u4e49 ",(0,i.jsx)(n.code,{children:"extra_headers"}),"\uff0c\u5176\u4e2d\u5305\u542b\u60a8\u60f3\u8981\u8f6c\u53d1\u7684 header \u540d\u79f0"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5ba2\u6237\u7aef Headers"}),"\uff1a\u5728 MCP \u5ba2\u6237\u7aef\u8bf7\u6c42\u4e2d\u5305\u62ec\u76f8\u5e94\u7684 headers"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Header \u8f6c\u53d1"}),"\uff1aLiteLLM \u81ea\u52a8\u5c06\u5339\u914d\u7684 headers \u8f6c\u53d1\u5230\u540e\u7aef MCP \u670d\u52a1\u5668"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8eab\u4efd\u9a8c\u8bc1"}),"\uff1a\u540e\u7aef MCP \u670d\u52a1\u5668\u540c\u65f6\u63a5\u6536\u914d\u7f6e\u7684\u8eab\u4efd\u9a8c\u8bc1 headers \u548c\u81ea\u5b9a\u4e49 headers"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u5c06\u8bf7\u6c42-headers-\u4f20\u9012\u7ed9-stdio-\u73af\u5883\u53d8\u91cf",children:"\u5c06\u8bf7\u6c42 Headers \u4f20\u9012\u7ed9 STDIO \u73af\u5883\u53d8\u91cf"}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u60a8\u7684 stdio MCP \u670d\u52a1\u5668\u9700\u8981\u6bcf\u4e2a\u8bf7\u6c42\u7684\u51ed\u636e\uff0c\u60a8\u53ef\u4ee5\u5c06\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e2d\u7684 HTTP headers \u76f4\u63a5\u6620\u5c04\u5230\u542f\u52a8\u7684 stdio \u8fdb\u7a0b\u7684\u73af\u5883\u4e2d\u3002\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"${X-HEADER_NAME}"})," \u8bed\u6cd5\u5728\u73af\u5883\u53d8\u91cf\u503c\u4e2d\u5f15\u7528 header \u540d\u79f0\u3002LiteLLM \u5c06\u4ece\u4f20\u5165\u8bf7\u6c42\u4e2d\u8bfb\u53d6\u8be5 header\uff0c\u5e76\u5728\u542f\u52a8\u547d\u4ee4\u4e4b\u524d\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="\u5c06 X-GITHUB_PERSONAL_ACCESS_TOKEN header \u8f6c\u53d1\u5230 stdio \u73af\u5883" showLineNumbers',children:'{\n  "mcpServers": {\n    "github": {\n      "command": "docker",\n      "args": [\n        "run",\n        "-i",\n        "--rm",\n        "-e",\n        "GITHUB_PERSONAL_ACCESS_TOKEN",\n        "ghcr.io/github/github-mcp-server"\n      ],\n      "env": {\n        "GITHUB_PERSONAL_ACCESS_TOKEN": "${X-GITHUB_PERSONAL_ACCESS_TOKEN}"\n      }\n    }\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u5f53\u5ba2\u6237\u7aef\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"X-GITHUB_PERSONAL_ACCESS_TOKEN"})," header \u53d1\u51fa\u8bf7\u6c42\u65f6\uff0c\u4ee3\u7406\u5c06\u8be5\u503c\u4f5c\u4e3a ",(0,i.jsx)(n.code,{children:"GITHUB_PERSONAL_ACCESS_TOKEN"})," \u73af\u5883\u53d8\u91cf\u8f6c\u53d1\u5230 stdio \u8fdb\u7a0b\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u4f7f\u7528\u5e26\u6709\u5ba2\u6237\u7aef\u51ed\u636e\u7684-mcp",children:"\u4f7f\u7528\u5e26\u6709\u5ba2\u6237\u7aef\u51ed\u636e\u7684 MCP"}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u60a8\u60f3\u5c06\u5ba2\u6237\u7aef\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u4f20\u9012\u7ed9 LiteLLM \u7136\u540e\u4f20\u9012\u7ed9\u60a8\u7684 MCP \u4ee5\u5bf9\u60a8\u7684 MCP \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u8bf7\u4f7f\u7528\u6b64\u529f\u80fd\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u65b0\u7684\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1-headers-\u63a8\u8350",children:"\u65b0\u7684\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1 Headers (\u63a8\u8350)"}),"\n",(0,i.jsxs)(n.p,{children:["\u60a8\u53ef\u4ee5\u4f7f\u7528\u683c\u5f0f ",(0,i.jsx)(n.code,{children:"x-mcp-{server_alias}-{header_name}"})," \u4e3a\u670d\u52a1\u5668\u7279\u5b9a\u7684 headers \u6307\u5b9a MCP \u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u3002\u8fd9\u5141\u8bb8\u60a8\u4e3a\u4e0d\u540c\u7684 MCP \u670d\u52a1\u5668\u4f7f\u7528\u4e0d\u540c\u7684\u8eab\u4efd\u9a8c\u8bc1\u3002"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u4f18\u52bf\uff1a"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1"}),"\uff1a\u6bcf\u4e2a MCP \u670d\u52a1\u5668\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u8eab\u4efd\u9a8c\u8bc1\u65b9\u6cd5"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u66f4\u597d\u7684\u5b89\u5168\u6027"}),"\uff1a\u65e0\u9700\u5728\u6240\u6709\u670d\u52a1\u5668\u4e4b\u95f4\u5171\u4eab\u76f8\u540c\u7684\u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u7075\u6d3b\u7684 header \u540d\u79f0"}),"\uff1a\u652f\u6301\u4e0d\u540c\u7684\u8eab\u4efd\u9a8c\u8bc1 header \u7c7b\u578b\uff08authorization\u3001x-api-key \u7b49\uff09"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6e05\u6670\u7684\u5206\u79bb"}),"\uff1a\u6bcf\u4e2a\u670d\u52a1\u5668\u7684\u8eab\u4efd\u9a8c\u8bc1\u90fd\u88ab\u6e05\u6670\u8bc6\u522b"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1-header-\u5df2\u5f03\u7528",children:"\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1 Header (\u5df2\u5f03\u7528)"}),"\n",(0,i.jsxs)(n.p,{children:["\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528 header ",(0,i.jsx)(n.code,{children:"x-mcp-auth"})," \u6307\u5b9a\u60a8\u7684 MCP \u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\u3002\u8fd9\u5c06\u8f6c\u53d1\u5230\u6240\u6709 MCP \u670d\u52a1\u5668\uff0c\u5e76\u4e14\u4e0d\u63a8\u8350\u4f7f\u7528\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u7684 headers\u3002"]}),"\n",(0,i.jsxs)(t.A,{children:[(0,i.jsxs)(a.A,{value:"openai",label:"OpenAI API",children:[(0,i.jsx)(n.h4,{id:"\u901a\u8fc7-openai-responses-api-\u8fde\u63a5\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1",children:"\u901a\u8fc7 OpenAI Responses API \u8fde\u63a5\uff0c\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1"}),(0,i.jsx)(n.p,{children:"\u4f7f\u7528 OpenAI Responses API \u5e76\u5305\u62ec\u670d\u52a1\u5668\u7279\u5b9a\u7684\u8eab\u4efd\u9a8c\u8bc1 headers\uff1a"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="\u5e26\u6709\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1\u7684 cURL \u793a\u4f8b" showLineNumbers',children:'curl --location \'https://api.openai.com/v1/responses\' \\\n--header \'Content-Type: application/json\' \\\n--header "Authorization: Bearer $OPENAI_API_KEY" \\\n--data \'{\n    "model": "gpt-4o",\n    "tools": [\n        {\n            "type": "mcp",\n            "server_label": "litellm",\n            "server_url": "litellm_proxy",\n            "require_approval": "never",\n            "headers": {\n                "x-litellm-api-key": "Bearer YOUR_LITELLM_API_KEY",\n                "x-mcp-github-authorization": "Bearer YOUR_GITHUB_TOKEN",\n                "x-mcp-zapier-x-api-key": "YOUR_ZAPIER_API_KEY"\n            }\n        }\n    ],\n    "input": "Run available tools",\n    "tool_choice": "required"\n}\'\n'})}),(0,i.jsx)(n.h4,{id:"\u901a\u8fc7-openai-responses-api-\u8fde\u63a5\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1",children:"\u901a\u8fc7 OpenAI Responses API \u8fde\u63a5\uff0c\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1"}),(0,i.jsxs)(n.p,{children:["\u4f7f\u7528 OpenAI Responses API \u5e76\u5305\u62ec ",(0,i.jsx)(n.code,{children:"x-mcp-auth"})," header \u4ee5\u8fdb\u884c MCP \u670d\u52a1\u5668\u8eab\u4efd\u9a8c\u8bc1\uff1a"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="\u5e26\u6709\u4f20\u7edf MCP \u8eab\u4efd\u9a8c\u8bc1\u7684 cURL \u793a\u4f8b" showLineNumbers',children:'curl --location \'https://api.openai.com/v1/responses\' \\\n--header \'Content-Type: application/json\' \\\n--header "Authorization: Bearer $OPENAI_API_KEY" \\\n--data \'{\n    "model": "gpt-4o",\n    "tools": [\n        {\n            "type": "mcp",\n            "server_label": "litellm",\n            "server_url": "litellm_proxy",\n            "require_approval": "never",\n            "headers": {\n                "x-litellm-api-key": "Bearer YOUR_LITELLM_API_KEY",\n                "x-mcp-auth": YOUR_MCP_AUTH_TOKEN\n            }\n        }\n    ],\n    "input": "Run available tools",\n    "tool_choice": "required"\n}\'\n'})})]}),(0,i.jsxs)(a.A,{value:"litellm",label:"LiteLLM Proxy",children:[(0,i.jsx)(n.h4,{id:"\u901a\u8fc7-litellm-proxy-responses-api-\u8fde\u63a5\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1",children:"\u901a\u8fc7 LiteLLM Proxy Responses API \u8fde\u63a5\uff0c\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1"}),(0,i.jsxs)(n.p,{children:["\u5f53\u8c03\u7528 LiteLLM Proxy \u8fdb\u884c LLM API \u8bf7\u6c42\u5230 ",(0,i.jsx)(n.code,{children:"/v1/responses"})," \u7aef\u70b9\u5e76\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1\u65f6\u4f7f\u7528\u6b64\u529f\u80fd\uff1a"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="\u5e26\u6709\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1\u7684 cURL \u793a\u4f8b" showLineNumbers',children:'curl --location \'<your-litellm-proxy-base-url>/v1/responses\' \\\n--header \'Content-Type: application/json\' \\\n--header "Authorization: Bearer $LITELLM_API_KEY" \\\n--data \'{\n    "model": "gpt-4o",\n    "tools": [\n        {\n            "type": "mcp",\n            "server_label": "litellm",\n            "server_url": "litellm_proxy",\n            "require_approval": "never",\n            "headers": {\n                "x-litellm-api-key": "Bearer YOUR_LITELLM_API_KEY",\n                "x-mcp-github-authorization": "Bearer YOUR_GITHUB_TOKEN",\n                "x-mcp-zapier-x-api-key": "YOUR_ZAPIER_API_KEY"\n            }\n        }\n    ],\n    "input": "Run available tools",\n    "tool_choice": "required"\n}\'\n'})}),(0,i.jsx)(n.h4,{id:"\u901a\u8fc7-litellm-proxy-responses-api-\u8fde\u63a5\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1",children:"\u901a\u8fc7 LiteLLM Proxy Responses API \u8fde\u63a5\uff0c\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1"}),(0,i.jsxs)(n.p,{children:["\u5f53\u8c03\u7528 LiteLLM Proxy \u8fdb\u884c LLM API \u8bf7\u6c42\u5230 ",(0,i.jsx)(n.code,{children:"/v1/responses"})," \u7aef\u70b9\u5e76\u4f7f\u7528 MCP \u8eab\u4efd\u9a8c\u8bc1\u65f6\u4f7f\u7528\u6b64\u529f\u80fd\uff1a"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="\u5e26\u6709\u4f20\u7edf MCP \u8eab\u4efd\u9a8c\u8bc1\u7684 cURL \u793a\u4f8b" showLineNumbers',children:'curl --location \'<your-litellm-proxy-base-url>/v1/responses\' \\\n--header \'Content-Type: application/json\' \\\n--header "Authorization: Bearer $LITELLM_API_KEY" \\\n--data \'{\n    "model": "gpt-4o",\n    "tools": [\n        {\n            "type": "mcp",\n            "server_label": "litellm",\n            "server_url": "litellm_proxy",\n            "require_approval": "never",\n            "headers": {\n                "x-litellm-api-key": "Bearer YOUR_LITELLM_API_KEY",\n                "x-mcp-auth": "YOUR_MCP_AUTH_TOKEN"\n            }\n        }\n    ],\n    "input": "Run available tools",\n    "tool_choice": "required"\n}\'\n'})})]}),(0,i.jsxs)(a.A,{value:"cursor",label:"Cursor IDE",children:[(0,i.jsx)(n.h4,{id:"\u901a\u8fc7-cursor-ide-\u8fde\u63a5\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1",children:"\u901a\u8fc7 Cursor IDE \u8fde\u63a5\uff0c\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1"}),(0,i.jsx)(n.p,{children:"\u76f4\u63a5\u4ece Cursor IDE \u4f7f\u7528\u5de5\u5177\uff0c\u5305\u62ec LiteLLM MCP \u5e76\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1\uff1a"}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u8bbe\u7f6e\u8bf4\u660e\uff1a"})}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6253\u5f00 Cursor \u8bbe\u7f6e"}),"\uff1a\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"\u21e7+\u2318+J"})," (Mac) \u6216 ",(0,i.jsx)(n.code,{children:"Ctrl+Shift+J"})," (Windows/Linux)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5bfc\u822a\u5230 MCP \u5de5\u5177"}),'\uff1a\u8f6c\u5230 "MCP Tools" \u9009\u9879\u5361\u5e76\u70b9\u51fb "New MCP Server"']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6dfb\u52a0\u914d\u7f6e"}),"\uff1a\u590d\u5236\u5e76\u7c98\u8d34\u4e0b\u9762\u7684 JSON \u914d\u7f6e\uff0c\u7136\u540e\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"Cmd+S"})," \u6216 ",(0,i.jsx)(n.code,{children:"Ctrl+S"})," \u4fdd\u5b58"]}),"\n"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="\u5e26\u6709\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1\u7684 Cursor MCP \u914d\u7f6e" showLineNumbers',children:'{\n  "mcpServers": {\n    "LiteLLM": {\n      "url": "litellm_proxy",\n      "headers": {\n        "x-litellm-api-key": "Bearer $LITELLM_API_KEY",\n        "x-mcp-github-authorization": "Bearer $GITHUB_TOKEN",\n        "x-mcp-zapier-x-api-key": "$ZAPIER_API_KEY"\n      }\n    }\n  }\n}\n'})}),(0,i.jsx)(n.h4,{id:"\u901a\u8fc7-cursor-ide-\u8fde\u63a5\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1",children:"\u901a\u8fc7 Cursor IDE \u8fde\u63a5\uff0c\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1"}),(0,i.jsx)(n.p,{children:"\u76f4\u63a5\u4ece Cursor IDE \u4f7f\u7528\u5de5\u5177\uff0c\u5305\u62ec LiteLLM MCP \u5e76\u4f7f\u7528\u60a8\u7684 MCP \u8eab\u4efd\u9a8c\u8bc1\u4ee4\u724c\uff1a"}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u8bbe\u7f6e\u8bf4\u660e\uff1a"})}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6253\u5f00 Cursor \u8bbe\u7f6e"}),"\uff1a\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"\u21e7+\u2318+J"})," (Mac) \u6216 ",(0,i.jsx)(n.code,{children:"Ctrl+Shift+J"})," (Windows/Linux)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5bfc\u822a\u5230 MCP \u5de5\u5177"}),'\uff1a\u8f6c\u5230 "MCP Tools" \u9009\u9879\u5361\u5e76\u70b9\u51fb "New MCP Server"']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6dfb\u52a0\u914d\u7f6e"}),"\uff1a\u590d\u5236\u5e76\u7c98\u8d34\u4e0b\u9762\u7684 JSON \u914d\u7f6e\uff0c\u7136\u540e\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"Cmd+S"})," \u6216 ",(0,i.jsx)(n.code,{children:"Ctrl+S"})," \u4fdd\u5b58"]}),"\n"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="\u5e26\u6709\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1\u7684 Cursor MCP \u914d\u7f6e" showLineNumbers',children:'{\n  "mcpServers": {\n    "LiteLLM": {\n      "url": "litellm_proxy",\n      "headers": {\n        "x-litellm-api-key": "Bearer $LITELLM_API_KEY",\n        "x-mcp-auth": "$MCP_AUTH_TOKEN"\n      }\n    }\n  }\n}\n'})})]}),(0,i.jsxs)(a.A,{value:"http",label:"\u53ef\u6d41\u5f0f HTTP",children:[(0,i.jsx)(n.h4,{id:"\u901a\u8fc7\u53ef\u6d41\u5f0f-http-\u4f20\u8f93\u8fde\u63a5\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1",children:"\u901a\u8fc7\u53ef\u6d41\u5f0f HTTP \u4f20\u8f93\u8fde\u63a5\uff0c\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1"}),(0,i.jsx)(n.p,{children:"\u4f7f\u7528\u5e26\u6709\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1\u7684 HTTP \u4f20\u8f93\u8fde\u63a5\u5230 LiteLLM MCP\uff1a"}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u670d\u52a1\u5668 URL\uff1a"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",metastring:"showLineNumbers",children:"litellm_proxy\n"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Headers\uff1a"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",metastring:"showLineNumbers",children:"x-litellm-api-key: Bearer YOUR_LITELLM_API_KEY\nx-mcp-github-authorization: Bearer YOUR_GITHUB_TOKEN\nx-mcp-zapier-x-api-key: YOUR_ZAPIER_API_KEY\n"})}),(0,i.jsx)(n.h4,{id:"\u901a\u8fc7\u53ef\u6d41\u5f0f-http-\u4f20\u8f93\u8fde\u63a5\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1",children:"\u901a\u8fc7\u53ef\u6d41\u5f0f HTTP \u4f20\u8f93\u8fde\u63a5\uff0c\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1"}),(0,i.jsx)(n.p,{children:"\u4f7f\u7528\u5e26\u6709 MCP \u8eab\u4efd\u9a8c\u8bc1\u7684 HTTP \u4f20\u8f93\u8fde\u63a5\u5230 LiteLLM MCP\uff1a"}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u670d\u52a1\u5668 URL\uff1a"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",metastring:"showLineNumbers",children:"litellm_proxy\n"})}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Headers\uff1a"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",metastring:"showLineNumbers",children:"x-litellm-api-key: Bearer YOUR_LITELLM_API_KEY\nx-mcp-auth: Bearer YOUR_MCP_AUTH_TOKEN\n"})}),(0,i.jsxs)(n.p,{children:["\u6b64 URL \u53ef\u4e0e\u4efb\u4f55\u652f\u6301 HTTP \u4f20\u8f93\u7684 MCP \u5ba2\u6237\u7aef\u4e00\u8d77\u4f7f\u7528\u3002",(0,i.jsx)(n.code,{children:"x-mcp-auth"})," header \u5c06\u88ab\u8f6c\u53d1\u5230\u60a8\u7684 MCP \u670d\u52a1\u5668\u4ee5\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002"]})]}),(0,i.jsxs)(a.A,{value:"fastmcp",label:"Python FastMCP",children:[(0,i.jsx)(n.h4,{id:"\u901a\u8fc7-python-fastmcp-\u5ba2\u6237\u7aef\u8fde\u63a5\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1",children:"\u901a\u8fc7 Python FastMCP \u5ba2\u6237\u7aef\u8fde\u63a5\uff0c\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1"}),(0,i.jsx)(n.p,{children:"\u4f7f\u7528 Python FastMCP \u5ba2\u6237\u7aef\u8fde\u63a5\u5230 LiteLLM MCP \u670d\u52a1\u5668\u5e76\u4f7f\u7528\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1\uff1a"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="\u5e26\u6709\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1\u7684 Python FastMCP \u793a\u4f8b" showLineNumbers',children:'import asyncio\nimport json\n\nfrom fastmcp import Client\nfrom fastmcp.client.transports import StreamableHttpTransport\n\n# \u4f7f\u7528 LiteLLM MCP \u670d\u52a1\u5668 URL \u548c\u670d\u52a1\u5668\u7279\u5b9a\u8eab\u4efd\u9a8c\u8bc1 headers \u521b\u5efa\u4f20\u8f93\nserver_url = "litellm_proxy"\ntransport = StreamableHttpTransport(\n    server_url,\n    headers={\n        "x-litellm-api-key": "Bearer YOUR_LITELLM_API_KEY",\n        "x-mcp-github-authorization": "Bearer YOUR_GITHUB_TOKEN",\n        "x-mcp-zapier-x-api-key": "YOUR_ZAPIER_API_KEY"\n    }\n)\n\n# \u4f7f\u7528\u4f20\u8f93\u521d\u59cb\u5316\u5ba2\u6237\u7aef\nclient = Client(transport=transport)\n\n\nasync def main():\n    # \u5728\u6b64\u5904\u5efa\u7acb\u8fde\u63a5\n    print("Connecting to LiteLLM MCP server with server-specific authentication...")\n    async with client:\n        print(f"Client connected: {client.is_connected()}")\n\n        # \u5728\u4e0a\u4e0b\u6587\u4e2d\u8fdb\u884c MCP \u8c03\u7528\n        print("Fetching available tools...")\n        tools = await client.list_tools()\n\n        print(f"Available tools: {json.dumps([t.name for t in tools], indent=2)}")\n\n        # \u793a\u4f8b\uff1a\u8c03\u7528\u5de5\u5177\uff08\u5c06 \'tool_name\' \u66ff\u6362\u4e3a\u5b9e\u9645\u5de5\u5177\u540d\u79f0\uff09\n        if tools:\n            tool_name = tools[0].name\n            print(f"Calling tool: {tool_name}")\n\n            # \u4f7f\u7528\u9002\u5f53\u7684\u53c2\u6570\u8c03\u7528\u5de5\u5177\n            result = await client.call_tool(tool_name, arguments={})\n            print(f"Tool result: {result}")\n\n\n# \u8fd0\u884c\u793a\u4f8b\nif __name__ == "__main__":\n    asyncio.run(main())\n'})}),(0,i.jsx)(n.h4,{id:"\u901a\u8fc7-python-fastmcp-\u5ba2\u6237\u7aef\u8fde\u63a5\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1",children:"\u901a\u8fc7 Python FastMCP \u5ba2\u6237\u7aef\u8fde\u63a5\uff0c\u4f7f\u7528\u4f20\u7edf\u8eab\u4efd\u9a8c\u8bc1"}),(0,i.jsx)(n.p,{children:"\u4f7f\u7528 Python FastMCP \u5ba2\u6237\u7aef\u8fde\u63a5\u5230 LiteLLM MCP \u670d\u52a1\u5668\u5e76\u4f7f\u7528 MCP \u8eab\u4efd\u9a8c\u8bc1\uff1a"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="\u5e26\u6709\u4f20\u7edf MCP \u8eab\u4efd\u9a8c\u8bc1\u7684 Python FastMCP \u793a\u4f8b" showLineNumbers',children:'import asyncio\nimport json\n\nfrom fastmcp import Client\nfrom fastmcp.client.transports import StreamableHttpTransport\n\n# \u4f7f\u7528 LiteLLM MCP \u670d\u52a1\u5668 URL \u548c\u8eab\u4efd\u9a8c\u8bc1 headers \u521b\u5efa\u4f20\u8f93\nserver_url = "litellm_proxy"\ntransport = StreamableHttpTransport(\n    server_url,\n    headers={\n        "x-litellm-api-key": "Bearer YOUR_LITELLM_API_KEY",\n        "x-mcp-auth": "Bearer YOUR_MCP_AUTH_TOKEN"\n    }\n)\n\n# \u4f7f\u7528\u4f20\u8f93\u521d\u59cb\u5316\u5ba2\u6237\u7aef\nclient = Client(transport=transport)\n\n\nasync def main():\n    # \u5728\u6b64\u5904\u5efa\u7acb\u8fde\u63a5\n    print("Connecting to LiteLLM MCP server with authentication...")\n    async with client:\n        print(f"Client connected: {client.is_connected()}")\n\n        # \u5728\u4e0a\u4e0b\u6587\u4e2d\u8fdb\u884c MCP \u8c03\u7528\n        print("Fetching available tools...")\n        tools = await client.list_tools()\n\n        print(f"Available tools: {json.dumps([t.name for t in tools], indent=2)}")\n\n        # \u793a\u4f8b\uff1a\u8c03\u7528\u5de5\u5177\uff08\u5c06 \'tool_name\' \u66ff\u6362\u4e3a\u5b9e\u9645\u5de5\u5177\u540d\u79f0\uff09\n        if tools:\n            tool_name = tools[0].name\n            print(f"Calling tool: {tool_name}")\n\n            # \u4f7f\u7528\u9002\u5f53\u7684\u53c2\u6570\u8c03\u7528\u5de5\u5177\n            result = await client.call_tool(tool_name, arguments={})\n            print(f"Tool result: {result}")\n\n\n# \u8fd0\u884c\u793a\u4f8b\nif __name__ == "__main__":\n    asyncio.run(main())\n'})})]})]}),"\n",(0,i.jsx)(n.h3,{id:"\u81ea\u5b9a\u4e49-mcp-\u8eab\u4efd\u9a8c\u8bc1-header-\u540d\u79f0",children:"\u81ea\u5b9a\u4e49 MCP \u8eab\u4efd\u9a8c\u8bc1 Header \u540d\u79f0"}),"\n",(0,i.jsxs)(n.p,{children:["\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cLiteLLM \u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"x-mcp-auth"})," \u5c06\u60a8\u7684\u51ed\u636e\u4f20\u9012\u7ed9 MCP \u670d\u52a1\u5668\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\u66f4\u6539\u6b64 header \u540d\u79f0\uff1a"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u8bbe\u7f6e ",(0,i.jsx)(n.code,{children:"LITELLM_MCP_CLIENT_SIDE_AUTH_HEADER_NAME"})," \u73af\u5883\u53d8\u91cf"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="\u73af\u5883\u53d8\u91cf" showLineNumbers',children:'export LITELLM_MCP_CLIENT_SIDE_AUTH_HEADER_NAME="authorization"\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["\u5728 config.yaml \u6587\u4ef6\u4e2d\u7684\u4e00\u822c\u8bbe\u7f6e\u4e2d\u8bbe\u7f6e ",(0,i.jsx)(n.code,{children:"mcp_client_side_auth_header_name"})]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="config.yaml" showLineNumbers',children:'model_list:\n  - model_name: gpt-4o\n    litellm_params:\n      model: openai/gpt-4o\n      api_key: sk-xxxxxxx\n\ngeneral_settings:\n  mcp_client_side_auth_header_name: "authorization"\n'})}),"\n",(0,i.jsx)(n.h4,{id:"\u4f7f\u7528-authorization-header",children:"\u4f7f\u7528 authorization header"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c",(0,i.jsx)(n.code,{children:"authorization"})," header \u5c06\u88ab\u4f20\u9012\u5230 MCP \u670d\u52a1\u5668\u4ee5\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="\u5e26\u6709 authorization header \u7684 cURL" showLineNumbers',children:'curl --location \'<your-litellm-proxy-base-url>/v1/responses\' \\\n--header \'Content-Type: application/json\' \\\n--header "Authorization: Bearer $LITELLM_API_KEY" \\\n--data \'{\n    "model": "gpt-4o",\n    "tools": [\n        {\n            "type": "mcp",\n            "server_label": "litellm",\n            "server_url": "litellm_proxy",\n            "require_approval": "never",\n            "headers": {\n                "x-litellm-api-key": "Bearer YOUR_LITELLM_API_KEY",\n                "authorization": "Bearer sk-zapier-token-123"\n            }\n        }\n    ],\n    "input": "Run available tools",\n    "tool_choice": "required"\n}\'\n'})}),"\n",(0,i.jsxs)(n.h2,{id:"\u5728-chatcompletions-\u4e2d\u4f7f\u7528-mcp-\u5de5\u5177",children:["\u5728 ",(0,i.jsx)(n.code,{children:"/chat/completions"})," \u4e2d\u4f7f\u7528 MCP \u5de5\u5177"]}),"\n",(0,i.jsx)(n.admonition,{title:"\u9002\u7528\u4e8e\u6240\u6709\u63d0\u4f9b\u5546",type:"tip",children:(0,i.jsxs)(n.p,{children:["\u6b64\u6d41\u7a0b\u662f",(0,i.jsx)(n.strong,{children:"\u63d0\u4f9b\u5546\u65e0\u5173\u7684"}),"\uff1a\u76f8\u540c\u7684 MCP \u5de5\u5177\u5b9a\u4e49\u9002\u7528\u4e8e LiteLLM \u540e\u9762\u7684_\u6bcf\u4e2a_ LLM \u540e\u7aef\uff08OpenAI\u3001Azure OpenAI\u3001Anthropic\u3001Amazon Bedrock\u3001Vertex\u3001\u81ea\u6258\u7ba1\u90e8\u7f72\u7b49\uff09\u3002"]})}),"\n",(0,i.jsxs)(n.p,{children:["LiteLLM Proxy \u8fd8\u5728\u7ecf\u5178\u7684 ",(0,i.jsx)(n.code,{children:"/v1/chat/completions"})," \u7aef\u70b9\u4e0a\u652f\u6301\u652f\u6301 MCP \u7684\u5de5\u5177\u3002\u76f4\u63a5\u5728 ",(0,i.jsx)(n.code,{children:"tools"})," \u6570\u7ec4\u4e2d\u63d0\u4f9b MCP \u5de5\u5177\u5b9a\u4e49\uff0cLiteLLM \u5c06\u83b7\u53d6\u5e76\u8f6c\u6362 MCP \u670d\u52a1\u5668\u7684\u5de5\u5177\u4e3a OpenAI \u517c\u5bb9\u7684\u51fd\u6570\u8c03\u7528\u3002\u5f53 ",(0,i.jsx)(n.code,{children:"require_approval"})," \u8bbe\u7f6e\u4e3a ",(0,i.jsx)(n.code,{children:'"never"'})," \u65f6\uff0c\u4ee3\u7406\u4f1a\u81ea\u52a8\u6267\u884c\u8fd4\u56de\u7684\u5de5\u5177\u8c03\u7528\uff0c\u5e76\u5c06\u7ed3\u679c\u53cd\u9988\u7ed9\u6a21\u578b\uff0c\u7136\u540e\u8fd4\u56de\u52a9\u624b\u54cd\u5e94\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title="\u5e26\u6709 MCP \u5de5\u5177\u7684\u804a\u5929\u8865\u5168" showLineNumbers',children:'curl --location \'<your-litellm-proxy-base-url>/v1/chat/completions\' \\\n--header \'Content-Type: application/json\' \\\n--header "Authorization: Bearer $LITELLM_API_KEY" \\\n--data \'{\n  "model": "gpt-4o-mini",\n  "messages": [\n    {"role": "user", "content": "Summarize the latest open PR."}\n  ],\n  "tools": [\n    {\n      "type": "mcp",\n      "server_url": "litellm_proxy/mcp/github",\n      "server_label": "github_mcp",\n      "require_approval": "never"\n    }\n  ]\n}\'\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u7701\u7565 ",(0,i.jsx)(n.code,{children:"require_approval"})," \u6216\u5c06\u5176\u8bbe\u7f6e\u4e3a\u9664 ",(0,i.jsx)(n.code,{children:'"never"'})," \u4ee5\u5916\u7684\u4efb\u4f55\u503c\uff0cMCP \u5de5\u5177\u8c03\u7528\u5c06\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u4ee5\u4fbf\u60a8\u53ef\u4ee5\u67e5\u770b\u5e76\u624b\u52a8\u6267\u884c\u5b83\u4eec\uff0c\u8fd9\u4e0e\u4e0a\u6e38 OpenAI \u884c\u4e3a\u5339\u914d\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"litellm-proxy---\u6f14\u793a-mcp-gateway",children:"LiteLLM Proxy - \u6f14\u793a MCP Gateway"}),"\n",(0,i.jsx)(n.p,{children:"LiteLLM \u66b4\u9732\u4e86\u4e00\u4e2a MCP Gateway\uff0c\u4f9b\u7ba1\u7406\u5458\u5c06\u6240\u6709 MCP \u670d\u52a1\u5668\u6dfb\u52a0\u5230 LiteLLM\u3002\u5c06 LiteLLM Proxy \u4e0e MCP \u4e00\u8d77\u4f7f\u7528\u7684\u4e3b\u8981\u597d\u5904\u662f\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u4e3a\u6240\u6709 MCP \u5de5\u5177\u4f7f\u7528\u56fa\u5b9a\u7aef\u70b9"}),"\n",(0,i.jsx)(n.li,{children:"\u6309 Key\u3001Team \u6216 User \u7ba1\u7406 MCP \u6743\u9650"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u6b64\u89c6\u9891\u6f14\u793a\u4e86\u5982\u4f55\u5c06 MCP \u670d\u52a1\u5668\u96c6\u6210\u5230 LiteLLM Proxy\u3001\u4f7f\u7528\u5b83\u5e76\u8bbe\u7f6e\u8bbf\u95ee\u63a7\u5236\u3002"}),"\n",(0,i.jsx)("iframe",{width:"840",height:"500",src:"https://www.loom.com/embed/f7aa8d217879430987f3e64291757bfc",frameborder:"0",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0}),"\n",(0,i.jsx)(n.h2,{id:"litellm-python-sdk-mcp-bridge",children:"LiteLLM Python SDK MCP Bridge"}),"\n",(0,i.jsx)(n.p,{children:"LiteLLM Python SDK \u5145\u5f53 MCP bridge\uff0c\u4ee5\u4fbf\u5c06 MCP \u5de5\u5177\u4e0e\u6240\u6709 LiteLLM \u652f\u6301\u7684\u6a21\u578b\u4e00\u8d77\u4f7f\u7528\u3002LiteLLM \u4e3a\u4f7f\u7528 MCP \u63d0\u4f9b\u4ee5\u4e0b\u529f\u80fd"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5217\u51fa"}),"\u53ef\u7528\u7684 MCP \u5de5\u5177\uff1aOpenAI \u5ba2\u6237\u7aef\u53ef\u4ee5\u67e5\u770b\u6240\u6709\u53ef\u7528\u7684 MCP \u5de5\u5177","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"litellm.experimental_mcp_client.load_mcp_tools"})," \u5217\u51fa\u6240\u6709\u53ef\u7528\u7684 MCP \u5de5\u5177"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u8c03\u7528"}),"MCP \u5de5\u5177\uff1aOpenAI \u5ba2\u6237\u7aef\u53ef\u4ee5\u8c03\u7528 MCP \u5de5\u5177","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"litellm.experimental_mcp_client.call_openai_tool"})," \u5728 MCP \u670d\u52a1\u5668\u4e0a\u8c03\u7528 OpenAI \u5de5\u5177"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"1-\u5217\u51fa\u53ef\u7528\u7684-mcp-\u5de5\u5177",children:"1. \u5217\u51fa\u53ef\u7528\u7684 MCP \u5de5\u5177"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"litellm.experimental_mcp_client.load_mcp_tools"})," \u5217\u51fa\u4efb\u4f55 MCP \u670d\u52a1\u5668\u4e0a\u7684\u6240\u6709\u53ef\u7528 MCP \u5de5\u5177\u3002\u6b64\u65b9\u6cd5\u53ef\u4ee5\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u4f7f\u7528\uff1a"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'format="mcp"'})," - (\u9ed8\u8ba4) \u8fd4\u56de MCP \u5de5\u5177","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u8fd4\u56de\uff1a",(0,i.jsx)(n.code,{children:"mcp.types.Tool"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'format="openai"'})," - \u8fd4\u56de\u8f6c\u6362\u4e3a OpenAI API \u517c\u5bb9\u5de5\u5177\u7684 MCP \u5de5\u5177\u3002\u5141\u8bb8\u4e0e OpenAI \u7aef\u70b9\u4e00\u8d77\u4f7f\u7528\u3002","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u8fd4\u56de\uff1a",(0,i.jsx)(n.code,{children:"openai.types.chat.ChatCompletionToolParam"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.A,{children:[(0,i.jsx)(a.A,{value:"sdk",label:"LiteLLM Python SDK",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="MCP \u5ba2\u6237\u7aef\u5217\u51fa\u5de5\u5177" showLineNumbers',children:'# \u4e3a stdio \u8fde\u63a5\u521b\u5efa\u670d\u52a1\u5668\u53c2\u6570\nfrom mcp import ClientSession, StdioServerParameters\nfrom mcp.client.stdio import stdio_client\nimport os\nimport litellm\nfrom litellm import experimental_mcp_client\n\n\nserver_params = StdioServerParameters(\n    command="python3",\n    # \u786e\u4fdd\u66f4\u65b0\u4e3a mcp_server.py \u6587\u4ef6\u7684\u5b8c\u6574\u7edd\u5bf9\u8def\u5f84\n    args=["./mcp_server.py"],\n)\n\nasync with stdio_client(server_params) as (read, write):\n    async with ClientSession(read, write) as session:\n        # \u521d\u59cb\u5316\u8fde\u63a5\n        await session.initialize()\n\n        # \u83b7\u53d6\u5de5\u5177\n        tools = await experimental_mcp_client.load_mcp_tools(session=session, format="openai")\n        print("MCP TOOLS: ", tools)\n\n        messages = [{"role": "user", "content": "what\'s (3 + 5)"}]\n        llm_response = await litellm.acompletion(\n            model="gpt-4o",\n            api_key=os.getenv("OPENAI_API_KEY"),\n            messages=messages,\n            tools=tools,\n        )\n        print("LLM RESPONSE: ", json.dumps(llm_response, indent=4, default=str))\n'})})}),(0,i.jsxs)(a.A,{value:"openai",label:"OpenAI SDK + LiteLLM Proxy",children:[(0,i.jsx)(n.p,{children:"\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u6307\u5411 LiteLLM proxy \u7684 OpenAI SDK \u6765\u8c03\u7528 MCP \u5de5\u5177\u3002\u8fd9\u91cc\u7684\u4e3b\u8981\u533a\u522b\u662f\u6211\u4eec\u4f7f\u7528 OpenAI SDK \u6765\u8fdb\u884c LLM API \u8bf7\u6c42"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="MCP \u5ba2\u6237\u7aef\u5217\u51fa\u5de5\u5177" showLineNumbers',children:'# \u4e3a stdio \u8fde\u63a5\u521b\u5efa\u670d\u52a1\u5668\u53c2\u6570\nfrom mcp import ClientSession, StdioServerParameters\nfrom mcp.client.stdio import stdio_client\nimport os\nfrom openai import OpenAI\nfrom litellm import experimental_mcp_client\n\nserver_params = StdioServerParameters(\n    command="python3",\n    # \u786e\u4fdd\u66f4\u65b0\u4e3a mcp_server.py \u6587\u4ef6\u7684\u5b8c\u6574\u7edd\u5bf9\u8def\u5f84\n    args=["./mcp_server.py"],\n)\n\nasync with stdio_client(server_params) as (read, write):\n    async with ClientSession(read, write) as session:\n        # \u521d\u59cb\u5316\u8fde\u63a5\n        await session.initialize()\n\n        # \u4f7f\u7528 litellm mcp \u5ba2\u6237\u7aef\u83b7\u53d6\u5de5\u5177\n        tools = await experimental_mcp_client.load_mcp_tools(session=session, format="openai")\n        print("MCP TOOLS: ", tools)\n\n        # \u4f7f\u7528\u6307\u5411 LiteLLM proxy \u7684 OpenAI SDK\n        client = OpenAI(\n            api_key="your-api-key",  # \u60a8\u7684 LiteLLM proxy API key\n            base_url="http://localhost:4000"  # \u60a8\u7684 LiteLLM proxy URL\n        )\n\n        messages = [{"role": "user", "content": "what\'s (3 + 5)"}]\n        llm_response = client.chat.completions.create(\n            model="gpt-4",\n            messages=messages,\n            tools=tools\n        )\n        print("LLM RESPONSE: ", llm_response)\n'})})]})]}),"\n",(0,i.jsx)(n.h3,{id:"2-\u5217\u51fa\u548c\u8c03\u7528-mcp-\u5de5\u5177",children:"2. \u5217\u51fa\u548c\u8c03\u7528 MCP \u5de5\u5177"}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"litellm.experimental_mcp_client.load_mcp_tools"})," \u5217\u51fa\u4efb\u4f55 MCP \u670d\u52a1\u5668\u4e0a\u7684\u6240\u6709\u53ef\u7528 MCP \u5de5\u5177"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"litellm.experimental_mcp_client.call_openai_tool"})," \u5728 MCP \u670d\u52a1\u5668\u4e0a\u8c03\u7528 OpenAI \u5de5\u5177"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u7b2c\u4e00\u4e2a llm \u54cd\u5e94\u8fd4\u56de\u4e00\u7cfb\u5217 OpenAI \u5de5\u5177\u3002\u6211\u4eec\u4ece LLM \u54cd\u5e94\u4e2d\u83b7\u53d6\u7b2c\u4e00\u4e2a\u5de5\u5177\u8c03\u7528\uff0c\u5e76\u5c06\u5176\u4f20\u9012\u7ed9 ",(0,i.jsx)(n.code,{children:"litellm.experimental_mcp_client.call_openai_tool"})," \u4ee5\u5728 MCP \u670d\u52a1\u5668\u4e0a\u8c03\u7528\u5de5\u5177\u3002"]}),"\n",(0,i.jsxs)(n.h4,{id:"litellmexperimental_mcp_clientcall_openai_tool-\u5982\u4f55\u5de5\u4f5c",children:[(0,i.jsx)(n.code,{children:"litellm.experimental_mcp_client.call_openai_tool"})," \u5982\u4f55\u5de5\u4f5c"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u63a5\u53d7\u6765\u81ea LLM \u54cd\u5e94\u7684 OpenAI \u5de5\u5177\u8c03\u7528"}),"\n",(0,i.jsx)(n.li,{children:"\u5c06 OpenAI \u5de5\u5177\u8c03\u7528\u8f6c\u6362\u4e3a MCP \u5de5\u5177"}),"\n",(0,i.jsx)(n.li,{children:"\u5728 MCP \u670d\u52a1\u5668\u4e0a\u8c03\u7528 MCP \u5de5\u5177"}),"\n",(0,i.jsx)(n.li,{children:"\u8fd4\u56de MCP \u5de5\u5177\u8c03\u7528\u7684\u7ed3\u679c"}),"\n"]}),"\n",(0,i.jsxs)(t.A,{children:[(0,i.jsx)(a.A,{value:"sdk",label:"LiteLLM Python SDK",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="MCP \u5ba2\u6237\u7aef\u5217\u51fa\u548c\u8c03\u7528\u5de5\u5177" showLineNumbers',children:'# \u4e3a stdio \u8fde\u63a5\u521b\u5efa\u670d\u52a1\u5668\u53c2\u6570\nfrom mcp import ClientSession, StdioServerParameters\nfrom mcp.client.stdio import stdio_client\nimport os\nimport litellm\nfrom litellm import experimental_mcp_client\n\n\nserver_params = StdioServerParameters(\n    command="python3",\n    # \u786e\u4fdd\u66f4\u65b0\u4e3a mcp_server.py \u6587\u4ef6\u7684\u5b8c\u6574\u7edd\u5bf9\u8def\u5f84\n    args=["./mcp_server.py"],\n)\n\nasync with stdio_client(server_params) as (read, write):\n    async with ClientSession(read, write) as session:\n        # \u521d\u59cb\u5316\u8fde\u63a5\n        await session.initialize()\n\n        # \u83b7\u53d6\u5de5\u5177\n        tools = await experimental_mcp_client.load_mcp_tools(session=session, format="openai")\n        print("MCP TOOLS: ", tools)\n\n        messages = [{"role": "user", "content": "what\'s (3 + 5)"}]\n        llm_response = await litellm.acompletion(\n            model="gpt-4o",\n            api_key=os.getenv("OPENAI_API_KEY"),\n            messages=messages,\n            tools=tools,\n        )\n        print("LLM RESPONSE: ", json.dumps(llm_response, indent=4, default=str))\n\n        openai_tool = llm_response["choices"][0]["message"]["tool_calls"][0]\n        # \u4f7f\u7528 MCP \u5ba2\u6237\u7aef\u8c03\u7528\u5de5\u5177\n        call_result = await experimental_mcp_client.call_openai_tool(\n            session=session,\n            openai_tool=openai_tool,\n        )\n        print("MCP TOOL CALL RESULT: ", call_result)\n\n        # \u5c06\u5de5\u5177\u7ed3\u679c\u53d1\u9001\u5230 LLM\n        messages.append(llm_response["choices"][0]["message"])\n        messages.append(\n            {\n                "role": "tool",\n                "content": str(call_result.content[0].text),\n                "tool_call_id": openai_tool["id"],\n            }\n        )\n        print("final messages with tool result: ", messages)\n        llm_response = await litellm.acompletion(\n            model="gpt-4o",\n            api_key=os.getenv("OPENAI_API_KEY"),\n            messages=messages,\n            tools=tools,\n        )\n        print(\n            "FINAL LLM RESPONSE: ", json.dumps(llm_response, indent=4, default=str)\n        )\n'})})}),(0,i.jsxs)(a.A,{value:"proxy",label:"OpenAI SDK + LiteLLM Proxy",children:[(0,i.jsx)(n.p,{children:"\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u6307\u5411 LiteLLM proxy \u7684 OpenAI SDK \u6765\u8c03\u7528 MCP \u5de5\u5177\u3002\u8fd9\u91cc\u7684\u4e3b\u8981\u533a\u522b\u662f\u6211\u4eec\u4f7f\u7528 OpenAI SDK \u6765\u8fdb\u884c LLM API \u8bf7\u6c42"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="\u5e26\u6709 OpenAI SDK \u7684 MCP \u5ba2\u6237\u7aef" showLineNumbers',children:'# \u4e3a stdio \u8fde\u63a5\u521b\u5efa\u670d\u52a1\u5668\u53c2\u6570\nfrom mcp import ClientSession, StdioServerParameters\nfrom mcp.client.stdio import stdio_client\nimport os\nfrom openai import OpenAI\nfrom litellm import experimental_mcp_client\n\nserver_params = StdioServerParameters(\n    command="python3",\n    # \u786e\u4fdd\u66f4\u65b0\u4e3a mcp_server.py \u6587\u4ef6\u7684\u5b8c\u6574\u7edd\u5bf9\u8def\u5f84\n    args=["./mcp_server.py"],\n)\n\nasync with stdio_client(server_params) as (read, write):\n    async with ClientSession(read, write) as session:\n        # \u521d\u59cb\u5316\u8fde\u63a5\n        await session.initialize()\n\n        # \u4f7f\u7528 litellm mcp \u5ba2\u6237\u7aef\u83b7\u53d6\u5de5\u5177\n        tools = await experimental_mcp_client.load_mcp_tools(session=session, format="openai")\n        print("MCP TOOLS: ", tools)\n\n        # \u4f7f\u7528\u6307\u5411 LiteLLM proxy \u7684 OpenAI SDK\n        client = OpenAI(\n            api_key="your-api-key",  # \u60a8\u7684 LiteLLM proxy API key\n            base_url="http://localhost:8000"  # \u60a8\u7684 LiteLLM proxy URL\n        )\n\n        messages = [{"role": "user", "content": "what\'s (3 + 5)"}]\n        llm_response = client.chat.completions.create(\n            model="gpt-4",\n            messages=messages,\n            tools=tools\n        )\n        print("LLM RESPONSE: ", llm_response)\n\n        # \u83b7\u53d6\u7b2c\u4e00\u4e2a\u5de5\u5177\u8c03\u7528\n        tool_call = llm_response.choices[0].message.tool_calls[0]\n\n        # \u4f7f\u7528 MCP \u5ba2\u6237\u7aef\u8c03\u7528\u5de5\u5177\n        call_result = await experimental_mcp_client.call_openai_tool(\n            session=session,\n            openai_tool=tool_call.model_dump(),\n        )\n        print("MCP TOOL CALL RESULT: ", call_result)\n\n        # \u5c06\u5de5\u5177\u7ed3\u679c\u53d1\u9001\u56de LLM\n        messages.append(llm_response.choices[0].message.model_dump())\n        messages.append({\n            "role": "tool",\n            "content": str(call_result.content[0].text),\n            "tool_call_id": tool_call.id,\n        })\n\n        final_response = client.chat.completions.create(\n            model="gpt-4",\n            messages=messages,\n            tools=tools\n        )\n        print("FINAL RESPONSE: ", final_response)\n'})})]})]})]})}function m(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(x,{...e})}):x(e)}},7227(e,n,s){"use strict";s.d(n,{A:()=>t});s(96540);var r=s(18215);const i="tabItem_Ymn6";var l=s(74848);function t({children:e,hidden:n,className:s}){return(0,l.jsx)("div",{role:"tabpanel",className:(0,r.A)(i,s),hidden:n,children:e})}},22723(e,n,s){e.exports={src:Object.assign(Object.create({toString(){return this.src}}),{srcSet:s.p+"assets/ideal-img/static_headers.c64245d.640.png 640w,"+s.p+"assets/ideal-img/static_headers.7c4d65c.1920.png 1920w",images:[{path:s.p+"assets/ideal-img/static_headers.c64245d.640.png",width:640,height:355},{path:s.p+"assets/ideal-img/static_headers.7c4d65c.1920.png",width:1920,height:1065}],src:s.p+"assets/ideal-img/static_headers.c64245d.640.png",placeholder:void 0,width:640,height:355}),preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAd0lEQVR4nGWOSQoDMQwE/f+/ZpuxdksdrBBIGENdRNHlYeZ4vg4c52yIBaLWsCjUDGstDBHF7f7AJAaLwN3hER/cERHITAxzx5Yzqw+ZC1WJqvpjqCqIuaXOtJz4fVXA2NNE1IljKsQWzOMq7tm98E3sf5nZJf0G8+/r9aoWIHQAAAAASUVORK5CYII="}},26670(e,n,s){e.exports={src:Object.assign(Object.create({toString(){return this.src}}),{srcSet:s.p+"assets/ideal-img/add_stdio_mcp.17774c1.640.png 640w,"+s.p+"assets/ideal-img/add_stdio_mcp.0e0be4c.1366.png 1366w",images:[{path:s.p+"assets/ideal-img/add_stdio_mcp.17774c1.640.png",width:640,height:558},{path:s.p+"assets/ideal-img/add_stdio_mcp.0e0be4c.1366.png",width:1366,height:1192}],src:s.p+"assets/ideal-img/add_stdio_mcp.17774c1.640.png",placeholder:void 0,width:640,height:558}),preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAuElEQVR4nI2PTW4CMQxGc//TtFsWVBUrkOhJyCTjsZPMxPGHEkBMu6qt54X15B/HzIdtq1cAZzO77AFwBvDTHSciAY8w/InW2ugRUXALLb5Whapqa/iVTZs+Re+6LSmh5Gxmhj2q+p44EwUiRsplNHvpCzuqj9XzTMGJpBBjxDRNJiLIOY9pzyN3Ykq+rKsxc2UWTTmrmQ2AVrsYI926+L+vfYgfPi7fLOUoaf0alO3FUVY93Xz4vANR/VtjxT8WXwAAAABJRU5ErkJggg=="}},38507(e,n,s){e.exports={src:Object.assign(Object.create({toString(){return this.src}}),{srcSet:s.p+"assets/ideal-img/mcp_2.874bb22.640.png 640w,"+s.p+"assets/ideal-img/mcp_2.4948d4e.1920.png 1920w",images:[{path:s.p+"assets/ideal-img/mcp_2.874bb22.640.png",width:640,height:436},{path:s.p+"assets/ideal-img/mcp_2.4948d4e.1920.png",width:1920,height:1307}],src:s.p+"assets/ideal-img/mcp_2.874bb22.640.png",placeholder:void 0,width:640,height:436}),preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAHCAYAAAAxrNxjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAoElEQVR4nFWPyQrDMAxE/f8f10Ohh0LPCYSkiTdZi+kUuQTSw7PlwZqRwjTNWJYFKSWoKo79jbTtYLHxFpFxByJCKQWtNRALXo8b5vsTsXzQTWD2awheDFTRzVCaIFOFmaI1xnHEYRJUDb13iCpSLog5o9YK1z32TAtuO2KJsK4bYkygRkM7GdF+OMyCmBJKrWjMw81h5v+Pjs943fS69Re9zA/Io4DcDgAAAABJRU5ErkJggg=="}},40872(e,n,s){e.exports={src:Object.assign(Object.create({toString(){return this.src}}),{srcSet:s.p+"assets/ideal-img/add_mcp.13bf21d.640.png 640w,"+s.p+"assets/ideal-img/add_mcp.90334ee.1453.png 1453w",images:[{path:s.p+"assets/ideal-img/add_mcp.13bf21d.640.png",width:640,height:547},{path:s.p+"assets/ideal-img/add_mcp.90334ee.1453.png",width:1453,height:1241}],src:s.p+"assets/ideal-img/add_mcp.13bf21d.640.png",placeholder:void 0,width:640,height:547}),preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwUlEQVR4nF2PQQrCMBAA8/8neJK2Byt4KIS10CeYVkkRfyBYVNSLSTablYQKxoVhIUyGRBRFcQaAe9M0NynlP1cAeJVleRLDMHhmZmMshxD4d4goHYzjOImdUsjMARGD9z4DESmKWuuLUEqlorU2FlL1S5RncRKq7z16SuKPkC7l4lwkiiuKxMaYtIkysTfWeXwbF8MZ6NnNnzkLrfVcTO/OxjkKjyfz/nCcRFVVVdd1awCo27bNkHK7WtftZrksFx/Kd0ZY84pyIgAAAABJRU5ErkJggg=="}},45680(e,n,s){e.exports={src:Object.assign(Object.create({toString(){return this.src}}),{srcSet:s.p+"assets/ideal-img/mcp_oauth.872a74e.640.png 640w,"+s.p+"assets/ideal-img/mcp_oauth.4327142.1608.png 1608w",images:[{path:s.p+"assets/ideal-img/mcp_oauth.872a74e.640.png",width:640,height:639},{path:s.p+"assets/ideal-img/mcp_oauth.4327142.1608.png",width:1608,height:1606}],src:s.p+"assets/ideal-img/mcp_oauth.872a74e.640.png",placeholder:void 0,width:640,height:639}),preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAjUlEQVR4nHWQUQ5DIQgEvf9tXxVUEKfRtknzWkkm/CybXZLWzpWFMcHjPyMgte5cWZFq+OAHWzsmyd0REXo35pxwY0YQESQzIxdBtDJibvE3EcEY8XIsRenmrLkLPyT3QWuNdbAuj0IzJ2chl4LW9o7219EpIhTRnefsuFsrosqKcRSutzxy2bTWmYdCT+aDipFIA/dpAAAAAElFTkSuQmCC"}},49489(e,n,s){"use strict";s.d(n,{A:()=>C});var r=s(96540),i=s(18215),l=s(24245),t=s(56347),a=s(36494),c=s(62814),o=s(45167),d=s(69900);function h(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:s}=e;return(0,r.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:s,default:r}})=>({value:e,label:n,attributes:s,default:r}))}(s);return function(e){const n=(0,o.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,s])}function x({value:e,tabValues:n}){return n.some(n=>n.value===e)}function m({queryString:e=!1,groupId:n}){const s=(0,t.W6)(),i=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(i),(0,r.useCallback)(e=>{if(!i)return;const n=new URLSearchParams(s.location.search);n.set(i,e),s.replace({...s.location,search:n.toString()})},[i,s])]}function u(e){const{defaultValue:n,queryString:s=!1,groupId:i}=e,l=p(e),[t,c]=(0,r.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!x({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=n.find(e=>e.default)??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:l})),[o,h]=m({queryString:s,groupId:i}),[u,j]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,i]=(0,d.Dv)(n);return[s,(0,r.useCallback)(e=>{n&&i.set(e)},[n,i])]}({groupId:i}),_=(()=>{const e=o??u;return x({value:e,tabValues:l})?e:null})();(0,a.A)(()=>{_&&c(_)},[_]);return{selectedValue:t,selectValue:(0,r.useCallback)(e=>{if(!x({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);c(e),h(e),j(e)},[h,j,l]),tabValues:l}}var j=s(11062);const _="tabList__CuJ",g="tabItem_LNqP";var L=s(74848);function A({className:e,block:n,selectedValue:s,selectValue:r,tabValues:t}){const a=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.a_)(),o=e=>{const n=e.currentTarget,i=a.indexOf(n),l=t[i].value;l!==s&&(c(n),r(l))},d=e=>{let n=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const s=a.indexOf(e.currentTarget)+1;n=a[s]??a[0];break}case"ArrowLeft":{const s=a.indexOf(e.currentTarget)-1;n=a[s]??a[a.length-1];break}}n?.focus()};return(0,L.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},e),children:t.map(({value:e,label:n,attributes:r})=>(0,L.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{a.push(e)},onKeyDown:d,onClick:o,...r,className:(0,i.A)("tabs__item",g,r?.className,{"tabs__item--active":s===e}),children:n??e},e))})}function P({lazy:e,children:n,selectedValue:s}){const l=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=l.find(e=>e.props.value===s);return e?(0,r.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,L.jsx)("div",{className:"margin-top--md",children:l.map((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s}))})}function M(e){const n=u(e);return(0,L.jsxs)("div",{className:(0,i.A)("tabs-container",_),children:[(0,L.jsx)(A,{...n,...e}),(0,L.jsx)(P,{...n,...e})]})}function C(e){const n=(0,j.A)();return(0,L.jsx)(M,{...e,children:h(e.children)},String(n))}}}]);