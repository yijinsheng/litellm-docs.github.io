"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[78579],{7227(e,r,n){n.d(r,{A:()=>s});n(96540);var l=n(18215);const a="tabItem_Ymn6";var t=n(74848);function s({children:e,hidden:r,className:n}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,l.A)(a,n),hidden:r,children:e})}},28453(e,r,n){n.d(r,{R:()=>s,x:()=>i});var l=n(96540);const a={},t=l.createContext(a);function s(e){const r=l.useContext(t);return l.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),l.createElement(t.Provider,{value:r},e.children)}},49489(e,r,n){n.d(r,{A:()=>I});var l=n(96540),a=n(18215),t=n(24245),s=n(56347),i=n(36494),o=n(62814),c=n(45167),d=n(69900);function u(e){return l.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,l.isValidElement)(e)&&function(e){const{props:r}=e;return!!r&&"object"==typeof r&&"value"in r}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:r,children:n}=e;return(0,l.useMemo)(()=>{const e=r??function(e){return u(e).map(({props:{value:e,label:r,attributes:n,default:l}})=>({value:e,label:r,attributes:n,default:l}))}(n);return function(e){const r=(0,c.XI)(e,(e,r)=>e.value===r.value);if(r.length>0)throw new Error(`Docusaurus error: Duplicate values "${r.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[r,n])}function p({value:e,tabValues:r}){return r.some(r=>r.value===e)}function m({queryString:e=!1,groupId:r}){const n=(0,s.W6)(),a=function({queryString:e=!1,groupId:r}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:e,groupId:r});return[(0,o.aZ)(a),(0,l.useCallback)(e=>{if(!a)return;const r=new URLSearchParams(n.location.search);r.set(a,e),n.replace({...n.location,search:r.toString()})},[a,n])]}function x(e){const{defaultValue:r,queryString:n=!1,groupId:a}=e,t=h(e),[s,o]=(0,l.useState)(()=>function({defaultValue:e,tabValues:r}){if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${r.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=r.find(e=>e.default)??r[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:r,tabValues:t})),[c,u]=m({queryString:n,groupId:a}),[x,_]=function({groupId:e}){const r=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,a]=(0,d.Dv)(r);return[n,(0,l.useCallback)(e=>{r&&a.set(e)},[r,a])]}({groupId:a}),j=(()=>{const e=c??x;return p({value:e,tabValues:t})?e:null})();(0,i.A)(()=>{j&&o(j)},[j]);return{selectedValue:s,selectValue:(0,l.useCallback)(e=>{if(!p({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),_(e)},[u,_,t]),tabValues:t}}var _=n(11062);const j="tabList__CuJ",g="tabItem_LNqP";var b=n(74848);function v({className:e,block:r,selectedValue:n,selectValue:l,tabValues:s}){const i=[],{blockElementScrollPositionUntilNextRender:o}=(0,t.a_)(),c=e=>{const r=e.currentTarget,a=i.indexOf(r),t=s[a].value;t!==n&&(o(r),l(t))},d=e=>{let r=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=i.indexOf(e.currentTarget)+1;r=i[n]??i[0];break}case"ArrowLeft":{const n=i.indexOf(e.currentTarget)-1;r=i[n]??i[i.length-1];break}}r?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":r},e),children:s.map(({value:e,label:r,attributes:l})=>(0,b.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{i.push(e)},onKeyDown:d,onClick:c,...l,className:(0,a.A)("tabs__item",g,l?.className,{"tabs__item--active":n===e}),children:r??e},e))})}function f({lazy:e,children:r,selectedValue:n}){const t=(Array.isArray(r)?r:[r]).filter(Boolean);if(e){const e=t.find(e=>e.props.value===n);return e?(0,l.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:t.map((e,r)=>(0,l.cloneElement)(e,{key:r,hidden:e.props.value!==n}))})}function y(e){const r=x(e);return(0,b.jsxs)("div",{className:(0,a.A)("tabs-container",j),children:[(0,b.jsx)(v,{...r,...e}),(0,b.jsx)(f,{...r,...e})]})}function I(e){const r=(0,_.A)();return(0,b.jsx)(y,{...e,children:u(e.children)},String(r))}},90761(e,r,n){n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>i,default:()=>u,frontMatter:()=>s,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"proxy/guardrails/ibm_guardrails","title":"IBM \u5b88\u95e8\u4eba","description":"LiteLLM \u4e0e IBM \u7684 FMS \u5b88\u95e8\u4eba \u914d\u5408\u4f7f\u7528\uff0c\u7528\u4e8e\u5185\u5bb9\u5b89\u5168\u6027\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u68c0\u6d4b\u8d8a\u72f1\u3001\u4e2a\u4eba\u8eab\u4efd\u4fe1\u606f\uff08PII\uff09\u3001\u4ec7\u6068\u8a00\u8bba\u7b49\u3002","source":"@site/docs/proxy/guardrails/ibm_guardrails.md","sourceDirName":"proxy/guardrails","slug":"/proxy/guardrails/ibm_guardrails","permalink":"/docs/proxy/guardrails/ibm_guardrails","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"integrationsSidebar","previous":{"title":"HiddenLayer \u5b88\u62a4","permalink":"/docs/proxy/guardrails/hiddenlayer"},"next":{"title":"Javelin \u5b89\u5168\u62a4\u680f","permalink":"/docs/proxy/guardrails/javelin"}}');var a=n(74848),t=n(28453);n(49489),n(7227);const s={},i="IBM \u5b88\u95e8\u4eba",o={},c=[{value:"\u529f\u80fd\u8bf4\u660e",id:"\u529f\u80fd\u8bf4\u660e",level:2},{value:"\u5feb\u901f\u5165\u95e8",id:"\u5feb\u901f\u5165\u95e8",level:2},{value:"1. \u6dfb\u52a0\u5230 config.yaml",id:"1-\u6dfb\u52a0\u5230-configyaml",level:3},{value:"3. \u542f\u52a8\u4ee3\u7406",id:"3-\u542f\u52a8\u4ee3\u7406",level:3},{value:"4. \u53d1\u9001\u8bf7\u6c42",id:"4-\u53d1\u9001\u8bf7\u6c42",level:3},{value:"\u914d\u7f6e",id:"\u914d\u7f6e",level:2},{value:"\u5fc5\u8981\u53c2\u6570",id:"\u5fc5\u8981\u53c2\u6570",level:3},{value:"\u53ef\u9009\u53c2\u6570",id:"\u53ef\u9009\u53c2\u6570",level:3},{value:"optional_params",id:"optional_params",level:3},{value:"\u670d\u52a1\u5668\u7c7b\u578b",id:"\u670d\u52a1\u5668\u7c7b\u578b",level:2},{value:"\u68c0\u6d4b\u5668\u670d\u52a1\u5668\uff08\u63a8\u8350\uff09",id:"\u68c0\u6d4b\u5668\u670d\u52a1\u5668\u63a8\u8350",level:3},{value:"Orchestrator",id:"orchestrator",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:2},{value:"\u68c0\u67e5\u8f93\u5165\u4e2d\u7684\u8d8a\u72f1\u884c\u4e3a",id:"\u68c0\u67e5\u8f93\u5165\u4e2d\u7684\u8d8a\u72f1\u884c\u4e3a",level:3},{value:"\u68c0\u67e5\u54cd\u5e94\u4e2d\u7684 PII",id:"\u68c0\u67e5\u54cd\u5e94\u4e2d\u7684-pii",level:3},{value:"\u8fd0\u884c\u591a\u4e2a\u68c0\u6d4b\u5668",id:"\u8fd0\u884c\u591a\u4e2a\u68c0\u6d4b\u5668",level:3},{value:"\u68c0\u6d4b\u673a\u5236",id:"\u68c0\u6d4b\u673a\u5236",level:2},{value:"\u66f4\u591a\u9605\u8bfb",id:"\u66f4\u591a\u9605\u8bfb",level:2}];function d(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.header,{children:(0,a.jsx)(r.h1,{id:"ibm-\u5b88\u95e8\u4eba",children:"IBM \u5b88\u95e8\u4eba"})}),"\n",(0,a.jsxs)(r.p,{children:["LiteLLM \u4e0e ",(0,a.jsx)(r.a,{href:"https://github.com/foundation-model-stack/fms-guardrails-orchestrator",children:"IBM \u7684 FMS \u5b88\u95e8\u4eba"})," \u914d\u5408\u4f7f\u7528\uff0c\u7528\u4e8e\u5185\u5bb9\u5b89\u5168\u6027\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u68c0\u6d4b\u8d8a\u72f1\u3001\u4e2a\u4eba\u8eab\u4efd\u4fe1\u606f\uff08PII\uff09\u3001\u4ec7\u6068\u8a00\u8bba\u7b49\u3002"]}),"\n",(0,a.jsx)(r.h2,{id:"\u529f\u80fd\u8bf4\u660e",children:"\u529f\u80fd\u8bf4\u660e"}),"\n",(0,a.jsxs)(r.p,{children:["IBM \u7684 FMS \u5b88\u95e8\u4eba\u662f\u4e00\u4e2a\u6846\u67b6\uff0c\u7528\u4e8e\u5728 LLM \u8f93\u5165\u548c\u8f93\u51fa\u4e0a\u8c03\u7528\u68c0\u6d4b\u5668\u3002\u8981\u914d\u7f6e\u8fd9\u4e9b\u68c0\u6d4b\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528\u4f8b\u5982 ",(0,a.jsx)(r.a,{href:"https://github.com/trustyai-explainability/guardrails-detectors",children:"TrustyAI \u68c0\u6d4b\u5668"}),"\uff0c\u8fd9\u662f\u7531 Red Hat \u7684 ",(0,a.jsx)(r.a,{href:"https://github.com/trustyai-explainability",children:"TrustyAI \u56e2\u961f"})," \u7ef4\u62a4\u7684\u4e00\u4e2a\u5f00\u6e90\u9879\u76ee\uff0c\u5141\u8bb8\u7528\u6237\u914d\u7f6e\u4ee5\u4e0b\u7c7b\u578b\u7684\u68c0\u6d4b\u5668\uff1a"]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"\u6b63\u5219\u8868\u8fbe\u5f0f\u6a21\u5f0f"}),"\n",(0,a.jsx)(r.li,{children:"\u6587\u4ef6\u7c7b\u578b\u9a8c\u8bc1\u5668"}),"\n",(0,a.jsx)(r.li,{children:"\u81ea\u5b9a\u4e49 Python \u51fd\u6570"}),"\n",(0,a.jsxs)(r.li,{children:["Hugging Face ",(0,a.jsx)(r.a,{href:"https://huggingface.co/docs/transformers/en/model_doc/auto#transformers.AutoModelForSequenceClassification",children:"AutoModelForSequenceClassification"}),"\uff0c\u5373\u5e8f\u5217\u5206\u7c7b\u6a21\u578b"]}),"\n"]}),"\n",(0,a.jsxs)(r.p,{children:["\u6bcf\u4e2a\u68c0\u6d4b\u5668\u6839\u636e\u4ee5\u4e0b ",(0,a.jsx)(r.a,{href:"https://foundation-model-stack.github.io/fms-guardrails-orchestrator/docs/api/openapi_detector_api.yaml",children:"openapi \u6a21\u5f0f"})," \u8f93\u51fa API \u54cd\u5e94\u3002"]}),"\n",(0,a.jsx)(r.p,{children:"\u60a8\u53ef\u4ee5\u8fdb\u884c\u4ee5\u4e0b\u68c0\u67e5\uff1a"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"\u5728\u53d1\u9001\u5230 LLM \u4e4b\u524d\uff08\u5728\u7528\u6237\u8f93\u5165\u65f6\uff09"}),"\n",(0,a.jsx)(r.li,{children:"\u5728\u83b7\u53d6 LLM \u54cd\u5e94\u4e4b\u540e\uff08\u5728\u8f93\u51fa\u65f6\uff09"}),"\n",(0,a.jsx)(r.li,{children:"\u5728\u8c03\u7528\u671f\u95f4\uff08\u4e0e LLM \u5e76\u884c\uff09"}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"\u5feb\u901f\u5165\u95e8",children:"\u5feb\u901f\u5165\u95e8"}),"\n",(0,a.jsx)(r.h3,{id:"1-\u6dfb\u52a0\u5230-configyaml",children:"1. \u6dfb\u52a0\u5230 config.yaml"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-yaml",children:'model_list:\n  - model_name: gpt-3.5-turbo\n    litellm_params:\n      model: openai/gpt-3.5-turbo\n      api_key: os.environ/OPENAI_API_KEY\n\nguardrails:\n  - guardrail_name: ibm-jailbreak-detector\n    litellm_params:\n      guardrail: ibm_guardrails\n      mode: pre_call\n      auth_token: os.environ/IBM_GUARDRAILS_AUTH_TOKEN\n      base_url: "https://your-detector-server.com"\n      detector_id: "jailbreak-detector"\n      is_detector_server: true\n      default_on: true\n      optional_params:\n        score_threshold: 0.8\n        block_on_detection: true\n\n\n### 2. \u8bbe\u7f6e\u6388\u6743\u4ee4\u724c\n\n```bash\nexport IBM_GUARDRAILS_AUTH_TOKEN="your-token"\n'})}),"\n",(0,a.jsx)(r.h3,{id:"3-\u542f\u52a8\u4ee3\u7406",children:"3. \u542f\u52a8\u4ee3\u7406"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-shell",children:"litellm --config config.yaml --detailed_debug\n"})}),"\n",(0,a.jsx)(r.h3,{id:"4-\u53d1\u9001\u8bf7\u6c42",children:"4. \u53d1\u9001\u8bf7\u6c42"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-shell",children:'curl -i http://localhost:4000/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer sk-1234" \\\n  -d \'{\n    "model": "gpt-3.5-turbo",\n    "messages": [\n      {"role": "user", "content": "Hello, how are you?"}\n    ],\n    "guardrails": ["ibm-jailbreak-detector"]\n  }\'\n'})}),"\n",(0,a.jsx)(r.h2,{id:"\u914d\u7f6e",children:"\u914d\u7f6e"}),"\n",(0,a.jsx)(r.h3,{id:"\u5fc5\u8981\u53c2\u6570",children:"\u5fc5\u8981\u53c2\u6570"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"guardrail"})," - str - \u8bbe\u7f6e\u4e3a ",(0,a.jsx)(r.code,{children:"ibm_guardrails"})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"auth_token"})," - str - \u60a8\u7684 IBM \u5b88\u95e8\u4eba\u6388\u6743\u4ee4\u724c\u3002\u53ef\u4ee5\u4f7f\u7528 ",(0,a.jsx)(r.code,{children:"os.environ/IBM_GUARDRAILS_AUTH_TOKEN"})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"base_url"})," - str - \u4f60\u7684 IBM \u68c0\u6d4b\u5668\u6216\u5b88\u95e8\u4eba\u670d\u52a1\u5668\u7684 URL"]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"detector_id"})," - str - \u8981\u4f7f\u7528\u7684\u68c0\u6d4b\u5668\uff08\u4f8b\u5982\uff0c\u201cjailbreak-detector\u201d\uff0c\u201cpii-detector\u201d\uff09"]}),"\n"]}),"\n",(0,a.jsx)(r.h3,{id:"\u53ef\u9009\u53c2\u6570",children:"\u53ef\u9009\u53c2\u6570"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"mode"})," - str \u6216 list[str] - \u8fd0\u884c\u65f6\u673a\u3002\u9009\u9879\uff1a",(0,a.jsx)(r.code,{children:"pre_call"}),", ",(0,a.jsx)(r.code,{children:"post_call"}),", ",(0,a.jsx)(r.code,{children:"during_call"}),"\u3002\u9ed8\u8ba4\u503c\uff1a",(0,a.jsx)(r.code,{children:"pre_call"})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"default_on"})," - bool - \u5728\u8bf7\u6c42\u4e2d\u672a\u6307\u5b9a\u65f6\u81ea\u52a8\u8fd0\u884c\u3002\u9ed8\u8ba4\u503c\uff1a",(0,a.jsx)(r.code,{children:"false"})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"is_detector_server"})," - bool - \u4e3a\u68c0\u6d4b\u5668\u670d\u52a1\u5668\u8bbe\u7f6e\u4e3a ",(0,a.jsx)(r.code,{children:"true"}),"\uff0c\u4e3a orchestrator \u8bbe\u7f6e\u4e3a ",(0,a.jsx)(r.code,{children:"false"}),"\u3002\u9ed8\u8ba4\u503c\uff1a",(0,a.jsx)(r.code,{children:"true"})]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"verify_ssl"})," - bool - \u662f\u5426\u9a8c\u8bc1 SSL \u8bc1\u4e66\u3002\u9ed8\u8ba4\u503c\uff1a",(0,a.jsx)(r.code,{children:"true"})]}),"\n"]}),"\n",(0,a.jsx)(r.h3,{id:"optional_params",children:"optional_params"}),"\n",(0,a.jsxs)(r.p,{children:["\u8fd9\u4e9b\u53c2\u6570\u5728 ",(0,a.jsx)(r.code,{children:"optional_params"})," \u4e2d\uff1a"]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"detector_params"})," - dict - \u5411\u68c0\u6d4b\u5668\u4f20\u9012\u7684\u53c2\u6570"]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"extra_headers"})," - dict - \u9644\u52a0\u5230\u8bf7\u6c42\u4e2d\u7684\u989d\u5916\u5934\uff0c\u4f5c\u4e3a\u952e\u503c\u5bf9\u5b57\u5178\u3002"]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"score_threshold"})," - float - \u53ea\u6709\u5206\u6570\u9ad8\u4e8e\u6b64\u9608\u503c\uff080.0 \u5230 1.0\uff09\u65f6\u624d\u8ba1\u6570"]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"block_on_detection"})," - bool - \u53d1\u73b0\u8fdd\u89c4\u884c\u4e3a\u65f6\u963b\u6b62\u8bf7\u6c42\u3002\u9ed8\u8ba4\u503c\uff1a",(0,a.jsx)(r.code,{children:"true"})]}),"\n"]}),"\n",(0,a.jsx)(r.h2,{id:"\u670d\u52a1\u5668\u7c7b\u578b",children:"\u670d\u52a1\u5668\u7c7b\u578b"}),"\n",(0,a.jsx)(r.p,{children:"IBM \u5b88\u95e8\u4eba\u6709\u4e24\u4e2a API \u60a8\u53ef\u4ee5\u4f7f\u7528\uff1a"}),"\n",(0,a.jsx)(r.h3,{id:"\u68c0\u6d4b\u5668\u670d\u52a1\u5668\u63a8\u8350",children:"\u68c0\u6d4b\u5668\u670d\u52a1\u5668\uff08\u63a8\u8350\uff09"}),"\n",(0,a.jsxs)(r.p,{children:[(0,a.jsx)(r.a,{href:"https://foundation-model-stack.github.io/fms-guardrails-orchestrator/?urls.primaryName=Detector+API#/Text",children:"\u6b64\u68c0\u6d4b\u5668 API"})," \u4f7f\u7528 ",(0,a.jsx)(r.code,{children:"api/v1/text/contents"})," \u7aef\u70b9\u8fd0\u884c\u5355\u4e2a\u68c0\u6d4b\u5668\uff1b\u5b83\u53ef\u4ee5\u63a5\u53d7\u8bf7\u6c42\u4e2d\u7684\u591a\u4e2a\u6587\u672c\u8f93\u5165\u3002"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-yaml",children:'guardrails:\n  - guardrail_name: ibm-detector\n    litellm_params:\n      guardrail: ibm_guardrails\n      mode: pre_call\n      auth_token: os.environ/IBM_GUARDRAILS_AUTH_TOKEN\n      base_url: "https://your-detector-server.com"\n      detector_id: "jailbreak-detector"\n      is_detector_server: true  # \u4f7f\u7528\u68c0\u6d4b\u5668\u670d\u52a1\u5668\n'})}),"\n",(0,a.jsx)(r.h3,{id:"orchestrator",children:"Orchestrator"}),"\n",(0,a.jsxs)(r.p,{children:["\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f IBM FMS \u5b88\u95e8\u4eba orchestrator\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,a.jsx)(r.a,{href:"https://foundation-model-stack.github.io/fms-guardrails-orchestrator/?urls.primaryName=Orchestrator+API",children:"FMS Orchestrator API"}),"\uff0c\u5177\u4f53\u6765\u8bf4\u662f\u901a\u8fc7\u5229\u7528 ",(0,a.jsx)(r.code,{children:"api/v2/text/detection/content"})," \u6765\u6f5c\u5728\u5730\u5728\u4e00\u4e2a\u8bf7\u6c42\u4e2d\u8fd0\u884c\u591a\u4e2a\u68c0\u6d4b\u5668\uff1b\u4f46\u662f\uff0c\u6b64\u7aef\u70b9\u53ea\u80fd\u63a5\u53d7\u4e00\u4e2a\u6587\u672c\u8f93\u5165\u3002"]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-yaml",children:'guardrails:\n  - guardrail_name: ibm-orchestrator\n    litellm_params:\n      guardrail: ibm_guardrails\n      mode: pre_call\n      auth_token: os.environ/IBM_GUARDRAILS_AUTH_TOKEN\n      base_url: "https://your-orchestrator-server.com"\n      detector_id: "jailbreak-detector"\n      is_detector_server: false  # \u4f7f\u7528 orchestrator\n'})}),"\n",(0,a.jsx)(r.h2,{id:"\u793a\u4f8b",children:"\u793a\u4f8b"}),"\n",(0,a.jsx)(r.h3,{id:"\u68c0\u67e5\u8f93\u5165\u4e2d\u7684\u8d8a\u72f1\u884c\u4e3a",children:"\u68c0\u67e5\u8f93\u5165\u4e2d\u7684\u8d8a\u72f1\u884c\u4e3a"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-yaml",children:'guardrails:\n  - guardrail_name: jailbreak-check\n    litellm_params:\n      guardrail: ibm_guardrails\n      mode: pre_call\n      auth_token: os.environ/IBM_GUARDRAILS_AUTH_TOKEN\n      base_url: "https://your-detector-server.com"\n      detector_id: "jailbreak-detector"\n      is_detector_server: true\n      default_on: true\n      optional_params:\n        score_threshold: 0.8\n'})}),"\n",(0,a.jsx)(r.h3,{id:"\u68c0\u67e5\u54cd\u5e94\u4e2d\u7684-pii",children:"\u68c0\u67e5\u54cd\u5e94\u4e2d\u7684 PII"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-yaml",children:'guardrails:\n  - guardrail_name: pii-check\n    litellm_params:\n      guardrail: ibm_guardrails\n      mode: post_call\n      auth_token: os.environ/IBM_GUARDRAILS_AUTH_TOKEN\n      base_url: "https://your-detector-server.com"\n      detector_id: "pii-detector"\n      is_detector_server: true\n      optional_params:\n        score_threshold: 0.5  # PII \u7684\u9608\u503c\u8f83\u4f4e\n        block_on_detection: true\n'})}),"\n",(0,a.jsx)(r.h3,{id:"\u8fd0\u884c\u591a\u4e2a\u68c0\u6d4b\u5668",children:"\u8fd0\u884c\u591a\u4e2a\u68c0\u6d4b\u5668"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-yaml",children:'guardrails:\n  - guardrail_name: jailbreak-check\n    litellm_params:\n      guardrail: ibm_guardrails\n      mode: pre_call\n      auth_token: os.environ/IBM_GUARDRAILS_AUTH_TOKEN\n      base_url: "https://your-detector-server.com"\n      detector_id: "jailbreak-detector"\n      is_detector_server: true\n      \n  - guardrail_name: pii-check\n    litellm_params:\n      guardrail: ibm_guardrails\n      mode: post_call\n      auth_token: os.environ/IBM_GUARDRAILS_AUTH_TOKEN\n      base_url: "https://your-detector-server.com"\n      detector_id: "pii-detector"\n      is_detector_server: true\n'})}),"\n",(0,a.jsx)(r.p,{children:"\u7136\u540e\u5728\u8bf7\u6c42\u4e2d\uff1a"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-shell",children:'curl -i http://localhost:4000/v1/chat/completions \\\n  -H "Content-Type: application/json" \\\n  -H "Authorization: Bearer sk-1234" \\\n  -d \'{\n    "model": "gpt-3.5-turbo",\n    "messages": [{"role": "user", "content": "Hello"}],\n    "guardrails": ["jailbreak-check", "pii-check"]\n  }\'\n'})}),"\n",(0,a.jsx)(r.h2,{id:"\u68c0\u6d4b\u673a\u5236",children:"\u68c0\u6d4b\u673a\u5236"}),"\n",(0,a.jsx)(r.p,{children:"\u5f53 IBM \u5b88\u95e8\u4eba\u53d1\u73b0\u67d0\u4e9b\u5185\u5bb9\u65f6\uff0c\u5b83\u4f1a\u8fd4\u56de\u6709\u5173\u5176\u53d1\u73b0\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-json",children:'{\n  "start": 0,\n  "end": 31,\n  "text": "You are now in Do Anything Mode",\n  "detection_type": "jailbreak",\n  "score": 0.858\n}\n'})}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"score"})," - \u5176\u7f6e\u4fe1\u5ea6\uff080.0 \u5230 1.0\uff09"]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"text"})," - \u89e6\u53d1\u5b83\u7684\u5177\u4f53\u6587\u672c"]}),"\n",(0,a.jsxs)(r.li,{children:[(0,a.jsx)(r.code,{children:"detection_type"})," - \u8fdd\u89c4\u7c7b\u578b"]}),"\n"]}),"\n",(0,a.jsxs)(r.p,{children:["\u5982\u679c\u5206\u6570\u9ad8\u4e8e\u60a8\u7684 ",(0,a.jsx)(r.code,{children:"score_threshold"}),"\uff0c\u8bf7\u6c42\u4f1a\u88ab\u963b\u6b62\uff08\u5982\u679c ",(0,a.jsx)(r.code,{children:"block_on_detection"})," \u4e3a true\uff09\u3002"]}),"\n",(0,a.jsx)(r.h2,{id:"\u66f4\u591a\u9605\u8bfb",children:"\u66f4\u591a\u9605\u8bfb"}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.a,{href:"./quick_start#-control-guardrails-per-api-key",children:"\u63a7\u5236\u6bcf\u4e2a API \u5bc6\u94a5\u7684\u5b88\u95e8\u4eba"})}),"\n",(0,a.jsx)(r.li,{children:(0,a.jsx)(r.a,{href:"https://github.com/foundation-model-stack/fms-guardrails-orchestr8",children:"IBM FMS \u5b88\u95e8\u4eba\u5728 GitHub \u4e0a"})}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);