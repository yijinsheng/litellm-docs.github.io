"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[6951],{28453(e,n,l){l.d(n,{R:()=>o,x:()=>t});var r=l(96540);const i={},s=r.createContext(i);function o(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:n},e.children)}},98350(e,n,l){l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"provider_registration/index","title":"\u4f5c\u4e3a\u6a21\u578b\u63d0\u4f9b\u5546\u96c6\u6210","description":"OpenAI \u517c\u5bb9\u63d0\u4f9b\u5546\u7684\u5feb\u901f\u5165\u95e8","source":"@site/docs/provider_registration/index.md","sourceDirName":"provider_registration","slug":"/provider_registration/","permalink":"/docs/provider_registration/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u4f5c\u4e3a\u6a21\u578b\u63d0\u4f9b\u5546\u96c6\u6210"},"sidebar":"tutorialSidebar","previous":{"title":"Supported Models & Providers","permalink":"/docs/providers"},"next":{"title":"Add OpenAI-Compatible Provider (JSON)","permalink":"/docs/contributing/adding_openai_compatible_providers"}}');var i=l(74848),s=l(28453);const o={title:"\u4f5c\u4e3a\u6a21\u578b\u63d0\u4f9b\u5546\u96c6\u6210"},t=void 0,d={},c=[{value:"OpenAI \u517c\u5bb9\u63d0\u4f9b\u5546\u7684\u5feb\u901f\u5165\u95e8",id:"openai-\u517c\u5bb9\u63d0\u4f9b\u5546\u7684\u5feb\u901f\u5165\u95e8",level:2},{value:"\u6982\u89c8",id:"\u6982\u89c8",level:3},{value:"1. \u521b\u5efa\u60a8\u7684\u914d\u7f6e\u7c7b",id:"1-\u521b\u5efa\u60a8\u7684\u914d\u7f6e\u7c7b",level:3},{value:"<code>litellm/llms/your_provider_name_here</code>",id:"litellmllmsyour_provider_name_here",level:4},{value:"<code>litellm/llms/your_provider_name_here/chat/transformation.py</code>",id:"litellmllmsyour_provider_name_herechattransformationpy",level:4},{value:"2. \u5728\u4ee3\u7801\u5e93\u7684\u591a\u4e2a\u5730\u65b9\u6dfb\u52a0\u81ea\u5df1",id:"2-\u5728\u4ee3\u7801\u5e93\u7684\u591a\u4e2a\u5730\u65b9\u6dfb\u52a0\u81ea\u5df1",level:3},{value:"<code>litellm/__init__.py</code>",id:"litellm__init__py",level:4},{value:"<code>litellm/main.py</code>",id:"litellmmainpy",level:4},{value:"<code>litellm/constants.py</code>",id:"litellmconstantspy",level:4},{value:"<code>litellm/litellm_core_utils/get_llm_provider_logic.py</code>",id:"litellmlitellm_core_utilsget_llm_provider_logicpy",level:4},{value:"<code>litellm/litellm_core_utils/streaming_handler.py</code>",id:"litellmlitellm_core_utilsstreaming_handlerpy",level:4},{value:"\u5982\u679c\u60a8\u6b63\u5728\u81ea\u5b9a\u4e49\u6d41\u5904\u7406\uff0c\u8bf7\u66f4\u65b0\u6b64\u90e8\u5206\uff0c\u4f8b\u5982",id:"\u5982\u679c\u60a8\u6b63\u5728\u81ea\u5b9a\u4e49\u6d41\u5904\u7406\u8bf7\u66f4\u65b0\u6b64\u90e8\u5206\u4f8b\u5982",level:4},{value:"3. \u7f16\u5199\u6d4b\u8bd5\u6587\u4ef6\u4ee5\u8fed\u4ee3\u60a8\u7684\u4ee3\u7801",id:"3-\u7f16\u5199\u6d4b\u8bd5\u6587\u4ef6\u4ee5\u8fed\u4ee3\u60a8\u7684\u4ee3\u7801",level:3},{value:"4. \u5b9e\u73b0\u6240\u9700\u7684\u65b9\u6cd5",id:"4-\u5b9e\u73b0\u6240\u9700\u7684\u65b9\u6cd5",level:3},{value:"<code>validate_environment</code>",id:"validate_environment",level:6},{value:"<code>get_complete_url</code>",id:"get_complete_url",level:6},{value:"<code>transform_request</code>",id:"transform_request",level:6},{value:"<code>transform_response</code>",id:"transform_response",level:6},{value:"<code>get_sync_custom_stream_wrapper</code> / <code>get_async_custom_stream_wrapper</code>",id:"get_sync_custom_stream_wrapper--get_async_custom_stream_wrapper",level:6},{value:"\ud83e\uddea \u6d4b\u8bd5",id:"-\u6d4b\u8bd5",level:3},{value:"\u8865\u5145\u60f3\u6cd5",id:"\u8865\u5145\u60f3\u6cd5",level:3}];function a(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",h6:"h6",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"openai-\u517c\u5bb9\u63d0\u4f9b\u5546\u7684\u5feb\u901f\u5165\u95e8",children:"OpenAI \u517c\u5bb9\u63d0\u4f9b\u5546\u7684\u5feb\u901f\u5165\u95e8"}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u60a8 API \u4e0e OpenAI \u517c\u5bb9\uff0c\u53ef\u4ee5\u901a\u8fc7\u7f16\u8f91\u4e00\u4e2a JSON \u6587\u4ef6\u6765\u6dfb\u52a0\u652f\u6301\u3002\u8bf7\u53c2\u9605 ",(0,i.jsx)(n.a,{href:"/docs/contributing/adding_openai_compatible_providers",children:"\u6dfb\u52a0 OpenAI \u517c\u5bb9\u63d0\u4f9b\u5546"})," \u83b7\u53d6\u7b80\u5355\u7684\u65b9\u6cd5\u3002"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"\u672c\u6307\u5357\u4e13\u6ce8\u4e8e\u5982\u4f55\u8bbe\u7f6e\u5fc5\u8981\u7684\u7c7b\u548c\u914d\u7f6e\u4ee5\u5145\u5f53\u804a\u5929\u63d0\u4f9b\u5546\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u8bf7\u5148\u9605\u8bfb\u6b64\u6307\u5357\uff0c\u5e76\u67e5\u770b\u4ee3\u7801\u5e93\u4e2d\u7684\u73b0\u6709\u4ee3\u7801\uff0c\u4e86\u89e3\u5982\u4f55\u4f5c\u4e3a\u5176\u4ed6\u63d0\u4f9b\u5546\u5de5\u4f5c\uff0c\u4f8b\u5982\u5904\u7406\u5d4c\u5165\u6216\u56fe\u50cf\u751f\u6210\u3002"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"\u6982\u89c8",children:"\u6982\u89c8"}),"\n",(0,i.jsx)(n.p,{children:"\u4ece\u63d0\u4f9b\u5546\u7684\u89d2\u5ea6\u6765\u770b\uff0cliteLLM \u7684\u5de5\u4f5c\u65b9\u5f0f\u5f88\u7b80\u5355\u3002"}),"\n",(0,i.jsx)(n.p,{children:"liteLLM \u4f5c\u4e3a\u4e00\u4e2a\u5305\u88c5\u5668\uff0c\u5b83\u4f1a\u63a5\u6536 OpenAI \u8bf7\u6c42\u5e76\u5c06\u5176\u8def\u7531\u5230\u60a8\u7684 API\u3002\u7136\u540e\u5c06\u60a8\u7684\u8f93\u51fa\u9002\u914d\u4e3a\u6807\u51c6\u683c\u5f0f\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u8981\u6210\u4e3a\u63d0\u4f9b\u5546\uff0c\u60a8\u9700\u8981\u7f16\u5199\u4e00\u4e2a\u6a21\u5757\u6765\u63d2\u5165 API\uff0c\u5e76\u5728 liteLLM API \u548c\u60a8\u7684 API \u4e4b\u95f4\u5145\u5f53\u9002\u914d\u5668\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u60a8\u5c06\u7f16\u5199\u7684\u6a21\u5757\u65e2\u4f5c\u4e3a\u914d\u7f6e\u53c8\u4f5c\u4e3a\u8bf7\u6c42\u548c\u54cd\u5e94\u7684\u9002\u914d\u624b\u6bb5\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u60a8\u7684\u76ee\u6807\u662f\u6709\u6548\u5730\u7f16\u5199\u6b64\u6a21\u5757\u4ee5\u4f7f\u8f93\u5165\u9002\u5e94\u60a8\u7684 API \u5e76\u4f7f\u8f93\u51fa\u9002\u5e94\u8c03\u7528 liteLLM \u7684\u4ee3\u7801\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u5b83\u5305\u62ec\u4ee5\u4e0b\u65b9\u6cd5\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u9a8c\u8bc1\u8bf7\u6c42"}),"\n",(0,i.jsx)(n.li,{children:"\u5c06\uff08\u9002\u914d\uff09\u8bf7\u6c42\u8f6c\u6362\u4e3a\u53d1\u9001\u5230\u60a8 API \u7684\u8bf7\u6c42"}),"\n",(0,i.jsx)(n.li,{children:"\u5c06\uff08\u9002\u914d\uff09\u4ece API \u8fd4\u56de\u7684\u54cd\u5e94\u8f6c\u6362\u4e3a\u5ba2\u6237\u8fd4\u56de\u7ed9\u8c03\u7528 liteLLM \u4ee3\u7801\u7684\u54cd\u5e94"}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5176\u4ed6\u4e00\u4e9b\u65b9\u6cd5"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"1-\u521b\u5efa\u60a8\u7684\u914d\u7f6e\u7c7b",children:"1. \u521b\u5efa\u60a8\u7684\u914d\u7f6e\u7c7b"}),"\n",(0,i.jsx)(n.p,{children:"\u521b\u5efa\u4e00\u4e2a\u5e26\u6709\u63d0\u4f9b\u5546\u540d\u79f0\u7684\u65b0\u76ee\u5f55"}),"\n",(0,i.jsx)(n.h4,{id:"litellmllmsyour_provider_name_here",children:(0,i.jsx)(n.code,{children:"litellm/llms/your_provider_name_here"})}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u8be5\u76ee\u5f55\u4e2d\uff0c\u60a8\u9700\u8981\u6dfb\u52a0\u4e00\u4e2a\u7528\u4e8e\u804a\u5929\u914d\u7f6e\u7684\u6587\u4ef6"}),"\n",(0,i.jsx)(n.h4,{id:"litellmllmsyour_provider_name_herechattransformationpy",children:(0,i.jsx)(n.code,{children:"litellm/llms/your_provider_name_here/chat/transformation.py"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"transformation.py"})," \u6587\u4ef6\u5c06\u5305\u542b\u4e00\u4e2a\u914d\u7f6e\u7c7b\uff0c\u8be5\u7c7b\u89c4\u5b9a\u4e86\u60a8\u7684 API \u5c06\u5982\u4f55\u63d2\u5165 liteLLM API\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5b9a\u4e49\u60a8\u7684\u914d\u7f6e\u7c7b\u6269\u5c55 ",(0,i.jsx)(n.code,{children:"BaseConfig"}),"\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from litellm.llms.base_llm.chat.transformation import BaseConfig\n\nclass MyProviderChatConfig(BaseConfig):\n    def __init__(self):\n        ...\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u7a0d\u540e\u6211\u4eec\u5c06\u586b\u5145\u62bd\u8c61\u65b9\u6cd5\u3002"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"2-\u5728\u4ee3\u7801\u5e93\u7684\u591a\u4e2a\u5730\u65b9\u6dfb\u52a0\u81ea\u5df1",children:"2. \u5728\u4ee3\u7801\u5e93\u7684\u591a\u4e2a\u5730\u65b9\u6dfb\u52a0\u81ea\u5df1"}),"\n",(0,i.jsx)(n.p,{children:"liteLLM \u6b63\u5728\u52aa\u529b\u6539\u8fdb\u6b64\u8fc7\u7a0b\uff0c\u4f46\u76ee\u524d\u60a8\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a"}),"\n",(0,i.jsx)(n.h4,{id:"litellm__init__py",children:(0,i.jsx)(n.code,{children:"litellm/__init__.py"})}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u6587\u4ef6\u9876\u90e8\u90e8\u5206\uff0c\u5c06\u60a8\u7684\u5bc6\u94a5\u6dfb\u52a0\u5230\u5bc6\u94a5\u5217\u8868\u4e2d\u4f5c\u4e3a\u9009\u9879"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-py",children:"azure_key: Optional[str] = None\nanthropic_key: Optional[str] = None\nreplicate_key: Optional[str] = None\nbytez_key: Optional[str] = None\ncohere_key: Optional[str] = None\ninfinity_key: Optional[str] = None\nclarifai_key: Optional[str] = None\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5bfc\u5165\u60a8\u7684\u914d\u7f6e"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"from .llms.bytez.chat.transformation import BytezChatConfig\nfrom .llms.custom_llm import CustomLLM\nfrom .llms.bedrock.chat.converse_transformation import AmazonConverseConfig\nfrom .llms.openai_like.chat.handler import OpenAILikeChatConfig\n"})}),"\n",(0,i.jsx)(n.h4,{id:"litellmmainpy",children:(0,i.jsx)(n.code,{children:"litellm/main.py"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5728 ",(0,i.jsx)(n.code,{children:"main.py"})," \u4e2d\u6dfb\u52a0\u81ea\u5df1\uff0c\u4ee5\u4fbf\u8bf7\u6c42\u53ef\u4ee5\u8def\u7531\u5230\u60a8\u7684\u914d\u7f6e\u7c7b"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-py",children:"from .llms.bedrock.chat import BedrockConverseLLM, BedrockLLM\nfrom .llms.bedrock.embed.embedding import BedrockEmbedding\nfrom .llms.bedrock.image.image_handler import BedrockImageGeneration\nfrom .llms.bytez.chat.transformation import BytezChatConfig\nfrom .llms.codestral.completion.handler import CodestralTextCompletion\nfrom .llms.cohere.embed import handler as cohere_embed\nfrom .llms.custom_httpx.aiohttp_handler import BaseLLMAIOHTTPHandler\n\nbase_llm_http_handler = BaseLLMHTTPHandler()\nbase_llm_aiohttp_handler = BaseLLMAIOHTTPHandler()\nsagemaker_chat_completion = SagemakerChatHandler()\nbytez_transformation = BytezChatConfig()\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u7136\u540e\u5728\u4ee3\u7801\u7684\u8f83\u4f4e\u90e8\u5206"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-py",children:'elif custom_llm_provider == "bytez":\n    api_key = (\n        api_key\n        or litellm.bytez_key\n        or get_secret_str("BYTEZ_API_KEY")\n        or litellm.api_key\n    )\n\n    response = base_llm_http_handler.completion(\n        model=model,\n        messages=messages,\n        headers=headers,\n        model_response=model_response,\n        api_key=api_key,\n        api_base=api_base,\n        acompletion=acompletion,\n        logging_obj=logging,\n        optional_params=optional_params,\n        litellm_params=litellm_params,\n        timeout=timeout,  # type: ignore\n        client=client,\n        custom_llm_provider=custom_llm_provider,\n        encoding=encoding,\n        stream=stream,\n    )\n\n    pass\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u6ce8\u610f\uff0c\u60a8\u53ef\u4ee5\u4f9d\u8d56 liteLLM \u5c06\u6bcf\u4e2a\u53c2\u6570/\u5173\u952e\u5b57\u901a\u8fc7 ",(0,i.jsx)(n.code,{children:".completion()"})," \u8c03\u7528\u4f20\u9012\u7ed9\u60a8\u7684\u914d\u7f6e"]}),"\n",(0,i.jsx)(n.h4,{id:"litellmconstantspy",children:(0,i.jsx)(n.code,{children:"litellm/constants.py"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5c06\u81ea\u5df1\u6dfb\u52a0\u5230 ",(0,i.jsx)(n.code,{children:"LITELLM_CHAT_PROVIDERS"})," \u5217\u8868\u4e2d"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-py",children:'LITELLM_CHAT_PROVIDERS = [\n    "openai",\n    "openai_like",\n    "bytez",\n    "xai",\n    "custom_openai",\n    "text-completion-openai",\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u5c06\u81ea\u5df1\u6dfb\u52a0\u5230\u63d0\u4f9b\u5546\u7684 if \u8bed\u53e5\u94fe\u4e2d"}),"\n",(0,i.jsx)(n.h4,{id:"litellmlitellm_core_utilsget_llm_provider_logicpy",children:(0,i.jsx)(n.code,{children:"litellm/litellm_core_utils/get_llm_provider_logic.py"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-py",children:'elif model == "*":\n    custom_llm_provider = "openai"\n# bytez \u6a21\u578b\nelif model.startswith("bytez/"):\n    custom_llm_provider = "bytez"\nif not custom_llm_provider:\n    if litellm.suppress_debug_info is False:\n        print()  # noqa\n'})}),"\n",(0,i.jsx)(n.h4,{id:"litellmlitellm_core_utilsstreaming_handlerpy",children:(0,i.jsx)(n.code,{children:"litellm/litellm_core_utils/streaming_handler.py"})}),"\n",(0,i.jsx)(n.h4,{id:"\u5982\u679c\u60a8\u6b63\u5728\u81ea\u5b9a\u4e49\u6d41\u5904\u7406\u8bf7\u66f4\u65b0\u6b64\u90e8\u5206\u4f8b\u5982",children:"\u5982\u679c\u60a8\u6b63\u5728\u81ea\u5b9a\u4e49\u6d41\u5904\u7406\uff0c\u8bf7\u66f4\u65b0\u6b64\u90e8\u5206\uff0c\u4f8b\u5982"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-py",children:'    def handle_bytez_chunk(self, chunk):\n        try:\n            is_finished = False\n            finish_reason = ""\n\n            return {\n                "text": chunk,\n                "is_finished": is_finished,\n                "finish_reason": finish_reason,\n            }\n        except Exception as e:\n            raise e\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u7136\u540e\u5728\u6587\u4ef6\u7684\u8f83\u4f4e\u90e8\u5206"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'elif self.custom_llm_provider and self.custom_llm_provider == "bytez":\n    response_obj = self.handle_bytez_chunk(chunk)\n    completion_obj["content"] = response_obj["text"]\n    if response_obj["is_finished"]:\n        self.received_finish_reason = response_obj["finish_reason"]\n    pass\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"3-\u7f16\u5199\u6d4b\u8bd5\u6587\u4ef6\u4ee5\u8fed\u4ee3\u60a8\u7684\u4ee3\u7801",children:"3. \u7f16\u5199\u6d4b\u8bd5\u6587\u4ef6\u4ee5\u8fed\u4ee3\u60a8\u7684\u4ee3\u7801"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728\u9879\u76ee\u4e2d\u7684\u67d0\u4e2a\u4f4d\u7f6e\u6dfb\u52a0\u4e00\u4e2a\u6d4b\u8bd5\u6587\u4ef6\uff0c",(0,i.jsx)(n.code,{children:"tests/test_litellm/llms/my_provider/chat/test.py"})]}),"\n",(0,i.jsx)(n.p,{children:"\u7f16\u5199\u4ee5\u4e0b\u5185\u5bb9\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import os\nfrom litellm import completion\n\nos.environ["MY_PROVIDER_KEY"] = "KEY_GOES_HERE"\n\ncompletion(model="my_provider/your-model", messages=[...], api_key="...")\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u8981\u4f7f\u7528 VSCode \u8c03\u8bd5\u5668\u8fd0\u884c\uff0c\u8bf7\u4f7f\u7528\u6b64\u914d\u7f6e\u6587\u4ef6\uff08\u63a8\u8350\uff09"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:".vscode/launch.json"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  // \u4f7f\u7528 IntelliSense \u5b66\u4e60\u6709\u5173\u5c5e\u6027\u7684\u53ef\u80fd\u9009\u9879\u3002\n  // \u5c06\u9f20\u6807\u60ac\u505c\u5728\u73b0\u6709\u5c5e\u6027\u4e0a\u4ee5\u67e5\u770b\u63cf\u8ff0\u3002\n  // \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u8bbf\u95ee\uff1ahttps://go.microsoft.com/fwlink/?linkid=830387\n  "version": "0.2.0",\n  "configurations": [\n    {\n      "name": "Python Debugger: Current File",\n      "type": "debugpy",\n      "request": "launch",\n      "program": "${file}",\n      "console": "integratedTerminal",\n      "env": {\n        "PYTHONPATH": "${workspaceFolder}",\n        "MY_PROVIDER_API_KEY": "YOUR_API_KEY"\n      }\n    }\n  ]\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u4f7f\u7528\u8c03\u8bd5\u5668\u8fd0\u884c\uff0c\u66f4\u65b0 ",(0,i.jsx)(n.code,{children:'"MY_PROVIDER_API_KEY": "YOUR_API_KEY"'})," \u540e\u53ef\u4ee5\u4ece\u6d4b\u8bd5\u811a\u672c\u4e2d\u5220\u9664\u6b64\u884c\uff1a"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:'os.environ["MY_PROVIDER_KEY"] = "KEY_GOES_HERE"'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"4-\u5b9e\u73b0\u6240\u9700\u7684\u65b9\u6cd5",children:"4. \u5b9e\u73b0\u6240\u9700\u7684\u65b9\u6cd5"}),"\n",(0,i.jsxs)(n.p,{children:["\u6700\u597d\u8ddf\u968f ",(0,i.jsx)(n.code,{children:"litellm/llms/custom_httpx/llm_http_handler.py"})," \u4e2d\u7684 ",(0,i.jsx)(n.code,{children:"completion()"}),"\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u60a8\u4f1a\u770b\u5230\u5b83\u8c03\u7528\u4e86\u57fa\u7c7b\u4e2d\u5b9a\u4e49\u7684\u6240\u6709\u65b9\u6cd5\u3002\u8c03\u8bd5\u5668\u662f\u60a8\u7684\u670b\u53cb\u3002"}),"\n",(0,i.jsx)(n.h6,{id:"validate_environment",children:(0,i.jsx)(n.code,{children:"validate_environment"})}),"\n",(0,i.jsx)(n.p,{children:"\u8bbe\u7f6e\u6807\u5934\uff0c\u9a8c\u8bc1\u5bc6\u94a5/\u6a21\u578b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def validate_environment(...):\n    headers.update({\n        "Authorization": f"Bearer {api_key}",\n        "Content-Type": "application/json"\n    })\n    return headers\n'})}),"\n",(0,i.jsx)(n.h6,{id:"get_complete_url",children:(0,i.jsx)(n.code,{children:"get_complete_url"})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd4\u56de\u6700\u7ec8\u8bf7\u6c42 URL\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def get_complete_url(...):\n    return f"{api_base}/{model}"\n'})}),"\n",(0,i.jsx)(n.h6,{id:"transform_request",children:(0,i.jsx)(n.code,{children:"transform_request"})}),"\n",(0,i.jsx)(n.p,{children:"\u5c06 OpenAI \u683c\u5f0f\u7684\u8f93\u5165\u8f6c\u6362\u4e3a\u63d0\u4f9b\u5546\u7279\u5b9a\u683c\u5f0f\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def transform_request(...):\n    data = {"messages": messages, "params": optional_params}\n    return data\n'})}),"\n",(0,i.jsx)(n.h6,{id:"transform_response",children:(0,i.jsx)(n.code,{children:"transform_response"})}),"\n",(0,i.jsx)(n.p,{children:"\u5904\u7406\u5e76\u6620\u5c04\u539f\u59cb\u63d0\u4f9b\u5546\u54cd\u5e94\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def transform_response(...):\n    json = raw_response.json()\n    model_response.model = model\n    model_response.choices[0].message.content = json.get("output")\n    return model_response\n'})}),"\n",(0,i.jsxs)(n.h6,{id:"get_sync_custom_stream_wrapper--get_async_custom_stream_wrapper",children:[(0,i.jsx)(n.code,{children:"get_sync_custom_stream_wrapper"})," / ",(0,i.jsx)(n.code,{children:"get_async_custom_stream_wrapper"})]}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u9700\u8981\u8fdb\u884c\u67d0\u4e9b\u64cd\u4f5c\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5728\u8fd9\u91cc\u4f9b\u60a8\u4f7f\u7528\u3002\u53c2\u89c1 ",(0,i.jsx)(n.code,{children:"litellm/llms/sagemaker/chat/transformation.py"})," \u6216 ",(0,i.jsx)(n.code,{children:"litellm/llms/bytez/chat/transformation.py"})," \u5b9e\u73b0\u4ee5\u66f4\u597d\u5730\u4e86\u89e3\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b\u65b9\u6cd5\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"CustomStreamWrapper"})," + ",(0,i.jsx)(n.code,{children:"httpx"})," \u6d41\u5f0f\u5ba2\u6237\u7aef\u751f\u6210\u5185\u5bb9\u3002"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"-\u6d4b\u8bd5",children:"\ud83e\uddea \u6d4b\u8bd5"}),"\n",(0,i.jsxs)(n.p,{children:["\u5728 ",(0,i.jsx)(n.code,{children:"tests/test_litellm/llms/my_provider/chat/test.py"})," \u4e2d\u521b\u5efa\u6d4b\u8bd5\u3002\u8fed\u4ee3\u76f4\u5230\u60a8\u5bf9\u8d28\u91cf\u6ee1\u610f\uff01"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"\u8865\u5145\u60f3\u6cd5",children:"\u8865\u5145\u60f3\u6cd5"}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u60a8\u9047\u5230\u56f0\u96be\uff0c\u8bf7\u67e5\u770b\u5176\u4ed6\u63d0\u4f9b\u5546\u7684\u5b9e\u73b0\uff0c\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"Ctrl + Shift + F"})," \u548c ",(0,i.jsx)(n.code,{children:"Ctrl + P"})," \u4f1a\u5f88\u6709\u5e2e\u52a9\uff01"]}),"\n",(0,i.jsxs)(n.p,{children:["\u60a8\u8fd8\u53ef\u4ee5\u8bbf\u95ee ",(0,i.jsx)(n.a,{href:"https://discord.gg/wuPM9dRgDw",children:"Discord \u53cd\u9988\u9891\u9053"})]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);