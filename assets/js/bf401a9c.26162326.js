(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[12177],{13939(e,s,t){e.exports={src:Object.assign(Object.create({toString(){return this.src}}),{srcSet:t.p+"assets/ideal-img/litellm_load_test.fffbe52.640.png 640w,"+t.p+"assets/ideal-img/litellm_load_test.5a0541c.1920.png 1920w",images:[{path:t.p+"assets/ideal-img/litellm_load_test.fffbe52.640.png",width:640,height:173},{path:t.p+"assets/ideal-img/litellm_load_test.5a0541c.1920.png",width:1920,height:520}],src:t.p+"assets/ideal-img/litellm_load_test.fffbe52.640.png",placeholder:void 0,width:640,height:173}),preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAADCAYAAACqPZ51AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAXklEQVR4nCXNQQ6DMAxFQa4R4tjB5gsE7YLe/26vqrofaRYzw4cTGfjH2faNeIJ5THImmYm7s0jivm50iPlMdIp6F3oJ7aKq/rD3TkRgbrSrMWKwniuWxrDBb2yt8QXnSSl/ZTzolAAAAABJRU5ErkJggg=="}},15288(e,s,t){"use strict";t.r(s),t.d(s,{assets:()=>r,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"load_test","title":"LiteLLM \u4ee3\u7406 - Locust \u538b\u529b\u6d4b\u8bd5","description":"Locust \u538b\u529b\u6d4b\u8bd5 LiteLLM \u4ee3\u7406","source":"@site/docs/load_test.md","sourceDirName":".","slug":"/load_test","permalink":"/docs/load_test","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{}}');var l=t(74848),n=t(28453),a=t(90547);const c={},o="LiteLLM \u4ee3\u7406 - Locust \u538b\u529b\u6d4b\u8bd5",r={},d=[{value:"Locust \u538b\u529b\u6d4b\u8bd5 LiteLLM \u4ee3\u7406",id:"locust-\u538b\u529b\u6d4b\u8bd5-litellm-\u4ee3\u7406",level:2}];function h(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"litellm-\u4ee3\u7406---locust-\u538b\u529b\u6d4b\u8bd5",children:"LiteLLM \u4ee3\u7406 - Locust \u538b\u529b\u6d4b\u8bd5"})}),"\n",(0,l.jsx)(s.h2,{id:"locust-\u538b\u529b\u6d4b\u8bd5-litellm-\u4ee3\u7406",children:"Locust \u538b\u529b\u6d4b\u8bd5 LiteLLM \u4ee3\u7406"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["\u5728\u4f60\u7684 proxy \u7684 config.yaml \u4e2d\u6dfb\u52a0 ",(0,l.jsx)(s.code,{children:"fake-openai-endpoint"}),"\uff0c\u5e76\u542f\u52a8 LiteLLM \u4ee3\u7406\u3002\nLiteLLM \u63d0\u4f9b\u4e86\u4e00\u4e2a\u514d\u8d39\u7684\u6258\u7ba1 ",(0,l.jsx)(s.code,{children:"fake-openai-endpoint"}),"\uff0c\u4f60\u53ef\u4ee5\u7528\u6765\u8fdb\u884c\u538b\u529b\u6d4b\u8bd5\u3002"]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-yaml",children:"model_list:\n  - model_name: fake-openai-endpoint\n    litellm_params:\n      model: openai/fake\n      api_key: fake-key\n      api_base: https://exampleopenaiendpoint-production.up.railway.app/\n\n\n2. `pip install locust`\n\n3. \u5728\u4f60\u7684\u672c\u5730\u673a\u5668\u4e0a\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a `locustfile.py` \u7684\u6587\u4ef6\u3002\u590d\u5236\u6765\u81ea LiteLLM \u538b\u529b\u6d4b\u8bd5\u7684\u4ee3\u7801\uff0c\u8be5\u4ee3\u7801\u4f4d\u4e8e [\u8fd9\u91cc](https://github.com/BerriAI/litellm/blob/main/.github/workflows/locustfile.py)\n\n4. \u542f\u52a8 Locust\n   \u5728\u5305\u542b `locustfile.py` \u6587\u4ef6\uff08\u6b65\u9aa4 2 \u4e2d\u521b\u5efa\uff09\u7684\u540c\u4e00\u76ee\u5f55\u4e2d\u8fd0\u884c `locust`\n\n   ```shell\n   locust\n"})}),"\n",(0,l.jsx)(s.p,{children:"\u7ec8\u7aef\u8f93\u51fa"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"[2024-03-15 07:19:58,893] \u5728 http://0.0.0.0:8089 \u542f\u52a8\u4e86 Web \u754c\u9762\n[2024-03-15 07:19:58,898] \u542f\u52a8\u4e86 Locust 2.24.0\n"})}),"\n",(0,l.jsxs)(s.ol,{start:"5",children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"\u5728 Locust \u4e0a\u8fd0\u884c\u538b\u529b\u6d4b\u8bd5"}),"\n",(0,l.jsxs)(s.p,{children:["\u8bbf\u95ee ",(0,l.jsx)(s.a,{href:"http://0.0.0.0:8089",children:"http://0.0.0.0:8089"})," \u7684 Locust UI\u3002"]}),"\n",(0,l.jsx)(s.p,{children:"\u8bbe\u7f6e Users=100\uff0cRamp Up Users=10\uff0cHost=\u4f60\u7684 LiteLLM \u4ee3\u7406\u7684\u57fa\u7840 URL\u3002"}),"\n",(0,l.jsx)(a.A,{img:t(85306)}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsx)(s.p,{children:"\u9884\u671f\u7ed3\u679c"}),"\n",(0,l.jsxs)(s.p,{children:["\u5e94\u8be5\u770b\u5230\u4ee5\u4e0b ",(0,l.jsx)(s.code,{children:"/health/readiness"})," \u7684\u54cd\u5e94\u65f6\u95f4\uff1a\n\u4e2d\u4f4d\u6570 \u2192 /health/readiness \u662f ",(0,l.jsx)(s.code,{children:"150ms"})]}),"\n",(0,l.jsxs)(s.p,{children:["\u5e73\u5747\u503c \u2192  /health/readiness \u662f ",(0,l.jsx)(s.code,{children:"219ms"})]}),"\n",(0,l.jsx)(a.A,{img:t(13939)}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{})})]})}function p(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},85306(e,s,t){e.exports={src:Object.assign(Object.create({toString(){return this.src}}),{srcSet:t.p+"assets/ideal-img/locust_load_test.a41c572.640.png 640w,"+t.p+"assets/ideal-img/locust_load_test.a4eb59f.1920.png 1920w",images:[{path:t.p+"assets/ideal-img/locust_load_test.a41c572.640.png",width:640,height:376},{path:t.p+"assets/ideal-img/locust_load_test.a4eb59f.1920.png",width:1920,height:1127}],src:t.p+"assets/ideal-img/locust_load_test.a41c572.640.png",placeholder:void 0,width:640,height:376}),preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAt0lEQVR4nFXJzUrDQBRA4dlZaGwyd+78xKQVsRFx0UXbJygFERc+XRdSSkiMVH3JI0QUXHyLwzHHvuP8+UU3DLR9T9u/jbrhneH8wfHUcji8Ygq1xNuAVgVTd8FUfmRuQqYTLmPGLJ9hrLPodaJa3JPmDbH+tSRWzfjEC8banHJ1R/P8Qr17/G//hH9YYoscI4Xg5h6/vcKtS+KmIm5rdF2im5Jwk0ghYUQEcQ7xOnLej/5aleAD3z7DXncvEFX+AAAAAElFTkSuQmCC"}}}]);