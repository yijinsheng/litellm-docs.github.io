(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[46366],{7227(e,i,s){"use strict";s.d(i,{A:()=>r});s(96540);var t=s(18215);const l="tabItem_Ymn6";var n=s(74848);function r({children:e,hidden:i,className:s}){return(0,n.jsx)("div",{role:"tabpanel",className:(0,t.A)(l,s),hidden:i,children:e})}},7724(e,i,s){e.exports={src:Object.assign(Object.create({toString(){return this.src}}),{srcSet:s.p+"assets/ideal-img/new_activity_tab.345f59a.640.png 640w,"+s.p+"assets/ideal-img/new_activity_tab.d65eafe.1920.png 1920w",images:[{path:s.p+"assets/ideal-img/new_activity_tab.345f59a.640.png",width:640,height:344},{path:s.p+"assets/ideal-img/new_activity_tab.d65eafe.1920.png",width:1920,height:1031}],src:s.p+"assets/ideal-img/new_activity_tab.345f59a.640.png",placeholder:void 0,width:640,height:344}),preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAfUlEQVR4nB2N4QrDMBCC8/4POtgK2bqlaePpOa4/5ANFbWMcT0kkuUjCEoCAJERwZdoMPtp5rW7bkpJKI9IRLOv2imtha2Ois1pUjlN+DzpFJ2lFJel5zq19v78OhCNC10ICkUDxlmpxzvlqn33vdSUxJZqkWZSqfF+P49j+drvD2Hey2vYAAAAASUVORK5CYII="}},27220(e,i,s){e.exports={src:Object.assign(Object.create({toString(){return this.src}}),{srcSet:s.p+"assets/ideal-img/spend_by_model.8158e34.640.jpg 640w,"+s.p+"assets/ideal-img/spend_by_model.411d1b0.1920.jpg 1920w",images:[{path:s.p+"assets/ideal-img/spend_by_model.8158e34.640.jpg",width:640,height:334},{path:s.p+"assets/ideal-img/spend_by_model.411d1b0.1920.jpg",width:1920,height:1003}],src:s.p+"assets/ideal-img/spend_by_model.8158e34.640.jpg",placeholder:void 0,width:640,height:334}),preSrc:"data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAFAAoDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMI/8QAHBAAAgMBAAMAAAAAAAAAAAAAAQIAAxEEFCFB/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQL/xAAYEQACAwAAAAAAAAAAAAAAAAAAAQIRIf/aAAwDAQACEQMRAD8A0upKdA462dQ1RYWbrA7m+5cU3AAeQTn0oumIgpMhbZ//2Q=="}},47108(e,i,s){"use strict";s.r(i),s.d(i,{assets:()=>h,contentTitle:()=>c,default:()=>m,frontMatter:()=>d,metadata:()=>t,toc:()=>p});var t=s(89426),l=s(74848),n=s(28453),r=s(90547),a=s(49489),o=s(7227);const d={title:"v1.65.4-stable",slug:"v1.65.4-stable",date:new Date("2025-04-05T10:00:00.000Z"),authors:[{name:"Krrish Dholakia",title:"CEO, LiteLLM",url:"https://www.linkedin.com/in/krish-d/",image_url:"https://media.licdn.com/dms/image/v2/D4D03AQGrlsJ3aqpHmQ/profile-displayphoto-shrink_400_400/B4DZSAzgP7HYAg-/0/1737327772964?e=1749686400&v=beta&t=Hkl3U8Ps0VtvNxX0BNNq24b4dtX5wQaPFp6oiKCIHD8"},{name:"Ishaan Jaffer",title:"CTO, LiteLLM",url:"https://www.linkedin.com/in/reffajnaahsi/",image_url:"https://pbs.twimg.com/profile_images/1613813310264340481/lz54oEiB_400x400.jpg"}],tags:[],hide_table_of_contents:!1},c=void 0,h={authorsImageUrls:[void 0,void 0]},p=[{value:"Deploy this version",id:"deploy-this-version",level:2},{value:"Key Highlights",id:"key-highlights",level:2},{value:"Preventing DB Deadlocks",id:"preventing-db-deadlocks",level:3},{value:"New Usage Tab",id:"new-usage-tab",level:3},{value:"New Models / Updated Models",id:"new-models--updated-models",level:2},{value:"LLM Translation",id:"llm-translation",level:2},{value:"Spend Tracking Improvements",id:"spend-tracking-improvements",level:2},{value:"Management Endpoints / UI",id:"management-endpoints--ui",level:2},{value:"Logging / Guardrail Integrations",id:"logging--guardrail-integrations",level:2},{value:"Performance / Loadbalancing / Reliability improvements",id:"performance--loadbalancing--reliability-improvements",level:2},{value:"Helm",id:"helm",level:2},{value:"General Proxy Improvements",id:"general-proxy-improvements",level:2},{value:"Demo",id:"demo",level:2},{value:"Complete Git Diff",id:"complete-git-diff",level:2}];function u(e){const i={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.h2,{id:"deploy-this-version",children:"Deploy this version"}),"\n",(0,l.jsxs)(a.A,{children:[(0,l.jsx)(o.A,{value:"docker",label:"Docker",children:(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-showLineNumbers",metastring:'title="docker run litellm"',children:"docker run\n-e STORE_MODEL_IN_DB=True\n-p 4000:4000\ndocker.litellm.ai/berriai/litellm:main-v1.65.4-stable\n"})})}),(0,l.jsx)(o.A,{value:"pip",label:"Pip",children:(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-showLineNumbers",metastring:'title="pip install litellm"',children:"pip install litellm==1.65.4.post1\n"})})})]}),"\n",(0,l.jsx)(i.p,{children:"v1.65.4-stable is live. Here are the improvements since v1.65.0-stable."}),"\n",(0,l.jsx)(i.h2,{id:"key-highlights",children:"Key Highlights"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"Preventing DB Deadlocks"}),": Fixes a high-traffic issue when multiple instances were writing to the DB at the same time."]}),"\n",(0,l.jsxs)(i.li,{children:[(0,l.jsx)(i.strong,{children:"New Usage Tab"}),": Enables viewing spend by model and customizing date range"]}),"\n"]}),"\n",(0,l.jsx)(i.p,{children:"Let's dive in."}),"\n",(0,l.jsx)(i.h3,{id:"preventing-db-deadlocks",children:"Preventing DB Deadlocks"}),"\n",(0,l.jsx)(r.A,{img:s(77901)}),"\n",(0,l.jsx)(i.p,{children:"This release fixes the DB deadlocking issue that users faced in high traffic (10K+ RPS). This is great because it enables user/key/team spend tracking works at that scale."}),"\n",(0,l.jsxs)(i.p,{children:["Read more about the new architecture ",(0,l.jsx)(i.a,{href:"https://docs.litellm.ai/docs/proxy/db_deadlocks",children:"here"})]}),"\n",(0,l.jsx)(i.h3,{id:"new-usage-tab",children:"New Usage Tab"}),"\n",(0,l.jsx)(r.A,{img:s(27220)}),"\n",(0,l.jsx)(i.p,{children:"The new Usage tab now brings the ability to track daily spend by model. This makes it easier to catch any spend tracking or token counting errors, when combined with the ability to view successful requests, and token usage."}),"\n",(0,l.jsx)(i.p,{children:"To test this out, just go to Experimental > New Usage > Activity."}),"\n",(0,l.jsx)(i.h2,{id:"new-models--updated-models",children:"New Models / Updated Models"}),"\n",(0,l.jsxs)(i.ol,{children:["\n",(0,l.jsxs)(i.li,{children:["Databricks - claude-3-7-sonnet cost tracking ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/blob/52b35cd8093b9ad833987b24f494586a1e923209/model_prices_and_context_window.json#L10350",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["VertexAI - ",(0,l.jsx)(i.code,{children:"gemini-2.5-pro-exp-03-25"})," cost tracking ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/blob/52b35cd8093b9ad833987b24f494586a1e923209/model_prices_and_context_window.json#L4492",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["VertexAI - ",(0,l.jsx)(i.code,{children:"gemini-2.0-flash"})," cost tracking ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/blob/52b35cd8093b9ad833987b24f494586a1e923209/model_prices_and_context_window.json#L4689",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["Groq - add whisper ASR models to model cost map ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/blob/52b35cd8093b9ad833987b24f494586a1e923209/model_prices_and_context_window.json#L3324",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["IBM - Add watsonx/ibm/granite-3-8b-instruct to model cost map ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/blob/52b35cd8093b9ad833987b24f494586a1e923209/model_prices_and_context_window.json#L91",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["Google AI Studio - add gemini/gemini-2.5-pro-preview-03-25 to model cost map ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/blob/52b35cd8093b9ad833987b24f494586a1e923209/model_prices_and_context_window.json#L4850",children:"PR"})]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"llm-translation",children:"LLM Translation"}),"\n",(0,l.jsxs)(i.ol,{children:["\n",(0,l.jsxs)(i.li,{children:["Vertex AI - Support anyOf param for OpenAI json schema translation ",(0,l.jsx)(i.a,{href:"https://docs.litellm.ai/docs/providers/vertex#json-schema",children:"Get Started"})]}),"\n",(0,l.jsxs)(i.li,{children:["Anthropic- response_format + thinking param support  (works across Anthropic API, Bedrock, Vertex) ",(0,l.jsx)(i.a,{href:"https://docs.litellm.ai/docs/reasoning_content",children:"Get Started"})]}),"\n",(0,l.jsxs)(i.li,{children:["Anthropic - if thinking token is specified and max tokens is not - ensure max token to anthropic is higher than thinking tokens (works across Anthropic API, Bedrock, Vertex) ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9594",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["Bedrock - latency optimized inference support ",(0,l.jsx)(i.a,{href:"https://docs.litellm.ai/docs/providers/bedrock#usage---latency-optimized-inference",children:"Get Started"})]}),"\n",(0,l.jsxs)(i.li,{children:["Sagemaker - handle special tokens + multibyte character code in response ",(0,l.jsx)(i.a,{href:"https://docs.litellm.ai/docs/providers/aws_sagemaker",children:"Get Started"})]}),"\n",(0,l.jsxs)(i.li,{children:["MCP - add support for using SSE MCP servers ",(0,l.jsx)(i.a,{href:"https://docs.litellm.ai/docs/mcp#usage",children:"Get Started"})]}),"\n",(0,l.jsxs)(i.li,{children:["Anthropic - new ",(0,l.jsx)(i.code,{children:"litellm.messages.create"})," interface for calling Anthropic ",(0,l.jsx)(i.code,{children:"/v1/messages"})," via passthrough ",(0,l.jsx)(i.a,{href:"https://docs.litellm.ai/docs/anthropic_unified#usage",children:"Get Started"})]}),"\n",(0,l.jsxs)(i.li,{children:["Anthropic - support \u2018file\u2019 content type in message param (works across Anthropic API, Bedrock, Vertex) ",(0,l.jsx)(i.a,{href:"https://docs.litellm.ai/docs/providers/anthropic#usage---pdf",children:"Get Started"})]}),"\n",(0,l.jsxs)(i.li,{children:["Anthropic - map openai 'reasoning_effort' to anthropic 'thinking' param (works across Anthropic API, Bedrock, Vertex) ",(0,l.jsx)(i.a,{href:"https://docs.litellm.ai/docs/providers/anthropic#usage---thinking--reasoning_content",children:"Get Started"})]}),"\n",(0,l.jsxs)(i.li,{children:["Google AI Studio (Gemini) - [BETA] ",(0,l.jsx)(i.code,{children:"/v1/files"})," upload support ",(0,l.jsx)(i.a,{href:"../../docs/providers/google_ai_studio/files",children:"Get Started"})]}),"\n",(0,l.jsxs)(i.li,{children:["Azure - fix o-series tool calling ",(0,l.jsx)(i.a,{href:"../../docs/providers/azure#tool-calling--function-calling",children:"Get Started"})]}),"\n",(0,l.jsxs)(i.li,{children:["Unified file id - [ALPHA] allow calling multiple providers with same file id ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9718",children:"PR"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"This is experimental, and not recommended for production use."}),"\n",(0,l.jsx)(i.li,{children:"We plan to have a production-ready implementation by next week."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["Google AI Studio (Gemini) - return logprobs ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9713",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["Anthropic - Support prompt caching for Anthropic tool calls ",(0,l.jsx)(i.a,{href:"https://docs.litellm.ai/docs/completion/prompt_caching",children:"Get Started"})]}),"\n",(0,l.jsxs)(i.li,{children:["OpenRouter - unwrap extra body on open router calls ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9747",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["VertexAI - fix credential caching issue ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9756",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["XAI - filter out 'name' param for XAI ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9761",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["Gemini - image generation output support ",(0,l.jsx)(i.a,{href:"../../docs/providers/gemini#image-generation",children:"Get Started"})]}),"\n",(0,l.jsxs)(i.li,{children:["Databricks - support claude-3-7-sonnet w/ thinking + response_format ",(0,l.jsx)(i.a,{href:"../../docs/providers/databricks#usage---thinking--reasoning_content",children:"Get Started"})]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"spend-tracking-improvements",children:"Spend Tracking Improvements"}),"\n",(0,l.jsxs)(i.ol,{children:["\n",(0,l.jsxs)(i.li,{children:["Reliability fix  - Check sent and received model for cost calculation ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9669",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["Vertex AI - Multimodal embedding cost tracking ",(0,l.jsx)(i.a,{href:"https://docs.litellm.ai/docs/providers/vertex#multi-modal-embeddings",children:"Get Started"}),", ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9623",children:"PR"})]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"management-endpoints--ui",children:"Management Endpoints / UI"}),"\n",(0,l.jsx)(r.A,{img:s(7724)}),"\n",(0,l.jsxs)(i.ol,{children:["\n",(0,l.jsxs)(i.li,{children:["New Usage Tab","\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Report 'total_tokens' + report success/failure calls"}),"\n",(0,l.jsx)(i.li,{children:"Remove double bars on scroll"}),"\n",(0,l.jsx)(i.li,{children:"Ensure \u2018daily spend\u2019 chart ordered from earliest to latest date"}),"\n",(0,l.jsx)(i.li,{children:"showing spend per model per day"}),"\n",(0,l.jsx)(i.li,{children:"show key alias on usage tab"}),"\n",(0,l.jsx)(i.li,{children:"Allow non-admins to view their activity"}),"\n",(0,l.jsx)(i.li,{children:"Add date picker to new usage tab"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["Virtual Keys Tab","\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"remove 'default key' on user signup"}),"\n",(0,l.jsx)(i.li,{children:"fix showing user models available for personal key creation"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["Test Key Tab","\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Allow testing image generation models"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["Models Tab","\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Fix bulk adding models"}),"\n",(0,l.jsx)(i.li,{children:"support reusable credentials for passthrough endpoints"}),"\n",(0,l.jsx)(i.li,{children:"Allow team members to see team models"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["Teams Tab","\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Fix json serialization error on update team metadata"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["Request Logs Tab","\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"Add reasoning_content token tracking across all providers on streaming"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["API","\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["return key alias on /user/daily/activity ",(0,l.jsx)(i.a,{href:"../../docs/proxy/cost_tracking#daily-spend-breakdown-api",children:"Get Started"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["SSO","\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["Allow assigning SSO users to teams on MSFT SSO ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9745",children:"PR"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"logging--guardrail-integrations",children:"Logging / Guardrail Integrations"}),"\n",(0,l.jsxs)(i.ol,{children:["\n",(0,l.jsxs)(i.li,{children:["Console Logs - Add json formatting for uncaught exceptions ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9619",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["Guardrails - AIM Guardrails support for virtual key based policies ",(0,l.jsx)(i.a,{href:"../../docs/proxy/guardrails/aim_security",children:"Get Started"})]}),"\n",(0,l.jsxs)(i.li,{children:["Logging - fix completion start time tracking ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9688",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["Prometheus","\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["Allow adding authentication on Prometheus /metrics endpoints ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9766",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["Distinguish LLM Provider Exception vs. LiteLLM Exception in metric naming ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9760",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["Emit operational metrics for new DB Transaction architecture ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9719",children:"PR"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"performance--loadbalancing--reliability-improvements",children:"Performance / Loadbalancing / Reliability improvements"}),"\n",(0,l.jsxs)(i.ol,{children:["\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsx)(i.p,{children:"Preventing Deadlocks"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsxs)(i.li,{children:["Reduce DB Deadlocks by storing spend updates in Redis and then committing to DB ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9608",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["Ensure no deadlocks occur when updating\xa0DailyUserSpendTransaction ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9690",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["High Traffic fix - ensure new DB + Redis architecture accurately tracks spend ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9673",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["Use Redis for PodLock Manager instead of PG (ensures no deadlocks occur) ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9715",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["v2 DB Deadlock Reduction Architecture \u2013 Add Max Size for In-Memory Queue + Backpressure Mechanism ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9759",children:"PR"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.p,{children:["Prisma Migrations ",(0,l.jsx)(i.a,{href:"../../docs/proxy/prod#9-use-prisma-migrate-deploy",children:"Get Started"})]}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:"connects litellm proxy to litellm's prisma migration files"}),"\n",(0,l.jsxs)(i.li,{children:["Handle db schema updates from new ",(0,l.jsx)(i.code,{children:"litellm-proxy-extras"})," sdk"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.p,{children:["Redis - support password for sync sentinel clients ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9622",children:"PR"})]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.p,{children:['Fix "Circular reference detected" error when max_parallel_requests = 0 ',(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9671",children:"PR"})]}),"\n"]}),"\n",(0,l.jsxs)(i.li,{children:["\n",(0,l.jsxs)(i.p,{children:["Code QA - Ban hardcoded numbers ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9709",children:"PR"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"helm",children:"Helm"}),"\n",(0,l.jsxs)(i.ol,{children:["\n",(0,l.jsxs)(i.li,{children:["fix: wrong indentation of ttlSecondsAfterFinished in chart ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9611",children:"PR"})]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"general-proxy-improvements",children:"General Proxy Improvements"}),"\n",(0,l.jsxs)(i.ol,{children:["\n",(0,l.jsxs)(i.li,{children:["Fix - only apply service_account_settings.enforced_params on service accounts ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9683",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["Fix - handle metadata null on ",(0,l.jsx)(i.code,{children:"/chat/completion"})," ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/issues/9717",children:"PR"})]}),"\n",(0,l.jsxs)(i.li,{children:["Fix - Move daily user transaction logging outside of 'disable_spend_logs' flag, as they\u2019re unrelated ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/pull/9772",children:"PR"})]}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"demo",children:"Demo"}),"\n",(0,l.jsxs)(i.p,{children:["Try this on the demo instance ",(0,l.jsx)(i.a,{href:"https://docs.litellm.ai/docs/proxy/demo",children:"today"})]}),"\n",(0,l.jsx)(i.h2,{id:"complete-git-diff",children:"Complete Git Diff"}),"\n",(0,l.jsxs)(i.p,{children:["See the complete git diff since v1.65.0-stable, ",(0,l.jsx)(i.a,{href:"https://github.com/BerriAI/litellm/releases/tag/v1.65.4-stable",children:"here"})]})]})}function m(e={}){const{wrapper:i}={...(0,n.R)(),...e.components};return i?(0,l.jsx)(i,{...e,children:(0,l.jsx)(u,{...e})}):u(e)}},49489(e,i,s){"use strict";s.d(i,{A:()=>k});var t=s(96540),l=s(18215),n=s(24245),r=s(56347),a=s(36494),o=s(62814),d=s(45167),c=s(69900);function h(e){return t.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:i}=e;return!!i&&"object"==typeof i&&"value"in i}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:i,children:s}=e;return(0,t.useMemo)(()=>{const e=i??function(e){return h(e).map(({props:{value:e,label:i,attributes:s,default:t}})=>({value:e,label:i,attributes:s,default:t}))}(s);return function(e){const i=(0,d.XI)(e,(e,i)=>e.value===i.value);if(i.length>0)throw new Error(`Docusaurus error: Duplicate values "${i.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[i,s])}function u({value:e,tabValues:i}){return i.some(i=>i.value===e)}function m({queryString:e=!1,groupId:i}){const s=(0,r.W6)(),l=function({queryString:e=!1,groupId:i}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!i)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return i??null}({queryString:e,groupId:i});return[(0,o.aZ)(l),(0,t.useCallback)(e=>{if(!l)return;const i=new URLSearchParams(s.location.search);i.set(l,e),s.replace({...s.location,search:i.toString()})},[l,s])]}function g(e){const{defaultValue:i,queryString:s=!1,groupId:l}=e,n=p(e),[r,o]=(0,t.useState)(()=>function({defaultValue:e,tabValues:i}){if(0===i.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!u({value:e,tabValues:i}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${i.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=i.find(e=>e.default)??i[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:i,tabValues:n})),[d,h]=m({queryString:s,groupId:l}),[g,A]=function({groupId:e}){const i=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,l]=(0,c.Dv)(i);return[s,(0,t.useCallback)(e=>{i&&l.set(e)},[i,l])]}({groupId:l}),x=(()=>{const e=d??g;return u({value:e,tabValues:n})?e:null})();(0,a.A)(()=>{x&&o(x)},[x]);return{selectedValue:r,selectValue:(0,t.useCallback)(e=>{if(!u({value:e,tabValues:n}))throw new Error(`Can't select invalid tab value=${e}`);o(e),h(e),A(e)},[h,A,n]),tabValues:n}}var A=s(11062);const x="tabList__CuJ",j="tabItem_LNqP";var b=s(74848);function f({className:e,block:i,selectedValue:s,selectValue:t,tabValues:r}){const a=[],{blockElementScrollPositionUntilNextRender:o}=(0,n.a_)(),d=e=>{const i=e.currentTarget,l=a.indexOf(i),n=r[l].value;n!==s&&(o(i),t(n))},c=e=>{let i=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const s=a.indexOf(e.currentTarget)+1;i=a[s]??a[0];break}case"ArrowLeft":{const s=a.indexOf(e.currentTarget)-1;i=a[s]??a[a.length-1];break}}i?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":i},e),children:r.map(({value:e,label:i,attributes:t})=>(0,b.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{a.push(e)},onKeyDown:c,onClick:d,...t,className:(0,l.A)("tabs__item",j,t?.className,{"tabs__item--active":s===e}),children:i??e},e))})}function v({lazy:e,children:i,selectedValue:s}){const n=(Array.isArray(i)?i:[i]).filter(Boolean);if(e){const e=n.find(e=>e.props.value===s);return e?(0,t.cloneElement)(e,{className:(0,l.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:n.map((e,i)=>(0,t.cloneElement)(e,{key:i,hidden:e.props.value!==s}))})}function w(e){const i=g(e);return(0,b.jsxs)("div",{className:(0,l.A)("tabs-container",x),children:[(0,b.jsx)(f,{...i,...e}),(0,b.jsx)(v,{...i,...e})]})}function k(e){const i=(0,A.A)();return(0,b.jsx)(w,{...e,children:h(e.children)},String(i))}},77901(e,i,s){e.exports={src:Object.assign(Object.create({toString(){return this.src}}),{srcSet:s.p+"assets/ideal-img/prevent_deadlocks.9cf4d6a.640.jpg 640w,"+s.p+"assets/ideal-img/prevent_deadlocks.b3f9e4e.1920.jpg 1920w",images:[{path:s.p+"assets/ideal-img/prevent_deadlocks.9cf4d6a.640.jpg",width:640,height:334},{path:s.p+"assets/ideal-img/prevent_deadlocks.b3f9e4e.1920.jpg",width:1920,height:1003}],src:s.p+"assets/ideal-img/prevent_deadlocks.9cf4d6a.640.jpg",placeholder:void 0,width:640,height:334}),preSrc:"data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAFAAoDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAYH/8QAIhAAAgEFAAAHAAAAAAAAAAAAAQIDAAQFBhESExQhMUFR/8QAFAEBAAAAAAAAAAAAAAAAAAAAAf/EABURAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIRAxEAPwCjfZd0jsNhePZUWSG7RLc+gjIiUyMCOd9+gAdP5Wn4DIZWfA42W7vlluHto2lk8lV8bFQSeD46fqlKaI//2Q=="}},89426(e){"use strict";e.exports=JSON.parse('{"permalink":"/release_notes/v1.65.4-stable","source":"@site/release_notes/v1.65.4-stable/index.md","title":"v1.65.4-stable","description":"Deploy this version","date":"2025-04-05T10:00:00.000Z","tags":[],"hasTruncateMarker":false,"authors":[{"name":"Krrish Dholakia","title":"CEO, LiteLLM","url":"https://www.linkedin.com/in/krish-d/","image_url":"https://media.licdn.com/dms/image/v2/D4D03AQGrlsJ3aqpHmQ/profile-displayphoto-shrink_400_400/B4DZSAzgP7HYAg-/0/1737327772964?e=1749686400&v=beta&t=Hkl3U8Ps0VtvNxX0BNNq24b4dtX5wQaPFp6oiKCIHD8","imageURL":"https://media.licdn.com/dms/image/v2/D4D03AQGrlsJ3aqpHmQ/profile-displayphoto-shrink_400_400/B4DZSAzgP7HYAg-/0/1737327772964?e=1749686400&v=beta&t=Hkl3U8Ps0VtvNxX0BNNq24b4dtX5wQaPFp6oiKCIHD8","socials":{},"key":null,"page":null},{"name":"Ishaan Jaffer","title":"CTO, LiteLLM","url":"https://www.linkedin.com/in/reffajnaahsi/","image_url":"https://pbs.twimg.com/profile_images/1613813310264340481/lz54oEiB_400x400.jpg","imageURL":"https://pbs.twimg.com/profile_images/1613813310264340481/lz54oEiB_400x400.jpg","socials":{},"key":null,"page":null}],"frontMatter":{"title":"v1.65.4-stable","slug":"v1.65.4-stable","date":"2025-04-05T10:00:00.000Z","authors":[{"name":"Krrish Dholakia","title":"CEO, LiteLLM","url":"https://www.linkedin.com/in/krish-d/","image_url":"https://media.licdn.com/dms/image/v2/D4D03AQGrlsJ3aqpHmQ/profile-displayphoto-shrink_400_400/B4DZSAzgP7HYAg-/0/1737327772964?e=1749686400&v=beta&t=Hkl3U8Ps0VtvNxX0BNNq24b4dtX5wQaPFp6oiKCIHD8","imageURL":"https://media.licdn.com/dms/image/v2/D4D03AQGrlsJ3aqpHmQ/profile-displayphoto-shrink_400_400/B4DZSAzgP7HYAg-/0/1737327772964?e=1749686400&v=beta&t=Hkl3U8Ps0VtvNxX0BNNq24b4dtX5wQaPFp6oiKCIHD8"},{"name":"Ishaan Jaffer","title":"CTO, LiteLLM","url":"https://www.linkedin.com/in/reffajnaahsi/","image_url":"https://pbs.twimg.com/profile_images/1613813310264340481/lz54oEiB_400x400.jpg","imageURL":"https://pbs.twimg.com/profile_images/1613813310264340481/lz54oEiB_400x400.jpg"}],"tags":[],"hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"v1.66.0-stable - Realtime API Cost Tracking","permalink":"/release_notes/v1.66.0-stable"},"nextItem":{"title":"v1.65.0-stable - Model Context Protocol","permalink":"/release_notes/v1.65.0-stable"}}')}}]);