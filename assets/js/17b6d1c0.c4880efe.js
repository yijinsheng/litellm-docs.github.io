"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[99695],{28453(e,l,n){n.d(l,{R:()=>c,x:()=>r});var s=n(96540);const i={},t=s.createContext(i);function c(e){const l=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(l):{...l,...e}},[l,e])}function r(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(t.Provider,{value:l},e.children)}},71094(e,l,n){n.r(l),n.d(l,{assets:()=>d,contentTitle:()=>r,default:()=>o,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"extras/contributing_code","title":"\u8d21\u732e\u4ee3\u7801","description":"\u63d0\u4ea4 PR \u524d\u7684\u68c0\u67e5\u6e05\u5355","source":"@site/docs/extras/contributing_code.md","sourceDirName":"extras","slug":"/extras/contributing_code","permalink":"/docs/extras/contributing_code","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Model Fallbacks w/ LiteLLM","permalink":"/docs/tutorials/model_fallbacks"},"next":{"title":"\u6dfb\u52a0\u517c\u5bb9 OpenAI \u7684\u63d0\u4f9b\u8005","permalink":"/docs/contributing/adding_openai_compatible_providers"}}');var i=n(74848),t=n(28453);const c={},r="\u8d21\u732e\u4ee3\u7801",d={},a=[{value:"<strong>\u63d0\u4ea4 PR \u524d\u7684\u68c0\u67e5\u6e05\u5355</strong>",id:"\u63d0\u4ea4-pr-\u524d\u7684\u68c0\u67e5\u6e05\u5355",level:2},{value:"<strong>\u8d21\u732e\u8005\u8bb8\u53ef\u534f\u8bae (CLA)</strong>",id:"\u8d21\u732e\u8005\u8bb8\u53ef\u534f\u8bae-cla",level:2},{value:"\u5feb\u901f\u5f00\u59cb",id:"\u5feb\u901f\u5f00\u59cb",level:2},{value:"1. \u8bbe\u7f6e\u672c\u5730\u5f00\u53d1\u73af\u5883",id:"1-\u8bbe\u7f6e\u672c\u5730\u5f00\u53d1\u73af\u5883",level:2},{value:"2. \u4e3a PR \u6dfb\u52a0\u6d4b\u8bd5",id:"2-\u4e3a-pr-\u6dfb\u52a0\u6d4b\u8bd5",level:2},{value:"2.1 <code>tests/test_litellm/</code> \u76ee\u5f55\u7684\u6587\u4ef6\u547d\u540d\u89c4\u8303",id:"21-teststest_litellm-\u76ee\u5f55\u7684\u6587\u4ef6\u547d\u540d\u89c4\u8303",level:3},{value:"3. \u8fd0\u884c\u5355\u5143\u6d4b\u8bd5",id:"3-\u8fd0\u884c\u5355\u5143\u6d4b\u8bd5",level:2},{value:"3.5 \u8fd0\u884c\u6821\u9a8c\u6d4b\u8bd5",id:"35-\u8fd0\u884c\u6821\u9a8c\u6d4b\u8bd5",level:2},{value:"4. \u63d0\u4ea4\u5305\u542b\u66f4\u6539\u7684 PR\uff01",id:"4-\u63d0\u4ea4\u5305\u542b\u66f4\u6539\u7684-pr",level:2},{value:"\u9ad8\u7ea7\u5185\u5bb9",id:"\u9ad8\u7ea7\u5185\u5bb9",level:2},{value:"\u6784\u5efa LiteLLM Docker \u955c\u50cf",id:"\u6784\u5efa-litellm-docker-\u955c\u50cf",level:3},{value:"\u5728\u672c\u5730\u8fd0\u884c LiteLLM \u4ee3\u7406",id:"\u5728\u672c\u5730\u8fd0\u884c-litellm-\u4ee3\u7406",level:3}];function h(e){const l={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.header,{children:(0,i.jsx)(l.h1,{id:"\u8d21\u732e\u4ee3\u7801",children:"\u8d21\u732e\u4ee3\u7801"})}),"\n",(0,i.jsx)(l.h2,{id:"\u63d0\u4ea4-pr-\u524d\u7684\u68c0\u67e5\u6e05\u5355",children:(0,i.jsx)(l.strong,{children:"\u63d0\u4ea4 PR \u524d\u7684\u68c0\u67e5\u6e05\u5355"})}),"\n",(0,i.jsx)(l.p,{children:"\u8fd9\u662f\u5411 LiteLLM \u63d0\u4ea4 PR \u65f6\u7684\u6838\u5fc3\u8981\u6c42\uff1a"}),"\n",(0,i.jsxs)(l.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(l.li,{className:"task-list-item",children:[(0,i.jsx)(l.input,{type:"checkbox",disabled:!0})," ","\u7b7e\u7f72\u8d21\u732e\u8005\u8bb8\u53ef\u534f\u8bae\uff08CLA\uff09 - ",(0,i.jsx)(l.a,{href:"#%E8%B4%A1%E7%8C%AE%E8%80%85%E8%AE%B8%E5%8F%AF%E5%8D%8F%E8%AE%AE-cla",children:"\u67e5\u770b\u8be6\u60c5"})]}),"\n",(0,i.jsxs)(l.li,{className:"task-list-item",children:[(0,i.jsx)(l.input,{type:"checkbox",disabled:!0})," ","\u6dfb\u52a0\u6d4b\u8bd5\uff0c",(0,i.jsx)(l.strong,{children:"\u81f3\u5c11\u6dfb\u52a0\u4e00\u4e2a\u6d4b\u8bd5\u662f\u786c\u6027\u8981\u6c42"})," - [\u67e5\u770b\u8be6\u60c5](#2-\u4e3a\u60a8\u7684 pr \u6dfb\u52a0\u6d4b\u8bd5)"]}),"\n",(0,i.jsxs)(l.li,{className:"task-list-item",children:[(0,i.jsx)(l.input,{type:"checkbox",disabled:!0})," ","\u786e\u4fdd\u60a8\u7684 PR \u901a\u8fc7\u4ee5\u4e0b\u6d4b\u8bd5\uff1a","\n",(0,i.jsxs)(l.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(l.li,{className:"task-list-item",children:[(0,i.jsx)(l.input,{type:"checkbox",disabled:!0})," ","\u5355\u5143\u6d4b\u8bd5 - ",(0,i.jsx)(l.a,{href:"#3-%E8%BF%90%E8%A1%8C%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95",children:"\u8fd0\u884c\u5355\u5143\u6d4b\u8bd5"})]}),"\n",(0,i.jsxs)(l.li,{className:"task-list-item",children:[(0,i.jsx)(l.input,{type:"checkbox",disabled:!0})," ","\u683c\u5f0f\u5316/\u6821\u9a8c\u6d4b\u8bd5 - ",(0,i.jsx)(l.a,{href:"#35-%E8%BF%90%E8%A1%8C%E6%A0%A1%E9%AA%8C%E6%B5%8B%E8%AF%95",children:"\u8fd0\u884c\u6821\u9a8c\u6d4b\u8bd5"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{className:"task-list-item",children:[(0,i.jsx)(l.input,{type:"checkbox",disabled:!0})," ","\u5c3d\u53ef\u80fd\u5c06\u8303\u56f4\u4fdd\u6301\u5f97\u5c3d\u53ef\u80fd\u9694\u79bb\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u60a8\u7684\u66f4\u6539\u5e94\u9488\u5bf9\u4e00\u4e2a\u5177\u4f53\u95ee\u9898\u8fdb\u884c\u5904\u7406"]}),"\n"]}),"\n",(0,i.jsx)(l.h2,{id:"\u8d21\u732e\u8005\u8bb8\u53ef\u534f\u8bae-cla",children:(0,i.jsx)(l.strong,{children:"\u8d21\u732e\u8005\u8bb8\u53ef\u534f\u8bae (CLA)"})}),"\n",(0,i.jsxs)(l.p,{children:["\u5728\u5411 LiteLLM \u8d21\u732e\u4ee3\u7801\u4e4b\u524d\uff0c\u60a8\u5fc5\u987b\u7b7e\u7f72\u6211\u4eec\u7684",(0,i.jsx)(l.a,{href:"https://cla-assistant.io/BerriAI/litellm",children:"\u8d21\u732e\u8005\u8bb8\u53ef\u534f\u8bae (CLA)"}),"\u3002\u8fd9\u662f\u6240\u6709\u8d21\u732e\u88ab\u5408\u5e76\u5230\u4e3b\u4ed3\u5e93\u7684\u524d\u63d0\u6761\u4ef6\u3002\u8be5\u534f\u8bae\u901a\u8fc7\u660e\u786e\u5b9a\u4e49\u60a8\u7684\u8d21\u732e\u6240\u9075\u5faa\u7684\u6761\u6b3e\u6765\u4fdd\u62a4\u60a8\u548c\u9879\u76ee\u3002"]}),"\n",(0,i.jsxs)(l.p,{children:[(0,i.jsx)(l.strong,{children:"\u91cd\u8981\u63d0\u793a\uff1a"})," \u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u5728\u5f00\u59cb\u5bf9\u8d21\u732e\u8fdb\u884c\u5de5\u4f5c\u4e4b\u524d\uff0c\u5148\u5ba1\u9605\u5e76\u7b7e\u7f72\u8be5\u534f\u8bae\uff0c\u4ee5\u907f\u514d PR \u8fc7\u7a0b\u4e2d\u7684\u4efb\u4f55\u5ef6\u8bef\u3002\u60a8\u53ef\u4ee5\u5728",(0,i.jsx)(l.a,{href:"https://cla-assistant.io/BerriAI/litellm",children:"\u8fd9\u91cc"}),"\u627e\u5230 CLA\uff0c\u5e76\u5728\u63d0\u4ea4\u7b2c\u4e00\u4e2a PR \u65f6\u901a\u8fc7\u6211\u4eec\u7684 CLA \u7ba1\u7406\u7cfb\u7edf\u7b7e\u7f72\u3002"]}),"\n",(0,i.jsx)(l.h2,{id:"\u5feb\u901f\u5f00\u59cb",children:"\u5feb\u901f\u5f00\u59cb"}),"\n",(0,i.jsx)(l.h2,{id:"1-\u8bbe\u7f6e\u672c\u5730\u5f00\u53d1\u73af\u5883",children:"1. \u8bbe\u7f6e\u672c\u5730\u5f00\u53d1\u73af\u5883"}),"\n",(0,i.jsx)(l.p,{children:"\u8fd9\u662f\u5982\u4f55\u5728\u672c\u5730\u4fee\u6539\u4ed3\u5e93\u7684\u65b9\u6cd5\uff1a"}),"\n",(0,i.jsx)(l.p,{children:"\u6b65\u9aa4 1\uff1a\u514b\u9686\u4ed3\u5e93"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-shell",children:"git clone https://github.com/BerriAI/litellm.git\n"})}),"\n",(0,i.jsx)(l.p,{children:"\u6b65\u9aa4 2\uff1a\u5b89\u88c5\u5f00\u53d1\u4f9d\u8d56\u9879\uff1a"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-shell",children:"poetry install --with dev --extras proxy\n"})}),"\n",(0,i.jsx)(l.p,{children:"\u5b8c\u6210\u4ee5\u4e0a\u6b65\u9aa4\u540e\uff0c\u60a8\u7684\u672c\u5730\u5f00\u53d1\u73af\u5883\u5c31\u7eea\u4e86\uff01"}),"\n",(0,i.jsx)(l.h2,{id:"2-\u4e3a-pr-\u6dfb\u52a0\u6d4b\u8bd5",children:"2. \u4e3a PR \u6dfb\u52a0\u6d4b\u8bd5"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:["\n",(0,i.jsxs)(l.p,{children:["\u5c06\u60a8\u7684\u6d4b\u8bd5\u6dfb\u52a0\u5230 ",(0,i.jsx)(l.code,{children:"tests/test_litellm/"})," \u76ee\u5f55\u4e2d - ",(0,i.jsx)(l.a,{href:"https://github.com/BerriAI/litellm/tree/main/tests/litellm",children:"\u67e5\u770b\u8be6\u60c5"})]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\n",(0,i.jsxs)(l.p,{children:["\u8be5\u76ee\u5f55\u4e0e ",(0,i.jsx)(l.code,{children:"litellm/"})," \u76ee\u5f55\u4e00\u4e00\u5bf9\u5e94\uff0c\u4ec5\u53ef\u5305\u542b\u6a21\u62df\u6d4b\u8bd5\u3002"]}),"\n"]}),"\n",(0,i.jsxs)(l.li,{children:["\n",(0,i.jsx)(l.p,{children:"\u4e0d\u8981\u5728\u8be5\u76ee\u5f55\u6dfb\u52a0\u771f\u5b9e\u7684\u8bed\u8a00\u6a21\u578b API \u8c03\u7528\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(l.h3,{id:"21-teststest_litellm-\u76ee\u5f55\u7684\u6587\u4ef6\u547d\u540d\u89c4\u8303",children:["2.1 ",(0,i.jsx)(l.code,{children:"tests/test_litellm/"})," \u76ee\u5f55\u7684\u6587\u4ef6\u547d\u540d\u89c4\u8303"]}),"\n",(0,i.jsxs)(l.p,{children:[(0,i.jsx)(l.code,{children:"tests/test_litellm/"})," \u76ee\u5f55\u9075\u5faa\u4e0e ",(0,i.jsx)(l.code,{children:"litellm/"})," \u76ee\u5f55\u76f8\u540c\u7684\u76ee\u5f55\u7ed3\u6784\u3002"]}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(l.code,{children:"litellm/proxy/test_caching_routes.py"})," \u5bf9\u5e94\u4e8e ",(0,i.jsx)(l.code,{children:"litellm/proxy/caching_routes.py"})]}),"\n",(0,i.jsxs)(l.li,{children:[(0,i.jsx)(l.code,{children:"test_{filename}.py"})," \u5bf9\u5e94\u4e8e ",(0,i.jsx)(l.code,{children:"litellm/{filename}.py"})]}),"\n"]}),"\n",(0,i.jsx)(l.h2,{id:"3-\u8fd0\u884c\u5355\u5143\u6d4b\u8bd5",children:"3. \u8fd0\u884c\u5355\u5143\u6d4b\u8bd5"}),"\n",(0,i.jsx)(l.p,{children:"\u5728 litellm \u76ee\u5f55\u7684\u6839\u76ee\u5f55\u4e0b\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-shell",children:"make test-unit\n"})}),"\n",(0,i.jsx)(l.h2,{id:"35-\u8fd0\u884c\u6821\u9a8c\u6d4b\u8bd5",children:"3.5 \u8fd0\u884c\u6821\u9a8c\u6d4b\u8bd5"}),"\n",(0,i.jsx)(l.p,{children:"\u5728 litellm \u76ee\u5f55\u7684\u6839\u76ee\u5f55\u4e0b\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-shell",children:"make lint\n"})}),"\n",(0,i.jsxs)(l.p,{children:["LiteLLM \u4f7f\u7528 mypy \u8fdb\u884c\u6821\u9a8c\u3002\u5728 CI/CD \u73af\u5883\u4e2d\uff0c\u6211\u4eec\u8fd8\u8fd0\u884c ",(0,i.jsx)(l.code,{children:"black"})," \u8fdb\u884c\u683c\u5f0f\u5316\u3002"]}),"\n",(0,i.jsx)(l.h2,{id:"4-\u63d0\u4ea4\u5305\u542b\u66f4\u6539\u7684-pr",children:"4. \u63d0\u4ea4\u5305\u542b\u66f4\u6539\u7684 PR\uff01"}),"\n",(0,i.jsxs)(l.ul,{children:["\n",(0,i.jsx)(l.li,{children:"\u5c06\u60a8\u7684 fork \u63a8\u9001\u5230 GitHub \u4ed3\u5e93"}),"\n",(0,i.jsx)(l.li,{children:"\u4ece\u90a3\u91cc\u63d0\u4ea4\u4e00\u4e2a PR"}),"\n"]}),"\n",(0,i.jsx)(l.h2,{id:"\u9ad8\u7ea7\u5185\u5bb9",children:"\u9ad8\u7ea7\u5185\u5bb9"}),"\n",(0,i.jsx)(l.h3,{id:"\u6784\u5efa-litellm-docker-\u955c\u50cf",children:"\u6784\u5efa LiteLLM Docker \u955c\u50cf"}),"\n",(0,i.jsx)(l.p,{children:"\u6709\u4e9b\u4eba\u53ef\u80fd\u5e0c\u671b\u81ea\u884c\u6784\u5efa LiteLLM \u7684 Docker \u955c\u50cf\u3002\u5982\u679c\u60a8\u60f3\u81ea\u5df1\u6784\u5efa\u5e76\u8fd0\u884c LiteLLM Docker \u955c\u50cf\uff0c\u8bf7\u9075\u5faa\u4ee5\u4e0b\u6b65\u9aa4\u3002"}),"\n",(0,i.jsx)(l.p,{children:"\u6b65\u9aa4 1\uff1a\u514b\u9686\u4ed3\u5e93"}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-shell",children:"git clone https://github.com/BerriAI/litellm.git\n"})}),"\n",(0,i.jsx)(l.p,{children:"\u6b65\u9aa4 2\uff1a\u6784\u5efa Docker \u955c\u50cf"}),"\n",(0,i.jsxs)(l.p,{children:["\u4f7f\u7528 ",(0,i.jsx)(l.code,{children:"docker/Dockerfile.non_root"})," \u6784\u5efa\u955c\u50cf\uff1a"]}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-shell",children:"docker build -f docker/Dockerfile.non_root -t litellm_test_image .\n"})}),"\n",(0,i.jsx)(l.p,{children:"\u6b65\u9aa4 3\uff1a\u8fd0\u884c Docker \u955c\u50cf"}),"\n",(0,i.jsxs)(l.p,{children:["\u786e\u4fdd\u6839\u76ee\u5f55\u4e2d\u5b58\u5728 ",(0,i.jsx)(l.code,{children:"config.yaml"}),"\u3002\u8fd9\u662f\u60a8\u7684 LiteLLM \u4ee3\u7406\u914d\u7f6e\u6587\u4ef6\u3002"]}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-shell",children:'docker run \\\n    -v $(pwd)/proxy_config.yaml:/app/config.yaml \\\n    -e DATABASE_URL="postgresql://xxxxxxxx" \\\n    -e LITELLM_MASTER_KEY="sk-1234" \\\n    -p 4000:4000 \\\n    litellm_test_image \\\n    --config /app/config.yaml --detailed_debug\n'})}),"\n",(0,i.jsx)(l.h3,{id:"\u5728\u672c\u5730\u8fd0\u884c-litellm-\u4ee3\u7406",children:"\u5728\u672c\u5730\u8fd0\u884c LiteLLM \u4ee3\u7406"}),"\n",(0,i.jsxs)(l.ol,{children:["\n",(0,i.jsxs)(l.li,{children:["\u8fdb\u5165 ",(0,i.jsx)(l.code,{children:"proxy/"})," \u76ee\u5f55"]}),"\n"]}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-shell",children:"cd litellm/litellm/proxy\n"})}),"\n",(0,i.jsxs)(l.ol,{start:"2",children:["\n",(0,i.jsx)(l.li,{children:"\u542f\u52a8\u4ee3\u7406"}),"\n"]}),"\n",(0,i.jsx)(l.pre,{children:(0,i.jsx)(l.code,{className:"language-shell",children:"python3 proxy_cli.py --config /path/to/config.yaml\n\n# \u6b63\u5728\u8fd0\u884c\u4e8e http://0.0.0.0:4000\n"})})]})}function o(e={}){const{wrapper:l}={...(0,t.R)(),...e.components};return l?(0,i.jsx)(l,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);