<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-proxy/prometheus" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">ğŸ“ˆ Prometheus æŒ‡æ ‡ | liteLLM</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.litellm.ai/img/docusaurus-social-card.png"><meta data-rh="true" name="twitter:image" content="https://docs.litellm.ai/img/docusaurus-social-card.png"><meta data-rh="true" property="og:url" content="https://docs.litellm.ai/docs/proxy/prometheus"><meta data-rh="true" property="og:locale" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ğŸ“ˆ Prometheus æŒ‡æ ‡ | liteLLM"><meta data-rh="true" name="description" content="LiteLLM ä¸º Prometheus æä¾›äº†ä¸€ä¸ª /metrics ç«¯ç‚¹ä»¥è¿›è¡Œè½®è¯¢ã€‚"><meta data-rh="true" property="og:description" content="LiteLLM ä¸º Prometheus æä¾›äº†ä¸€ä¸ª /metrics ç«¯ç‚¹ä»¥è¿›è¡Œè½®è¯¢ã€‚"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.litellm.ai/docs/proxy/prometheus"><link data-rh="true" rel="alternate" href="https://docs.litellm.ai/docs/proxy/prometheus" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://docs.litellm.ai/docs/proxy/prometheus" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ğŸ“ˆ Prometheus æŒ‡æ ‡","item":"https://docs.litellm.ai/docs/proxy/prometheus"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K7K215ZVNC"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-K7K215ZVNC",{anonymize_ip:!0})</script>





<link rel="alternate" type="application/rss+xml" href="/release_notes/rss.xml" title="liteLLM RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/release_notes/atom.xml" title="liteLLM Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="liteLLM RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="liteLLM Atom Feed">
<script>window.$crisp=[],window.CRISP_WEBSITE_ID="be07a4d6-dba0-4df7-961d-9302c86b7ebc",d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)</script>

<script async src="https://www.feedbackrocket.io/sdk/v1.2.js" data-fr-id="GQwepB0f0L-x_ZH63kR_V" data-fr-theme="dynamic"></script><link rel="stylesheet" href="/assets/css/styles.ab6b1187.css">
<script src="/assets/js/runtime~main.e2ac0700.js" defer="defer"></script>
<script src="/assets/js/main.cc386e68.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav aria-label="ä¸»å¯¼èˆª" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">ğŸš… LiteLLM</b></a><a class="navbar__item navbar__link" href="/docs/">Docs</a><a class="navbar__item navbar__link" sidebarid="integrationsSidebar" href="/docs/integrations">Integrations</a><a class="navbar__item navbar__link" sidebarid="tutorialSidebar" href="/docs/enterprise">Enterprise</a><a class="navbar__item navbar__link" href="/release_notes">Release Notes</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://models.litellm.ai/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">ğŸ’¸ LLM Model Cost Map<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/BerriAI/litellm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://www.litellm.ai/support" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Slack/Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºsystem modeï¼‰"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div id="inkeep-shadowradix-_R_7j5a5_" style="display:contents"></div><span></span></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="æ–‡æ¡£ä¾§è¾¹æ " class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/integrations/">é›†æˆ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/integrations/community">æˆä¸ºé›†æˆåˆä½œä¼™ä¼´</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/contribute_integration/custom_webhook_api">Observability</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/proxy/guardrails/quick_start">Guardrails</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/proxy/alerting">Alerting &amp; Monitoring</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proxy/alerting">Alerting / Webhooks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/proxy/pagerduty">PagerDuty è­¦æŠ¥</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/proxy/prometheus">ğŸ“ˆ Prometheus æŒ‡æ ‡</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/proxy/litellm_prompt_management">[Beta] Prompt Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/tutorials/claude_responses_api">AI Tools (OpenWebUI, Claude Code, etc.)</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="é¡µé¢è·¯å¾„"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="ä¸»é¡µé¢" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Alerting &amp; Monitoring</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">ğŸ“ˆ Prometheus æŒ‡æ ‡</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><header><h1>ğŸ“ˆ Prometheus æŒ‡æ ‡</h1></header>
<p>LiteLLM ä¸º Prometheus æä¾›äº†ä¸€ä¸ª <code>/metrics</code> ç«¯ç‚¹ä»¥è¿›è¡Œè½®è¯¢ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¿«é€Ÿå…¥é—¨">å¿«é€Ÿå…¥é—¨<a href="#å¿«é€Ÿå…¥é—¨" class="hash-link" aria-label="å¿«é€Ÿå…¥é—¨çš„ç›´æ¥é“¾æ¥" title="å¿«é€Ÿå…¥é—¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ LiteLLM CLI å¹¶ä¸”é€šè¿‡ <code>litellm --config proxy_config.yaml</code> å¯åŠ¨ï¼Œé‚£ä¹ˆä½ éœ€è¦å®‰è£… <code>prometheus_client==0.20.0</code>ã€‚<strong>è¿™å·²ç»åœ¨ litellm Docker é•œåƒä¸­é¢„è£…äº†</strong></p>
<p>åœ¨ä½ çš„ä»£ç†é…ç½®æ–‡ä»¶ <code>proxy_config.yaml</code> ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">model_list</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">model_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gpt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">litellm_params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">model</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gpt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">litellm_settings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">callbacks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">å¯åŠ¨ä»£ç†ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```shell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">litellm </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config config.yaml </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">debug</span><br></span></code></pre></div></div>
<p>æµ‹è¯•è¯·æ±‚ï¼š</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl --location &#x27;http://0.0.0.0:4000/chat/completions&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;model&quot;: &quot;gpt-4o&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;messages&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;role&quot;: &quot;user&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;content&quot;: &quot;what llm are you&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}&#x27;</span><br></span></code></pre></div></div>
<p>æŸ¥çœ‹æŒ‡æ ‡ï¼š
è®¿é—® <code>http://localhost:4000/metrics</code></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">http://localhost:4000/metrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># &lt;proxy_base_url&gt;/metrics</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¤šä¸ª-worker">å¤šä¸ª Worker<a href="#å¤šä¸ª-worker" class="hash-link" aria-label="å¤šä¸ª Workerçš„ç›´æ¥é“¾æ¥" title="å¤šä¸ª Workerçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>å½“ä½ ä½¿ç”¨ LiteLLM å¹¶ä¸”æœ‰å¤šä¸ªå·¥ä½œå™¨æ—¶ï¼Œä½ éœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡ <code>PROMETHEUS_MULTIPROC_DIR</code> ä»¥åœ¨å¤šä¸ªå·¥ä½œè¿›ç¨‹ä¹‹é—´èšåˆæŒ‡æ ‡ã€‚</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export PROMETHEUS_MULTIPROC_DIR=&quot;/prometheus_multiproc&quot;</span><br></span></code></pre></div></div>
<p>è¿™ä¸ªç›®å½•è¢« Prometheus å®¢æˆ·ç«¯åº“ç”¨æ¥å­˜å‚¨å¯ä»¥å…±äº«ç»™å¤šä¸ªå·¥ä½œè¿›ç¨‹çš„æŒ‡æ ‡æ–‡ä»¶ã€‚ç¡®ä¿è¯¥ç›®å½•å­˜åœ¨å¹¶ä¸”ç”± LiteLLM è¿›ç¨‹å¯å†™ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="è™šæ‹Ÿå¯†é’¥å›¢é˜Ÿå†…éƒ¨ç”¨æˆ·">è™šæ‹Ÿå¯†é’¥ã€å›¢é˜Ÿã€å†…éƒ¨ç”¨æˆ·<a href="#è™šæ‹Ÿå¯†é’¥å›¢é˜Ÿå†…éƒ¨ç”¨æˆ·" class="hash-link" aria-label="è™šæ‹Ÿå¯†é’¥ã€å›¢é˜Ÿã€å†…éƒ¨ç”¨æˆ·çš„ç›´æ¥é“¾æ¥" title="è™šæ‹Ÿå¯†é’¥ã€å›¢é˜Ÿã€å†…éƒ¨ç”¨æˆ·çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>ä½¿ç”¨æ­¤åŠŸèƒ½æ¥è·Ÿè¸ª <a href="/docs/proxy/virtual_keys">ç”¨æˆ·ã€å¯†é’¥ã€å›¢é˜Ÿç­‰</a></p>
<table><thead><tr><th>æŒ‡æ ‡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>litellm_spend_metric</code></td><td>æ€»èŠ±è´¹ï¼ŒæŒ‰ <code>&quot;end_user&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;model&quot;, &quot;team&quot;, &quot;team_alias&quot;, &quot;user&quot;</code> åˆ†ç±»</td></tr><tr><td><code>litellm_total_tokens_metric</code></td><td>æŒ‰ <code>&quot;end_user&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;requested_model&quot;, &quot;team&quot;, &quot;team_alias&quot;, &quot;user&quot;, &quot;model&quot;</code> è®¡ç®—çš„è¾“å…¥ + è¾“å‡º token æ•°é‡</td></tr><tr><td><code>litellm_input_tokens_metric</code></td><td>æŒ‰ <code>&quot;end_user&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;requested_model&quot;, &quot;team&quot;, &quot;team_alias&quot;, &quot;user&quot;, &quot;model&quot;</code> è®¡ç®—çš„è¾“å…¥ token æ•°é‡</td></tr><tr><td><code>litellm_output_tokens_metric</code></td><td>æŒ‰ <code>&quot;end_user&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;requested_model&quot;, &quot;team&quot;, &quot;team_alias&quot;, &quot;user&quot;, &quot;model&quot;</code> è®¡ç®—çš„è¾“å‡º token æ•°é‡</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å›¢é˜Ÿ---é¢„ç®—">å›¢é˜Ÿ - é¢„ç®—<a href="#å›¢é˜Ÿ---é¢„ç®—" class="hash-link" aria-label="å›¢é˜Ÿ - é¢„ç®—çš„ç›´æ¥é“¾æ¥" title="å›¢é˜Ÿ - é¢„ç®—çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<table><thead><tr><th>æŒ‡æ ‡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>litellm_team_max_budget_metric</code></td><td>å›¢é˜Ÿæ ‡ç­¾ <code>&quot;team&quot;, &quot;team_alias&quot;</code> çš„æœ€å¤§é¢„ç®—</td></tr><tr><td><code>litellm_remaining_team_budget_metric</code></td><td>å›¢é˜Ÿ (åœ¨ LiteLLM åˆ›å»ºçš„) æ ‡ç­¾ <code>&quot;team&quot;, &quot;team_alias&quot;</code> å‰©ä½™çš„é¢„ç®—</td></tr><tr><td><code>litellm_team_budget_remaining_hours_metric</code></td><td>åœ¨å›¢é˜Ÿé¢„ç®—é‡ç½®å‰å‰©ä½™çš„æ—¶é—´æ ‡ç­¾ <code>&quot;team&quot;, &quot;team_alias&quot;</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="è™šæ‹Ÿå¯†é’¥---é¢„ç®—">è™šæ‹Ÿå¯†é’¥ - é¢„ç®—<a href="#è™šæ‹Ÿå¯†é’¥---é¢„ç®—" class="hash-link" aria-label="è™šæ‹Ÿå¯†é’¥ - é¢„ç®—çš„ç›´æ¥é“¾æ¥" title="è™šæ‹Ÿå¯†é’¥ - é¢„ç®—çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<table><thead><tr><th>æŒ‡æ ‡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>litellm_api_key_max_budget_metric</code></td><td>API å¯†é’¥æ ‡ç­¾ <code>&quot;hashed_api_key&quot;, &quot;api_key_alias&quot;</code> çš„æœ€å¤§é¢„ç®—</td></tr><tr><td><code>litellm_remaining_api_key_budget_metric</code></td><td>API å¯†é’¥ (åœ¨ LiteLLM åˆ›å»ºçš„) æ ‡ç­¾ <code>&quot;hashed_api_key&quot;, &quot;api_key_alias&quot;</code> å‰©ä½™çš„é¢„ç®—</td></tr><tr><td><code>litellm_api_key_budget_remaining_hours_metric</code></td><td>åœ¨ API å¯†é’¥é¢„ç®—é‡ç½®å‰å‰©ä½™çš„æ—¶é—´æ ‡ç­¾ <code>&quot;hashed_api_key&quot;, &quot;api_key_alias&quot;</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="è™šæ‹Ÿå¯†é’¥---é€Ÿç‡é™åˆ¶">è™šæ‹Ÿå¯†é’¥ - é€Ÿç‡é™åˆ¶<a href="#è™šæ‹Ÿå¯†é’¥---é€Ÿç‡é™åˆ¶" class="hash-link" aria-label="è™šæ‹Ÿå¯†é’¥ - é€Ÿç‡é™åˆ¶çš„ç›´æ¥é“¾æ¥" title="è™šæ‹Ÿå¯†é’¥ - é€Ÿç‡é™åˆ¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<table><thead><tr><th>æŒ‡æ ‡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>litellm_remaining_api_key_requests_for_model</code></td><td>LiteLLM è™šæ‹Ÿ API å¯†é’¥å‰©ä½™çš„è¯·æ±‚ï¼Œä»…å½“ä¸ºè¯¥è™šæ‹Ÿå¯†é’¥è®¾ç½®äº†ç‰¹å®šäºæ¨¡å‹çš„é€Ÿç‡é™åˆ¶ (rpm) æ—¶ã€‚æ ‡ç­¾: <code>&quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;model&quot;</code></td></tr><tr><td><code>litellm_remaining_api_key_tokens_for_model</code></td><td>LiteLLM è™šæ‹Ÿ API å¯†é’¥å‰©ä½™çš„ä»¤ç‰Œï¼Œä»…å½“ä¸ºè¯¥è™šæ‹Ÿå¯†é’¥è®¾ç½®äº†ç‰¹å®šäºæ¨¡å‹çš„ä»¤ç‰Œé™åˆ¶ (tpm) æ—¶ã€‚æ ‡ç­¾: <code>&quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;model&quot;</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="åˆå§‹åŒ–é¢„ç®—æŒ‡æ ‡">åˆå§‹åŒ–é¢„ç®—æŒ‡æ ‡<a href="#åˆå§‹åŒ–é¢„ç®—æŒ‡æ ‡" class="hash-link" aria-label="åˆå§‹åŒ–é¢„ç®—æŒ‡æ ‡çš„ç›´æ¥é“¾æ¥" title="åˆå§‹åŒ–é¢„ç®—æŒ‡æ ‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>å¦‚æœä½ æƒ³è®© litellm åœ¨å¯åŠ¨æ—¶å‘å‡ºæ‰€æœ‰å¯†é’¥ã€å›¢é˜Ÿçš„é¢„ç®—æŒ‡æ ‡ï¼ˆæ— è®ºæ˜¯å¦æ”¶åˆ°è¯·æ±‚ï¼‰ï¼Œå¯ä»¥åœ¨ <code>config.yaml</code> ä¸­è®¾ç½® <code>prometheus_initialize_budget_metrics</code> ä¸º <code>true</code></p>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ul>
<li>å¦‚æœè®¾ç½®äº† <code>prometheus_initialize_budget_metrics: true</code>
<ul>
<li>æ¯éš”äº”åˆ†é’Ÿï¼Œlitellm è¿è¡Œä¸€ä¸ª cron ä½œä¸šæ¥è¯»å–æ•°æ®åº“ä¸­çš„æ‰€æœ‰å¯†é’¥ã€å›¢é˜Ÿ</li>
<li>ç„¶åä¸ºæ¯ä¸ªå¯†é’¥ã€å›¢é˜Ÿå‘å‡ºé¢„ç®—æŒ‡æ ‡</li>
<li>è¿™ç”¨äºå¡«å…… <code>/metrics</code> ç«¯ç‚¹ä¸Šçš„é¢„ç®—æŒ‡æ ‡</li>
</ul>
</li>
</ul>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">litellm_settings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">callbacks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;prometheus&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">prometheus_initialize_budget_metrics</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»£ç†çº§åˆ«è·Ÿè¸ªæŒ‡æ ‡">ä»£ç†çº§åˆ«è·Ÿè¸ªæŒ‡æ ‡<a href="#ä»£ç†çº§åˆ«è·Ÿè¸ªæŒ‡æ ‡" class="hash-link" aria-label="ä»£ç†çº§åˆ«è·Ÿè¸ªæŒ‡æ ‡çš„ç›´æ¥é“¾æ¥" title="ä»£ç†çº§åˆ«è·Ÿè¸ªæŒ‡æ ‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>ä½¿ç”¨æ­¤åŠŸèƒ½æ¥è·Ÿè¸ª LiteLLM ä»£ç†çš„æ•´ä½“ä½¿ç”¨æƒ…å†µã€‚</p>
<ul>
<li>è·Ÿè¸ªä»£ç†åˆ°å®¢æˆ·ç«¯çš„å®é™…æµé‡ç‡</li>
<li>å®¢æˆ·ç«¯è¯·æ±‚å’Œå¤±è´¥çš„è¯·æ±‚æ•°é‡</li>
</ul>
<table><thead><tr><th>æŒ‡æ ‡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>litellm_proxy_failed_requests_metric</code></td><td>ä»ä»£ç†è¿”å›çš„æ€»å¤±è´¥å“åº”æ•° - å®¢æˆ·ç«¯æœªä» litellm ä»£ç†æ¥æ”¶åˆ°æˆåŠŸå“åº”ã€‚æ ‡ç­¾: <code>&quot;end_user&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;requested_model&quot;, &quot;team&quot;, &quot;team_alias&quot;, &quot;user&quot;, &quot;exception_status&quot;, &quot;exception_class&quot;, &quot;route&quot;</code></td></tr><tr><td><code>litellm_proxy_total_requests_metric</code></td><td>å‘é€åˆ°ä»£ç†æœåŠ¡å™¨çš„æ€»è¯·æ±‚æ•° - è·Ÿè¸ªå®¢æˆ·ç«¯è¯·æ±‚çš„æ•°é‡ã€‚æ ‡ç­¾: <code>&quot;end_user&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;requested_model&quot;, &quot;team&quot;, &quot;team_alias&quot;, &quot;user&quot;, &quot;status_code&quot;, &quot;user_email&quot;, &quot;route&quot;</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å›è°ƒæ—¥å¿—è®°å½•æŒ‡æ ‡">å›è°ƒæ—¥å¿—è®°å½•æŒ‡æ ‡<a href="#å›è°ƒæ—¥å¿—è®°å½•æŒ‡æ ‡" class="hash-link" aria-label="å›è°ƒæ—¥å¿—è®°å½•æŒ‡æ ‡çš„ç›´æ¥é“¾æ¥" title="å›è°ƒæ—¥å¿—è®°å½•æŒ‡æ ‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>ç›‘æ§å‘ä¸‹æ¸¸å›è°ƒï¼ˆå¦‚ <code>s3_v3</code> å†·å­˜å‚¨ï¼‰å‘é€æ—¥å¿—æ—¶çš„å¤±è´¥æƒ…å†µã€‚</p>
<table><thead><tr><th>æŒ‡æ ‡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>litellm_callback_logging_failures_metric</code></td><td>å‘é€åˆ°é…ç½®çš„å›è°ƒçš„æ—¥å¿—æ€»æ•°ã€‚æ ‡ç­¾: <code>&quot;callback_name&quot;</code>ã€‚ä½¿ç”¨æ­¤æŒ‡æ ‡æ¥æé†’åœ¨å‘ <code>s3_v3</code> å†™å…¥æ—¶å‡ºç°é‡å¤å¤±è´¥çš„é—®é¢˜ã€‚</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="llm-æä¾›å•†æŒ‡æ ‡">LLM æä¾›å•†æŒ‡æ ‡<a href="#llm-æä¾›å•†æŒ‡æ ‡" class="hash-link" aria-label="LLM æä¾›å•†æŒ‡æ ‡çš„ç›´æ¥é“¾æ¥" title="LLM æä¾›å•†æŒ‡æ ‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>ç”¨äºç›‘æ§ LLM API é”™è¯¯å’Œè·Ÿè¸ªå‰©ä½™é€Ÿç‡é™åˆ¶å’Œä»¤ç‰Œé™åˆ¶</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="è·Ÿè¸ªçš„æ ‡ç­¾">è·Ÿè¸ªçš„æ ‡ç­¾<a href="#è·Ÿè¸ªçš„æ ‡ç­¾" class="hash-link" aria-label="è·Ÿè¸ªçš„æ ‡ç­¾çš„ç›´æ¥é“¾æ¥" title="è·Ÿè¸ªçš„æ ‡ç­¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<table><thead><tr><th>æ ‡ç­¾</th><th>æè¿°</th></tr></thead><tbody><tr><td>litellm_model_name</td><td>LiteLLM ä½¿ç”¨çš„ LLM æ¨¡å‹åç§°</td></tr><tr><td>requested_model</td><td>è¯·æ±‚ä¸­å‘é€çš„æ¨¡å‹</td></tr><tr><td>model_id</td><td>éƒ¨ç½²çš„æ¨¡å‹ IDã€‚ç”± LiteLLM è‡ªåŠ¨ç”Ÿæˆï¼Œæ¯ä¸ªéƒ¨ç½²éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ model_id</td></tr><tr><td>api_base</td><td>éƒ¨ç½²çš„ API åŸºç¡€ URL</td></tr><tr><td>api_provider</td><td>ç”¨äºæä¾›è€…çš„ LLM API æä¾›å•†ï¼Œä¾‹å¦‚ (azure, openai, vertex_ai)</td></tr><tr><td>hashed_api_key</td><td>è¯·æ±‚ä¸­çš„å“ˆå¸Œå¯†é’¥</td></tr><tr><td>api_key_alias</td><td>ä½¿ç”¨çš„å¯†é’¥åˆ«å</td></tr><tr><td>team</td><td>è¯·æ±‚ä¸­çš„å›¢é˜Ÿ</td></tr><tr><td>team_alias</td><td>ä½¿ç”¨çš„å›¢é˜Ÿåˆ«å</td></tr><tr><td>exception_status</td><td>å¦‚æœæœ‰å¼‚å¸¸ï¼Œåˆ™ä¸ºå¼‚å¸¸çŠ¶æ€</td></tr><tr><td>exception_class</td><td>å¦‚æœæœ‰å¼‚å¸¸ï¼Œåˆ™ä¸ºå¼‚å¸¸ç±»</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æˆåŠŸä¸å¤±è´¥">æˆåŠŸä¸å¤±è´¥<a href="#æˆåŠŸä¸å¤±è´¥" class="hash-link" aria-label="æˆåŠŸä¸å¤±è´¥çš„ç›´æ¥é“¾æ¥" title="æˆåŠŸä¸å¤±è´¥çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<table><thead><tr><th>æŒ‡æ ‡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>litellm_deployment_success_responses</code></td><td>éƒ¨ç½²çš„æ€»æˆåŠŸ LLM API è°ƒç”¨æ¬¡æ•°ã€‚æ ‡ç­¾: <code>&quot;requested_model&quot;, &quot;litellm_model_name&quot;, &quot;model_id&quot;, &quot;api_base&quot;, &quot;api_provider&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;team&quot;, &quot;team_alias&quot;</code></td></tr><tr><td><code>litellm_deployment_failure_responses</code></td><td>ç‰¹å®š LLM éƒ¨ç½²çš„æ€»å¤±è´¥ LLM API è°ƒç”¨æ¬¡æ•°ã€‚æ ‡ç­¾: <code>&quot;requested_model&quot;, &quot;litellm_model_name&quot;, &quot;model_id&quot;, &quot;api_base&quot;, &quot;api_provider&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;team&quot;, &quot;team_alias&quot;, &quot;exception_status&quot;, &quot;exception_class&quot;</code></td></tr><tr><td><code>litellm_deployment_total_requests</code></td><td>éƒ¨ç½²çš„æ€» LLM API è°ƒç”¨æ¬¡æ•° - æˆåŠŸ + å¤±è´¥ã€‚æ ‡ç­¾: <code>&quot;requested_model&quot;, &quot;litellm_model_name&quot;, &quot;model_id&quot;, &quot;api_base&quot;, &quot;api_provider&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;team&quot;, &quot;team_alias&quot;</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‰©ä½™è¯·æ±‚å’Œä»¤ç‰Œ">å‰©ä½™è¯·æ±‚å’Œä»¤ç‰Œ<a href="#å‰©ä½™è¯·æ±‚å’Œä»¤ç‰Œ" class="hash-link" aria-label="å‰©ä½™è¯·æ±‚å’Œä»¤ç‰Œçš„ç›´æ¥é“¾æ¥" title="å‰©ä½™è¯·æ±‚å’Œä»¤ç‰Œçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<table><thead><tr><th>æŒ‡æ ‡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>litellm_remaining_requests_metric</code></td><td>è·Ÿè¸ªä» LLM API éƒ¨ç½²è¿”å›çš„ <code>x-ratelimit-remaining-requests</code>ã€‚æ ‡ç­¾: <code>&quot;model_group&quot;, &quot;api_provider&quot;, &quot;api_base&quot;, &quot;litellm_model_name&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;</code></td></tr><tr><td><code>litellm_remaining_tokens_metric</code></td><td>è·Ÿè¸ªä» LLM API éƒ¨ç½²è¿”å›çš„ <code>x-ratelimit-remaining-tokens</code>ã€‚æ ‡ç­¾: <code>&quot;model_group&quot;, &quot;api_provider&quot;, &quot;api_base&quot;, &quot;litellm_model_name&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;</code></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="éƒ¨ç½²çŠ¶æ€">éƒ¨ç½²çŠ¶æ€<a href="#éƒ¨ç½²çŠ¶æ€" class="hash-link" aria-label="éƒ¨ç½²çŠ¶æ€çš„ç›´æ¥é“¾æ¥" title="éƒ¨ç½²çŠ¶æ€çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<table><thead><tr><th>æŒ‡æ ‡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>litellm_deployment_state</code></td><td>éƒ¨ç½²çš„çŠ¶æ€: 0 = å¥åº·ï¼Œ1 = éƒ¨åˆ†ä¸­æ–­ï¼Œ2 = å®Œå…¨ä¸­æ–­ã€‚æ ‡ç­¾: <code>&quot;litellm_model_name&quot;, &quot;model_id&quot;, &quot;api_base&quot;, &quot;api_provider&quot;</code></td></tr><tr><td><code>litellm_deployment_latency_per_output_token</code></td><td>æ¯ä¸ªè¾“å‡ºä»¤ç‰Œçš„éƒ¨ç½²å»¶è¿Ÿã€‚æ ‡ç­¾: <code>&quot;litellm_model_name&quot;, &quot;model_id&quot;, &quot;api_base&quot;, &quot;api_provider&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;team&quot;, &quot;team_alias&quot;</code></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="é™çº§-æ•…éšœè½¬ç§»-æŒ‡æ ‡">é™çº§ (æ•…éšœè½¬ç§») æŒ‡æ ‡<a href="#é™çº§-æ•…éšœè½¬ç§»-æŒ‡æ ‡" class="hash-link" aria-label="é™çº§ (æ•…éšœè½¬ç§») æŒ‡æ ‡çš„ç›´æ¥é“¾æ¥" title="é™çº§ (æ•…éšœè½¬ç§») æŒ‡æ ‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<table><thead><tr><th>æŒ‡æ ‡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>litellm_deployment_cooled_down</code></td><td>LiteLLM è´Ÿè½½å‡è¡¡é€»è¾‘å†·å´éƒ¨ç½²çš„æ¬¡æ•°ã€‚æ ‡ç­¾: <code>&quot;litellm_model_name&quot;, &quot;model_id&quot;, &quot;api_base&quot;, &quot;api_provider&quot;</code></td></tr><tr><td><code>litellm_deployment_successful_fallbacks</code></td><td>ä»ä¸»æ¨¡å‹ -&gt; å¤‡ç”¨æ¨¡å‹çš„æˆåŠŸæ•…éšœè½¬ç§»è¯·æ±‚æ¬¡æ•°ã€‚æ ‡ç­¾: <code>&quot;requested_model&quot;, &quot;fallback_model&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;team&quot;, &quot;team_alias&quot;, &quot;exception_status&quot;, &quot;exception_class&quot;</code></td></tr><tr><td><code>litellm_deployment_failed_fallbacks</code></td><td>ä»ä¸»æ¨¡å‹ -&gt; å¤‡ç”¨æ¨¡å‹çš„å¤±è´¥æ•…éšœè½¬ç§»è¯·æ±‚æ¬¡æ•°ã€‚æ ‡ç­¾: <code>&quot;requested_model&quot;, &quot;fallback_model&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;team&quot;, &quot;team_alias&quot;, &quot;exception_status&quot;, &quot;exception_class&quot;</code></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¯·æ±‚è®¡æ•°æŒ‡æ ‡">è¯·æ±‚è®¡æ•°æŒ‡æ ‡<a href="#è¯·æ±‚è®¡æ•°æŒ‡æ ‡" class="hash-link" aria-label="è¯·æ±‚è®¡æ•°æŒ‡æ ‡çš„ç›´æ¥é“¾æ¥" title="è¯·æ±‚è®¡æ•°æŒ‡æ ‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<table><thead><tr><th>æŒ‡æ ‡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>litellm_requests_metric</code></td><td>è·Ÿè¸ªæ¯ä¸ªç«¯ç‚¹çš„æ€»è¯·æ±‚æ•°ã€‚æ ‡ç­¾: <code>&quot;end_user&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;model&quot;, &quot;team&quot;, &quot;team_alias&quot;, &quot;user&quot;, &quot;user_email&quot;</code></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¯·æ±‚å»¶è¿ŸæŒ‡æ ‡">è¯·æ±‚å»¶è¿ŸæŒ‡æ ‡<a href="#è¯·æ±‚å»¶è¿ŸæŒ‡æ ‡" class="hash-link" aria-label="è¯·æ±‚å»¶è¿ŸæŒ‡æ ‡çš„ç›´æ¥é“¾æ¥" title="è¯·æ±‚å»¶è¿ŸæŒ‡æ ‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<table><thead><tr><th>æŒ‡æ ‡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>litellm_request_total_latency_metric</code></td><td>LiteLLM ä»£ç†æœåŠ¡å™¨è¯·æ±‚çš„æ€»å»¶è¿Ÿï¼ˆç§’ï¼‰ - è·Ÿè¸ªæ ‡ç­¾ <code>&quot;end_user&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;requested_model&quot;, &quot;team&quot;, &quot;team_alias&quot;, &quot;user&quot;, &quot;model&quot;</code></td></tr><tr><td><code>litellm_overhead_latency_metric</code></td><td>LiteLLM å¤„ç†å¢åŠ çš„å»¶è¿Ÿï¼ˆç§’ï¼‰ - è·Ÿè¸ªæ ‡ç­¾ <code>&quot;model_group&quot;, &quot;api_provider&quot;, &quot;api_base&quot;, &quot;litellm_model_name&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;</code></td></tr><tr><td><code>litellm_llm_api_latency_metric</code></td><td>LLM API è°ƒç”¨çš„å»¶è¿Ÿï¼ˆç§’ï¼‰ - è·Ÿè¸ªæ ‡ç­¾ <code>&quot;model&quot;, &quot;hashed_api_key&quot;, &quot;api_key_alias&quot;, &quot;team&quot;, &quot;team_alias&quot;, &quot;requested_model&quot;, &quot;end_user&quot;, &quot;user&quot;</code></td></tr><tr><td><code>litellm_llm_api_time_to_first_token_metric</code></td><td>LLM API è°ƒç”¨çš„ç¬¬ä¸€ä¸ªä»¤ç‰Œæ—¶é—´ - è·Ÿè¸ªæ ‡ç­¾ <code>model</code>, <code>hashed_api_key</code>, <code>api_key_alias</code>, <code>team</code>, <code>team_alias</code> [æ³¨æ„ï¼šä»…åœ¨æµå¼è¯·æ±‚ä¸­å‘å‡º]</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="åœ¨-prometheus-ä¸­è·Ÿè¸ª-end_user">åœ¨ Prometheus ä¸­è·Ÿè¸ª <code>end_user</code><a href="#åœ¨-prometheus-ä¸­è·Ÿè¸ª-end_user" class="hash-link" aria-label="åœ¨-prometheus-ä¸­è·Ÿè¸ª-end_userçš„ç›´æ¥é“¾æ¥" title="åœ¨-prometheus-ä¸­è·Ÿè¸ª-end_userçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒLiteLLM ä¸ä¼šåœ¨ Prometheus ä¸­è·Ÿè¸ª <code>end_user</code>ã€‚è¿™æœ‰åŠ©äºå‡å°‘ LiteLLM ä»£ç†çš„æŒ‡æ ‡åŸºæ•°ã€‚</p>
<p>å¦‚æœä½ æƒ³åœ¨ Prometheus ä¸­è·Ÿè¸ª <code>end_user</code>ï¼Œå¯ä»¥è¿™æ ·åšï¼š</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_OeMC">config.yaml</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm" style="counter-reset:line-count 0"><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token key atrule" style="color:#00a4db">litellm_settings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">callbacks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;prometheus&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#393A34"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">enable_end_user_cost_tracking_prometheus_only</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span></span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="beta-è‡ªå®šä¹‰æŒ‡æ ‡">[BETA] è‡ªå®šä¹‰æŒ‡æ ‡<a href="#beta-è‡ªå®šä¹‰æŒ‡æ ‡" class="hash-link" aria-label="[BETA] è‡ªå®šä¹‰æŒ‡æ ‡çš„ç›´æ¥é“¾æ¥" title="[BETA] è‡ªå®šä¹‰æŒ‡æ ‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>åœ¨æ‰€æœ‰ä¸Šè¿°äº‹ä»¶ä¸­è‡ªå®šä¹‰æŒ‡æ ‡è®°å½•åˆ° Prometheus ä¸­ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="è‡ªå®šä¹‰å…ƒæ•°æ®æ ‡ç­¾">è‡ªå®šä¹‰å…ƒæ•°æ®æ ‡ç­¾<a href="#è‡ªå®šä¹‰å…ƒæ•°æ®æ ‡ç­¾" class="hash-link" aria-label="è‡ªå®šä¹‰å…ƒæ•°æ®æ ‡ç­¾çš„ç›´æ¥é“¾æ¥" title="è‡ªå®šä¹‰å…ƒæ•°æ®æ ‡ç­¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<ol>
<li>åœ¨ <code>config.yaml</code> ä¸­å®šä¹‰è‡ªå®šä¹‰å…ƒæ•°æ®æ ‡ç­¾ï¼š</li>
</ol>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">model_list</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">model_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> openai/gpt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">litellm_params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">model</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> openai/gpt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">api_key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> os.environ/OPENAI_API_KEY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">litellm_settings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">callbacks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;prometheus&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">custom_prometheus_metadata_labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;metadata.foo&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;metadata.bar&quot;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<ol start="2">
<li>ä½¿ç”¨è‡ªå®šä¹‰å…ƒæ•°æ®æ ‡ç­¾å‘èµ·è¯·æ±‚ï¼š</li>
</ol>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Curl è¯·æ±‚</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">åœ¨å¯†é’¥ä¸Š</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">åœ¨å›¢é˜Ÿä¸Š</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -L -X POST &#x27;http://0.0.0.0:4000/v1/chat/completions&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H &#x27;Authorization: Bearer &lt;LITELLM_API_KEY&gt;&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-d &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;model&quot;: &quot;openai/gpt-4o&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;messages&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;role&quot;: &quot;user&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;content&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;type&quot;: &quot;text&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;text&quot;: &quot;What&#x27;s in this image?&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;max_tokens&quot;: 300,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;metadata&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;foo&quot;: &quot;hello world&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}&#x27;</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -L -X POST &#x27;http://0.0.0.0:4000/key/generate&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H &#x27;Authorization: Bearer sk-1234&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-d &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;metadata&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;foo&quot;: &quot;hello world&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}&#x27;</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -L -X POST &#x27;http://0.0.0.0:4000/team/new&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H &#x27;Authorization: Bearer sk-1234&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-d &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;metadata&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;foo&quot;: &quot;hello world&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}&#x27;</span><br></span></code></pre></div></div></div></div></div>
<ol start="3">
<li>åœ¨ <code>/metrics</code> ç«¯ç‚¹æ£€æŸ¥è‡ªå®šä¹‰æŒ‡æ ‡ï¼š</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">... &quot;metadata_foo&quot;: &quot;hello world&quot; ...</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="è‡ªå®šä¹‰æ ‡ç­¾">è‡ªå®šä¹‰æ ‡ç­¾<a href="#è‡ªå®šä¹‰æ ‡ç­¾" class="hash-link" aria-label="è‡ªå®šä¹‰æ ‡ç­¾çš„ç›´æ¥é“¾æ¥" title="è‡ªå®šä¹‰æ ‡ç­¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>è·Ÿè¸ªç‰¹å®šçš„æ ‡ç­¾ä½œä¸º Prometheus æ ‡ç­¾ï¼Œä»¥ä¾¿æ›´å¥½åœ°è¿‡æ»¤å’Œç›‘æ§ã€‚</p>
<ol>
<li>åœ¨ <code>config.yaml</code> ä¸­å®šä¹‰è‡ªå®šä¹‰æ ‡ç­¾ï¼š</li>
</ol>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">model_list</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">model_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> openai/gpt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">litellm_params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">model</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> openai/gpt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">api_key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> os.environ/OPENAI_API_KEY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">litellm_settings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">callbacks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;prometheus&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">custom_prometheus_metadata_labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;metadata.foo&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;metadata.bar&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">custom_prometheus_tags</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;prod&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;staging&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;batch-job&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;User-Agent: RooCode/*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;User-Agent: claude-cli/*&quot;</span><br></span></code></pre></div></div>
<ol start="2">
<li>å‘èµ·å¸¦æœ‰æ ‡ç­¾çš„è¯·æ±‚ï¼š</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -L -X POST &#x27;http://0.0.0.0:4000/v1/chat/completions&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H &#x27;Content-Type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H &#x27;Authorization: Bearer &lt;LITELLM_API_KEY&gt;&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-d &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;model&quot;: &quot;openai/gpt-4o&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;messages&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;role&quot;: &quot;user&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;content&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;type&quot;: &quot;text&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;text&quot;: &quot;What&#x27;s in this image?&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;max_tokens&quot;: 300,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;metadata&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;tags&quot;: [&quot;prod&quot;, &quot;user-facing&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}&#x27;</span><br></span></code></pre></div></div>
<ol start="3">
<li>åœ¨ <code>/metrics</code> ç«¯ç‚¹æ£€æŸ¥è‡ªå®šä¹‰æ ‡ç­¾æŒ‡æ ‡ï¼š</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">... &quot;tag_prod&quot;: &quot;true&quot;, &quot;tag_staging&quot;: &quot;false&quot;, &quot;tag_batch_job&quot;: &quot;false&quot; ...</span><br></span></code></pre></div></div>
<p><strong>å¦‚ä½•å·¥ä½œï¼š</strong></p>
<ul>
<li>æ¯ä¸ªé…ç½®çš„æ ‡ç­¾åœ¨ Prometheus ä¸­éƒ½ä¼šæˆä¸ºä¸€ä¸ªå¸ƒå°”æ ‡ç­¾</li>
<li>å¦‚æœæ ‡ç­¾åŒ¹é…ï¼ˆç²¾ç¡®æˆ–é€šé…ç¬¦ï¼‰ï¼Œè¯¥æ ‡ç­¾å€¼ä¸º <code>&quot;true&quot;</code>ï¼Œå¦åˆ™ä¸º <code>&quot;false&quot;</code></li>
<li>æ ‡ç­¾åç§°ä¸ºäº†å…¼å®¹ Prometheus è€Œè¿›è¡Œäº†æ¸…ç†ï¼ˆä¾‹å¦‚ï¼Œâ€œbatch-jobâ€å˜ä¸ºâ€œtag_batch_jobâ€ï¼‰</li>
<li><strong>æ”¯æŒä½¿ç”¨ <code>*</code> çš„é€šé…ç¬¦æ¨¡å¼</strong> (ä¾‹å¦‚ï¼Œâ€œUser-Agent: RooCode/*â€ åŒ¹é… â€œUser-Agent: RooCode/1.0.0â€)</li>
</ul>
<p><strong>ç¤ºä¾‹ä¸é€šé…ç¬¦ï¼š</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">litellm_settings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">callbacks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;prometheus&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">custom_prometheus_tags</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;User-Agent: RooCode/*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;User-Agent: claude-cli/*&quot;</span><br></span></code></pre></div></div>
<p><strong>ç”¨ä¾‹ï¼š</strong></p>
<ul>
<li>ç¯å¢ƒè·Ÿè¸ª (<code>prod</code>, <code>staging</code>, <code>dev</code>)</li>
<li>è¯·æ±‚ç±»å‹åˆ†ç±» (<code>batch-job</code>, <code>user-facing</code>, <code>background</code>)</li>
<li>ç‰¹å¾æ ‡å¿— (<code>new-feature</code>, <code>beta-users</code>)</li>
<li>å›¢é˜Ÿæˆ–æœåŠ¡è¯†åˆ« (<code>team-a</code>, <code>service-xyz</code>)</li>
<li>ç”¨æˆ·ä»£ç†è·Ÿè¸ª - ç”¨äºè·Ÿè¸ª Roo Code, Claude Code, Gemini CLI çš„ä½¿ç”¨æƒ…å†µ (<code>User-Agent: RooCode/*</code>, <code>User-Agent: claude-cli/*</code>, <code>User-Agent: gemini-cli/*</code>)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="é…ç½®æŒ‡æ ‡å’Œæ ‡ç­¾">é…ç½®æŒ‡æ ‡å’Œæ ‡ç­¾<a href="#é…ç½®æŒ‡æ ‡å’Œæ ‡ç­¾" class="hash-link" aria-label="é…ç½®æŒ‡æ ‡å’Œæ ‡ç­¾çš„ç›´æ¥é“¾æ¥" title="é…ç½®æŒ‡æ ‡å’Œæ ‡ç­¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>ä½ å¯ä»¥é€‰æ‹©æ€§åœ°å¯ç”¨ç‰¹å®šçš„æŒ‡æ ‡å¹¶æ§åˆ¶å“ªäº›æ ‡ç­¾è¢«åŒ…å«ä»¥ä¼˜åŒ–æ€§èƒ½å¹¶å‡å°‘åŸºæ•°ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¯ç”¨ç‰¹å®šæŒ‡æ ‡å’Œæ ‡ç­¾">å¯ç”¨ç‰¹å®šæŒ‡æ ‡å’Œæ ‡ç­¾<a href="#å¯ç”¨ç‰¹å®šæŒ‡æ ‡å’Œæ ‡ç­¾" class="hash-link" aria-label="å¯ç”¨ç‰¹å®šæŒ‡æ ‡å’Œæ ‡ç­¾çš„ç›´æ¥é“¾æ¥" title="å¯ç”¨ç‰¹å®šæŒ‡æ ‡å’Œæ ‡ç­¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>é€šè¿‡åœ¨ <code>prometheus_metrics_config</code> ä¸­æŒ‡å®šå®ƒä»¬æ¥é…ç½®è¦å‘å‡ºçš„æŒ‡æ ‡ã€‚æ¯ä¸ªé…ç½®ç»„éœ€è¦ä¸€ä¸ª <code>group</code> åç§°ï¼ˆç”¨äºç»„ç»‡ï¼‰ä»¥åŠè¦å¯ç”¨çš„ä¸€ç³»åˆ— <code>metrics</code>ã€‚ä½ å¯ä»¥å¯é€‰åœ°åŒ…æ‹¬ä¸€ä¸ª <code>include_labels</code> åˆ—è¡¨ä»¥è¿‡æ»¤è¿™äº›æŒ‡æ ‡çš„æ ‡ç­¾ã€‚</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">model_list</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">model_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gpt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">litellm_params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">model</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gpt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">litellm_settings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">callbacks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;prometheus&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">prometheus_metrics_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># é«˜åŸºæ•°æŒ‡æ ‡ï¼Œå¸¦æœ‰æœ€å°‘æ ‡ç­¾</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;proxy_metrics&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">metrics</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;litellm_proxy_total_requests_metric&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;litellm_proxy_failed_requests_metric&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">include_labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hashed_api_key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;requested_model&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;model_group&quot;</span><br></span></code></pre></div></div>
<p>åœ¨å¯åŠ¨ LiteLLM æ—¶ï¼Œå¦‚æœä½ çš„æŒ‡æ ‡é…ç½®æ­£ç¡®ï¼Œåˆ™ä½ åº”è¯¥åœ¨å®¹å™¨æ—¥å¿—ä¸­çœ‹åˆ°ä»¥ä¸‹å†…å®¹</p>
<div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAACCAYAAABhYU3QAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAPElEQVR4nGOwtvX6b2Ht+V/P0Pa/prbFfy0dy/9aIBoNM1jYuv01tXL9a2rl+NfE3O6vkYntX3VNUwwMABDbH9PmMWTYAAAAAElFTkSuQmCC&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="640" height="155"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/prom_config.9f6c9db.640.png" srcset="/assets/ideal-img/prom_config.9f6c9db.640.png 640w,/assets/ideal-img/prom_config.b63d830.1920.png 1920w" width="640" height="155"></noscript></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æŒ‰æŒ‡æ ‡è¿‡æ»¤æ ‡ç­¾">æŒ‰æŒ‡æ ‡è¿‡æ»¤æ ‡ç­¾<a href="#æŒ‰æŒ‡æ ‡è¿‡æ»¤æ ‡ç­¾" class="hash-link" aria-label="æŒ‰æŒ‡æ ‡è¿‡æ»¤æ ‡ç­¾çš„ç›´æ¥é“¾æ¥" title="æŒ‰æŒ‡æ ‡è¿‡æ»¤æ ‡ç­¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>æ§åˆ¶æ¯ä¸ªæŒ‡æ ‡åŒ…å«å“ªäº›æ ‡ç­¾ä»¥å‡å°‘åŸºæ•°ï¼š</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">litellm_settings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">callbacks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;prometheus&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">prometheus_metrics_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;token_consumption&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">metrics</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;litellm_input_tokens_metric&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;litellm_output_tokens_metric&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;litellm_total_tokens_metric&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">include_labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;model&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;team&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hashed_api_key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;request_tracking&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">metrics</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;litellm_proxy_total_requests_metric&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">include_labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;status_code&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;requested_model&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="é«˜çº§é…ç½®">é«˜çº§é…ç½®<a href="#é«˜çº§é…ç½®" class="hash-link" aria-label="é«˜çº§é…ç½®çš„ç›´æ¥é“¾æ¥" title="é«˜çº§é…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>ä½ å¯ä»¥åˆ›å»ºå¤šä¸ªå…·æœ‰ä¸åŒæ ‡ç­¾é›†çš„é…ç½®ç»„ï¼š</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">litellm_settings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">callbacks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;prometheus&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">prometheus_metrics_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># é«˜åŸºæ•°æŒ‡æ ‡ï¼Œå¸¦æœ‰æœ€å°‘æ ‡ç­¾</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;deployment_health&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">metrics</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;litellm_deployment_success_responses&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;litellm_deployment_failure_responses&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">include_labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;api_provider&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;requested_model&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># é¢„ç®—è·Ÿè¸ªæŒ‡æ ‡ï¼Œå¸¦æœ‰å®Œæ•´æ ‡ç­¾é›†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;budget_tracking&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">metrics</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;litellm_remaining_team_budget_metric&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">include_labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;team&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;team_alias&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hashed_api_key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;api_key_alias&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;model&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;end_user&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># æ€§èƒ½æŒ‡æ ‡ï¼Œå¸¦æœ‰æ€§èƒ½å…³æ³¨çš„æ ‡ç­¾</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">group</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;performance&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">metrics</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;litellm_request_total_latency_metric&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;litellm_llm_api_latency_metric&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">include_labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;model&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;api_provider&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;requested_model&quot;</span><br></span></code></pre></div></div>
<p><strong>é…ç½®ç»“æ„ï¼š</strong></p>
<ul>
<li><code>group</code>: ç”¨äºç»„ç»‡ç›¸å…³æŒ‡æ ‡çš„æè¿°æ€§åç§°</li>
<li><code>metrics</code>: è¦åŒ…å«åœ¨è¯¥ç»„ä¸­çš„æŒ‡æ ‡åˆ—è¡¨</li>
<li><code>include_labels</code>: (å¯é€‰) ä¸ºè¿™äº›æŒ‡æ ‡åŒ…æ‹¬çš„æ ‡ç­¾åˆ—è¡¨</li>
</ul>
<p><strong>é»˜è®¤è¡Œä¸º</strong>: å¦‚æœæ²¡æœ‰æŒ‡å®š <code>prometheus_metrics_config</code>ï¼Œæ‰€æœ‰æŒ‡æ ‡å°†ä»¥å…¶é»˜è®¤æ ‡ç­¾å¯ç”¨ï¼ˆå‘åå…¼å®¹ï¼‰ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç›‘æ§ç³»ç»Ÿå¥åº·">ç›‘æ§ç³»ç»Ÿå¥åº·<a href="#ç›‘æ§ç³»ç»Ÿå¥åº·" class="hash-link" aria-label="ç›‘æ§ç³»ç»Ÿå¥åº·çš„ç›´æ¥é“¾æ¥" title="ç›‘æ§ç³»ç»Ÿå¥åº·çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>è¦ç›‘æ§ä¸ LiteLLM ç›¸é‚»çš„æœåŠ¡ï¼ˆRedis / Postgresï¼‰çš„å¥åº·çŠ¶å†µï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">model_list</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">model_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gpt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">litellm_params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">model</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gpt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">4o</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">litellm_settings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">service_callback</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;prometheus_system&quot;</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<table><thead><tr><th>æŒ‡æ ‡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>litellm_redis_latency</code></td><td>Redis è°ƒç”¨çš„ç›´æ–¹å›¾å»¶è¿Ÿ</td></tr><tr><td><code>litellm_redis_fails</code></td><td>å¤±è´¥çš„ Redis è°ƒç”¨æ¬¡æ•°</td></tr><tr><td><code>litellm_self_latency</code></td><td>æˆåŠŸçš„ LiteLLM API è°ƒç”¨çš„ç›´æ–¹å›¾å»¶è¿Ÿ</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="db-äº‹åŠ¡é˜Ÿåˆ—å¥åº·æŒ‡æ ‡">DB äº‹åŠ¡é˜Ÿåˆ—å¥åº·æŒ‡æ ‡<a href="#db-äº‹åŠ¡é˜Ÿåˆ—å¥åº·æŒ‡æ ‡" class="hash-link" aria-label="DB äº‹åŠ¡é˜Ÿåˆ—å¥åº·æŒ‡æ ‡çš„ç›´æ¥é“¾æ¥" title="DB äº‹åŠ¡é˜Ÿåˆ—å¥åº·æŒ‡æ ‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<p>ä½¿ç”¨è¿™äº›æŒ‡æ ‡æ¥ç›‘æ§ DB äº‹åŠ¡é˜Ÿåˆ—çš„å¥åº·çŠ¶å†µã€‚ä¾‹å¦‚ï¼Œç›‘æ§å†…å­˜ç¼“å†²åŒºå’Œ Redis ç¼“å†²åŒºçš„å¤§å°ã€‚</p>
<table><thead><tr><th>æŒ‡æ ‡åç§°</th><th>æè¿°</th><th>å­˜å‚¨ç±»å‹</th></tr></thead><tbody><tr><td><code>litellm_pod_lock_manager_size</code></td><td>è¡¨ç¤ºå“ªä¸ª Pod æ‹¥æœ‰å†™å…¥æ•°æ®åº“æ›´æ–°çš„é”ã€‚</td><td>Redis</td></tr><tr><td><code>litellm_in_memory_daily_spend_update_queue_size</code></td><td>å†…å­˜ä¸­æ¯æ—¥èŠ±è´¹æ›´æ–°é˜Ÿåˆ—ä¸­çš„é¡¹ç›®æ•°é‡ã€‚è¿™äº›æ˜¯æ¯ä¸ªç”¨æˆ·çš„æ±‡æ€»èŠ±è´¹æ—¥å¿—ã€‚</td><td>In-Memory</td></tr><tr><td><code>litellm_redis_daily_spend_update_queue_size</code></td><td>Redis ä¸­æ¯æ—¥èŠ±è´¹æ›´æ–°é˜Ÿåˆ—ä¸­çš„é¡¹ç›®æ•°é‡ã€‚  è¿™äº›æ˜¯æ¯ä¸ªç”¨æˆ·çš„æ±‡æ€»èŠ±è´¹æ—¥å¿—ã€‚</td><td>Redis</td></tr><tr><td><code>litellm_in_memory_spend_update_queue_size</code></td><td>å†…å­˜ä¸­é”®ã€ç”¨æˆ·ã€å›¢é˜Ÿã€å›¢é˜Ÿæˆå‘˜ç­‰çš„æ±‡æ€»èŠ±è´¹å€¼</td><td>In-Memory</td></tr><tr><td><code>litellm_redis_spend_update_queue_size</code></td><td>Redis ä¸­é”®ã€ç”¨æˆ·ã€å›¢é˜Ÿç­‰çš„æ±‡æ€»èŠ±è´¹å€¼</td><td>Redis</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-litellm-ç»´æŠ¤çš„-grafana-ä»ªè¡¨æ¿">ğŸ”¥ LiteLLM ç»´æŠ¤çš„ Grafana ä»ªè¡¨æ¿<a href="#-litellm-ç»´æŠ¤çš„-grafana-ä»ªè¡¨æ¿" class="hash-link" aria-label="ğŸ”¥ LiteLLM ç»´æŠ¤çš„ Grafana ä»ªè¡¨æ¿çš„ç›´æ¥é“¾æ¥" title="ğŸ”¥ LiteLLM ç»´æŠ¤çš„ Grafana ä»ªè¡¨æ¿çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>é“¾æ¥åˆ°ç”± LiteLLM ç»´æŠ¤çš„ Grafana ä»ªè¡¨æ¿</p>
<p><a href="https://github.com/BerriAI/litellm/tree/main/cookbook/litellm_proxy_server/grafana_dashboard" target="_blank" rel="noopener noreferrer">https://github.com/BerriAI/litellm/tree/main/cookbook/litellm_proxy_server/grafana_dashboard</a></p>
<p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ LiteLLM Grafana ä»ªè¡¨æ¿å¯ä»¥ç›‘æ§çš„æŒ‡æ ‡æˆªå›¾</p>
<div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAnElEQVR4nDXMORICIRBAUW7gMOMAzdJsLlXe/zYG5hYEQ2Ii05ZYBi/8n2kTNvTnJpVrx1UPCrAp8E0Cbqswr2XVD2Z9IuczaRt+XCQMmSwmMi7uFiNJwMLQn3q+3HrI125c7NqGbjB2h7GDwbe2noS0T/a9jBrTOILxNC9q4LPc+SyJc1GYMqE4TFW7WEH7qgDrxMVfOUyiTVzcP6czP9KvqQ2XAAAAAElFTkSuQmCC&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="640" height="322"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/grafana_1.f82d883.640.png" srcset="/assets/ideal-img/grafana_1.f82d883.640.png 640w,/assets/ideal-img/grafana_1.bef38f5.1920.png 1920w" width="640" height="322"></noscript></div>
<div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAACCAYAAABhYU3QAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAUElEQVR4nC3D2w2AIAwAQKeQgtAHQkncfxRnMNovFyD1x0tuYdGZcfcVsodYPG7kJOoxkQcoExJ6gHwthdqN3I1E/8NqP4xYjWU8XMeL1M4PIEMaNiLoAU8AAAAASUVORK5CYII=&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="640" height="129"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/grafana_2.011ffb8.640.png" srcset="/assets/ideal-img/grafana_2.011ffb8.640.png 640w,/assets/ideal-img/grafana_2.6844861.1920.png 1920w" width="640" height="129"></noscript></div>
<div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAADCAYAAACqPZ51AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAbUlEQVR4nD3IOQ7CMBQFQN8hsf0XPy84Qty/5hBImCI9F0DIaQAZkYJimjGK8ij1tInmPlvdeYndefTJyXN2+posrwa5vpGXEeLhryzHgbTfB6kO0nQ3JLgoyo0kth/HoUlIjTg0YlyJ42q9nr8MbyVJ8RnrwAAAAABJRU5ErkJggg==&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="640" height="168"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/grafana_3.c6811f0.640.png" srcset="/assets/ideal-img/grafana_3.c6811f0.640.png 640w,/assets/ideal-img/grafana_3.173da82.1920.png 1920w" width="640" height="168"></noscript></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å·²å¼ƒç”¨çš„æŒ‡æ ‡">å·²å¼ƒç”¨çš„æŒ‡æ ‡<a href="#å·²å¼ƒç”¨çš„æŒ‡æ ‡" class="hash-link" aria-label="å·²å¼ƒç”¨çš„æŒ‡æ ‡çš„ç›´æ¥é“¾æ¥" title="å·²å¼ƒç”¨çš„æŒ‡æ ‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<table><thead><tr><th>æŒ‡æ ‡åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>litellm_llm_api_failed_requests_metric</code></td><td><strong>å·²å¼ƒç”¨</strong> è¯·ä½¿ç”¨ <code>litellm_proxy_failed_requests_metric</code></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="åœ¨-metrics-ç«¯ç‚¹ä¸Šæ·»åŠ èº«ä»½éªŒè¯">åœ¨ <code>/metrics</code> ç«¯ç‚¹ä¸Šæ·»åŠ èº«ä»½éªŒè¯<a href="#åœ¨-metrics-ç«¯ç‚¹ä¸Šæ·»åŠ èº«ä»½éªŒè¯" class="hash-link" aria-label="åœ¨-metrics-ç«¯ç‚¹ä¸Šæ·»åŠ èº«ä»½éªŒè¯çš„ç›´æ¥é“¾æ¥" title="åœ¨-metrics-ç«¯ç‚¹ä¸Šæ·»åŠ èº«ä»½éªŒè¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>/metrics</code> ç«¯ç‚¹æ˜¯æœªç»è¿‡èº«ä»½éªŒè¯çš„ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡åœ¨é…ç½®ä¸­è®¾ç½®ä»¥ä¸‹å†…å®¹æ¥é€‰æ‹©æ€§åœ°åœ¨ <code>/metrics</code> ç«¯ç‚¹å¯ç”¨ LiteLLM èº«ä»½éªŒè¯ï¼š</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">litellm_settings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">require_auth_for_metrics_endpoint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¸¸è§é—®é¢˜">å¸¸è§é—®é¢˜<a href="#å¸¸è§é—®é¢˜" class="hash-link" aria-label="å¸¸è§é—®é¢˜çš„ç›´æ¥é“¾æ¥" title="å¸¸è§é—®é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="_created-vs-_total-æŒ‡æ ‡æ˜¯ä»€ä¹ˆ"><code>_created</code> vs. <code>_total</code> æŒ‡æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ<a href="#_created-vs-_total-æŒ‡æ ‡æ˜¯ä»€ä¹ˆ" class="hash-link" aria-label="_created-vs-_total-æŒ‡æ ‡æ˜¯ä»€ä¹ˆçš„ç›´æ¥é“¾æ¥" title="_created-vs-_total-æŒ‡æ ‡æ˜¯ä»€ä¹ˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<ul>
<li><code>_created</code> æŒ‡æ ‡æ˜¯åœ¨ä»£ç†å¯åŠ¨æ—¶åˆ›å»ºçš„ã€‚</li>
<li><code>_total</code> æŒ‡æ ‡æ˜¯æ¯æ¬¡è¯·æ±‚éƒ½ä¼šé€’å¢çš„ã€‚</li>
</ul>
<p>ä½ åº”è¯¥ä½¿ç”¨ <code>_total</code> æŒ‡æ ‡æ¥è¿›è¡Œè®¡æ•°ç›®çš„</p>
<pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"></code></pre></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="æ–‡ä»¶é€‰é¡¹å¡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/proxy/pagerduty"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">PagerDuty è­¦æŠ¥</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/proxy/litellm_prompt_management"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">LiteLLM AI Gateway Prompt Management</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#å¿«é€Ÿå…¥é—¨" class="table-of-contents__link toc-highlight">å¿«é€Ÿå…¥é—¨</a><ul><li><a href="#å¤šä¸ª-worker" class="table-of-contents__link toc-highlight">å¤šä¸ª Worker</a></li></ul></li><li><a href="#è™šæ‹Ÿå¯†é’¥å›¢é˜Ÿå†…éƒ¨ç”¨æˆ·" class="table-of-contents__link toc-highlight">è™šæ‹Ÿå¯†é’¥ã€å›¢é˜Ÿã€å†…éƒ¨ç”¨æˆ·</a><ul><li><a href="#å›¢é˜Ÿ---é¢„ç®—" class="table-of-contents__link toc-highlight">å›¢é˜Ÿ - é¢„ç®—</a></li><li><a href="#è™šæ‹Ÿå¯†é’¥---é¢„ç®—" class="table-of-contents__link toc-highlight">è™šæ‹Ÿå¯†é’¥ - é¢„ç®—</a></li><li><a href="#è™šæ‹Ÿå¯†é’¥---é€Ÿç‡é™åˆ¶" class="table-of-contents__link toc-highlight">è™šæ‹Ÿå¯†é’¥ - é€Ÿç‡é™åˆ¶</a></li><li><a href="#åˆå§‹åŒ–é¢„ç®—æŒ‡æ ‡" class="table-of-contents__link toc-highlight">åˆå§‹åŒ–é¢„ç®—æŒ‡æ ‡</a></li></ul></li><li><a href="#ä»£ç†çº§åˆ«è·Ÿè¸ªæŒ‡æ ‡" class="table-of-contents__link toc-highlight">ä»£ç†çº§åˆ«è·Ÿè¸ªæŒ‡æ ‡</a><ul><li><a href="#å›è°ƒæ—¥å¿—è®°å½•æŒ‡æ ‡" class="table-of-contents__link toc-highlight">å›è°ƒæ—¥å¿—è®°å½•æŒ‡æ ‡</a></li></ul></li><li><a href="#llm-æä¾›å•†æŒ‡æ ‡" class="table-of-contents__link toc-highlight">LLM æä¾›å•†æŒ‡æ ‡</a><ul><li><a href="#è·Ÿè¸ªçš„æ ‡ç­¾" class="table-of-contents__link toc-highlight">è·Ÿè¸ªçš„æ ‡ç­¾</a></li><li><a href="#æˆåŠŸä¸å¤±è´¥" class="table-of-contents__link toc-highlight">æˆåŠŸä¸å¤±è´¥</a></li><li><a href="#å‰©ä½™è¯·æ±‚å’Œä»¤ç‰Œ" class="table-of-contents__link toc-highlight">å‰©ä½™è¯·æ±‚å’Œä»¤ç‰Œ</a></li><li><a href="#éƒ¨ç½²çŠ¶æ€" class="table-of-contents__link toc-highlight">éƒ¨ç½²çŠ¶æ€</a></li></ul></li><li><a href="#è¯·æ±‚è®¡æ•°æŒ‡æ ‡" class="table-of-contents__link toc-highlight">è¯·æ±‚è®¡æ•°æŒ‡æ ‡</a></li><li><a href="#è¯·æ±‚å»¶è¿ŸæŒ‡æ ‡" class="table-of-contents__link toc-highlight">è¯·æ±‚å»¶è¿ŸæŒ‡æ ‡</a></li><li><a href="#åœ¨-prometheus-ä¸­è·Ÿè¸ª-end_user" class="table-of-contents__link toc-highlight">åœ¨ Prometheus ä¸­è·Ÿè¸ª <code>end_user</code></a></li><li><a href="#beta-è‡ªå®šä¹‰æŒ‡æ ‡" class="table-of-contents__link toc-highlight">[BETA] è‡ªå®šä¹‰æŒ‡æ ‡</a><ul><li><a href="#è‡ªå®šä¹‰å…ƒæ•°æ®æ ‡ç­¾" class="table-of-contents__link toc-highlight">è‡ªå®šä¹‰å…ƒæ•°æ®æ ‡ç­¾</a></li><li><a href="#è‡ªå®šä¹‰æ ‡ç­¾" class="table-of-contents__link toc-highlight">è‡ªå®šä¹‰æ ‡ç­¾</a></li></ul></li><li><a href="#é…ç½®æŒ‡æ ‡å’Œæ ‡ç­¾" class="table-of-contents__link toc-highlight">é…ç½®æŒ‡æ ‡å’Œæ ‡ç­¾</a><ul><li><a href="#å¯ç”¨ç‰¹å®šæŒ‡æ ‡å’Œæ ‡ç­¾" class="table-of-contents__link toc-highlight">å¯ç”¨ç‰¹å®šæŒ‡æ ‡å’Œæ ‡ç­¾</a></li><li><a href="#æŒ‰æŒ‡æ ‡è¿‡æ»¤æ ‡ç­¾" class="table-of-contents__link toc-highlight">æŒ‰æŒ‡æ ‡è¿‡æ»¤æ ‡ç­¾</a></li><li><a href="#é«˜çº§é…ç½®" class="table-of-contents__link toc-highlight">é«˜çº§é…ç½®</a></li></ul></li><li><a href="#ç›‘æ§ç³»ç»Ÿå¥åº·" class="table-of-contents__link toc-highlight">ç›‘æ§ç³»ç»Ÿå¥åº·</a></li><li><a href="#-litellm-ç»´æŠ¤çš„-grafana-ä»ªè¡¨æ¿" class="table-of-contents__link toc-highlight">ğŸ”¥ LiteLLM ç»´æŠ¤çš„ Grafana ä»ªè¡¨æ¿</a></li><li><a href="#å·²å¼ƒç”¨çš„æŒ‡æ ‡" class="table-of-contents__link toc-highlight">å·²å¼ƒç”¨çš„æŒ‡æ ‡</a></li><li><a href="#åœ¨-metrics-ç«¯ç‚¹ä¸Šæ·»åŠ èº«ä»½éªŒè¯" class="table-of-contents__link toc-highlight">åœ¨ <code>/metrics</code> ç«¯ç‚¹ä¸Šæ·»åŠ èº«ä»½éªŒè¯</a></li><li><a href="#å¸¸è§é—®é¢˜" class="table-of-contents__link toc-highlight">å¸¸è§é—®é¢˜</a><ul><li><a href="#_created-vs-_total-æŒ‡æ ‡æ˜¯ä»€ä¹ˆ" class="table-of-contents__link toc-highlight"><code>_created</code> vs. <code>_total</code> æŒ‡æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.litellm.ai/docs/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Getting Started</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/wuPM9dRgDw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/LiteLLM" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/BerriAI/litellm/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2026 liteLLM</div></div></div></footer><div id="inkeep-shadowradix-_R_p_" style="display:contents"></div><span></span></div>
</body>
</html>