<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorials/presidio_pii_masking" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">ä½¿ç”¨ Microsoft Presidio å’Œ LiteLLM Gateway å®ç° PII æ©ç  - å®Œæ•´æ•™ç¨‹ | liteLLM</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.litellm.ai/img/docusaurus-social-card.png"><meta data-rh="true" name="twitter:image" content="https://docs.litellm.ai/img/docusaurus-social-card.png"><meta data-rh="true" property="og:url" content="https://docs.litellm.ai/docs/tutorials/presidio_pii_masking"><meta data-rh="true" property="og:locale" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ä½¿ç”¨ Microsoft Presidio å’Œ LiteLLM Gateway å®ç° PII æ©ç  - å®Œæ•´æ•™ç¨‹ | liteLLM"><meta data-rh="true" name="description" content="æœ¬æ•™ç¨‹å°†å¼•å¯¼æ‚¨è®¾ç½®ä½¿ç”¨ Microsoft Presidio å’Œ LiteLLM Gateway çš„ PIIï¼ˆä¸ªäººå¯è¯†åˆ«ä¿¡æ¯ï¼‰æ©ç ã€‚å®Œæˆæ­¤æ•™ç¨‹åï¼Œæ‚¨å°†æ‹¥æœ‰ä¸€ä¸ªç”Ÿäº§å°±ç»ªçš„è®¾ç½®ï¼Œå¯ä»¥è‡ªåŠ¨æ£€æµ‹å’Œæ©ç  LLM è¯·æ±‚ä¸­çš„æ•æ„Ÿä¿¡æ¯ã€‚"><meta data-rh="true" property="og:description" content="æœ¬æ•™ç¨‹å°†å¼•å¯¼æ‚¨è®¾ç½®ä½¿ç”¨ Microsoft Presidio å’Œ LiteLLM Gateway çš„ PIIï¼ˆä¸ªäººå¯è¯†åˆ«ä¿¡æ¯ï¼‰æ©ç ã€‚å®Œæˆæ­¤æ•™ç¨‹åï¼Œæ‚¨å°†æ‹¥æœ‰ä¸€ä¸ªç”Ÿäº§å°±ç»ªçš„è®¾ç½®ï¼Œå¯ä»¥è‡ªåŠ¨æ£€æµ‹å’Œæ©ç  LLM è¯·æ±‚ä¸­çš„æ•æ„Ÿä¿¡æ¯ã€‚"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.litellm.ai/docs/tutorials/presidio_pii_masking"><link data-rh="true" rel="alternate" href="https://docs.litellm.ai/docs/tutorials/presidio_pii_masking" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://docs.litellm.ai/docs/tutorials/presidio_pii_masking" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ä½¿ç”¨ Microsoft Presidio å’Œ LiteLLM Gateway å®ç° PII æ©ç  - å®Œæ•´æ•™ç¨‹","item":"https://docs.litellm.ai/docs/tutorials/presidio_pii_masking"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K7K215ZVNC"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-K7K215ZVNC",{anonymize_ip:!0})</script>





<link rel="alternate" type="application/rss+xml" href="/release_notes/rss.xml" title="liteLLM RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/release_notes/atom.xml" title="liteLLM Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="liteLLM RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="liteLLM Atom Feed">
<script>window.$crisp=[],window.CRISP_WEBSITE_ID="be07a4d6-dba0-4df7-961d-9302c86b7ebc",d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)</script>

<script async src="https://www.feedbackrocket.io/sdk/v1.2.js" data-fr-id="GQwepB0f0L-x_ZH63kR_V" data-fr-theme="dynamic"></script><link rel="stylesheet" href="/assets/css/styles.ab6b1187.css">
<script src="/assets/js/runtime~main.e2ac0700.js" defer="defer"></script>
<script src="/assets/js/main.cc386e68.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav aria-label="ä¸»å¯¼èˆª" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">ğŸš… LiteLLM</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" sidebarid="integrationsSidebar" href="/docs/integrations">Integrations</a><a class="navbar__item navbar__link" sidebarid="tutorialSidebar" href="/docs/enterprise">Enterprise</a><a class="navbar__item navbar__link" href="/release_notes">Release Notes</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://models.litellm.ai/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">ğŸ’¸ LLM Model Cost Map<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/BerriAI/litellm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://www.litellm.ai/support" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Slack/Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºsystem modeï¼‰"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div id="inkeep-shadowradix-_R_7j5a5_" style="display:contents"></div><span></span></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="æ–‡æ¡£ä¾§è¾¹æ " class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/#litellm-python-sdk">LiteLLM Python SDK</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/simple_proxy">LiteLLM AI Gateway (Proxy)</a><button aria-label="å±•å¼€ä¾§è¾¹æ åˆ†ç±» &#x27;LiteLLM AI Gateway (Proxy)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/supported_endpoints">Supported Endpoints</a><button aria-label="å±•å¼€ä¾§è¾¹æ åˆ†ç±» &#x27;Supported Endpoints&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/providers">Supported Models &amp; Providers</a><button aria-label="å±•å¼€ä¾§è¾¹æ åˆ†ç±» &#x27;Supported Models &amp; Providers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/budget_manager">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/routing-load-balancing">Routing, Loadbalancing &amp; Fallbacks</a><button aria-label="å±•å¼€ä¾§è¾¹æ åˆ†ç±» &#x27;Routing, Loadbalancing &amp; Fallbacks&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/benchmarks">Load Testing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/tutorials/openweb_ui">Tutorials</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/openweb_ui">Open WebUI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/openai_codex">OpenAI Codex</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/litellm_gemini_cli">Gemini CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/litellm_qwen_code_cli">Qwen Code CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/anthropic_file_usage">ä½¿ç”¨ LiteLLM ä»£ç†ä¸ Anthropic æ–‡ä»¶ API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/default_team_self_serve">default_team_self_serve</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/msft_sso">Microsoft SSO: åŒæ­¥ç»„å’Œæˆå‘˜è‡³LiteLLM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/prompt_caching">è‡ªåŠ¨æ³¨å…¥æç¤ºç¼“å­˜æ£€æŸ¥ç‚¹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/tag_management">[Beta] Routing based on request metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/litellm_proxy_aporia">Aporia å®ˆé—¨å‘˜ä¸ LiteLLM ç½‘å…³ç»“åˆä½¿ç”¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorials/presidio_pii_masking">ä½¿ç”¨ Microsoft Presidio å’Œ LiteLLM Gateway å®ç° PII æ©ç  - å®Œæ•´æ•™ç¨‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/elasticsearch_logging">ä½¿ç”¨ LiteLLM å°†æ—¥å¿—å‘é€åˆ° Elasticsearch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/gemini_realtime_with_audio">ä½¿ç”¨éŸ³é¢‘è¾“å…¥/è¾“å‡ºè°ƒç”¨ Gemini å®æ—¶ API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/claude_responses_api">Claude Code</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/tutorials/google_adk">LiteLLM Python SDK Tutorials</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/extras/contributing_code">Contributing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/sdk_custom_pricing">Extras</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/troubleshoot">æ”¯æŒä¸åˆ›å§‹äººäº¤æµ</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="é¡µé¢è·¯å¾„"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="ä¸»é¡µé¢" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tutorials</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">ä½¿ç”¨ Microsoft Presidio å’Œ LiteLLM Gateway å®ç° PII æ©ç  - å®Œæ•´æ•™ç¨‹</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><header><h1>ä½¿ç”¨ Microsoft Presidio å’Œ LiteLLM Gateway å®ç° PII æ©ç  - å®Œæ•´æ•™ç¨‹</h1></header>
<p>æœ¬æ•™ç¨‹å°†å¼•å¯¼æ‚¨è®¾ç½®ä½¿ç”¨ Microsoft Presidio å’Œ LiteLLM Gateway çš„ PIIï¼ˆä¸ªäººå¯è¯†åˆ«ä¿¡æ¯ï¼‰æ©ç ã€‚å®Œæˆæ­¤æ•™ç¨‹åï¼Œæ‚¨å°†æ‹¥æœ‰ä¸€ä¸ªç”Ÿäº§å°±ç»ªçš„è®¾ç½®ï¼Œå¯ä»¥è‡ªåŠ¨æ£€æµ‹å’Œæ©ç  LLM è¯·æ±‚ä¸­çš„æ•æ„Ÿä¿¡æ¯ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½ å°†å­¦åˆ°ä»€ä¹ˆ">ä½ å°†å­¦åˆ°ä»€ä¹ˆ<a href="#ä½ å°†å­¦åˆ°ä»€ä¹ˆ" class="hash-link" aria-label="ä½ å°†å­¦åˆ°ä»€ä¹ˆçš„ç›´æ¥é“¾æ¥" title="ä½ å°†å­¦åˆ°ä»€ä¹ˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<ul>
<li>éƒ¨ç½²ç”¨äº PII æ£€æµ‹çš„ Presidio å®¹å™¨</li>
<li>é…ç½® LiteLLM è‡ªåŠ¨æ©ç æ•æ„Ÿæ•°æ®</li>
<li>ä½¿ç”¨çœŸå®ç¤ºä¾‹æµ‹è¯• PII æ©ç </li>
<li>ç›‘æ§å’Œè¿½è¸ªé˜²æŠ¤æ æ‰§è¡Œæƒ…å†µ</li>
<li>é…ç½®é«˜çº§åŠŸèƒ½ï¼Œå¦‚è¾“å‡ºè§£æå’Œè¯­è¨€æ”¯æŒ</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸ºä»€ä¹ˆä½¿ç”¨-pii-æ©ç ">ä¸ºä»€ä¹ˆä½¿ç”¨ PII æ©ç ï¼Ÿ<a href="#ä¸ºä»€ä¹ˆä½¿ç”¨-pii-æ©ç " class="hash-link" aria-label="ä¸ºä»€ä¹ˆä½¿ç”¨ PII æ©ç ï¼Ÿçš„ç›´æ¥é“¾æ¥" title="ä¸ºä»€ä¹ˆä½¿ç”¨ PII æ©ç ï¼Ÿçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>åœ¨å¤„ç† LLM æ—¶ï¼Œç”¨æˆ·å¯èƒ½ä¼šæ— æ„ä¸­åˆ†äº«ä»¥ä¸‹ç±»å‹çš„æ•æ„Ÿä¿¡æ¯ï¼š</p>
<ul>
<li>ä¿¡ç”¨å¡å·ç </li>
<li>ç”µå­é‚®ä»¶åœ°å€</li>
<li>æ‰‹æœºå·ç </li>
<li>ç¤¾ä¼šå®‰å…¨å·ç </li>
<li>åŒ»ç–—ä¿¡æ¯ï¼ˆPHIï¼‰</li>
<li>ä¸ªäººå§“åå’Œåœ°å€</li>
</ul>
<p>PII æ©ç ä¼šåœ¨æ•°æ®åˆ°è¾¾ LLM ä¹‹å‰è‡ªåŠ¨æ£€æµ‹å¹¶éšè—è¿™äº›ä¿¡æ¯ï¼Œä¿æŠ¤ç”¨æˆ·éšç§ï¼Œå¹¶å¸®åŠ©æ‚¨éµå®ˆ GDPRã€HIPAA å’Œ CCPA ç­‰æ³•è§„ã€‚</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…ˆå†³æ¡ä»¶">å…ˆå†³æ¡ä»¶<a href="#å…ˆå†³æ¡ä»¶" class="hash-link" aria-label="å…ˆå†³æ¡ä»¶çš„ç›´æ¥é“¾æ¥" title="å…ˆå†³æ¡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>åœ¨å¼€å§‹æœ¬æ•™ç¨‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²å®‰è£…ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>æ‚¨çš„æœºå™¨ä¸Šå·²å®‰è£… Docker</li>
<li>LiteLLM API å¯†é’¥æˆ– OpenAI API å¯†é’¥ç”¨äºæµ‹è¯•</li>
<li>åŸºç¡€äº†è§£ YAML é…ç½®</li>
<li><code>curl</code> æˆ–å…¶ä»– HTTP å®¢æˆ·ç«¯è¿›è¡Œæµ‹è¯•</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬ä¸€éƒ¨åˆ†éƒ¨ç½²-presidio-å®¹å™¨">ç¬¬ä¸€éƒ¨åˆ†ï¼šéƒ¨ç½² Presidio å®¹å™¨<a href="#ç¬¬ä¸€éƒ¨åˆ†éƒ¨ç½²-presidio-å®¹å™¨" class="hash-link" aria-label="ç¬¬ä¸€éƒ¨åˆ†ï¼šéƒ¨ç½² Presidio å®¹å™¨çš„ç›´æ¥é“¾æ¥" title="ç¬¬ä¸€éƒ¨åˆ†ï¼šéƒ¨ç½² Presidio å®¹å™¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>Presidio ç”±ä¸¤ä¸ªä¸»è¦æœåŠ¡ç»„æˆï¼š</p>
<ol>
<li><strong>Presidio åˆ†æå™¨</strong>ï¼šæ£€æµ‹æ–‡æœ¬ä¸­çš„ PII</li>
<li><strong>Presidio æ©ç å™¨</strong>ï¼šæ©ç æˆ–åˆ é™¤æ£€æµ‹åˆ°çš„ PII</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ­¥éª¤-11-ä½¿ç”¨-docker-éƒ¨ç½²">æ­¥éª¤ 1.1: ä½¿ç”¨ Docker éƒ¨ç½²<a href="#æ­¥éª¤-11-ä½¿ç”¨-docker-éƒ¨ç½²" class="hash-link" aria-label="æ­¥éª¤ 1.1: ä½¿ç”¨ Docker éƒ¨ç½²çš„ç›´æ¥é“¾æ¥" title="æ­¥éª¤ 1.1: ä½¿ç”¨ Docker éƒ¨ç½²çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>åˆ›å»ºä¸€ä¸ª <code>docker-compose.yml</code> æ–‡ä»¶ç”¨äº Presidioï¼š</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3.8&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">presidio-analyzer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mcr.microsoft.com/presidio</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">analyzer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5002:5002&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> GRPC_PORT=5001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> presidio</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">network</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">presidio-anonymizer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mcr.microsoft.com/presidio</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">anonymizer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5001:5001&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> presidio</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">network</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">presidio-network</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">driver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> bridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">### æ­¥éª¤ 1.2: å¯åŠ¨å®¹å™¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">compose up </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">d</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ­¥éª¤-13-éªŒè¯-presidio-æ˜¯å¦è¿è¡Œ">æ­¥éª¤ 1.3: éªŒè¯ Presidio æ˜¯å¦è¿è¡Œ<a href="#æ­¥éª¤-13-éªŒè¯-presidio-æ˜¯å¦è¿è¡Œ" class="hash-link" aria-label="æ­¥éª¤ 1.3: éªŒè¯ Presidio æ˜¯å¦è¿è¡Œçš„ç›´æ¥é“¾æ¥" title="æ­¥éª¤ 1.3: éªŒè¯ Presidio æ˜¯å¦è¿è¡Œçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>æµ‹è¯•åˆ†æå™¨ç«¯ç‚¹ï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST http://localhost:5002/analyze \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;text&quot;: &quot;My email is john.doe@example.com&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;language&quot;: &quot;en&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }&#x27;</span><br></span></code></pre></div></div>
<p>æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„å“åº”ï¼š</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;entity_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;EMAIL_ADDRESS&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;start&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;end&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">33</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;score&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<p>âœ… <strong>æ£€æŸ¥ç‚¹</strong>ï¼šæ‚¨çš„ Presidio å®¹å™¨ç°åœ¨å·²è¿è¡Œå¹¶å‡†å¤‡å°±ç»ªï¼</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬äºŒéƒ¨åˆ†é…ç½®-litellm-gateway">ç¬¬äºŒéƒ¨åˆ†ï¼šé…ç½® LiteLLM Gateway<a href="#ç¬¬äºŒéƒ¨åˆ†é…ç½®-litellm-gateway" class="hash-link" aria-label="ç¬¬äºŒéƒ¨åˆ†ï¼šé…ç½® LiteLLM Gatewayçš„ç›´æ¥é“¾æ¥" title="ç¬¬äºŒéƒ¨åˆ†ï¼šé…ç½® LiteLLM Gatewayçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬é…ç½® LiteLLM ä½¿ç”¨ Presidio è¿›è¡Œè‡ªåŠ¨ PII æ©ç ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ­¥éª¤-21-åˆ›å»º-litellm-é…ç½®">æ­¥éª¤ 2.1: åˆ›å»º LiteLLM é…ç½®<a href="#æ­¥éª¤-21-åˆ›å»º-litellm-é…ç½®" class="hash-link" aria-label="æ­¥éª¤ 2.1: åˆ›å»º LiteLLM é…ç½®çš„ç›´æ¥é“¾æ¥" title="æ­¥éª¤ 2.1: åˆ›å»º LiteLLM é…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>åˆ›å»ºä¸€ä¸ª <code>config.yaml</code> æ–‡ä»¶ï¼š</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">model_list</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">model_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gpt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">3.5</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">turbo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">litellm_params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">model</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> openai/gpt</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">3.5</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">turbo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">api_key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> os.environ/OPENAI_API_KEY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">guardrails</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">guardrail_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;presidio-pii-guard&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">litellm_params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">guardrail</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> presidio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;pre_call&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># åœ¨è°ƒç”¨ LLM å‰è¿è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">presidio_score_thresholds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># å¯é€‰çš„æ£€æµ‹ç½®ä¿¡åº¦é˜ˆå€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">CREDIT_CARD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">EMAIL_ADDRESS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">pii_entities_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">CREDIT_CARD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">EMAIL_ADDRESS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">PHONE_NUMBER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">PERSON</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">US_SSN</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ­¥éª¤-22-è®¾ç½®ç¯å¢ƒå˜é‡">æ­¥éª¤ 2.2: è®¾ç½®ç¯å¢ƒå˜é‡<a href="#æ­¥éª¤-22-è®¾ç½®ç¯å¢ƒå˜é‡" class="hash-link" aria-label="æ­¥éª¤ 2.2: è®¾ç½®ç¯å¢ƒå˜é‡çš„ç›´æ¥é“¾æ¥" title="æ­¥éª¤ 2.2: è®¾ç½®ç¯å¢ƒå˜é‡çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export OPENAI_API_KEY=&quot;your-openai-key&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PRESIDIO_ANALYZER_API_BASE=&quot;http://localhost:5002&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export PRESIDIO_ANONYMIZER_API_BASE=&quot;http://localhost:5001&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ­¥éª¤-23-å¯åŠ¨-litellm-gateway">æ­¥éª¤ 2.3: å¯åŠ¨ LiteLLM Gateway<a href="#æ­¥éª¤-23-å¯åŠ¨-litellm-gateway" class="hash-link" aria-label="æ­¥éª¤ 2.3: å¯åŠ¨ LiteLLM Gatewayçš„ç›´æ¥é“¾æ¥" title="æ­¥éª¤ 2.3: å¯åŠ¨ LiteLLM Gatewayçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">litellm --config config.yaml --port 4000 --detailed_debug</span><br></span></code></pre></div></div>
<p>æ‚¨åº”è¯¥ä¼šçœ‹åˆ°è¾“å‡ºæŒ‡ç¤ºé˜²æŠ¤æ å·²åŠ è½½ï¼š</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Loaded guardrails: [&#x27;presidio-pii-guard&#x27;]</span><br></span></code></pre></div></div>
<p>âœ… <strong>æ£€æŸ¥ç‚¹</strong>ï¼šLiteLLM Gateway æ­£åœ¨è¿è¡Œå¹¶å¯ç”¨äº† PII æ©ç ï¼</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬ä¸‰éƒ¨åˆ†æµ‹è¯•-pii-æ©ç ">ç¬¬ä¸‰éƒ¨åˆ†ï¼šæµ‹è¯• PII æ©ç <a href="#ç¬¬ä¸‰éƒ¨åˆ†æµ‹è¯•-pii-æ©ç " class="hash-link" aria-label="ç¬¬ä¸‰éƒ¨åˆ†ï¼šæµ‹è¯• PII æ©ç çš„ç›´æ¥é“¾æ¥" title="ç¬¬ä¸‰éƒ¨åˆ†ï¼šæµ‹è¯• PII æ©ç çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>è®©æˆ‘ä»¬ä½¿ç”¨å„ç§æ•æ„Ÿæ•°æ®ç±»å‹æ¥æµ‹è¯• PII æ©ç ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æµ‹è¯•-1-åŸºæœ¬-pii-æ£€æµ‹">æµ‹è¯• 1: åŸºæœ¬ PII æ£€æµ‹<a href="#æµ‹è¯•-1-åŸºæœ¬-pii-æ£€æµ‹" class="hash-link" aria-label="æµ‹è¯• 1: åŸºæœ¬ PII æ£€æµ‹çš„ç›´æ¥é“¾æ¥" title="æµ‹è¯• 1: åŸºæœ¬ PII æ£€æµ‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">åŒ…å« PII çš„è¯·æ±‚</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">LLM æ”¶åˆ°çš„å†…å®¹</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">å“åº”</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST http://localhost:4000/chat/completions \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;Authorization: Bearer sk-1234&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;model&quot;: &quot;gpt-3.5-turbo&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;messages&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;role&quot;: &quot;user&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;content&quot;: &quot;My name is John Smith, my email is john.smith@example.com, and my credit card is 4111-1111-1111-1111&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;guardrails&quot;: [&quot;presidio-pii-guard&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }&#x27;</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>LLM å°†æ”¶åˆ°ä»¥ä¸‹å†…å®¹ï¼š</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">My name is &lt;PERSON&gt;, my email is &lt;EMAIL_ADDRESS&gt;, and my credit card is &lt;CREDIT_CARD&gt;</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;chatcmpl-123abc&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;choices&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;message&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;content&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;I can see you&#x27;ve provided some information. However, I noticed some sensitive data placeholders. For security reasons, I recommend not sharing actual personal information like credit card numbers.&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;role&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;assistant&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;finish_reason&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;stop&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;model&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;gpt-3.5-turbo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æµ‹è¯•-2-åŒ»ç–—ä¿¡æ¯phi">æµ‹è¯• 2: åŒ»ç–—ä¿¡æ¯ï¼ˆPHIï¼‰<a href="#æµ‹è¯•-2-åŒ»ç–—ä¿¡æ¯phi" class="hash-link" aria-label="æµ‹è¯• 2: åŒ»ç–—ä¿¡æ¯ï¼ˆPHIï¼‰çš„ç›´æ¥é“¾æ¥" title="æµ‹è¯• 2: åŒ»ç–—ä¿¡æ¯ï¼ˆPHIï¼‰çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST http://localhost:4000/chat/completions \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;Authorization: Bearer sk-1234&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;model&quot;: &quot;gpt-3.5-turbo&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;messages&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;role&quot;: &quot;user&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;content&quot;: &quot;Patient Jane Doe, DOB 01/15/1980, MRN 123456, presents with symptoms of fever.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;guardrails&quot;: [&quot;presidio-pii-guard&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }&#x27;</span><br></span></code></pre></div></div>
<p>æ‚£è€…å§“åå’ŒåŒ»ç–—è®°å½•å·å°†è‡ªåŠ¨è¢«æ©ç ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æµ‹è¯•-3-æ²¡æœ‰-piiæ­£å¸¸è¯·æ±‚">æµ‹è¯• 3: æ²¡æœ‰ PIIï¼ˆæ­£å¸¸è¯·æ±‚ï¼‰<a href="#æµ‹è¯•-3-æ²¡æœ‰-piiæ­£å¸¸è¯·æ±‚" class="hash-link" aria-label="æµ‹è¯• 3: æ²¡æœ‰ PIIï¼ˆæ­£å¸¸è¯·æ±‚ï¼‰çš„ç›´æ¥é“¾æ¥" title="æµ‹è¯• 3: æ²¡æœ‰ PIIï¼ˆæ­£å¸¸è¯·æ±‚ï¼‰çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST http://localhost:4000/chat/completions \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;Authorization: Bearer sk-1234&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;model&quot;: &quot;gpt-3.5-turbo&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;messages&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;role&quot;: &quot;user&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;content&quot;: &quot;What is the capital of France?&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;guardrails&quot;: [&quot;presidio-pii-guard&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }&#x27;</span><br></span></code></pre></div></div>
<p>ç”±äºæœªæ£€æµ‹åˆ° PIIï¼Œæ­¤è¯·æ±‚å°†ä¿æŒä¸å˜ã€‚</p>
<p>âœ… <strong>æ£€æŸ¥ç‚¹</strong>ï¼šæ‚¨å·²æˆåŠŸæµ‹è¯•äº† PII æ©ç ï¼</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬å››éƒ¨åˆ†é«˜çº§é…ç½®">ç¬¬å››éƒ¨åˆ†ï¼šé«˜çº§é…ç½®<a href="#ç¬¬å››éƒ¨åˆ†é«˜çº§é…ç½®" class="hash-link" aria-label="ç¬¬å››éƒ¨åˆ†ï¼šé«˜çº§é…ç½®çš„ç›´æ¥é“¾æ¥" title="ç¬¬å››éƒ¨åˆ†ï¼šé«˜çº§é…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="é˜»æ­¢æ•æ„Ÿå®ä½“">é˜»æ­¢æ•æ„Ÿå®ä½“<a href="#é˜»æ­¢æ•æ„Ÿå®ä½“" class="hash-link" aria-label="é˜»æ­¢æ•æ„Ÿå®ä½“çš„ç›´æ¥é“¾æ¥" title="é˜»æ­¢æ•æ„Ÿå®ä½“çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>è€Œä¸æ˜¯æ©ç ï¼Œæ‚¨å¯ä»¥å®Œå…¨é˜»æ­¢åŒ…å«ç‰¹å®š PII ç±»å‹çš„è¯·æ±‚ï¼š</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">guardrails</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">guardrail_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;presidio-block-guard&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">litellm_params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">guardrail</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> presidio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;pre_call&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">pii_entities_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">US_SSN</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;BLOCK&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># é˜»æ­¢åŒ…å« SSN çš„ä»»ä½•è¯·æ±‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">CREDIT_CARD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;BLOCK&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># é˜»æ­¢ä¿¡ç”¨å¡å·ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">MEDICAL_LICENSE</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;BLOCK&quot;</span><br></span></code></pre></div></div>
<p>æµ‹è¯•é˜»æ­¢è¡Œä¸ºï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST http://localhost:4000/chat/completions \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;Authorization: Bearer sk-1234&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;model&quot;: &quot;gpt-3.5-turbo&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;messages&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;My SSN is 123-45-6789&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;guardrails&quot;: [&quot;presidio-block-guard&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }&#x27;</span><br></span></code></pre></div></div>
<p>é¢„æœŸå“åº”ï¼š</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;error&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;message&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Blocked PII entity detected: US_SSN by Guardrail: presidio-block-guard.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="è¾“å‡ºè§£æè§£æ©">è¾“å‡ºè§£æï¼ˆè§£æ©ï¼‰<a href="#è¾“å‡ºè§£æè§£æ©" class="hash-link" aria-label="è¾“å‡ºè§£æï¼ˆè§£æ©ï¼‰çš„ç›´æ¥é“¾æ¥" title="è¾“å‡ºè§£æï¼ˆè§£æ©ï¼‰çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>å¯ç”¨è¾“å‡ºè§£æï¼Œè‡ªåŠ¨å°† LLM å“åº”ä¸­çš„æ©ç æ ‡è®°æ›¿æ¢ä¸ºåŸå§‹å€¼ï¼š</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">guardrails</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">guardrail_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;presidio-output-parse&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">litellm_params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">guardrail</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> presidio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;pre_call&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">output_parse_pii</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># å¯ç”¨è¾“å‡ºè§£æ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">pii_entities_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">PERSON</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">PHONE_NUMBER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><br></span></code></pre></div></div>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ol>
<li><strong>ç”¨æˆ·è¾“å…¥</strong>ï¼š&quot;Hello, my name is Jane Doe. My number is 555-1234&quot;</li>
<li><strong>LLM æ”¶åˆ°çš„å†…å®¹</strong>ï¼š&quot;Hello, my name is <code>&lt;PERSON&gt;</code>. My number is <code>&lt;PHONE_NUMBER&gt;</code>&quot;</li>
<li><strong>LLM å“åº”</strong>ï¼š&quot;Nice to meet you, <code>&lt;PERSON&gt;</code>!&quot;</li>
<li><strong>ç”¨æˆ·æ”¶åˆ°çš„å†…å®¹</strong>ï¼š&quot;Nice to meet you, Jane Doe!&quot; âœ¨</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¤šè¯­è¨€æ”¯æŒ">å¤šè¯­è¨€æ”¯æŒ<a href="#å¤šè¯­è¨€æ”¯æŒ" class="hash-link" aria-label="å¤šè¯­è¨€æ”¯æŒçš„ç›´æ¥é“¾æ¥" title="å¤šè¯­è¨€æ”¯æŒçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>ä¸ºä¸åŒçš„è¯­è¨€é…ç½® PII æ£€æµ‹ï¼š</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">guardrails</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">guardrail_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;presidio-spanish&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">litellm_params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">guardrail</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> presidio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;pre_call&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">presidio_language</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;es&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># è¥¿ç­ç‰™è¯­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">pii_entities_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">CREDIT_CARD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">PERSON</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">guardrail_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;presidio-german&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">litellm_params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">guardrail</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> presidio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;pre_call&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">presidio_language</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;de&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># å¾·è¯­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">pii_entities_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">CREDIT_CARD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">PERSON</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><br></span></code></pre></div></div>
<p>æ‚¨ä¹Ÿå¯ä»¥åœ¨è¯·æ±‚ä¸­è¦†ç›–è¯­è¨€ï¼š</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST http://localhost:4000/chat/completions \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;Authorization: Bearer sk-1234&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;model&quot;: &quot;gpt-3.5-turbo&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;messages&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Mi tarjeta de crÃ©dito es 4111-1111-1111-1111&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;guardrails&quot;: [&quot;presidio-spanish&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;guardrail_config&quot;: {&quot;language&quot;: &quot;fr&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }&#x27;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ—¥å¿—è®°å½•æ¨¡å¼">æ—¥å¿—è®°å½•æ¨¡å¼<a href="#æ—¥å¿—è®°å½•æ¨¡å¼" class="hash-link" aria-label="æ—¥å¿—è®°å½•æ¨¡å¼çš„ç›´æ¥é“¾æ¥" title="æ—¥å¿—è®°å½•æ¨¡å¼çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>ä»…å¯¹æ—¥å¿—è¿›è¡Œ PII æ©ç ï¼ˆä¸åº”ç”¨äºå®é™… LLM è¯·æ±‚ï¼‰ï¼š</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">guardrails</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">guardrail_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;presidio-logging&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">litellm_params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">guardrail</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> presidio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;logging_only&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ä»…åœ¨æ—¥å¿—ä¸­æ©ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">pii_entities_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">CREDIT_CARD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">EMAIL_ADDRESS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><br></span></code></pre></div></div>
<p>è¿™åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¾ˆæœ‰ç”¨ï¼š</p>
<ul>
<li>æ‚¨å¸Œæœ›åœ¨ç”Ÿäº§è¯·æ±‚ä¸­å…è®¸ PII</li>
<li>ä½†éœ€è¦éµå®ˆæ—¥å¿—è®°å½•æ³•è§„</li>
<li>é›†æˆ Langfuseã€Datadog ç­‰</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬äº”éƒ¨åˆ†ç›‘æ§ä¸è¿½è¸ª">ç¬¬äº”éƒ¨åˆ†ï¼šç›‘æ§ä¸è¿½è¸ª<a href="#ç¬¬äº”éƒ¨åˆ†ç›‘æ§ä¸è¿½è¸ª" class="hash-link" aria-label="ç¬¬äº”éƒ¨åˆ†ï¼šç›‘æ§ä¸è¿½è¸ªçš„ç›´æ¥é“¾æ¥" title="ç¬¬äº”éƒ¨åˆ†ï¼šç›‘æ§ä¸è¿½è¸ªçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="åœ¨-litellm-ui-ä¸­æŸ¥çœ‹é˜²æŠ¤æ æ‰§è¡Œæƒ…å†µ">åœ¨ LiteLLM UI ä¸­æŸ¥çœ‹é˜²æŠ¤æ æ‰§è¡Œæƒ…å†µ<a href="#åœ¨-litellm-ui-ä¸­æŸ¥çœ‹é˜²æŠ¤æ æ‰§è¡Œæƒ…å†µ" class="hash-link" aria-label="åœ¨ LiteLLM UI ä¸­æŸ¥çœ‹é˜²æŠ¤æ æ‰§è¡Œæƒ…å†µçš„ç›´æ¥é“¾æ¥" title="åœ¨ LiteLLM UI ä¸­æŸ¥çœ‹é˜²æŠ¤æ æ‰§è¡Œæƒ…å†µçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ LiteLLM Admin UIï¼Œæ‚¨å¯ä»¥åœ¨æ—¥å¿—é¡µé¢ä¸­çœ‹åˆ°è¯¦ç»†çš„é˜²æŠ¤æ è·Ÿè¸ªä¿¡æ¯ï¼š</p>
<ol>
<li>å¯¼èˆªåˆ° <strong>æ—¥å¿—</strong> é¡µé¢</li>
<li>å•å‡»ä»»ä½•ä½¿ç”¨äº†é˜²æŠ¤æ çš„è¯·æ±‚</li>
<li>æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼š<!-- -->
<ul>
<li>å“ªäº›å®ä½“è¢«æ£€æµ‹åˆ°</li>
<li>æ¯ä¸ªæ£€æµ‹çš„ç½®ä¿¡åº¦åˆ†æ•°</li>
<li>é˜²æŠ¤æ æ‰§è¡Œæ—¶é•¿</li>
<li>åŸå§‹å†…å®¹ä¸æ©ç å†…å®¹</li>
</ul>
</li>
</ol>
<div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAALCAYAAABGbhwYAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA/UlEQVR4nGWQW0sDUQyE9///HN/10QepBS91qbpVRBRs69Zu95yTyWWk25UiDYTJw5cJkwrAhardkLx259TNp+4+KidmPjOzs0rN2uBQo/wrH3VRqeq663qWnE1It6eZ++W5s6mdb43uKVNtKgDtbpdYikQEGTkxUMjnmlx+Do5uthjAImCfcqSSmdQpmw1jUdPG0+5+AEXAnEv0SOzhxPye7Ls9dQRF9qAMYQrJ/uOVfH8Zo/gxDKDtplNmeDDv6A9T0uw0NVS/f7aJW6Pj9ipsfhdGhinC7LDh7k0lQAsdvhAwo9gwnzqKyCMgrZstAawAWanqX3+paqeqk18Hh6m12w+GAwAAAABJRU5ErkJggg==&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="640" height="722"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/presidio_4.3eee635.640.png" srcset="/assets/ideal-img/presidio_4.3eee635.640.png 640w,/assets/ideal-img/presidio_4.5c945e0.1174.png 1174w" width="640" height="722"></noscript></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸-langfuse-çš„é›†æˆ">ä¸ Langfuse çš„é›†æˆ<a href="#ä¸-langfuse-çš„é›†æˆ" class="hash-link" aria-label="ä¸ Langfuse çš„é›†æˆçš„ç›´æ¥é“¾æ¥" title="ä¸ Langfuse çš„é›†æˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>å¦‚æœå°†æ—¥å¿—è®°å½•åˆ° Langfuseï¼Œé˜²æŠ¤æ ä¿¡æ¯ä¼šè‡ªåŠ¨åŒ…å«åœ¨å†…ï¼š</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">litellm_settings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">success_callback</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;langfuse&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">environment_variables</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">LANGFUSE_PUBLIC_KEY</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your-public-key&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">LANGFUSE_SECRET_KEY</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your-secret-key&quot;</span><br></span></code></pre></div></div>
<div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAICAYAAADA+m62AAAACXBIWXMAABYlAAAWJQFJUiTwAAABF0lEQVR4nD3MTVOCQByAcVgZdleBeNFddlkEAXF0MofCrvXp60PoraagS92F/Td26PC7PfMYkdy+J8X9V1K1fVk1vaof+0V627P80Cfr9lOtjz+ibF6NUGyHed7AjmXwnG1guz6C7RdgTQVgLx1tNwVrJs+GLNtLfXjSq+pBO3ynm4Br4UlteZnG3nIgNxlQPz8ZiMbDhHIwMQeXrSDf7EEVNYQyhUimYyQVBHFyNiaUD4hwMGwGfpxDtm9B1TsQRQlxvhoXSkEo5F94QYRrEzPtzjPtLaSeBVw7odCzMB6ceQJOJE//RxMzwH4BrrgDGlSASHw1mkQAouJsIMzfEGY9wryzprKzvWU3oaJDhF99IMK/EeUvv7olYbkfQETGAAAAAElFTkSuQmCC&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="640" height="515"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/presidio_5.76e701d.640.png" srcset="/assets/ideal-img/presidio_5.76e701d.640.png 640w,/assets/ideal-img/presidio_5.f526db4.1531.png 1531w" width="640" height="515"></noscript></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="è‡ªå®šä¹‰è®¿é—®é˜²æŠ¤æ å…ƒæ•°æ®">è‡ªå®šä¹‰è®¿é—®é˜²æŠ¤æ å…ƒæ•°æ®<a href="#è‡ªå®šä¹‰è®¿é—®é˜²æŠ¤æ å…ƒæ•°æ®" class="hash-link" aria-label="è‡ªå®šä¹‰è®¿é—®é˜²æŠ¤æ å…ƒæ•°æ®çš„ç›´æ¥é“¾æ¥" title="è‡ªå®šä¹‰è®¿é—®é˜²æŠ¤æ å…ƒæ•°æ®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>æ‚¨å¯ä»¥é€šè¿‡è‡ªå®šä¹‰å›è°ƒç¨‹åºè®¿é—®é˜²æŠ¤æ å…ƒæ•°æ®ï¼š</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> litellm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">custom_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">kwargs</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">**</span><span class="token plain">callback_kwargs</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># è®¿é—®é˜²æŠ¤æ å…ƒæ•°æ®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> kwargs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;metadata&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    guardrail_results </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;guardrails&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;æ©ç å®ä½“: </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">guardrail_results</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">litellm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">callbacks </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">custom_callback</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬å…­éƒ¨åˆ†ç”Ÿäº§æœ€ä½³å®è·µ">ç¬¬å…­éƒ¨åˆ†ï¼šç”Ÿäº§æœ€ä½³å®è·µ<a href="#ç¬¬å…­éƒ¨åˆ†ç”Ÿäº§æœ€ä½³å®è·µ" class="hash-link" aria-label="ç¬¬å…­éƒ¨åˆ†ï¼šç”Ÿäº§æœ€ä½³å®è·µçš„ç›´æ¥é“¾æ¥" title="ç¬¬å…­éƒ¨åˆ†ï¼šç”Ÿäº§æœ€ä½³å®è·µçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-æ€§èƒ½ä¼˜åŒ–">1. æ€§èƒ½ä¼˜åŒ–<a href="#1-æ€§èƒ½ä¼˜åŒ–" class="hash-link" aria-label="1. æ€§èƒ½ä¼˜åŒ–çš„ç›´æ¥é“¾æ¥" title="1. æ€§èƒ½ä¼˜åŒ–çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>ä½¿ç”¨å¹¶è¡Œæ‰§è¡Œè¿›è¡Œé¢„è°ƒç”¨é˜²æŠ¤æ ï¼š</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">guardrails</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">guardrail_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;presidio-guard&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">litellm_params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">guardrail</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> presidio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;during_call&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># å¹¶è¡Œäº LLM è°ƒç”¨è¿è¡Œ</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-æ ¹æ®ç”¨ä¾‹é…ç½®å®ä½“ç±»å‹">2. æ ¹æ®ç”¨ä¾‹é…ç½®å®ä½“ç±»å‹<a href="#2-æ ¹æ®ç”¨ä¾‹é…ç½®å®ä½“ç±»å‹" class="hash-link" aria-label="2. æ ¹æ®ç”¨ä¾‹é…ç½®å®ä½“ç±»å‹çš„ç›´æ¥é“¾æ¥" title="2. æ ¹æ®ç”¨ä¾‹é…ç½®å®ä½“ç±»å‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>åŒ»ç–—åº”ç”¨ï¼š</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">pii_entities_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">PERSON</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">MEDICAL_LICENSE</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;BLOCK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">US_SSN</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;BLOCK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">PHONE_NUMBER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">EMAIL_ADDRESS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">DATE_TIME</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># å¯èƒ½åŒ…å«é¢„çº¦æ—¥æœŸ</span><br></span></code></pre></div></div>
<p><strong>é‡‘èåº”ç”¨ï¼š</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">pii_entities_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">CREDIT_CARD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;BLOCK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">US_BANK_NUMBER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;BLOCK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">US_SSN</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;BLOCK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">PHONE_NUMBER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">EMAIL_ADDRESS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">PERSON</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><br></span></code></pre></div></div>
<p><strong>å®¢æˆ·æœåŠ¡åº”ç”¨ï¼š</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">pii_entities_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">EMAIL_ADDRESS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">PHONE_NUMBER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">PERSON</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">CREDIT_CARD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;BLOCK&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># åº”è¯¥æ°¸è¿œä¸å…±äº«</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-é«˜å¯ç”¨æ€§è®¾ç½®">3. é«˜å¯ç”¨æ€§è®¾ç½®<a href="#3-é«˜å¯ç”¨æ€§è®¾ç½®" class="hash-link" aria-label="3. é«˜å¯ç”¨æ€§è®¾ç½®çš„ç›´æ¥é“¾æ¥" title="3. é«˜å¯ç”¨æ€§è®¾ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>å¯¹äºç”Ÿäº§éƒ¨ç½²ï¼Œè¿è¡Œå¤šä¸ª Presidio å®ä¾‹ï¼š</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3.8&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">presidio-analyzer-1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mcr.microsoft.com/presidio</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">analyzer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5002:5002&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">presidio-anonymizer-1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mcr.microsoft.com/presidio</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">anonymizer</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;5001:5001&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><br></span></code></pre></div></div>
<p>ä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨ï¼ˆnginxã€HAProxyï¼‰æ¥åˆ†å‘è¯·æ±‚ã€‚</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-è‡ªå®šä¹‰å®ä½“è¯†åˆ«">4. è‡ªå®šä¹‰å®ä½“è¯†åˆ«<a href="#4-è‡ªå®šä¹‰å®ä½“è¯†åˆ«" class="hash-link" aria-label="4. è‡ªå®šä¹‰å®ä½“è¯†åˆ«çš„ç›´æ¥é“¾æ¥" title="4. è‡ªå®šä¹‰å®ä½“è¯†åˆ«çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>å¯¹äºç‰¹å®šé¢†åŸŸçš„ PIIï¼ˆä¾‹å¦‚å†…éƒ¨å‘˜å·¥ IDï¼‰ï¼Œåˆ›å»ºè‡ªå®šä¹‰è¯†åˆ«å™¨ï¼š</p>
<p>åˆ›å»º <code>custom_recognizers.json</code>ï¼š</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;supported_language&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;en&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;supported_entity&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;EMPLOYEE_ID&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;patterns&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;employee_id_pattern&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;regex&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;EMP-[0-9]{6}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;score&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.9</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<p>é…ç½®åœ¨ LiteLLM ä¸­ï¼š</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">guardrails</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">guardrail_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;presidio-custom&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">litellm_params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">guardrail</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> presidio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;pre_call&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">presidio_ad_hoc_recognizers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./custom_recognizers.json&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">pii_entities_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">EMPLOYEE_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-æµ‹è¯•ç­–ç•¥">5. æµ‹è¯•ç­–ç•¥<a href="#5-æµ‹è¯•ç­–ç•¥" class="hash-link" aria-label="5. æµ‹è¯•ç­–ç•¥çš„ç›´æ¥é“¾æ¥" title="5. æµ‹è¯•ç­–ç•¥çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>ä¸ºæ‚¨çš„ PII æ©ç åˆ›å»ºæµ‹è¯•ç”¨ä¾‹ï¼š</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> pytest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> litellm </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> completion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">test_pii_masking_credit_card</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;æµ‹è¯•ä¿¡ç”¨å¡æ˜¯å¦æ­£ç¡®è¢«æ©ç &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> completion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        model</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;gpt-3.5-turbo&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        messages</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;role&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;user&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;content&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;My card is 4111-1111-1111-1111&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        api_base</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;http://localhost:4000&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadata</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;guardrails&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;presidio-pii-guard&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># éªŒè¯å¡å·æ˜¯å¦è¢«æ©ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;_hidden_params&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;metadata&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">assert</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;CREDIT_CARD&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;guardrails&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">test_pii_masking_allows_normal_text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot;æµ‹è¯•æ™®é€šæ–‡æœ¬é€šè¿‡&quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> completion</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        model</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;gpt-3.5-turbo&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        messages</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;role&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;user&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;content&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;What is the weather today?&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        api_base</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;http://localhost:4000&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metadata</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;guardrails&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;presidio-pii-guard&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">assert</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">choices</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">content </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬ä¸ƒéƒ¨åˆ†æ•…éšœæ’é™¤">ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæ•…éšœæ’é™¤<a href="#ç¬¬ä¸ƒéƒ¨åˆ†æ•…éšœæ’é™¤" class="hash-link" aria-label="ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæ•…éšœæ’é™¤çš„ç›´æ¥é“¾æ¥" title="ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæ•…éšœæ’é™¤çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="é—®é¢˜presidio-æœªæ£€æµ‹åˆ°-pii">é—®é¢˜ï¼šPresidio æœªæ£€æµ‹åˆ° PII<a href="#é—®é¢˜presidio-æœªæ£€æµ‹åˆ°-pii" class="hash-link" aria-label="é—®é¢˜ï¼šPresidio æœªæ£€æµ‹åˆ° PIIçš„ç›´æ¥é“¾æ¥" title="é—®é¢˜ï¼šPresidio æœªæ£€æµ‹åˆ° PIIçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>æ£€æŸ¥ 1: è¯­è¨€é…ç½®</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># éªŒè¯è¯­è¨€æ˜¯å¦è®¾ç½®æ­£ç¡®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST http://localhost:5002/analyze \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d &#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;text&quot;: &quot;Meine E-Mail ist test@example.de&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;language&quot;: &quot;de&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }&#x27;</span><br></span></code></pre></div></div>
<p><strong>æ£€æŸ¥ 2: å®ä½“ç±»å‹</strong></p>
<p>ç¡®ä¿æ‚¨æ­£åœ¨å¯»æ‰¾çš„å®ä½“ç±»å‹å·²åœ¨æ‚¨çš„é…ç½®ä¸­ï¼š</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">pii_entities_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">CREDIT_CARD</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MASK&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># æ·»åŠ æ‰€æœ‰éœ€è¦çš„å®ä½“ç±»å‹</span><br></span></code></pre></div></div>
<p><a href="https://microsoft.github.io/presidio/supported_entities/" target="_blank" rel="noopener noreferrer">æŸ¥çœ‹æ‰€æœ‰æ”¯æŒçš„å®ä½“ç±»å‹</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="é—®é¢˜presidio-å®¹å™¨æœªå¯åŠ¨">é—®é¢˜ï¼šPresidio å®¹å™¨æœªå¯åŠ¨<a href="#é—®é¢˜presidio-å®¹å™¨æœªå¯åŠ¨" class="hash-link" aria-label="é—®é¢˜ï¼šPresidio å®¹å™¨æœªå¯åŠ¨çš„ç›´æ¥é“¾æ¥" title="é—®é¢˜ï¼šPresidio å®¹å™¨æœªå¯åŠ¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>æ£€æŸ¥æ—¥å¿—ï¼š</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose logs presidio-analyzer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose logs presidio-anonymizer</span><br></span></code></pre></div></div>
<p><strong>å¸¸è§é—®é¢˜ï¼š</strong></p>
<ul>
<li>ç«¯å£å†²çªï¼ˆ5001, 5002 å·²å ç”¨ï¼‰</li>
<li>å†…å­˜åˆ†é…ä¸è¶³</li>
<li>Docker ç½‘ç»œé—®é¢˜</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="é—®é¢˜é«˜å»¶è¿Ÿ">é—®é¢˜ï¼šé«˜å»¶è¿Ÿ<a href="#é—®é¢˜é«˜å»¶è¿Ÿ" class="hash-link" aria-label="é—®é¢˜ï¼šé«˜å»¶è¿Ÿçš„ç›´æ¥é“¾æ¥" title="é—®é¢˜ï¼šé«˜å»¶è¿Ÿçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>è§£å†³æ–¹æ¡ˆ 1: ä½¿ç”¨ <code>during_call</code> æ¨¡å¼</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">mode</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;during_call&quot;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># å¹¶è¡Œè¿è¡Œ</span><br></span></code></pre></div></div>
<p><strong>è§£å†³æ–¹æ¡ˆ 2: æ‰©å±• Presidio å®¹å™¨</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><br></span></code></pre></div></div>
<p><strong>è§£å†³æ–¹æ¡ˆ 3: å¯ç”¨ç¼“å­˜</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">litellm_settings</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cache</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cache_params</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;redis&quot;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç»“è®º">ç»“è®º<a href="#ç»“è®º" class="hash-link" aria-label="ç»“è®ºçš„ç›´æ¥é“¾æ¥" title="ç»“è®ºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p>æ­å–œï¼ğŸ‰ æ‚¨å·²æˆåŠŸè®¾ç½®äº†ä½¿ç”¨ Presidio å’Œ LiteLLM çš„ PII æ©ç ã€‚æ‚¨ç°åœ¨æ‹¥æœ‰ï¼š</p>
<p>âœ… ç”Ÿäº§å°±ç»ªçš„ PII æ©ç è§£å†³æ–¹æ¡ˆ<br>
<!-- -->âœ… è‡ªåŠ¨æ£€æµ‹æ•æ„Ÿä¿¡æ¯çš„èƒ½åŠ›<br>
<!-- -->âœ… å¤šç§é…ç½®é€‰é¡¹ï¼ˆæ©ç  vs. é˜»æ­¢ï¼‰<br>
<!-- -->âœ… ç›‘æ§å’Œè¿½è¸ªèƒ½åŠ›<br>
<!-- -->âœ… å¤šè¯­è¨€æ”¯æŒ<br>
<!-- -->âœ… é€‚ç”¨äºç”Ÿäº§éƒ¨ç½²çš„æœ€ä½³å®è·µ</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‹ä¸€æ­¥">ä¸‹ä¸€æ­¥<a href="#ä¸‹ä¸€æ­¥" class="hash-link" aria-label="ä¸‹ä¸€æ­¥çš„ç›´æ¥é“¾æ¥" title="ä¸‹ä¸€æ­¥çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<ul>
<li><strong><a href="https://microsoft.github.io/presidio/supported_entities/" target="_blank" rel="noopener noreferrer">æŸ¥çœ‹æ‰€æœ‰æ”¯æŒçš„ PII å®ä½“ç±»å‹</a></strong></li>
<li><strong><a href="/docs/proxy/guardrails/quick_start">æ¢ç´¢å…¶ä»– LiteLLM é˜²æŠ¤æ </a></strong></li>
<li><strong><a href="/docs/proxy/guardrails/quick_start#combining-multiple-guardrails">è®¾ç½®å¤šä¸ªé˜²æŠ¤æ </a></strong></li>
<li><strong><a href="/docs/proxy/virtual_keys#guardrails">ä¸ºæ¯ä¸ªå¯†é’¥é…ç½®é˜²æŠ¤æ </a></strong></li>
<li><strong><a href="/docs/proxy/guardrails/custom_guardrail">å­¦ä¹ è‡ªå®šä¹‰é˜²æŠ¤æ </a></strong></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="é¢å¤–èµ„æº">é¢å¤–èµ„æº<a href="#é¢å¤–èµ„æº" class="hash-link" aria-label="é¢å¤–èµ„æºçš„ç›´æ¥é“¾æ¥" title="é¢å¤–èµ„æºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<ul>
<li><a href="https://microsoft.github.io/presidio/" target="_blank" rel="noopener noreferrer">Presidio æ–‡æ¡£</a></li>
<li><a href="/docs/proxy/guardrails/pii_masking_v2">LiteLLM é˜²æŠ¤æ å‚è€ƒ</a></li>
<li><a href="https://github.com/BerriAI/litellm" target="_blank" rel="noopener noreferrer">LiteLLM GitHub ä»“åº“</a></li>
<li><a href="https://github.com/BerriAI/litellm/issues" target="_blank" rel="noopener noreferrer">æŠ¥å‘Šé—®é¢˜</a></li>
</ul>
<hr>
<p><strong>éœ€è¦å¸®åŠ©ï¼Ÿ</strong> åŠ å…¥æˆ‘ä»¬çš„<a href="https://discord.com/invite/wuPM9dRgDw" target="_blank" rel="noopener noreferrer">Discord ç¤¾åŒº</a> æˆ–åœ¨ GitHub ä¸Šæ‰“å¼€é—®é¢˜ï¼</p>
<pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"></code></pre></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="æ–‡ä»¶é€‰é¡¹å¡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/tutorials/litellm_proxy_aporia"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">Aporia å®ˆé—¨å‘˜ä¸ LiteLLM ç½‘å…³ç»“åˆä½¿ç”¨</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tutorials/elasticsearch_logging"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">ä½¿ç”¨ LiteLLM å°†æ—¥å¿—å‘é€åˆ° Elasticsearch</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ä½ å°†å­¦åˆ°ä»€ä¹ˆ" class="table-of-contents__link toc-highlight">ä½ å°†å­¦åˆ°ä»€ä¹ˆ</a></li><li><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨-pii-æ©ç " class="table-of-contents__link toc-highlight">ä¸ºä»€ä¹ˆä½¿ç”¨ PII æ©ç ï¼Ÿ</a></li><li><a href="#å…ˆå†³æ¡ä»¶" class="table-of-contents__link toc-highlight">å…ˆå†³æ¡ä»¶</a></li><li><a href="#ç¬¬ä¸€éƒ¨åˆ†éƒ¨ç½²-presidio-å®¹å™¨" class="table-of-contents__link toc-highlight">ç¬¬ä¸€éƒ¨åˆ†ï¼šéƒ¨ç½² Presidio å®¹å™¨</a><ul><li><a href="#æ­¥éª¤-11-ä½¿ç”¨-docker-éƒ¨ç½²" class="table-of-contents__link toc-highlight">æ­¥éª¤ 1.1: ä½¿ç”¨ Docker éƒ¨ç½²</a></li><li><a href="#æ­¥éª¤-13-éªŒè¯-presidio-æ˜¯å¦è¿è¡Œ" class="table-of-contents__link toc-highlight">æ­¥éª¤ 1.3: éªŒè¯ Presidio æ˜¯å¦è¿è¡Œ</a></li></ul></li><li><a href="#ç¬¬äºŒéƒ¨åˆ†é…ç½®-litellm-gateway" class="table-of-contents__link toc-highlight">ç¬¬äºŒéƒ¨åˆ†ï¼šé…ç½® LiteLLM Gateway</a><ul><li><a href="#æ­¥éª¤-21-åˆ›å»º-litellm-é…ç½®" class="table-of-contents__link toc-highlight">æ­¥éª¤ 2.1: åˆ›å»º LiteLLM é…ç½®</a></li><li><a href="#æ­¥éª¤-22-è®¾ç½®ç¯å¢ƒå˜é‡" class="table-of-contents__link toc-highlight">æ­¥éª¤ 2.2: è®¾ç½®ç¯å¢ƒå˜é‡</a></li><li><a href="#æ­¥éª¤-23-å¯åŠ¨-litellm-gateway" class="table-of-contents__link toc-highlight">æ­¥éª¤ 2.3: å¯åŠ¨ LiteLLM Gateway</a></li></ul></li><li><a href="#ç¬¬ä¸‰éƒ¨åˆ†æµ‹è¯•-pii-æ©ç " class="table-of-contents__link toc-highlight">ç¬¬ä¸‰éƒ¨åˆ†ï¼šæµ‹è¯• PII æ©ç </a><ul><li><a href="#æµ‹è¯•-1-åŸºæœ¬-pii-æ£€æµ‹" class="table-of-contents__link toc-highlight">æµ‹è¯• 1: åŸºæœ¬ PII æ£€æµ‹</a></li><li><a href="#æµ‹è¯•-2-åŒ»ç–—ä¿¡æ¯phi" class="table-of-contents__link toc-highlight">æµ‹è¯• 2: åŒ»ç–—ä¿¡æ¯ï¼ˆPHIï¼‰</a></li><li><a href="#æµ‹è¯•-3-æ²¡æœ‰-piiæ­£å¸¸è¯·æ±‚" class="table-of-contents__link toc-highlight">æµ‹è¯• 3: æ²¡æœ‰ PIIï¼ˆæ­£å¸¸è¯·æ±‚ï¼‰</a></li></ul></li><li><a href="#ç¬¬å››éƒ¨åˆ†é«˜çº§é…ç½®" class="table-of-contents__link toc-highlight">ç¬¬å››éƒ¨åˆ†ï¼šé«˜çº§é…ç½®</a><ul><li><a href="#é˜»æ­¢æ•æ„Ÿå®ä½“" class="table-of-contents__link toc-highlight">é˜»æ­¢æ•æ„Ÿå®ä½“</a></li><li><a href="#è¾“å‡ºè§£æè§£æ©" class="table-of-contents__link toc-highlight">è¾“å‡ºè§£æï¼ˆè§£æ©ï¼‰</a></li><li><a href="#å¤šè¯­è¨€æ”¯æŒ" class="table-of-contents__link toc-highlight">å¤šè¯­è¨€æ”¯æŒ</a></li><li><a href="#æ—¥å¿—è®°å½•æ¨¡å¼" class="table-of-contents__link toc-highlight">æ—¥å¿—è®°å½•æ¨¡å¼</a></li></ul></li><li><a href="#ç¬¬äº”éƒ¨åˆ†ç›‘æ§ä¸è¿½è¸ª" class="table-of-contents__link toc-highlight">ç¬¬äº”éƒ¨åˆ†ï¼šç›‘æ§ä¸è¿½è¸ª</a><ul><li><a href="#åœ¨-litellm-ui-ä¸­æŸ¥çœ‹é˜²æŠ¤æ æ‰§è¡Œæƒ…å†µ" class="table-of-contents__link toc-highlight">åœ¨ LiteLLM UI ä¸­æŸ¥çœ‹é˜²æŠ¤æ æ‰§è¡Œæƒ…å†µ</a></li><li><a href="#ä¸-langfuse-çš„é›†æˆ" class="table-of-contents__link toc-highlight">ä¸ Langfuse çš„é›†æˆ</a></li><li><a href="#è‡ªå®šä¹‰è®¿é—®é˜²æŠ¤æ å…ƒæ•°æ®" class="table-of-contents__link toc-highlight">è‡ªå®šä¹‰è®¿é—®é˜²æŠ¤æ å…ƒæ•°æ®</a></li></ul></li><li><a href="#ç¬¬å…­éƒ¨åˆ†ç”Ÿäº§æœ€ä½³å®è·µ" class="table-of-contents__link toc-highlight">ç¬¬å…­éƒ¨åˆ†ï¼šç”Ÿäº§æœ€ä½³å®è·µ</a><ul><li><a href="#1-æ€§èƒ½ä¼˜åŒ–" class="table-of-contents__link toc-highlight">1. æ€§èƒ½ä¼˜åŒ–</a></li><li><a href="#2-æ ¹æ®ç”¨ä¾‹é…ç½®å®ä½“ç±»å‹" class="table-of-contents__link toc-highlight">2. æ ¹æ®ç”¨ä¾‹é…ç½®å®ä½“ç±»å‹</a></li><li><a href="#3-é«˜å¯ç”¨æ€§è®¾ç½®" class="table-of-contents__link toc-highlight">3. é«˜å¯ç”¨æ€§è®¾ç½®</a></li><li><a href="#4-è‡ªå®šä¹‰å®ä½“è¯†åˆ«" class="table-of-contents__link toc-highlight">4. è‡ªå®šä¹‰å®ä½“è¯†åˆ«</a></li><li><a href="#5-æµ‹è¯•ç­–ç•¥" class="table-of-contents__link toc-highlight">5. æµ‹è¯•ç­–ç•¥</a></li></ul></li><li><a href="#ç¬¬ä¸ƒéƒ¨åˆ†æ•…éšœæ’é™¤" class="table-of-contents__link toc-highlight">ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæ•…éšœæ’é™¤</a><ul><li><a href="#é—®é¢˜presidio-æœªæ£€æµ‹åˆ°-pii" class="table-of-contents__link toc-highlight">é—®é¢˜ï¼šPresidio æœªæ£€æµ‹åˆ° PII</a></li><li><a href="#é—®é¢˜presidio-å®¹å™¨æœªå¯åŠ¨" class="table-of-contents__link toc-highlight">é—®é¢˜ï¼šPresidio å®¹å™¨æœªå¯åŠ¨</a></li><li><a href="#é—®é¢˜é«˜å»¶è¿Ÿ" class="table-of-contents__link toc-highlight">é—®é¢˜ï¼šé«˜å»¶è¿Ÿ</a></li></ul></li><li><a href="#ç»“è®º" class="table-of-contents__link toc-highlight">ç»“è®º</a></li><li><a href="#ä¸‹ä¸€æ­¥" class="table-of-contents__link toc-highlight">ä¸‹ä¸€æ­¥</a></li><li><a href="#é¢å¤–èµ„æº" class="table-of-contents__link toc-highlight">é¢å¤–èµ„æº</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.litellm.ai/docs/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Getting Started</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/wuPM9dRgDw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/LiteLLM" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/BerriAI/litellm/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2026 liteLLM</div></div></div></footer><div id="inkeep-shadowradix-_R_p_" style="display:contents"></div><span></span></div>
</body>
</html>